<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>千问点奶茶时弹出的 UI 是怎么实现的，是生成式 UI 吗</title>
      <link href="/qwen-milk-tea-ui/"/>
      <url>/qwen-milk-tea-ui/</url>
      
        <content type="html"><![CDATA[<p>前段时间千问奶茶免单很火，可以直接在 chat 界面输入“千问，帮我点杯奶茶”，后续就像我们自己操作一样，一步一步完成下单。</p><p>我们知道， AI chat 现在比较普遍的数据交互是 markdown，markdown 是渲染不出这种交互式UI 的，必须借助 HTML+CSS+JS 的能力才能做到。那么千问是怎么实现的呢？是交互过程中生成的 UI，前端做渲染吗？我感觉这个选项可以首先排除，具体原因下面会做分析。</p><h2 id="一、方案概览"><a href="#一、方案概览" class="headerlink" title="一、方案概览"></a>一、方案概览</h2><p>目前实现这种效果的常见方案主要有以下几种：</p><ol><li>硬编码规则，根据服务端返回的特定格式的数据结构，映射到封装好的固定 UI。</li><li>让 AI 生成 html ，缺点是效果不稳定，需要持续调 prompt，这也是为什么我一开始觉得千问用的应该不是这个方案的原因。</li><li>定制一些卡片模板，告诉模型 input schema ，模型按数据结果填进来，缺点是模版还需要人力开发。</li><li>google&#x2F;a2ui 这类方案，让 AI Agent 直接驱动或生成用户界面，实现“对话即操作”“自然语言即界面”，与第二点的差异在于，前面 AI 输出的是代码，而这个方案生成的是schema，由引擎去解析，而不是直接渲染。</li></ol><h2 id="二、实现简介"><a href="#二、实现简介" class="headerlink" title="二、实现简介"></a>二、实现简介</h2><p>首先应该有个输出定制的过程，输出格式可能是这样</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 硬编码规则</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;标题&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;summary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;总结&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bullets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;要点1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;要点2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;要点3&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="comment">// AI 生成 HTML</span></span><br><span class="line"><span class="string">&quot;&lt;section&gt;&lt;h3&gt;标题&lt;/h3&gt;&lt;p&gt;内容&lt;/p&gt;&lt;/section&gt;&quot;</span></span><br><span class="line"><span class="comment">// 定制卡片模板</span></span><br><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;metric&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;成本&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;低&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;描述&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;step&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;步骤&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;A&quot;</span><span class="punctuation">,</span> <span class="string">&quot;B&quot;</span><span class="punctuation">,</span> <span class="string">&quot;C&quot;</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="comment">// google/a2ui 类方案</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;container&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;variant&quot;</span><span class="punctuation">:</span> <span class="string">&quot;title&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A2UI 风格标题&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;这里是可组合 UI schema 示例&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;list&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;项1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;项2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;项3&quot;</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>然后每一种方案的交互模式不一样的，可能是这样：</p><ul><li><strong>硬编码规则</strong>：自然语言 → 模型映射固定字段 → 按结构化内容渲染 UI</li><li><strong>AI 生成 HTML</strong>：自然语言 → 模型直接生成 HTML 字符串 → 渲染页面</li><li><strong>模块化卡片模板</strong>：自然语言 → 映射为预定义模板 → 渲染模块卡片</li><li><strong>A2UI（组合式 Schema）</strong>：自然语言 → Agent 生成 UI Schema → 引擎解析Schema，动态组件组合 → 渲染 UI</li></ul><p>当然上面只是简单的流程，具体实现这里就不赘述了</p><h2 id="三、方案对比"><a href="#三、方案对比" class="headerlink" title="三、方案对比"></a>三、方案对比</h2><p>下面我通过一个实验 demo 来对比一下这几个方案，对比维度如下：</p><ul><li>首次可用率（一次返回即可渲染）</li><li>回退率（需要重试&#x2F;修复）</li><li>可控性（是否偏离预期结构）</li><li>开发成本（前端模板&#x2F;解释器工作量）</li><li>迭代成本（改需求时改 prompt 还是改代码）</li></ul><p>实验场长下面这样，我会在四种模式下各跑一次剧本生成流程，最终导出实验报告。</p><p><img src="https://canace22.github.io/picx-images-hosting/20260228/image.86u6wal5h1.webp" alt="实验场景截图"></p><p><strong>压测包含的场景</strong></p><ul><li>正常输入</li><li>missing-fields（结构缺失）</li><li>wrong-types（类型错误）</li><li>html-unsafe（HTML 注入噪声）</li><li>schema-noise（Schema 噪声）</li></ul><p>下面是生成的报告</p><p><img src="https://canace22.github.io/picx-images-hosting/20260228/image.4xv2zmxye4.webp" alt="压测结果总览图"></p><p><img src="https://canace22.github.io/picx-images-hosting/20260228/image.8z72e128jr.webp" alt="关键指标对比图"></p><p>报告基本跟我的预期一致，不过数据准确性还得靠指标，我的指标计算也不一定对，仅供参考。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web 前端开发为什么要用框架</title>
      <link href="/why-frontend-needs-framework/"/>
      <url>/why-frontend-needs-framework/</url>
      
        <content type="html"><![CDATA[<p>当状态规模和依赖关系规模都很小的时候，手写是完全没问题，但是在中大型项目中，在缺乏系统化架构约束的情况下，中大型项目极易失控，维护成本也会急剧上升，此时可以有以下选择</p><ul><li><p>使用 MVC 架构</p></li><li><p>使用 MVVM 思想</p></li><li><p>自己写轻量级响应系统</p></li><li><p>使用 Web Components</p></li><li><p>使用 jQuery + 模块化</p></li><li><p>使用状态机架构</p></li><li><p>使用框架</p></li></ul><p>从以上选项中，目前很多大厂基本都选择使用框架（自研框架或者开源框架），总结原因可能有以下几点，当然上面的方案中有些也能解决其中的一些问题，这里暂不做过多的分析。</p><h3 id="一、人脑无法维护依赖关系"><a href="#一、人脑无法维护依赖关系" class="headerlink" title="一、人脑无法维护依赖关系"></a>一、人脑无法维护依赖关系</h3><p>假设一个页面有：</p><ul><li>20 个状态</li><li>50 个 UI 区域</li><li>30 个交互行为</li></ul><p>问题来了：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">某个状态改变时：</span><br><span class="line">哪些 UI 需要更新？</span><br><span class="line">更新顺序是什么？</span><br><span class="line">会不会影响其他状态？</span><br></pre></td></tr></table></figure><p>手写时必须：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">updateA</span>()</span><br><span class="line"><span class="title function_">updateB</span>()</span><br><span class="line"><span class="title function_">updateC</span>()</span><br></pre></td></tr></table></figure><p>一旦漏了一个，UI 会不一致。</p><p>框架可以通过结构化，维护复杂的依赖关系，我们只需要改数据，不需要关注依赖关系。</p><h3 id="二、副作用失控"><a href="#二、副作用失控" class="headerlink" title="二、副作用失控"></a>二、副作用失控</h3><p>复杂页面会出现：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">A 改变 B</span><br><span class="line">B 改变 C</span><br><span class="line">C 又触发 A</span><br></pre></td></tr></table></figure><p>形成循环更新，更新代码时需要：</p><ul><li>小心顺序</li><li>手动加锁</li><li>加条件判断</li></ul><p>框架可以有效控制副作用。</p><h3 id="三、DOM-操作成本高"><a href="#三、DOM-操作成本高" class="headerlink" title="三、DOM 操作成本高"></a>三、DOM 操作成本高</h3><p>浏览器渲染流程：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">JS → DOM → Reflow → Repaint</span><br></pre></td></tr></table></figure><p>频繁 DOM 操作会导致：</p><ul><li>卡顿</li><li>掉帧</li><li>抖动</li></ul><p>框架通过抽象层和调度机制控制 DOM 更新粒度，可以避免频繁更新 DOM。</p><h3 id="四、状态一致性问题"><a href="#四、状态一致性问题" class="headerlink" title="四、状态一致性问题"></a>四、状态一致性问题</h3><p>例如购物车：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">商品数量</span><br><span class="line">总价</span><br><span class="line">优惠</span><br><span class="line">库存</span><br><span class="line">按钮禁用状态</span><br></pre></td></tr></table></figure><p>代码必须这样写：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">updateCount</span>()</span><br><span class="line"><span class="title function_">updateTotal</span>()</span><br><span class="line"><span class="title function_">updateButton</span>()</span><br></pre></td></tr></table></figure><p>而使用框架，我们可能只需要一句话，比如这样</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> total = <span class="title function_">computed</span>(...)</span><br></pre></td></tr></table></figure><p>总价可以使用计算属性算出来，不用到处写，降低了状态混乱问题的出现频率。</p><h3 id="五、可维护性和团队协作"><a href="#五、可维护性和团队协作" class="headerlink" title="五、可维护性和团队协作"></a>五、可维护性和团队协作</h3><p>当项目达到：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">50+ 页面</span><br><span class="line">10+ 开发者</span><br></pre></td></tr></table></figure><p>如果没有框架：</p><ul><li>每个人写法不同</li><li>状态管理混乱</li><li>DOM 操作方式不同</li><li>代码不可预测</li></ul><p>框架可以提供：</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">统一模式</span><br><span class="line">组件规范</span><br><span class="line">生命周期规则</span><br><span class="line">状态流向规则</span><br></pre></td></tr></table></figure><p>解决工程规范问题。</p><h3 id="六、真正核心：抽象能力"><a href="#六、真正核心：抽象能力" class="headerlink" title="六、真正核心：抽象能力"></a>六、真正核心：抽象能力</h3><p>框架本质是：</p><blockquote><p>把”变化的东西”抽象成规则。</p></blockquote><p>比如 Vue 抽象出：</p><ul><li>响应式</li><li>组件</li><li>生命周期</li><li>调度</li><li>模板编译</li></ul><p>这些都是：</p><blockquote><p>对”变化”的抽象</p></blockquote><p>框架让业务代码变成声明式，而把命令式复杂度封装起来，可以有效降低开发门槛。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决 Cursor Debugger 模式在 Electron 项目中无法使用问题</title>
      <link href="/cursor-debugger/"/>
      <url>/cursor-debugger/</url>
      
        <content type="html"><![CDATA[<p>项目是 electron 写的，使用 Cursor 调试模式遇到了日志无法上报问题，报错如下</p><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Refused</span> to connect to &#x27;h customslashMenu.tsx:<span class="number">53</span>ttp://<span class="number">127.0.0.1:7242</span>/ingest/<span class="number">459</span>a74c4-d46f-<span class="number">4699</span>-<span class="number">6894</span>-d4f3106d294c&#x27; because it violates the document&#x27;sContent security Policy</span><br></pre></td></tr></table></figure><p>原因是： renderer 进程的 Content-Security-Policy 禁止连接 <a href="http://127.0.0.1:7242/">http://127.0.0.1:7242</a></p><p>解决方法很简单，设置为允许连接就好了,在 index.html 中加一行说明</p><figure class="highlight csp"><table><tr><td class="code"><pre><span class="line">&lt;!-- <span class="keyword">connect-src</span> 含 http://127.0.0.1:7242 以便 Debug 模式向本地日志服务发送 fetch --&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;<span class="keyword">default-src</span> <span class="string">&#x27;self&#x27;</span> <span class="string">&#x27;unsafe-inline&#x27;</span> <span class="string">&#x27;unsafe-eval&#x27;</span> data: blob: file:; <span class="keyword">script-src</span> <span class="string">&#x27;self&#x27;</span> <span class="string">&#x27;unsafe-inline&#x27;</span> <span class="string">&#x27;unsafe-eval&#x27;</span> file:; <span class="keyword">style-src</span> <span class="string">&#x27;self&#x27;</span> <span class="string">&#x27;unsafe-inline&#x27;</span> file:; <span class="keyword">img-src</span> <span class="string">&#x27;self&#x27;</span> data: blob: file:; <span class="keyword">font-src</span> <span class="string">&#x27;self&#x27;</span> data: blob: file:; <span class="keyword">connect-src</span> <span class="string">&#x27;self&#x27;</span> data: blob: file: http://127.0.0.1:7242; <span class="keyword">worker-src</span> <span class="string">&#x27;self&#x27;</span> blob: file:;&quot; /&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 AI 优化界面交互</title>
      <link href="/ai-optimize-ui/"/>
      <url>/ai-optimize-ui/</url>
      
        <content type="html"><![CDATA[<p>最近在跟小伙伴们探索如何写一个好剧本，我们作为非专业人士，对于好的剧本可能缺乏一定的认知，我们就在想是不是可以让 AI 告诉我们什么是好剧本，但这是一个比较主观的东西，一千个读者就有一千个哈姆雷特。</p><p>那有什么比较客观的测量方法吗？像我大学修的教育学和管理学，我们教育学领域就有教学测量学这么一个东西，包含各种模型量表，去测评教案教学方式是否达标，管理学和经济学领域也都有相应的模型和工具去测评。那么剧本应该也是有的，我们想到是不是可以利用剧评去给剧本打分，分值高的我们就认为他是一个好剧本，就像我们要去看一部电影前，可能回去看豆瓣评分，这是一个比较大众化的评分，表达了大多数人的观感。</p><p>评论一个好剧本可以用剧评去给剧本打分，那么 UI 界面是不是也可以用这套测量呢？查了一下，UI&#x2F;UX 领域有一些评估模型，比如SUS (系统可用性量表)、PUEU (感知有用性与易用性) 以及 HEART 模型（产品健康度模型）等，我们可以让 AI 根据这些模型对我们设计做优化，比如这样</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">[file]</span><br><span class="line">根据SUS (系统可用性量表)、PUEU (感知有用性与易用性) 以及 HEART 模型（产品健康度模型）优化UI/UX</span><br></pre></td></tr></table></figure><p>下面是我做的一个实验，我有一个现成的小游戏，他长这样</p><p><img src="https://canace22.github.io/picx-images-hosting/image.1lcbivqfr6.webp" alt="原始界面"></p><p>利用上面的提示词，让 chapgpt 对游戏界面和交互做一些优化，AI 给出了一些建议：</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">下面是<span class="strong">**基于 SUS、PUEU 与 HEART 模型的 UI/UX 改进点精炼总结**</span>，适合直接放进<span class="strong">**产品文档 / 设计评审 / 迭代清单**</span>中。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="section">## 一、SUS（系统可用性）改进点</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**目标：更好理解、更少困惑、更强掌控感**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> <span class="strong">**阻塞状态可解释**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   *</span> 被阻挡车辆提供原因提示（如：前方同向车辆未离开）</span><br><span class="line"><span class="bullet">   *</span> 避免“点了没反应”的负面体验</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> <span class="strong">**失败前风险预警**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   *</span> 在即将造成死局前给予非阻断提示</span><br><span class="line"><span class="bullet">   *</span> 提升用户对系统反馈的信任感</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> <span class="strong">**操作结果更可预期**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   *</span> 强化“点击 → 后果”的即时反馈（动画 / 文案）</span><br><span class="line"><span class="bullet">   *</span> 减少试错式学习成本</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="section">## 二、PUEU（感知有用性 &amp; 易用性）改进点</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**目标：让用户觉得“我在进步，而不是在乱点”**</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 感知有用性（PU）</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">4.</span> <span class="strong">**策略反馈语言**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   *</span> 通关 / 失败时说明“为什么这样做有效 / 无效”</span><br><span class="line"><span class="bullet">   *</span> 强化认知成长感，而不仅是结果成败</span><br><span class="line"></span><br><span class="line"><span class="bullet">5.</span> <span class="strong">**显性但温和的学习提示**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   *</span> 在关键机制首次出现时给予一句解释</span><br><span class="line"><span class="bullet">   *</span> 不使用强制教程，避免打断节奏</span><br><span class="line"></span><br><span class="line"><span class="section">### 感知易用性（PEOU）</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">6.</span> <span class="strong">**降低隐性规则理解成本**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   *</span> 用提示替代纯试错</span><br><span class="line"><span class="bullet">   *</span> 保持操作简单但规则透明</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="section">## 三、HEART 模型改进点（产品健康度）</span></span><br><span class="line"></span><br><span class="line"><span class="section">### ❤️ Happiness（情绪体验）</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">7.</span> <span class="strong">**成功行为的情绪奖励**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   *</span> 满载离开、关键操作增加治愈反馈</span><br><span class="line"><span class="bullet">   *</span> 放大“我做对了”的正向情绪峰值</span><br><span class="line"></span><br><span class="line"><span class="section">### 🔁 Engagement（参与感）</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">8.</span> <span class="strong">**关卡目标前置**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   *</span> 每关给出一句挑战重点提示</span><br><span class="line"><span class="bullet">   *</span> 帮助玩家建立策略预期</span><br><span class="line"></span><br><span class="line"><span class="section">### 🔄 Retention（留存）</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">9.</span> <span class="strong">**连败时的被理解感**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   *</span> 鼓励文案 + 隐性难度补偿</span><br><span class="line"><span class="bullet">   *</span> 让玩家感觉被支持而非被怜悯</span><br><span class="line"></span><br><span class="line"><span class="section">### ✅ Task Success（任务成功率）</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">10.</span> <span class="strong">**轻度成功引导**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> 高亮当前“安全/推荐”操作</span><br><span class="line"><span class="bullet">*</span> 不剥夺自由选择，避免变成提示型游戏</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="section">## 四、核心设计原则总结</span></span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; <span class="strong">**不是让系统更简单，而是让系统更会“解释自己”**</span></span></span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> 不减少复杂度</span><br><span class="line"><span class="bullet">*</span> 不强行教用户</span><br><span class="line"><span class="bullet">*</span> 只在关键时刻提供“刚刚好”的反馈</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这是用 AI 基于以上建议改进后的一些过程和效果</p><p><img src="https://canace22.github.io/picx-images-hosting/image.86u59xmhaz.webp" alt="过程"></p><p><img src="https://canace22.github.io/picx-images-hosting/image.4ubffkaf4r.webp" alt="优化后的界面"></p><p><img src="https://canace22.github.io/picx-images-hosting/image.8dxd5dex1y.webp" alt="提示优化"></p><p>从上面可以看到，加了一些提示和失败前的预警，还加了游戏说明，体验比我的第一版简单游戏交互好多了，这些让我一点点加，可能有时一下想不出来，交给 AI 先做一些设计的优化，再去调整，不仅可以补齐我对界面交互的短板，还可以对产品进行快速迭代优化，感觉对大家可能有点借鉴意义吧。</p>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AI使人膨胀</title>
      <link href="/ai-expansion/"/>
      <url>/ai-expansion/</url>
      
        <content type="html"><![CDATA[<p>最近一两个月，新项目提倡能用 AI 干活就用 AI，尽量不自己写，对我而言算是一种比较新的尝试吧。以前的做法可能都是我自己实现了一些，让AI基于已有的内容去构建新的，或者指挥AI改 bug,写工具等，给我打杂，现在这种模式则截然不同，AI 承担了更多的工作，而我需要为他的工作兜底，这就需要我对它有比较强的驾驭能力才行。不过这不是这篇文章想讲的，这篇文章想分享的是我这段时间遇到的一个困境：AI 虽然帮我干了更多的活，却没有让我更轻松，反而让我觉得身心更加疲惫，效率也没有自己手撸代码高。</p><p>通过反思和与 Gemini 对话，我总结出可能的原因有以下几点：</p><h2 id="一、认知错位"><a href="#一、认知错位" class="headerlink" title="一、认知错位"></a>一、认知错位</h2><p>用 AI 干活之后，我发现自己越发的膨胀，仿佛自己无所不能。我以前一直写前端，后端可能只会简单的 CRUD，做应用开发可能要摸索个一周才能上手，现在有了 AI，当天可能就可以上手干活，每每感慨，我太强了，怎么什么都能搞。很多同事也有这种感觉，还看了些文章和分享，说未来可以一个人干活，有了 AI，每个人都是超级个体。但是，我们真的是超级个体吗？在我看来，AI 与我们就像蝙蝠侠的装备，他可以让我们起飞，增强我们的能力，实现我们的英雄梦，但是他不是我们自身的超能力。有了这个基础认知，我们就会对自己有个清晰的判断，不至于因为膨胀，错估工时，随意承诺自己可以在很短的时间内完成大量任务。</p><h2 id="二、AI捧杀"><a href="#二、AI捧杀" class="headerlink" title="二、AI捧杀"></a>二、AI捧杀</h2><p>另外一个让我膨胀的原因，我觉得应该是“AI 的捧杀”，我有一个想法，通过输入几句提示词，他可以顺着我的思路不断地给出反馈，这会让我越发自信，沉浸在成就感中，不舍得离开电脑屏幕。但是他的反馈结果往往需要等待，会让我觉得有点急躁，想快点看到结果，只能干坐着等待，或者看看别的东西，看一半又回来看看任务完成没有，这种碎片化的工作模式，很耗费精力。</p><h2 id="三、失去了做事的节奏"><a href="#三、失去了做事的节奏" class="headerlink" title="三、失去了做事的节奏"></a>三、失去了做事的节奏</h2><p>之前的工作模式，我一般是早上规划好当天要做的事情，然后自己按节奏去实现，就等着下班了。现在这种 all in AI 的工作模式，我可能因为过于自信，觉得自己半天或者一天就能实现所有功能。但是结果往往是一个功能调试半天才能达到预期的效果，一天下来，临下班还有进行中的任务，因为感觉马上就能看到效果了，等一下吧，到任务完成，审核完代码，又已经过了饭点，加班加点了。</p><h2 id="四、决策疲劳，认知负荷超载"><a href="#四、决策疲劳，认知负荷超载" class="headerlink" title="四、决策疲劳，认知负荷超载"></a>四、决策疲劳，认知负荷超载</h2><p>在使用 AI 干活的时候，可能会同时跑几个 agent，并行执行几个任务，每个任务的角色不一样，频繁切换角色，审核成果，会产生决策疲劳，我想这也是为什么最近每天下班都这么累的原因吧。</p><h2 id="五、对创造力的剥离感会带来深层的精神疲惫，让人怀疑自己的价值"><a href="#五、对创造力的剥离感会带来深层的精神疲惫，让人怀疑自己的价值" class="headerlink" title="五、对创造力的剥离感会带来深层的精神疲惫，让人怀疑自己的价值"></a>五、对创造力的剥离感会带来深层的精神疲惫，让人怀疑自己的价值</h2><p>还有一个问题就是，每天用 AI 可能写了很多的代码，干了很多的活，总感觉好像自己什么也没做一样。我们上班不只是挣钱工具，还有一分价值实现情怀在里面，把自己当工具使当然会很累。用 AI 干活可能会弱化我们的劳动价值，精神上产生空虚感。</p><h2 id="六、结论"><a href="#六、结论" class="headerlink" title="六、结论"></a>六、结论</h2><p>那么怎么破局呢？我想了下以下几点应该可以让我与 AI 协作干活更轻松。</p><ul><li><p><strong>让AI干活前，先自己理清思路</strong>：比如修bug之前，自己先看一下大概可能是什么问题，写需求之前，自己先理一下要做成什么样子，有了这个步骤，我们会对AI 最终的交付结果先有个评判标准，不容易被带偏，也不会浪费太多精力去发散。</p></li><li><p><strong>每天留一段无AI时间，用于深度工作</strong>：可以是策划接下来的任务或者是学习更好使用 AI 的知识。AI 可以是我们的假肢，但是没有他，我们应该也能行走，预想一下哪天断电或者其他特殊情况下，我们用不了 AI 干活了，我们还能正常工作吗？</p></li><li><p><strong>AI交互任务批处理</strong>：集中一个时间段批处理需要AI完成的任务，让碎片化的工作保持连续性，可以减小脑力消耗。</p></li><li><p><strong>只采纳自己看得懂的内容</strong>：AI 每次写的内容可能都不一样，甚至会推倒原来的实现重来，我们是一个系统化的项目，不能这么干，效率太低不说，后期的调试和维护成本也很高，所以，我觉得应该只采纳 AI 生成的自己能看懂的内容，工欲善其事必先利其器，了解系统的实现，我们才能更好的指挥 AI 干活。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AI赋能存量项目——从函数助手到业务伙伴</title>
      <link href="/ai-coding-share/"/>
      <url>/ai-coding-share/</url>
      
        <content type="html"><![CDATA[<h2 id="一、从传统编程过渡到面向大模型编程"><a href="#一、从传统编程过渡到面向大模型编程" class="headerlink" title="一、从传统编程过渡到面向大模型编程"></a>一、从传统编程过渡到面向大模型编程</h2><h3 id="1-传统编程与面向大模型编程（LOP）的差异"><a href="#1-传统编程与面向大模型编程（LOP）的差异" class="headerlink" title="1. 传统编程与面向大模型编程（LOP）的差异"></a>1. 传统编程与面向大模型编程（LOP）的差异</h3><p>在探索如何让 AI 真正赋能我们的存量项目之前，我们需要先完成一次思维上的”升级”——从传统的编程模式，过渡到面向大模型（LLM）的编程模式。这不是简单的工具替换，而是一场编程范式的转换。下面是对两种模式简单对比：</p><ul><li><p><strong>传统编程模式</strong>中，我们是代码的”上帝”。每一个字符、每一行逻辑都由我们精确控制，我们给计算机下达指令，计算机去执行。我们的核心工作就是把想法直接转化为代码。</p></li><li><p><strong>面向大模型编程模式</strong>则完全不同。我们更像一个”项目经理”或”架构师”，而不是一个”码农”。我们不再是逐行编写代码，而是通过自然语言向 AI 描述我们的”意图（Intent）”。AI 是我们能力超强的”实习生”或”结对伙伴”，它负责将意图转化为具体的代码实现。</p></li></ul><h3 id="2-编辑器转换"><a href="#2-编辑器转换" class="headerlink" title="2. 编辑器转换"></a>2. 编辑器转换</h3><p>很多朋友可能遇到过这个问题：<strong>AI 编辑器与自己使用的编辑器差异很大</strong>，无从下手，比如有朋友可能用 WebStorm、eclipse或者 Visual Studio 的，这些编辑器可能有很多强大的工具在现代 AI 编辑器中还未迭代出来。</p><ul><li><p><strong>使用插件解决问题</strong>：我原本用的 VSCode，切换到 Cursor 属于是无痛切换。市面上的很多 AI IDE 我也下载了几个体验，基本都是类 VSCode 的。所以这里就大致理一下 VSCode 怎么用能更顺手，VSCode 本身的功能比较有限，得益于<strong>插件</strong>市场，极大的扩展了他的能力。所以要用好 VSCode，得<strong>先看看自己有哪些需求，然后找到符合自己要求的插件</strong>，比如我们可能已经习惯了用 WebStorm 的主题配色，突然换到 Cursor，配色等都不是我们熟悉的，可能会比较影响编码，还有就是用惯了 git 图形界面操作，在 Cursor 找半天，影响到代码提交等，这些都可以用插件解决。</p></li><li><p><strong>性能问题</strong>：有的朋友可能同时维护多个项目，每天都在不同的项目上救火，同时打开多个Cursor 窗口去运行不同的项目很麻烦，而且 CurSor 本身有性能问题，多开几个可能就卡死了。这里大家还是可以跟用其他IDE 一样，从项目根目录打开多个项目，比如我有一个 Work 目录专门用于存项目代码，里面有好几个项目，我有时候可能同时在处理两个项目的问题，就可以打开 Work 目录，用于使用 AI 进行协作，启动项目则是另外用 git bash 去跑命令，这样就达到了开一个 IDE 同时跑多个项目的目的，命令行中断不怎么吃性能，而且开了之后丢在那里不管就行，我们专注于 Coding。</p></li></ul><p>另外一个困扰大家的问题可能就是，Windows 下，Cursor 太卡了，甚至到了不可用的程度，这里可以如果项目中用 Java 的朋友，可以看看有没有装 Java 插件，据我的经验，有个 Java 插件会导致这个性能问题，可以卸载试试。</p><h2 id="二、你还只是在用-AI-写函数吗？（开始用-AI-写业务）"><a href="#二、你还只是在用-AI-写函数吗？（开始用-AI-写业务）" class="headerlink" title="二、你还只是在用 AI 写函数吗？（开始用 AI 写业务）"></a>二、你还只是在用 AI 写函数吗？（开始用 AI 写业务）</h2><h3 id="1-如何让-AI-认识我们的项目-project-rule"><a href="#1-如何让-AI-认识我们的项目-project-rule" class="headerlink" title="1. 如何让 AI 认识我们的项目(project rule)"></a>1. 如何让 AI 认识我们的项目(project rule)</h3><p>大模型是无状态并且有上下文限制的，每次调用大模型，他对我们的项目都是一无所知的，想让大模型理解我们的代码库，需要我们给他提供信息。AI IDE 或者 agent 也是一样的道理，每次打开一个会话我们都需要给他提供一份代码库的信息，才能让大模型更好的理解我们的代码，给出符合场景的预测。</p><h4 id="1-1-项目规则需要包含哪些内容呢"><a href="#1-1-项目规则需要包含哪些内容呢" class="headerlink" title="1.1 项目规则需要包含哪些内容呢"></a>1.1 项目规则需要包含哪些内容呢</h4><p>这里我们用经典的三W回答这个问题</p><ul><li><p><strong>是什么(What)</strong>：告诉大模型我们的项目是什么，基本信息应该包含：技术栈、项目架构等，有了这些信息，大模型可以对我们的项目有个大致了解，当我们跟他说要改什么模块时，他可以有路径可循，而不是瞎子摸象。</p></li><li><p><strong>为什么(Why)</strong>：告诉大模型我们的项目是做什么的，哪些模块负责哪些逻辑，比如说我们有一个项目管理系统，这个项目管理系统是以工作项为基础的，然后还有配套的工作项详情，工作项新建等大的复用率高的模块，这些信息可以提供给大模型，让他对我们的业务有一定的了解。</p></li><li><p><strong>怎么做(How)</strong>：约束大模型的行为，描述我们使用 Coding Agent 时需要做哪些工作，不需要他做哪些，比如我们可能不希望他去阅读一些配置文件或者修改 md 文件。</p></li></ul><p>此外，记住不要试图把各种奇怪的信息都塞到项目规则文件，并不是说信息越多越好，太多不相关信息会让大模型吐出的结果更差，Claude 经常会忽略给他的上下文信息，因为他内部加了一条规则，若是与当前任务相关性不大的上下文，就忽略，目的是为了提高模型输出内容的质量。</p><h4 id="1-2-如何写好项目规则"><a href="#1-2-如何写好项目规则" class="headerlink" title="1.2 如何写好项目规则"></a>1.2 如何写好项目规则</h4><p>下面列举一些如何写好项目规则的守则，大模型在不断进化，我们的使用场景也各种各样，这些守则并不一定各种场合一直适用，大家可以根据环境的变化或者自己的使用场景调整策略。</p><p><strong>宁缺毋滥</strong>：我们可能会想，既然大模型不懂我们的项目，我们就把整个项目文档都塞到项目规则里就好了，上面也提到了，信息并不是越多越好，下面是研究显示的一些内容，也许可以帮我们破除这种误解。</p><ul><li><p>前沿思考型大模型（Frontier thinking LLMs）能够处理的上下文边界是150-200条指令，更小的模型能处理的指令数甚至更少，非思考型大模型上下文边界小于思考型大模型</p></li><li><p>较小的模型性能下降得非常快、非常严重。具体来说，随着指令数量增加，较小模型的指令遵循能力呈现指数级衰退，而前沿思考型大模型则表现为线性衰退。因此，建议尽量不要使用较小模型执行多步骤任务或复杂的计划。</p></li><li><p>大模型对提示词中位于边缘位置的指令存在明显偏好：即最开头部分（Claude Code 的系统提示和 CLAUDE.md&#x2F;上下文规则文件），以及最末尾部分（最近的用户消息）</p></li><li><p>随着提示词总数增加，提示词遵循质量会均匀的下降。这意味着当我们试图给模型更多提示词时，它并不是简单地忽略最新的提示词，而是开始均匀地忽略所有提示词。</p></li></ul><p>对 Claude Code 框架的分析显示，其系统提示中已包含约50条内部指令。根据我们使用的模型不同，这已经占到智能体能够可靠遵循指令总数的三分之一左右——而且这还不包括后续的规则、插件、技能或用户消息。</p><p>通过上面的分析，我们可知，项目规则文件应尽可能少地包含指令——理想情况下，只保留那些对当前任务普遍适用的核心内容。</p><p><strong>项目规则文件的长度和适用性</strong>：大模型在上下文包含任务相关信息、工具等内容时，表现会比非相关信息上下的情况下更优。所以在写项目规则时，尽量写得适用性高一点，避免写过于具体的内容，可能会降低大模型输出的内容质量。项目规则的内容简洁，一般小于 300 行，尽量短一点能把信息描述清楚，效果会更好。</p><h4 id="1-3-规则渐进"><a href="#1-3-规则渐进" class="headerlink" title="1.3 规则渐进"></a>1.3 规则渐进</h4><p>要把我们的项目信息在一份文档里描述清楚很难，特别是还要限制上下文的情况下。我们可以分模块去写适用不同模块的规则，在特定模块下才使用该规则，比如使用 Cursor 我们可能会有一个项目规则文件夹，每个规则文件可以设置在什么情况下适用。但是记得不要把具体代码内容或者函数写进去，因为我们经常改动，很快就会过时，尽量描述一些确定性的内容。</p><h4 id="1-4-不要试图让大模型做代码风格相关的工作"><a href="#1-4-不要试图让大模型做代码风格相关的工作" class="headerlink" title="1.4 不要试图让大模型做代码风格相关的工作"></a>1.4 不要试图让大模型做代码风格相关的工作</h4><p>大模型消耗 token 目前来看还是很昂贵的，我们可以用格式化插件去做代码风格相关的工作，这样可以节省不少的成本，此外，大模型是有学习能力的，在编码过程中可以了解我们的代码风格，在输出时也会模仿我们的风格输出，所以没必要把代码风格相关的规则放到项目文档。</p><h4 id="1-5-不要使用自动生成项目规则或者是相关模板"><a href="#1-5-不要使用自动生成项目规则或者是相关模板" class="headerlink" title="1.5 不要使用自动生成项目规则或者是相关模板"></a>1.5 不要使用自动生成项目规则或者是相关模板</h4><p>项目规则作为顶层上下文，将影响到我们每次的 AI 交互，如果说项目规则质量不好的话，大模型输出的内容质量可能也会不好，影响到我们的编码体验。</p><h3 id="2-约束"><a href="#2-约束" class="headerlink" title="2. 约束"></a>2. 约束</h3><p><strong>约束 (Constraint)</strong>：这是与 AI 协作的精髓。不要给 AI 一个开放性的问题，而要给它一个带有一系列约束的”填空题”。</p><ul><li><p><strong>Agent 设置</strong>：在提问时明确角色，例如”你现在是一个资深的后端工程师，请使用 <code>NestJS</code>…”。</p></li><li><p><strong>Rule 设定</strong>：明确告知”不要使用 <code>any</code> 类型”、”必须进行错误处理”、”API 响应格式必须遵循 <code>&#123;code, data, message&#125;</code> 结构”等。</p></li></ul><h3 id="3-工作流-任务拆解"><a href="#3-工作流-任务拆解" class="headerlink" title="3. 工作流&#x2F;任务拆解"></a>3. 工作流&#x2F;任务拆解</h3><p><strong>工作流&#x2F;任务拆解 (Task Decomposition)</strong>：不要指望 AI 一步到位完成一个复杂的需求（比如”开发一个用户登录功能”）。我们需要像敏捷开发一样，将大任务拆解成小步骤，然后引导 AI 逐一完成。</p><ul><li><strong>步骤一</strong>：”请为用户登录功能设计数据库表结构，包含字段 a, b, c。”</li><li><strong>步骤二</strong>：”基于上面的表结构，使用 <code>TypeORM</code> 创建对应的 Entity 文件。”</li><li><strong>步骤三</strong>：”编写一个 <code>login</code> 的 Service 方法，实现登录逻辑，注意密码要加密比对。”</li><li><strong>步骤四</strong>：”为这个 <code>login</code> 方法编写单元测试。”</li></ul><p>通过这种方式，每一步的输出都是可控和可验证的，最终组合成一个高质量的功能。</p><h3 id="4-如何保证代码质量"><a href="#4-如何保证代码质量" class="headerlink" title="4. 如何保证代码质量"></a>4. 如何保证代码质量</h3><p>AI 对于自己自己不了解的东西经常会胡说八道，比如你跟他说制作单下要弹窗，他如果不了解你说的这个制作单是什么意思，可能会瞎改，或者大模型只局限于了解当前业务，不相关的没做兼容适配，可能会改出问题，这也是我们不敢用AI写的复杂业务代码的原因。所以，对于AI 洗的代码，至少要 check 三遍再采用。</p><ul><li><strong>人工审查</strong>：AI 是副驾驶（Copilot），你才是机长（Pilot）。你必须完全理解 AI 生成的每一行代码，并为它的最终质量负责。绝对不能盲目地”CV”（<code>Ctrl+C</code>, <code>Ctrl+V</code>）。</li><li><strong>Code Review</strong>：团队的 <code>Code Review</code> 流程变得更加关键。审查的重点可以从检查语法错误，转移到更高维度的架构设计、业务逻辑的合理性上。</li><li><strong>自动化测试</strong>：单元测试、集成测试是验证 AI 代码质量最可靠的手段。你甚至可以要求 AI “为我刚才生成的代码编写全面的单元测试”，让 AI 自己来辅助验证其工作的正确性。</li><li><strong>利用 AI 提升质量</strong>：反过来，我们也可以利用 AI 来提升已有代码的质量。例如，选中一段代码，让 AI “重构这段代码，使其更具可读性”、”为这段代码补充 <code>JSDoc</code> 注释”、”找出这段代码中潜在的性能问题”。</li></ul><h2 id="三、如何用-AI-提效（主要工具是-Cursor）"><a href="#三、如何用-AI-提效（主要工具是-Cursor）" class="headerlink" title="三、如何用 AI 提效（主要工具是 Cursor）"></a>三、如何用 AI 提效（主要工具是 Cursor）</h2><h3 id="1-模型差异"><a href="#1-模型差异" class="headerlink" title="1. 模型差异"></a>1. 模型差异</h3><p>我们知道大模型之间是有差异的，下面是与朋友交流的一些简单总结（为什么不说是全是我自己的经验，因为有些 plus 会员我没开过，有的土豪朋友全部有账号，都体验过，这里结合我的使用经验和朋友的使用经验做说明）：</p><ul><li>Claude 适合代码，中文支持一般，上下文是长但是你不主动说它永远不读文件。</li><li>Gemini 出原型和图很好，最近出的 Gemini Pro3，写代码也挺强了，输出内容更加有“人味”。</li><li>综合任务，GPT plus 比较能胜任，项目分类，读取各类文件，记忆，连锁思考，深度研究都挺在行。</li><li>Grok 编程还行，也比较有人味，可以做一些内容向、工具向的任务。</li></ul><p>以上仅对比一些我常用的国外大模型，国内模型我仅用于日常生活，没有试过用来写代码，这里就不做说明了。</p><h3 id="2-教学相长"><a href="#2-教学相长" class="headerlink" title="2. 教学相长"></a>2. 教学相长</h3><p>AI 编程的经验是宝贵的财富。当你发现一个特别好用的 Prompt 模板，或者一套针对某个特定场景的 Rule 时，一定要记录下来。</p><p><strong>建立个人 Prompt Snippets</strong>：将这些高效的指令和规则沉淀下来，形成自己的”弹药库”。下次遇到类似问题，可以直接调用。这个过程不仅是在”使用”AI，更是在**”训练”自己如何与 AI 高效协作**，构建自己新的认知体系。</p><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ul><li><a href="https://www.sanity.io/blog/first-attempt-will-be-95-garbage">First attempt will be 95% garbage: A staff engineer’s 6-week journey with Claude Code</a></li><li><a href="https://www.humanlayer.dev/blog/writing-a-good-claude-md">Writing a good CLAUDE.md</a></li><li><a href="https://github.com/humanlayer/12-factor-agents/tree/main">12-factor-agents</a></li><li><a href="https://mp.weixin.qq.com/s/RyBYqG04wR1Hq2CbfxU2eg">与Cursor结对编程四个月，我顿悟了！</a></li><li><a href="https://www.yuque.com/jujingyi-mzjzr/bg139y/gc7xcm7r9f5e4g5z?singleDoc#R9619">AIGC主导项目开发的最佳实践</a></li><li><a href="https://www.promptingguide.ai/zh">提示工程指南</a></li><li><a href="https://mp.weixin.qq.com/s/HaazAEMGqH1GBTmn9qI73g">AI for Coding：从 Vibe Coding 到规范驱动开发</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面向大模型编程(LOP)在游戏制作流程中的应用畅想</title>
      <link href="/ai-coding-game/"/>
      <url>/ai-coding-game/</url>
      
        <content type="html"><![CDATA[<p>最近面向大模型编程（LOP）很火，在 web 开发领域更是被用得炉火纯青，我们可以用它从任务拆解、开发、质检再到写 devops 脚本串行。但是在游戏制作中呢？是否也能用这一套？</p><p>工欲善其事，必先利其器，我们先来了解 LOP 是什么，有哪几种模式。LOP 即面向大模型编程，相较于传统编程（人写好逻辑，程序严格执行）模式，LOP 可以说是做了完全的颠覆，人只需要写Prompt + 少量代码，大模型动态生成逻辑，后者给我们的想象空间更加广阔。LOP 主要有以下几种使用姿势：</p><ul><li><strong>Direct Prompt-to-Code</strong>，单轮 Prompt → 完整可运行产物，无中间状态、无工具调用、无外部记忆，举例：用 Cursor “Cmd+K”、Claude Artifacts、Gemini Code Execution 一键生成完整项目。</li><li><strong>Autonomous Agent Programming</strong>，多轮自主工具调用（编辑文件、运行终端、读错误日志、自我迭代），具备长期记忆和工作区状态，Agent，举例：用 Cursor 让 AI 自己写代码、跑测试、修 bug</li><li><strong>Chain-of-Verification + Structured Reasoning for Code</strong>，在生成最终代码前，强制模型进行显式推理链（技术选型 → 文件结构 → 边缘case → 安全性），大幅降低幻觉，举例：Prompt 中加入 “<thinking>…</thinking>” 标签，或直接用 Claude 3.5 long-thinking</li><li><strong>Retrieval-Augmented Code Generation</strong>，检索向量数据库中的私有代码库&#x2F;文档&#x2F;组件作为 context，解决 &gt;100k token 的项目理解问题，举例：Cursor “@codebase”</li><li><strong>Skeleton-then-Fill</strong>，人为先写高层次结构或占位注释（skeleton），模型只负责填充细节，极大降低结构错误率，举例：先写文件树 + &#x2F;&#x2F; LOP: 这里需要一个带分页的表格组件 → 让 Claude 填满</li><li><strong>Self-Healing &#x2F; Iterative Refinement Loop</strong>，运行 → 捕获错误&#x2F;测试失败 → 把错误日志喂回模型 → 自动 patch → 循环直到全通过,举例：Cursor “Fix with AI”</li></ul><p>有了上面对 LOP 的了解，我们再来看看游戏的制作流程包含哪些环节：剧本，策划（游戏逻辑、玩法），场景制作&#x2F;美术&#x2F;音频等，游戏引擎，以上是一些大致的流程，那么大模型能做什么呢？可以写小说，可以一句话生成原型，可以生成图片，复刻声音等，我们不提倡AI去做游戏，但是是不是可以让他去迭代剧本，有好的想法让他快速生成游戏 demo 做验证诸如此类。</p><p>基于以上的脑洞，整理了以下几个可能的应用思路</p><h2 id="大模型驱动内容和玩法迭代"><a href="#大模型驱动内容和玩法迭代" class="headerlink" title="大模型驱动内容和玩法迭代"></a>大模型驱动内容和玩法迭代</h2><p>我们有想法，让 LLM 进行内容创作，由于大模型的输出具有随机性，所以每次创作的我们满意的内容，可以用结构化的文档进行沉淀，下一次再喂给大模型时，可以根据我们已有内容进行迭代，比如更新角色性别、武器、技能等。有了这些内容，可以快速产出原型，验证可玩性和逻辑问题，满意的话甚至可以开始规划场景、美术以及音效等。</p><p>另一个方向，沉淀的结构化文档，可以用特定的引擎解析生成游戏、可互动的有声视频或者做视频二创等。</p><h2 id="玩家共创"><a href="#玩家共创" class="headerlink" title="玩家共创"></a>玩家共创</h2><p>游戏不断迭代更新，有个很大原因是，我们要不断的更新玩法、内容，以让玩家保持新鲜感，现在很多游戏都有玩家共创，这里想的是，玩家共创环节，能不能加入与大模型的交互，通过用户与大模型的交互，迭代剧本，刷新角色属性，让玩法更多更新颖。</p><p>就酱，以上内容来源于今天开会总结，大致整理了以下思路。</p>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AI协作编程——如何写好项目规则</title>
      <link href="/writing-a-good-claude-md/"/>
      <url>/writing-a-good-claude-md/</url>
      
        <content type="html"><![CDATA[<p>原文名称是[Writing a good CLAUDE.md]，一位外国博主写的一篇关于如何写好CLAUDE.md的文章，我这里翻译为[如何写好项目规则]，因为这篇文章同样适用于Cursor等AI IDE的 project rules 编写。文章没有完全直译，而是按照我的理解做的本土化意译。</p><h2 id="一、大模型（LLMS）是无状态的"><a href="#一、大模型（LLMS）是无状态的" class="headerlink" title="一、大模型（LLMS）是无状态的"></a>一、大模型（LLMS）是无状态的</h2><p>大模型是无状态并且有上下文限制的，每次调用大模型，他对我们的项目都是一无所知的，想让大模型理解我们的代码库，需要我们给他提供信息。AI IDE 或者 agent 也是一样的道理，每次打开一个会话我们都需要给他提供一份代码库的信息，才能让大模型更好的理解我们的代码，给出符合场景的预测。</p><p>所以，在实践的时候，我们可以总结为以下三点：</p><ul><li>Coding Agent 在每次开启会话时，对我们的项目代码是一无所知的。</li><li>每次使用 Coding Agent 之前，我们都需要给他提供一份项目信息，这份项目信息需要包含项目的一些关键信息，比如技术栈，架构等。</li><li>规则文档比如 Claude.md 或者 Cursor 的 rules 可以很完美的帮我们解决这个问题。</li></ul><h2 id="二、项目规则需要包含哪些内容"><a href="#二、项目规则需要包含哪些内容" class="headerlink" title="二、项目规则需要包含哪些内容"></a>二、项目规则需要包含哪些内容</h2><p>这里我们用经典的三W回答这个问题</p><h3 id="1-是什么-What"><a href="#1-是什么-What" class="headerlink" title="1.是什么(What)"></a>1.是什么(What)</h3><p>告诉大模型我们的项目是什么，基本信息应该包含：技术栈、项目架构等，有了这些信息，大模型可以对我们的项目有个大致了解，当我们跟他说要改什么模块时，他可以有路径可循，而不是瞎子摸象。</p><h3 id="2-为什么-Why"><a href="#2-为什么-Why" class="headerlink" title="2.为什么(Why)"></a>2.为什么(Why)</h3><p>告诉大模型我们的项目是做什么的，哪些模块负责哪些逻辑，比如说我们有一个项目管理系统，这个项目管理系统是以工作项为基础的，然后还有配套的工作项详情，工作项新建等大的复用率高的模块，这些信息可以提供给大模型，让他对我们的业务有一定的了解。</p><h3 id="3-怎么做-How"><a href="#3-怎么做-How" class="headerlink" title="3.怎么做(How)"></a>3.怎么做(How)</h3><p>约束大模型的行为，描述我们使用 Coding Agent 时需要做哪些工作，不需要他做哪些，比如我们可能不希望他去阅读一些配置文件或者修改 md 文件。</p><p>此外，记住不要试图把各种奇怪的信息都塞到项目规则文件，并不是说信息越多越好，太多不相关信息会让大模型吐出的结果更差，Claude 经常会忽略给他的上下文信息，因为他内部加了一条规则，若是与当前任务相关性不大的上下文，就忽略，目的是为了提高模型输出内容的质量。</p><h2 id="三、如何写好项目规则"><a href="#三、如何写好项目规则" class="headerlink" title="三、如何写好项目规则"></a>三、如何写好项目规则</h2><p>下面列举一些如何写好项目规则的守则，大模型在不断进化，我们的使用场景也各种各样，这些守则并不一定各种场合一直适用，大家可以根据环境的变化或者自己的使用场景调整策略。</p><h3 id="1-宁缺毋滥"><a href="#1-宁缺毋滥" class="headerlink" title="1.宁缺毋滥"></a>1.宁缺毋滥</h3><p>我们可能会想，既然大模型不懂我们的项目，我们就把整个项目文档都塞到项目规则里就好了，上面也提到了，信息并不是越多越好，下面是研究显示的一些内容，也许可以帮我们破除这种误解。</p><ul><li><p>前沿思考型大模型（Frontier thinking LLMs）能够处理的上下文边界是150-200条指令，更小的模型能处理的指令数甚至更少，非思考型大模型上下文边界小于思考型大模型</p></li><li><p>较小的模型性能下降得非常快、非常严重。具体来说，随着指令数量增加，较小模型的指令遵循能力呈现指数级衰退，而前沿思考型大模型则表现为线性衰退。因此，建议尽量不要使用较小模型执行多步骤任务或复杂的计划。</p></li><li><p>大模型对提示词中位于边缘位置的指令存在明显偏好：即最开头部分（Claude Code 的系统提示和 CLAUDE.md&#x2F;上下文规则文件），以及最末尾部分（最近的用户消息）</p></li><li><p>随着提示词总数增加，提示词遵循质量会均匀的下降。这意味着当我们试图给模型更多提示词时，它并不是简单地忽略最新的提示词，而是开始均匀地忽略所有提示词。</p></li></ul><p>对 Claude Code 框架的分析显示，其系统提示中已包含约50条内部指令。根据我们使用的模型不同，这已经占到智能体能够可靠遵循指令总数的三分之一左右——而且这还不包括后续的规则、插件、技能或用户消息。</p><p>通过上面的分析，我们可知，项目规则文件应尽可能少地包含指令——理想情况下，只保留那些对当前任务普遍适用的核心内容。</p><h3 id="2-项目规则文件的长度和适用性"><a href="#2-项目规则文件的长度和适用性" class="headerlink" title="2.项目规则文件的长度和适用性"></a>2.项目规则文件的长度和适用性</h3><p>大模型在上下文包含任务相关信息、工具等内容时，表现会比非相关信息上下的情况下更优。所以在写项目规则时，尽量写得适用性高一点，避免写过于具体的内容，可能会降低大模型输出的内容质量。</p><p>项目规则的内容简洁，一般小于 300 行，尽量短一点能把信息描述清楚，效果会更好。</p><h3 id="3-规则渐进"><a href="#3-规则渐进" class="headerlink" title="3.规则渐进"></a>3.规则渐进</h3><p>要把我们的项目信息在一份文档里描述清楚很难，特别是还要限制上下文的情况下。我们可以分模块去写适用不同模块的规则，在特定模块下才使用该规则，比如使用 Cursor 我们可能会有一个项目规则文件夹，每个规则文件可以设置在什么情况下适用。但是记得不要把具体代码内容或者函数写进去，因为我们经常改动，很快就会过时，尽量描述一些确定性的内容。</p><h3 id="4-不要试图让大模型做代码风格相关的工作"><a href="#4-不要试图让大模型做代码风格相关的工作" class="headerlink" title="4.不要试图让大模型做代码风格相关的工作"></a>4.不要试图让大模型做代码风格相关的工作</h3><p>大模型消耗 token 目前来看还是很昂贵的，我们可以用格式化插件去做代码风格相关的工作，这样可以节省不少的成本，此外，大模型是有学习能力的，在编码过程中可以了解我们的代码风格，在输出时也会模仿我们的风格输出，所以没必要把代码风格相关的规则放到项目文档。</p><h3 id="5-不要使用自动生成项目规则或者是相关模板"><a href="#5-不要使用自动生成项目规则或者是相关模板" class="headerlink" title="5.不要使用自动生成项目规则或者是相关模板"></a>5.不要使用自动生成项目规则或者是相关模板</h3><p>项目规则作为顶层上下文，将影响到我们每次的 AI 交互，如果说项目规则质量不好的话，大模型输出的内容质量可能也会不好，影响到我们的编码体验。</p><p>参考文献：</p><p><a href="https://www.humanlayer.dev/blog/writing-a-good-claude-md">Writing a good CLAUDE.md</a></p>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AI协作编程——传统IDE快速切换到AI IDE</title>
      <link href="/ai-coding-ide/"/>
      <url>/ai-coding-ide/</url>
      
        <content type="html"><![CDATA[<p>很多朋友可能遇到过这个问题：<strong>AI 编辑器与自己使用的编辑器差异很大</strong>，无从下手，比如有朋友可能用 WebStorm、eclipse或者 Visual Studio 的，这些编辑器可能有很多强大的工具在现代 AI 编辑器中还未迭代出来。</p><h3 id="1-如何尽快上手"><a href="#1-如何尽快上手" class="headerlink" title="1. 如何尽快上手"></a>1. 如何尽快上手</h3><p>我原本用的 VSCode，切换到 Cursor 属于是无痛切换。市面上的很多 AI IDE 我也下载了几个体验，基本都是类似 VSCode 的。所以这里就大致理一下 VSCode 怎么用能更顺手，VSCode 本身的功能比较有限，得益于<strong>插件</strong>市场，极大的扩展了他的能力。所以要用好 VSCode，得<strong>先看看自己有哪些需求，然后找到符合自己要求的插件</strong>，比如我们可能已经习惯了用 WebStorm 的主题配色，突然换到 Cursor，配色等都不是我们熟悉的，可能会比较影响编码，还有就是用惯了 git 图形界面操作，在 Cursor 找半天，影响到代码提交等，这些都可以用插件解决。</p><p>有的朋友可能同时维护多个项目，每天都在不同的项目上救火，同时打开多个Cursor 窗口去运行不同的项目很麻烦，而且 CurSor 本身有性能问题，多开几个可能就卡死了。这里大家还是可以跟用其他IDE 一样，从项目根目录打开多个项目，比如我有一个 Work 目录专门用于存项目代码，里面有好几个项目，我有时候可能同时在处理两个项目的问题，就可以打开 Work 目录，用于使用 AI 进行协作，启动项目则是另外用 git bash 去跑命令，这样就达到了开一个 IDE 同时跑多个项目的目的，命令行中断不怎么吃性能，而且开了之后丢在那里不管就行，我们专注于 Coding。</p><h3 id="2-传统编辑器和-AI-编辑器的本质区别"><a href="#2-传统编辑器和-AI-编辑器的本质区别" class="headerlink" title="2. 传统编辑器和 AI 编辑器的本质区别"></a>2. 传统编辑器和 AI 编辑器的本质区别</h3><p>上面讲的外观、操作习惯的不同是二者表面上差异，即使不做任何改变，我们基本都能凑合使用，让我们很难适应的可能是改几行代码，又给我们输出一些提示，代码上蹿下跳的，有点不习惯，而且这种代码补全功能，代码重构能力，我们即使不用 AI IDE ，用编辑器插件也可以，所以为啥要用 AI IDE，他到底强大在哪里呢？</p><p>AI IDE 与传统 IDE 有着本质的区别</p><ul><li>使用传统 IDE 时，编码步骤可能是这样的：重构代码 -&gt; 脑子里构思逻辑 -&gt; 搜索相关文件 -&gt; 一个个打开 -&gt; 逐行修改</li><li>使用 AI IDE 时，则需要这样：描述意图（“把所有用到了 UserID 的地方改成 UserUUID”） -&gt; AI 检索上下文 -&gt; AI 生成 Diff -&gt; 确认</li></ul><p>可见 AI 协作编程需要颠覆我们原来的编程工作流，这种思想上的转变是很必要的，思想是行动的先驱，我们只有转换了基本思维，才能更好的用好 AI IDE 这种工具。</p>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为什么AI大模型需要“显卡”/TPU、GPU与AMD之间有什么区别</title>
      <link href="/why-graphics-card/"/>
      <url>/why-graphics-card/</url>
      
        <content type="html"><![CDATA[<p>作为韭菜，每天都会看看财经博主的新闻，刷到刘备今天的日报里面提到谷歌TPU出来可能会重创英伟达，还提到了AMD，之前做过一段时间云游戏，开会也是总听团队小伙伴提到显卡之类的，发现这是自己的知识盲区，跟deepseek对话了几轮，做个总结。</p><h2 id="TPU-GPU-AMD-CUDA"><a href="#TPU-GPU-AMD-CUDA" class="headerlink" title="TPU&#x2F;GPU&#x2F;AMD&#x2F;CUDA"></a>TPU&#x2F;GPU&#x2F;AMD&#x2F;CUDA</h2><h3 id="CPU-Central-Processing-Unit"><a href="#CPU-Central-Processing-Unit" class="headerlink" title="CPU (Central Processing Unit)"></a>CPU (Central Processing Unit)</h3><p>CPU 我们很熟悉，经常听到“大脑 CPU 在燃烧之类”的调侃，比较平民化的词，它是多才多艺的领导，善于按顺序处理多个复杂任务。</p><h3 id="GPU-Graphics-Processing-Unit"><a href="#GPU-Graphics-Processing-Unit" class="headerlink" title="GPU (Graphics Processing Unit)"></a>GPU (Graphics Processing Unit)</h3><p>GPU 在前端开发领域，特别是做图形方面的，会比较熟悉，我们在画图为了性能都会选择 GPU 渲染。看名称可以知道一开始专注做图形处理，现在延生到了更广阔的其他领域，比如训练 AI 模型。在大任务或者重复任务上能力卓越，会把大任务或重复任务拆分成更多小任务，并行处理。</p><h3 id="TPU-Tensor-Processing-Unit"><a href="#TPU-Tensor-Processing-Unit" class="headerlink" title="TPU (Tensor Processing Unit)"></a>TPU (Tensor Processing Unit)</h3><p>看缩写不知道是干嘛的，看了英文单词，看到 Tensor 觉得很熟悉，想到了 Tensorflow，就是前些年机器学习领域比较火的那个框架，TPU 就是为机器学习而生的卡，在处理线性代数计算方面技艺高超，主要通过谷歌云服务使用，不能直接购买和部署。</p><h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p>一家公司，英伟达的竞争对手，卖 GPU 显卡，但是他的生态没有英伟达的好，英伟达的 CUDA 可以让开发者很容易用编程语言调用 GPU 进行并行计算，AMD 用的 ROCm，起步晚，兼容性、易用性、以及社区支持在很长一段时间里都不如CUDA，调试和使用难度较高，但是性价比较高。</p><h2 id="为什么大模型离不开-GPU-们"><a href="#为什么大模型离不开-GPU-们" class="headerlink" title="为什么大模型离不开 GPU 们"></a>为什么大模型离不开 GPU 们</h2><p>打个比方，训练一个如GPT-4这样拥有万亿参数的大模型：</p><ul><li>CPU：按顺序执行，万亿个任务，可能需要数百年。</li><li>GPU：并行处理任务，可能只需要几周或几个月。</li></ul><p>结合上面的了解和这个例子，我们可以知道 GPU 的优势：</p><ul><li>并行架构：数千核心能同时处理海量计算任务。</li><li>高内存带宽：GPU显存的带宽是CPU内存的10-20倍，能更快地“喂饱”饥渴的计算核心。</li><li>成熟的生态：经过多年发展，AI框架（如PyTorch, TensorFlow）已深度优化，能充分发挥GPU的性能。</li></ul>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何做AI角色分工：我的应用心得</title>
      <link href="/ai-worker/"/>
      <url>/ai-worker/</url>
      
        <content type="html"><![CDATA[<p>深度使用 AI 一段时间后，我积累了一些实用的心得。</p><p>一开始把 AI 当搜索引擎，打开一个对话搜索一个问题或者在一个对话框里输入问题不断地搜索。这样有什么问题呢？上下文可能会比较混乱，一会搜索这个，一会搜索那个，AI 比较难深入推理出我想干嘛，给的答案可能也没这么专业。</p><p><img src="https://canace22.github.io/picx-images-hosting/20251123/stage-1.70art1yp93.webp" alt="stage-1"></p><p>再进一步，在一个对话框里只问同样的问题，这样 AI 给的答案精确专业一点了，一开始回答还比较宽泛，可能输出的格式也不是我想要的，得很多轮对话下来才是我们真正想要的答案。</p><p><img src="https://canace22.github.io/picx-images-hosting/20251123/stage-2.4g4xgeyqmw.webp" alt="stage-2"></p><p>经过一段时间的实践，我积累了一个使用框架，那就是给 AI 分配不同的角色，比如这样：</p><p><img src="https://canace22.github.io/picx-images-hosting/20251123/stage-3.5fl0tl1hsq.webp" alt="stage-3"></p><p><img src="https://canace22.github.io/picx-images-hosting/20251123/ai-role.9rju13zohw.webp" alt="ai-role"></p><ul><li><strong>定制提示词</strong>：根据个人以往的使用习惯和每个角色的职责，写一套不同的提示词，提示词包括：要求、输出类型以及示例</li><li><strong>隔离上下文</strong>：每个角色上下文差异化，也就是给每个角色配置不同的上下文</li></ul><p>要实现这套框架，AI工具需要支持对话框分组或者说归类，比如配置好一个提示词或者上下文，在这个组下面的所有对话都应用这一套逻辑回答。目前用了一圈下来，发现 grok 和元宝这方面做得挺好的，不过同样的提示词，感觉 grok 生成的内容更合我意，所以下面实践我也用 grok 举例。</p><h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><p>在我的工作中，经常涉及这几个场景</p><ul><li>看英文文档，遇到不懂的单词需要翻译</li><li>每周都要写写周报汇报工作进度</li><li>开发中有时候可能需要写一些 demo 或者做一些新技术探索，调研</li></ul><h3 id="AI角色——多语言翻译助手"><a href="#AI角色——多语言翻译助手" class="headerlink" title="AI角色——多语言翻译助手"></a>AI角色——多语言翻译助手</h3><p>查单词我之前一直使用的谷歌翻译或者海词，手机就用金山词霸，每次都要单独打开页面，零散的搜索不好汇总，而且输出的内容可能也不是我想要的。</p><p>我在 grok 创建了一个 project，这个 project 专门用于多语言翻译。</p><p><img src="https://canace22.github.io/picx-images-hosting/20251123/translate.232az7v42t.webp" alt="translate"></p><p>然后定义了一段 Promt</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">You are a professional and efficient multilingual translation assistant, capable of accurately translating text from any language into the target language. Your task is to follow these rules based on the input text&#x27;s language:</span><br><span class="line"><span class="bullet">1.</span> If the input text is in a non-Chinese language (e.g., English, French, Spanish, etc.), translate it into Simplified Chinese.</span><br><span class="line"><span class="bullet">2.</span> If the input text is in Chinese (Simplified or Traditional), translate it into English.</span><br><span class="line"><span class="bullet">3.</span> Ensure the translation preserves the tone, style, and meaning of the original text, making it natural and culturally appropriate for the target language.</span><br><span class="line"><span class="bullet">4.</span> For ambiguous or polysemous expressions, provide a brief explanation or context to ensure translation accuracy.</span><br><span class="line"><span class="bullet">5.</span> Only perform translation,git example sentence and explanation, without executing other actions (e.g., writing code, generating charts, etc.).</span><br><span class="line"><span class="bullet">6.</span> Output format:</span><br><span class="line"><span class="bullet">   -</span> <span class="strong">**Original**</span>: Display the input text as provided.</span><br><span class="line"><span class="bullet">   -</span> <span class="strong">**Translation**</span>: Provide the translated text.</span><br><span class="line"><span class="bullet">   -</span> <span class="strong">**Explanation**</span> (if applicable): Explain any cultural context, terminology choices, or handling of ambiguous terms.</span><br><span class="line"><span class="bullet">   -</span> <span class="strong">**Example sentence**</span>: Provide the using example of the text</span><br><span class="line"></span><br><span class="line"><span class="strong">**Example 1**</span>:</span><br><span class="line">Input: The early bird catches the worm.</span><br><span class="line">Output:</span><br><span class="line"><span class="bullet">-</span> Original: The early bird catches the worm.</span><br><span class="line"><span class="bullet">-</span> Translation: 早起的鸟儿有虫吃。</span><br><span class="line"><span class="bullet">-</span> Explanation: This is an English proverb meaning &quot;those who act early seize opportunities.&quot; The Chinese translation uses a similar proverbial expression, maintaining the metaphorical tone and conciseness.</span><br><span class="line"></span><br><span class="line"><span class="strong">**Example 2**</span>:</span><br><span class="line">Input: 这家餐厅的招牌菜是宫保鸡丁，味道非常正宗。</span><br><span class="line">Output:</span><br><span class="line"><span class="bullet">-</span> Original: 这家餐厅的招牌菜是宫保鸡丁，味道非常正宗。</span><br><span class="line"><span class="bullet">-</span> Translation: The signature dish of this restaurant is Kung Pao Chicken, and the taste is very authentic.</span><br><span class="line"><span class="bullet">-</span> Explanation: Kung Pao Chicken is a proper noun for a Chinese dish, transliterated directly and retained as a dish name, following common English conventions for Chinese cuisine. &quot;Authentic&quot; conveys the sense of being true to the original flavor.</span><br><span class="line"></span><br><span class="line"><span class="strong">**Example 3**</span></span><br><span class="line">Input: Develop a Python script that generates a random English sentence from a list of nouns, verbs, and adjectives. Include English comments explaining how the sentence is constructed. </span><br><span class="line">Output: </span><br><span class="line"><span class="bullet">-</span> Original: Develop a Python script that generates a random English sentence from a list of nouns, verbs, and adjectives. Include English comments explaining how the sentence is constructed. </span><br><span class="line"><span class="bullet">-</span> Translation: 开发一个Python脚本，从名词、动词和形容词列表中生成一个随机的英文句子。包含英文注释，解释句子的构建方式。 </span><br><span class="line"><span class="bullet">-</span> Explanation: The input is in English, translated into Chinese. The term “Develop” is retained as “开发” for its technical accuracy, preserving the original command tone and bold formatting. The terms for nouns, verbs, and adjectives are directly translated to ensure technical precision.</span><br><span class="line"></span><br><span class="line">Now, please translate the following input text according to the above rules:</span><br><span class="line">&#123;User-provided text&#125;</span><br></pre></td></tr></table></figure><p>这样，每次只要我在这个 project 下面输入一段中文，他就会自动翻译成英文了，如果还想让他输出其他相关内容，可以再改改提示词，下面是角色定定义后的效果</p><p><img src="https://canace22.github.io/picx-images-hosting/20251123/translate-reply.2obyliseyx.webp" alt="translate-reply"></p><h3 id="AI角色——汇报助手"><a href="#AI角色——汇报助手" class="headerlink" title="AI角色——汇报助手"></a>AI角色——汇报助手</h3><p>我是一个比较不喜欢写政治任务内容的人，像汇报、绩效这些，每次要写我都觉得有点烦，但是又不得不写，我的周报一般都是从git log里整合起来的内容，所以，汇报助手干活前，我会先从内网把本周的提交记录提取出来：<code>git log --author=&quot;xxx&quot; --since=&quot;2025/9/8&quot; --until=&quot;2025/9/12&quot; &gt; log.txt</code></p><p>然后才是汇报助手去干活，所以这个提示词的输入源是我的内容，Promt 可以这样写：</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">You are a senior web front-end developer. Write a weekly development report based on the git log I provide.</span><br><span class="line"><span class="bullet">-</span> The title should cover the Monday to Friday of the previous week, formatted like &quot;8月11日-8月15日&quot;</span><br><span class="line"><span class="bullet">-</span> The content should include completed tasks.  </span><br><span class="line"><span class="bullet">-</span> Input: start/开始/action/执行</span><br><span class="line"><span class="bullet">-</span> Output example:</span><br><span class="line"><span class="section">## 8 月 25 日-8 月 29 日</span></span><br><span class="line"><span class="bullet">1.</span> 【设置】看板设置，支持更新和移除泳道状态，优化UI（100%）</span><br></pre></td></tr></table></figure><p>效果是这样的：</p><p><img src="https://canace22.github.io/picx-images-hosting/20251123/report-replay.3yevrukmdk.webp" alt="report-replay"></p><p>增删一下，基本是跟我写的没差，我已经用几个季度了，省了不少功夫。</p><p>这里实践就举这两个例子，抛砖引玉一下，说明这种角色分工的方案可以让我们工作更轻松。</p><h2 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h2><p>另外，为了保险，我也把同样的内容在元宝弄了一份，但是表现有点差强人意，不知道是不是我的姿势有问题，还是不同大模型对提示词的解析不一样。然后我也尝试在Cursor中实践这一套，为不同的开发流程定义角色，但是发现目前的Cursor还不做不到类似的功能，后面我看看在 Cursor 中落地了再分享下吧。</p>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>工作与事业</title>
      <link href="/work-for/"/>
      <url>/work-for/</url>
      
        <content type="html"><![CDATA[<p>最近有点迷茫，不知道自己想要的是什么，自己在追求些什么。我们常常听到一句话：为事业燃烧，但是什么是事业呢？是当前就职的工作吗？</p><p>如果说把工作当成事业，可能我们大多数人会很失望，因为工作不是我们想做什么或者有什么追求就能够去实现的，我们只是上层或者说公司手中的工具，按照别人画好的蓝图去做事罢了，很多时候，多余的想法可能会被认为是在阻碍项目的发展。说的不好听点，就是一颗螺丝钉，而且越是大公司，分工越细，会更有这种感觉。</p><p>所以，我觉得要想不那么迷茫或者痛苦，可能得把工作与事业区分开来，工作是我们谋生的工具，如果幸运一点，还能帮助我们实现一点人生价值。而事业应该是我们所热爱的，很想做的事情，他不一定跟我们的工作相关，为了这份热爱，我们可以花费很多精力，不为了报酬，只为了发展。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 职业发展 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浏览器渲染原理概述</title>
      <link href="/how-to-optimize-animation/"/>
      <url>/how-to-optimize-animation/</url>
      
        <content type="html"><![CDATA[<p>无论使用框架还是原生 JS，浏览器都遵循自己的规则。理解这些规则，我们可以知道卡顿与流畅的交互之间的区别。</p><h2 id="一、为什么要在16-67ms内渲染完一帧"><a href="#一、为什么要在16-67ms内渲染完一帧" class="headerlink" title="一、为什么要在16.67ms内渲染完一帧"></a>一、为什么要在16.67ms内渲染完一帧</h2><p>JavaScript 在单线程上运行，必须将控制权让给浏览器才能绘制内容。</p><p>一帧内发生的事情如下：</p><ol start="0"><li>脚本执行(Scripting) - JavaScript 引擎运行代码。</li><li>样式计算(Style Calculation ) - 浏览器确定适用的 CSS 规则，并计算最终样式，解析层叠、继承和计算值。</li><li>重排（Reflow&#x2F;Layout） - 计算几何属性，如宽度、高度及位置。重排可能波及父子元素，导致高昂成本。</li><li>重绘（Repaint&#x2F;Paint） - 为背景、边框、文本和阴影绘制像素。渐变或阴影等复杂视觉效果会拖慢此步骤。</li><li>合成(Composite) - 将已绘制的图层合成并绘制到屏幕上。此步骤远比重排或重绘廉价。</li></ol><p>帧预算计算：一秒有 1000 毫秒，除以 60 帧&#x2F;秒得 1000&#x2F;60 &#x3D; 16.67 毫秒&#x2F;帧。若上述步骤执行时间超过此值，浏览器将丢帧，导致“卡顿”（jank）。</p><h2 id="二、如何提高渲染性能"><a href="#二、如何提高渲染性能" class="headerlink" title="二、如何提高渲染性能"></a>二、如何提高渲染性能</h2><p>现代浏览器可以轻松处理简单页面，但是一旦添加动画或众多元素，性能限制就会显现。了解哪些属性会触发哪些渲染步骤，可以帮助我们提高渲染性能。</p><ul><li>脚本执行时间（Scripting time ），JavaScript 占用主线程的时间。这个阶段耗时长的话，会延迟重排和重绘。</li><li>更改 top、left、width、height 或 margin 等属性会触发重排。</li><li>更改仅影响绘制的属性，如 background-color、box-shadow、border-radius，会触发重绘但不会触发重排。</li><li>transform 或 opacity 通常由 GPU 处理，可以跳过重排和重绘。</li></ul><h2 id="三、FPS-监控"><a href="#三、FPS-监控" class="headerlink" title="三、FPS 监控"></a>三、FPS 监控</h2><p>可以通过观察动画效果，或者使用 DevTools 中的 FPS meter（Cmd+Shift+P → “FPS meter”），运行<a href="https://github.com/luciodale/koolcodez/blob/main/src/components/articles/SquaresRendering.tsx">Demo</a>，会显示实时帧率。只有当我们将Demo 中的正方形数量最大化时，才会出现明显的差异。</p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>流畅的性能并非魔法。它来自于理解浏览器在做什么，并针对它进行性能分析。事实上，对于小型动画，浏览器已经可以渲染得很快了，性能差异可以忽略不计</p><p>参考文献：</p><p><a href="https://koolcodez.com/blog/inside-the-frame/">Inside a 16.67 Millisecond Frame - Understand how rendering works through a practical example.</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我们是否需要AI知识库</title>
      <link href="/AI-knowledge-base/"/>
      <url>/AI-knowledge-base/</url>
      
        <content type="html"><![CDATA[<p>前几天听到一个朋友说，搞一个自己的知识库比旧式的看文写博客记笔记更优越，以前的方式out了，几千字的文章，几小时的视频资料，直接喂给AI，省去自己阅读和观看的时间，需要的时候直接跟AI对话，让他吐出内容就好。</p><p>我琢磨了一下，效率是高了，但是看都不看一眼，需要的时候让AI投喂给我们，知识没有得到内化，这真的是我们要的吗？我们阅读观看视频的目的是什么呢？如果知识没有被我们吸收，真正需要用到的时候我们也未必会想起来吧。于是，查了些资料做了些研究，下面是我的一些思考。</p><p>可能有些人还不知道 AI 知识库是什么，这里科普一下，大模型训练的时候，用的是特定的数据源，通常训练出来的是：通用的或特定领域的模型，超出知识范围的内容大模型可能理解不了。如果想要定制化，比如说我是一个程序员，我的开发习惯，熟悉的技术栈，编码风格，文档写作风格可能跟使用特定大模型的聊天工具对话半天，都出不来想要的结果，这个时候我可以给他一些资料，可以是我日常写的博客，技术文档，产品文档等，这样AI 聊天工具返回的内容会去参照我喂给他的资料，输出定制化的内容。简单的说，AI 知识库区别于普通搜索，就是它可以让 AI 使用我们的资料合集作为外挂，快速理解和产出内容，而不仅仅是简单的检索和瞎回答。</p><p>什么情况下我们需要用到AI 知识库呢？</p><p>最简单的，比如我想去了解一些健身知识，我可能会去查找一些相关的 B 站视频或者看一些文献资料，根据艾宾浩斯的遗忘曲线，我当时可能总结出了相关的一二三点，可能渐渐地就忘了，我可以找一个 AI 聊天工具，以元宝为例，可以创建一个分组，命名为健身，然后把搜到的资料丢给元宝，这个组内的所有对话都会结合这些资料返回结果，通过问不同的问题，可以让 AI 帮我们做复盘，加深对内容的理解和记忆。</p><p><img src="https://canace22.github.io/picx-images-hosting/20250927/image.9gwxytq6q6.webp" alt="元宝知识库"></p><p>更进一步，我可能不是想普通的检索问答，太麻烦了，我想做深入研究，进行主题阅读，可以用谷歌的NotebookLM，他可以根据投喂的资料，生成思维导图，视频，音频，不同角度的报告等，也会总结出内容主题和问答内容，帮助我们深入理解学习某个领域的知识。</p><p><img src="https://canace22.github.io/picx-images-hosting/20250927/image.3k8drtau70.webp" alt="NotebookLM知识库"></p><p>以上举的两种情况的例子，我们可以知道，AI知识库可以帮助我们做知识复盘，避免遗忘，也可以帮助我们深入学习某个领域的知识。</p><p>还有种情况，某些职业可能有大量的资料，经常要进行资料分类，检索才能获得结果。我刚毕业的时候做过一阵子项目助理，要跟很多个项目的进度，项目组基本是驻场到各地的。经常要给他们发一些物料或者资料过去，公司有个 ERP 系统，里面有各种物料分布情况，项目合同资料等，我每次都要很复杂的检索，找到相关人员，配齐需要用到的物料资料，这里检索和查电话记录找人，占了我的大部分工作时间。如果用 AI 知识库的话，我可以很轻松的知道这些情况，工作效率可以提升不少。但是这些资料是内部的，所以这里的知识库就是专有知识库，而不是个人知识库了，目前各大电商平台的客服等都有用到专有知识库。</p><p>最后，我们不是简单的直接把资料完全丢给 AI 让他帮我们学习理解，这样我们只会沦为知识的接收器，人类区别于动物和机器的一点是，人类有智力，可以思考，有创造力，如果丢了这些，机器统治世界的时代允许真的会到来吧。</p>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用开发提示词</title>
      <link href="/common-programming-prompt-words/"/>
      <url>/common-programming-prompt-words/</url>
      
        <content type="html"><![CDATA[<p>整理一些日常开发中用到的提示词，给出了翻译和例句用法，方便查阅</p><h2 id="1-创建与修改"><a href="#1-创建与修改" class="headerlink" title="1. 创建与修改"></a>1. 创建与修改</h2><table><thead><tr><th>Original</th><th>Translation</th><th>Explanation</th><th>Example Sentence</th></tr></thead><tbody><tr><td>Develop</td><td>开发</td><td>In programming, “develop” refers to creating or building software, scripts, or applications. It implies writing code to achieve a specific functionality. The term is broad and can apply to various languages or project types.</td><td><strong>develop</strong> a Python script that generates random sentences for the language learning app.</td></tr><tr><td>Edit</td><td>编辑</td><td>“Edit” in coding means modifying existing code to improve clarity, fix bugs, or enhance functionality. It often involves renaming variables, restructuring logic, or updating outputs for better user experience.</td><td><strong>edit</strong> the JavaScript function to use descriptive variable names instead of single letters.</td></tr><tr><td>Create</td><td>创建</td><td>“Create” refers to building something new, such as a file, program, or webpage, from scratch. It emphasizes starting with a blank slate to produce a functional output.</td><td><strong>create</strong> a simple HTML form to collect user input and display it in reverse.</td></tr><tr><td>Design</td><td>设计</td><td>“Design” in programming can refer to planning the structure, logic, or visual layout of a program or interface. It involves both aesthetic and functional considerations to ensure usability.</td><td><strong>Design</strong> a C# program that counts vowels in a sentence and explains why this is useful.</td></tr><tr><td>Rewrite</td><td>重写</td><td>“Rewrite” means reworking existing code to improve its quality, readability, or functionality without changing its core purpose. It often involves refining outputs or logic.</td><td><strong>Rewrite</strong> the PHP script to display more polite and detailed error messages.</td></tr><tr><td>Construct</td><td>构建</td><td>“Construct” is similar to “create” but emphasizes the process of assembling or structuring components, often with a focus on logic or flow in programming.</td><td><strong>Construct</strong> a Ruby program that sorts a list of words alphabetically with clear user instructions.</td></tr><tr><td>Enhance</td><td>增强</td><td>“Enhance” means adding new features or improving existing ones in a program to make it more functional or user-friendly.</td><td><strong>Enhance</strong> the Python script to let users choose a quote category like motivation or humor.</td></tr><tr><td>Compose</td><td>编写</td><td>“Compose” is a synonym for creating or writing, often used for scripts or applications with a creative or structured output, like games or stories.</td><td><strong>Compose</strong> a Python script for a word-matching game with synonyms.</td></tr><tr><td>Revise</td><td>修改</td><td>“Revise” is similar to “edit” but often implies a more thorough review and improvement of code or text for clarity or simplicity.</td><td><strong>Revise</strong> the JavaScript function to simplify its complex greeting output.</td></tr><tr><td>Build</td><td>构建</td><td>“Build” is akin to “create” or “construct” but often emphasizes the process of assembling a complete, functional system or webpage.</td><td><strong>Build</strong> an HTML page with CSS to display a proverb and its meaning.</td></tr><tr><td>Update</td><td>更新</td><td>“Update” involves modifying code to improve functionality, add context, or fix issues while keeping the core purpose intact.</td><td><strong>Update</strong> the PHP script to include more detailed feedback messages.</td></tr><tr><td>Modify</td><td>修改</td><td>“Modify” is a general term for changing code or functionality, often to add features or adjust behavior.</td><td><strong>Modify</strong> the Java program to allow users to add a new verb to the list.</td></tr><tr><td>Extract</td><td>提取</td><td>“Extract” in programming refers to isolating a piece of code (e.g., a function or component) to make it reusable or modular.</td><td><strong>Extract</strong> this button into a separate React component for reusability.</td></tr><tr><td>Refactor</td><td>重构</td><td>“Refactor” means restructuring code to improve its readability, efficiency, or maintainability without changing its functionality.</td><td><strong>Refactor</strong> the button code into a reusable component with cleaner logic.</td></tr><tr><td>Adapt</td><td>适配</td><td>“适配”在技术语境中常指软件、硬件或系统之间的兼容与调整，英文用 “adapt” 最简洁自然；若强调“相互匹配”，也可译为 “fit” 或 “match”.</td><td>This app needs to adapt to both iOS and Android platforms.<br>（这个应用需要适配 iOS 和 Android 两大平台。）</td></tr></tbody></table><h2 id="2-分析与解释"><a href="#2-分析与解释" class="headerlink" title="2. 分析与解释"></a>2. 分析与解释</h2><table><thead><tr><th>Original</th><th>Translation</th><th>Explanation</th><th>Example Sentence</th></tr></thead><tbody><tr><td>Explain</td><td>解释</td><td>“Explain” requires providing a clear, understandable description of how something works, often breaking down complex logic into simple terms. In coding, this is often done via comments or documentation.</td><td><strong>explain</strong> how a Python function checks if a word is a palindrome?</td></tr><tr><td>Analyze</td><td>分析</td><td>“Analyze” involves examining code, queries, or data to understand their structure, purpose, or performance. It often precedes optimization or debugging.</td><td><strong>Analyze</strong> the SQL query to explain how it retrieves idioms from the database.</td></tr><tr><td>Clarify</td><td>阐述</td><td>“Clarify” means explaining or simplifying code, logic, or output to make it easier to understand, often through comments or plain language.</td><td><strong>Clarify</strong> how a Python program splits a sentence into words and counts them.</td></tr><tr><td>Describe</td><td>描述</td><td>“Describe” involves explaining the purpose or functionality of code or a query in clear terms, often for documentation or user guidance.</td><td><strong>Describe</strong> the purpose of a SQL query that filters words by length.</td></tr><tr><td>Reference</td><td>参考</td><td>“参考”在中文中多用于文档、编程、学术或技术场景，表示可供查阅、借鉴的资料或信息。在英语中，最标准对应词为 “reference”，尤其在编程（如 API reference）、论文（如 references 部分）或系统提示（如 “for reference”）中直接使用。若强调“供参考”，可译为 “for your reference” 或 “as a reference”.</td><td>请参考下面的文档完成配置。<br>→ Please complete the configuration with reference to the document below.<br>或者：仅供参考。<br>→ For your reference only.</td></tr></tbody></table><h2 id="3-管理与组织"><a href="#3-管理与组织" class="headerlink" title="3. 管理与组织"></a>3. 管理与组织</h2><table><thead><tr><th>Original</th><th>Translation</th><th>Explanation</th><th>Example Sentence</th></tr></thead><tbody><tr><td>Organize</td><td>整理</td><td>“Organize” involves structuring code, data, or documentation in a way that makes it easier to search, use, or maintain.</td><td><strong>Organize</strong> the prompt words into a document that’s easy to search and use.</td></tr><tr><td>Strategy</td><td>策略</td><td>“Strategy” refers to a plan or method designed to achieve a particular goal. In programming, it often relates to design patterns, algorithms, or approaches to solving problems.</td><td><strong>Strategy</strong> pattern is used to define a family of algorithms and make them interchangeable.</td></tr><tr><td>Requirement</td><td>要求</td><td>“Requirement” refers to something that is demanded or needed, often used in software development to describe functional or non-functional specifications.</td><td>The <strong>requirement</strong> is to create a user authentication system with secure password validation.</td></tr><tr><td>Permission</td><td>权限</td><td>“权限”在中文中常用于计算机、软件或系统管理场景，指用户或程序被允许执行某些操作的权利。在英语中，最常用的对应词是 “permission”，尤其在技术文档、权限管理（如 Linux 的 chmod、Windows 的 ACL）中直接使用此词。若在更广泛的语境（如行政或法律），也可译为 “authority” 或 “authorization”，但此处保留技术领域的标准译法。</td><td>这个用户没有读取文件的权限。<br>→ This user does not have permission to read the file.</td></tr><tr><td>Revert</td><td>恢复</td><td>“Revert” means undoing changes to restore a previous version of code or a system, often used in version control or debugging.</td><td><strong>Revert</strong> the recent changes to the code to restore the original functionality.</td></tr><tr><td>Reuse</td><td>复用</td><td>“复用”在中文技术语境中特指将已有资源（如代码、组件、连接、频率等）多次或多处使用，以提高效率、降低开销。在英语中，最标准对应词为 “reuse”，尤其在软件工程（如 code reuse）、网络通信（如 connection reuse）或硬件设计中直接使用。若强调“可重复使用”，可译为 “reusable”；在某些场景（如多路复用）则为 “multiplexing”，但此处保留最通用技术含义。</td><td>这个函数可以被多个模块复用。<br>→ This function can be reused by multiple modules.<br>或者：支持 HTTP 连接复用以提升性能。<br>→ Supports HTTP connection reuse to improve performance.</td></tr><tr><td>alignment &#x2F; align</td><td>对齐</td><td>“对齐”是一个多义词。在日常语境中常译为”align”（使对齐、排列整齐）；在人工智能&#x2F;机器学习领域（尤其是大语言模型相关讨论中），专有名词译为”alignment”（对齐），指让AI的行为与人类价值观、意图保持一致。在设计、排版或编程中也可译为”alignment”或”justify”。此处给出最常见和通用的翻译”alignment &#x2F; align”，并标注常见语境差异。</td><td>我们需要解决人工智能的对齐问题，以确保其安全发展。<br>→ We need to address the AI alignment problem to ensure its safe development.</td></tr><tr><td>unified style &#x2F; uniform style</td><td>统一样式</td><td>“统一样式”常指使视觉或格式保持一致，在设计、编程（如CSS）、文档排版或UI领域中通常译为”unified style”或更专业的”uniform style”。在某些上下文中（如前端开发）也可直接译为”unify the style”或”standardize styling”。此处给出最常见且自然的翻译”unified style &#x2F; uniform style”。</td><td>为了提升品牌形象，我们需要将所有宣传材料的统一样式。<br>→ To enhance the brand image, we need to adopt a unified style for all promotional materials.</td></tr></tbody></table><h2 id="4-核心概念"><a href="#4-核心概念" class="headerlink" title="4. 核心概念"></a>4. 核心概念</h2><table><thead><tr><th>Original</th><th>Translation</th><th>Explanation</th><th>Example Sentence</th></tr></thead><tbody><tr><td>Program</td><td>编程</td><td>“Program” refers to the act of writing code to create a functional application or script. It’s a general term for coding tasks across languages.</td><td><strong>Program</strong> a Java application that converts a sentence to uppercase or lowercase based on user input.</td></tr><tr><td>Implement</td><td>实现</td><td>“Implement” refers to putting a plan or logic into action by writing code that executes a specific feature or functionality.</td><td><strong>Implement</strong> a C++ program that appends a user’s adjective to a sentence.</td></tr></tbody></table><h2 id="5-用户交互"><a href="#5-用户交互" class="headerlink" title="5. 用户交互"></a>5. 用户交互</h2><table><thead><tr><th>Original</th><th>Translation</th><th>Explanation</th><th>Example Sentence</th></tr></thead><tbody><tr><td>complete &#x2F; fill in &#x2F; autocomplete</td><td>补全</td><td>“补全”在中文中常用于编程、表单或搜索场景，指自动或手动地将不完整的内容填充完整。在英语技术语境中，最常见对应词为 “autocomplete”（如代码补全、输入补全）或 “complete”（动词形式）；在表单场景中也常用 “fill in”。根据上下文灵活选择，此处提供最通用技术译法。</td><td>编辑器会自动补全代码。<br>→ The editor will autocomplete the code.<br>或者：请补全以下信息。<br>→ Please fill in the following information.</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 职业发展 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客文章分类</title>
      <link href="/blog-category/"/>
      <url>/blog-category/</url>
      
        <content type="html"><![CDATA[<p>根据开发工作流整理博客文章分类，开发工作流梳理如下：<strong>基础理论</strong> -&gt; <strong>技术实现</strong> -&gt; <strong>工程实践</strong> -&gt; <strong>软技能</strong>，下面是分类逻辑</p><figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">├── <span class="number">1</span>. 编程基础 <span class="punctuation">(</span>Programming Foundations<span class="punctuation">)</span></span><br><span class="line">│   ├── 计算机科学 <span class="punctuation">(</span>Computer Science<span class="punctuation">)</span>  <span class="comment">// 算法, 计算机网络, 操作系统等</span></span><br><span class="line">│   └── 编程语言 <span class="punctuation">(</span>Programming Languages<span class="punctuation">)</span> <span class="comment">// 语言特性, 语法对比等</span></span><br><span class="line">│   └── 系统设计 <span class="punctuation">(</span>System Design<span class="punctuation">)</span> <span class="comment">// 替换原有的&quot;系统&quot;</span></span><br><span class="line">│ </span><br><span class="line">├── <span class="number">2</span>. Web 开发 <span class="punctuation">(</span>Web Development<span class="punctuation">)</span>  <span class="comment">// 拆分庞大的 &quot;web&quot; 分类</span></span><br><span class="line">│   ├── 前端 <span class="punctuation">(</span>Frontend<span class="punctuation">)</span></span><br><span class="line">│   │   ├── JavaScript <span class="meta">&amp; TypeScript</span></span><br><span class="line">│   │   ├── 框架与库 <span class="punctuation">(</span>Frameworks <span class="meta">&amp; Libs) <span class="comment">// Vue, React, Angular 等</span></span></span><br><span class="line">│   │   ├── CSS 与可视化 <span class="punctuation">(</span>CSS <span class="meta">&amp; Visualization) <span class="comment">// CSS, WebGL, Canvas 等</span></span></span><br><span class="line">│   │   └── 跨端方案 <span class="punctuation">(</span>Cross<span class="punctuation">-</span>Platform<span class="punctuation">)</span> <span class="comment">// 小程序, Flutter 等</span></span><br><span class="line">│   │</span><br><span class="line">│   └── 后端 <span class="punctuation">(</span>Backend<span class="punctuation">)</span></span><br><span class="line">│       ├── Node.js</span><br><span class="line">│       ├── Go / Python / 其他</span><br><span class="line">│       ├── 数据库 <span class="punctuation">(</span>Databases<span class="punctuation">)</span> <span class="comment">// MySQL, Redis 等</span></span><br><span class="line">│       └── API <span class="meta">&amp; 服务 (API &amp; Services)</span></span><br><span class="line">│</span><br><span class="line">├── <span class="number">3</span>. 工程化与运维 <span class="punctuation">(</span>Engineering <span class="meta">&amp; DevOps)</span></span><br><span class="line">│   ├── 构建与部署 <span class="punctuation">(</span>Build <span class="meta">&amp; Deployment) <span class="comment">// Webpack, Vite, CI/CD, Docker</span></span></span><br><span class="line">│   ├── 性能优化 <span class="punctuation">(</span>Performance<span class="punctuation">)</span></span><br><span class="line">│   ├── 代码质量 <span class="punctuation">(</span>Code Quality<span class="punctuation">)</span> <span class="comment">// 单元测试, 代码规范, Eslint</span></span><br><span class="line">│   └── 开发工具 <span class="punctuation">(</span>Dev Tools<span class="punctuation">)</span> <span class="comment">// Git, VSCode, Npm, Shell 脚本等</span></span><br><span class="line">│</span><br><span class="line">├── <span class="number">4</span>. AI探索 <span class="punctuation">(</span>AI<span class="punctuation">)</span></span><br><span class="line">│   ├── AI编程 <span class="punctuation">(</span>AI Coding<span class="punctuation">)</span> <span class="comment">// Cursor, Claude Code, AI辅助开发等</span></span><br><span class="line">│   └── AI原理 <span class="punctuation">(</span>AI Fundamentals<span class="punctuation">)</span> <span class="comment">// 模型训练, GPU/TPU, 知识库等</span></span><br><span class="line">│</span><br><span class="line">├── <span class="number">5</span>. 软技能与思考 <span class="punctuation">(</span>Soft Skills <span class="meta">&amp; Reflections)</span></span><br><span class="line">│   ├── 项目管理 <span class="punctuation">(</span>Project Management<span class="punctuation">)</span></span><br><span class="line">│   ├── 职业发展 <span class="punctuation">(</span>Career Development<span class="punctuation">)</span> <span class="comment">// 替换原有的&quot;职场&quot;</span></span><br><span class="line">│   ├── 读书笔记 <span class="punctuation">(</span>Reading Notes<span class="punctuation">)</span></span><br><span class="line">│   └── 随笔 <span class="punctuation">(</span>Essays <span class="meta">&amp; Musings) <span class="comment">// &quot;随笔&quot;, &quot;七日谈&quot;可以归入这里</span></span></span><br><span class="line">│</span><br><span class="line">└── <span class="number">6</span>. 网站建设 <span class="punctuation">(</span>Site Meta<span class="punctuation">)</span> <span class="comment">// 替换&quot;博客相关&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网站建设 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>你不是在面试，你是在为职位试镜</title>
      <link href="/interview-strategy/"/>
      <url>/interview-strategy/</url>
      
        <content type="html"><![CDATA[<p>之前看到一篇文章，感觉很好的剖析了现在的技术面试现状，翻译了一下。</p><hr><p>我曾经参加过一个后端职位的面试。技术栈是 Node.js 和 MySQL，很常见。面试官问：“如果你有一个包含一百万条记录的数组，如何按名字排序？”</p><p>我的第一反应是：如果你在 JavaScript 里真的维护一个一百万条数据的数组，那肯定是哪里搞错了。</p><p>面试官继续说：“你应该能根据多个字段进行排序。”</p><p>这听起来像是个陷阱题。正确答案显然应该是，解释为什么你不该在 JavaScript 里为百万级数据排序。分页、数据库索引、服务端过滤才是正解。所以我如实回答了。</p><p>但我错了，他想要听的是，用 <code>Array.prototype.sort()</code> 怎么实现。</p><p>我优先考虑现实世界的效率，而非戏剧化的规模，错了吗？为什么在面试官眼里，我不是一个务实的工程师，而是一个“缺乏远见”的候选人。</p><h2 id="一、技术面试的戏剧性"><a href="#一、技术面试的戏剧性" class="headerlink" title="一、技术面试的戏剧性"></a>一、技术面试的戏剧性</h2><p>我曾读到一句话：“复杂的系统往往反映的是缺乏良好的设计。”这句话很精彩，也很真实。但如果你要准备系统设计面试，立刻把它忘了。</p><p>在真实的程序世界里，简单为王。而在面试里，复杂才是货币。</p><p>工作面试并不是评估，而是一次<strong>职位试镜</strong>：角色是“能解决所有复杂问题的架构师™”。</p><h2 id="二、潜规则剧本"><a href="#二、潜规则剧本" class="headerlink" title="二、潜规则剧本"></a>二、潜规则剧本</h2><p>每一次系统设计面试都遵循同一套戏剧公式：</p><p><strong>第一幕：召唤巨龙</strong><br>先假设有无限用户和全球流量。把一切合理数字放大 1000 倍。把一个待办应用当作是纽约证券交易所。当你描述这款本质上是数字记事本的产品拥有数百万并发用户时，面试官会赞许地点点头。</p><p><strong>第二幕：绘制符文</strong><br>然后在白板上画满方框和箭头，至少要有一个冗余的 Kubernetes 集群。必须加一个消息队列，最好是 Kafka，不管用不用得上。撒上一点微服务，因为单体是“落后者”的选择。每个组件都要用负载均衡器当护身符保护。</p><p><strong>第三幕：祈求技术之神</strong><br>最后，你要为博客评论系统讨论一致性算法，顺带提到可观测性和 SLOs，再轻声念一句“最终一致性”，仿佛能驱走未来所有扩展性问题。</p><p>这场表演和实际工作毫无关系，它只是证明你会说大量专业术语。</p><h2 id="三、面试世界-vs-真实世界"><a href="#三、面试世界-vs-真实世界" class="headerlink" title="三、面试世界 vs 真实世界"></a>三、面试世界 vs 真实世界</h2><p><strong>面试世界：复杂 &#x3D; 能力</strong></p><ul><li>展示对分布式系统模式的熟悉</li><li>熟练掌握企业级工具</li><li>能为“虚构的百万级用户”设计合理的架构</li></ul><p><strong>真实世界：简单 &#x3D; 好设计</strong></p><ul><li>从最简单可行的方案开始</li><li>仅在确实需要时才增加复杂性</li><li>为可维护性做优化，而不是假想规模</li></ul><p>我见过优秀工程师在面试中失败，只因为他们提议用关系型数据库而不是分布式 NoSQL 集群——即便系统每天只有 100 个请求。</p><p>我也见过平庸工程师被录用，只因为他们能流利讨论“分片策略”，哪怕问题根本不需要。</p><h2 id="四、戏剧存在的原因"><a href="#四、戏剧存在的原因" class="headerlink" title="四、戏剧存在的原因"></a>四、戏剧存在的原因</h2><p>这并非恶意，而是结构性问题，由多个因素驱动：</p><ul><li><strong>信号 vs 噪音</strong>：复杂性比判断力更容易评估。任何人都能背 CAP 定理，能区分 SQL 和 NoSQL。但要判断何时不该用分布式系统，在 45 分钟里很难考察，于是面试官倾向于能量化的东西。</li><li><strong>规避风险</strong>：招聘委员会更怕“错过好人”，而不是“招到坏人”。“简单”答案显得冒险——万一此人真不能应对复杂场景呢？复杂答案更保险，哪怕完全是过度设计。</li><li><strong>理想化差距</strong>：公司往往为自己“理想的未来”招人，而不是当下的需求。他们想要能“支撑百万用户的高级工程师”，而不是能写好“10,000 日活用户代码的开发者”。未来规模的幻想决定了今天的招聘。</li><li><strong>面试官激励</strong>：讨论负载均衡和一致性协议，比 CRUD 有趣得多。即便 CRUD 才是工作里 90% 的内容。面试官也是人，人类更喜欢有趣的对话。</li></ul><p>一旦入职，剧本就完全翻转了。你每天要删除“为未来规模准备”的没用微服务；要反对本该用 cron 就能解决的问题里乱加消息队列；要合并“为可扩展性拆分”的数据库。你得不断告诉热情的新人工程师：新功能真的不需要单独的 Kubernetes 命名空间，有时候一个简单的 bash 脚本比分布式系统更可靠。</p><p>让你被录用的复杂性，最终会变成你几年都拆不完的技术债。我曾与一些工程师共事过，他们在系统设计面试中凭借繁复的架构方案轻松过关，但入职后的第一年却都在简化系统——那些系统正是前人基于同样的面试逻辑过度设计出来的。由此形成了一种循环：先制造复杂性，再拆解复杂性，而这一切完全是面试戏剧所驱动的。</p><h2 id="五、诚实的代价"><a href="#五、诚实的代价" class="headerlink" title="五、诚实的代价"></a>五、诚实的代价</h2><p>如果你在面试中尝试务实，会发生什么？</p><ul><li><strong>背压问题</strong>：“你在系统中如何处理背压（Backpressure）？”<ul><li>诚实回答：“我们根本没有那么大流量，不需要背压机制。”</li><li>面试回答：“我们实现带断路器和队列深度监控的指数退避。”</li></ul></li><li><strong>数据库问题</strong>：“这个用例用 SQL 还是 NoSQL？”<ul><li>诚实回答：“Postgres 完全能处理，而且团队都懂 SQL。”</li><li>面试回答：“我们会采用多元持久化策略：Redis 缓存、Cassandra 存时间序列、Neo4j 做社交图谱。”</li></ul></li><li><strong>扩展性问题</strong>：“你如何处理 1000 万用户？”<ul><li>诚实回答：“我们没有 1000 万用户，只有 1 万，先解决这个。”</li><li>面试回答：“我们会用一致性哈希的水平分片和自动扩展的 Kubernetes pods。”</li></ul></li></ul><p>诚实答案体现的是经验，面试答案体现的是词汇。你猜哪个更容易拿到 offer？</p><h2 id="六、如何赢得这场游戏"><a href="#六、如何赢得这场游戏" class="headerlink" title="六、如何赢得这场游戏"></a>六、如何赢得这场游戏</h2><p>我并不是提倡虚伪，而是承认现实。面试是一种仪式，仪式有规则，需要我们去应对它：</p><ul><li><p><strong>区分表演与实践</strong>：玩转面试游戏不代表虚伪，而是对破碎体系的务实态度。你可以在面试舞台上“演戏”，入职后依旧做一个有技术原则的工程师。</p></li><li><p><strong>学习“圣典”</strong>：即使用不上，也要研究分布式系统模式；即使无关工作，也要记住 CAP 定理；要练习画那些在白板上看起来很厉害的架构图，这就像学习一门只在面试时使用的外语一样。</p></li><li><p><strong>拥抱套路</strong>：总是以“在规模化情况下，我们需要考虑……”开头。无论系统大小，尽早多提监控和可观测性。处处加冗余，即使对非关键组件。说出那些面试世界里“象征能力”的魔法词。</p></li><li><p><strong>然后摘下面具</strong>：一旦入职，就要毫不妥协地追求简单。勇敢地质问：“我们真的需要这些复杂性吗？”用在面试中积累的“信誉”去抵制过度设计，这才是真正的程序世界。</p></li></ul><h2 id="七、尾声"><a href="#七、尾声" class="headerlink" title="七、尾声"></a>七、尾声</h2><p>这个体系虽然令人沮丧，但不是永恒的。已经有一些公司开始意识到问题，并尝试新方法。他们给候选人提出的是真实问题，而不是假想的规模化挑战；他们奖励质疑复杂性的工程师，而不仅仅是能实现它的人；他们要求候选人识别现有系统的过度设计，而不是创造新的复杂性。</p><p>但在这些实践普及之前，我们依旧被困在剧场里。它满足了太多心理需求：让面试官感觉聪明，让公司显得严格，让候选人觉得自己在解决大问题。技术面试存在于一个平行宇宙，规则完全不同。舞台需要复杂性的表演，而工作则奖励对简单的掌控。</p><p>系统是破碎的，但个人无法靠牺牲去修复。扮演好角色，拿到工作，然后利用你的地位推动改变。</p><p>记住：目标不是永远维持戏剧，而是进入大楼，然后让别人看到皇帝的分布式微服务其实没有穿衣服。</p><p>对面试的戏剧性最好的反击，不是拒绝表演，而是表演成功。然后，你就能用整个职业生涯去删除它所歌颂的冗余复杂性。</p><p>参考文献：</p><p><a href="https://idiallo.com/blog/performing-for-the-job-title">You’re Not Interviewing for the Job. You’re Auditioning for the Job Title</a></p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 职业发展 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>首次尝试95%都是垃圾：一位工程师使用Claude Code的6周之旅</title>
      <link href="/translate-use-claude-code/"/>
      <url>/translate-use-claude-code/</url>
      
        <content type="html"><![CDATA[<p>最近 AI 很火，各个行业都希望把 AI 整合进来，提升生产效率，但是毕竟是新的东西，没有好的模板可以套，自己一点点摸索又很费时间和资源。作为开发者，我最近也在探索把 AI 整合到生产实践中，试图找到一个可行的提效套路，看了作者这篇文章觉得挺有借鉴意义的，随手翻译了，分享给大家</p><hr><p>直到18个月前，我都是手撸代码的。现在，80%的初始实现交给AI，我则专注于架构设计、Code Review以及同时协调多个开发线程。</p><p>这并非又一篇“AI将改变一切”的陈词滥调。本文旨在探讨如何将AI整合到生产开发工作流中：什么方法真正有效，什么会浪费你的时间，以及为何<strong>将AI视为“一个不会学习的初级开发者”成了我成功让AI赋能工作的关键。</strong></p><h2 id="一、我的四次编码转变"><a href="#一、我的四次编码转变" class="headerlink" title="一、我的四次编码转变"></a>一、我的四次编码转变</h2><p>我的代码问题解决方法在职业生涯中经历了四次转变：</p><ul><li>头5年，我埋头阅读书籍和SDK文档。</li><li>接着12年，依赖谷歌搜索别人的答案。</li><li>之后18个月，使用Cursor进行AI辅助编码。</li><li>而最近6周，使用Claude Code进行完全的AI委托编码。</li></ul><p>每次转变，都比上一次解决编码问题更快。使用Claude Code，我只用了几个小时就变得高效起来。</p><h2 id="二、AI辅助开发的实际体验（对我而言）"><a href="#二、AI辅助开发的实际体验（对我而言）" class="headerlink" title="二、AI辅助开发的实际体验（对我而言）"></a>二、AI辅助开发的实际体验（对我而言）</h2><p>以下是我当前工作流的真实面貌，去除了所有炒作成分。我主要把AI当成“共同思考的伙伴”，与它协作产出最终投入生产的代码。</p><h3 id="1-通常需要三次尝试"><a href="#1-通常需要三次尝试" class="headerlink" title="1. 通常需要三次尝试"></a>1. 通常需要三次尝试</h3><p>忘掉一次性生成完美代码的承诺。工程师的职责是为问题寻找最佳解决方案，而不仅仅是编写一堆代码。</p><p><strong>首次尝试（垃圾率95%）</strong></p><ul><li>Claude构建关于系统的上下文</li><li>开发者识别出真正的挑战所在</li><li>代码通常完全错误</li></ul><p>然后，将此次尝试的收获喂回给Claude。</p><p><strong>第二次尝试（垃圾率50%）</strong></p><ul><li>Claude理解了细微差别</li><li>开发者已定义了具体方法</li><li>仍有一半情况无法使用</li></ul><p><strong>第三次尝试（最终可用）</strong></p><ul><li>Claude实现了一个我们可以迭代和优化的版本</li><li>开发者进行 code review 和错误纠正</li><li>初稿实现</li></ul><p>虽然我们还没有得到可以直接生产可应用的代码，这并非失败，而是过程！我们要知道，期望首次尝试就完美，就如同期望一位初级开发者，在没有上下文的情况下，就能搞定一个复杂功能一样。</p><h3 id="2-上下文问题（及其解决方案）"><a href="#2-上下文问题（及其解决方案）" class="headerlink" title="2. 上下文问题（及其解决方案）"></a>2. 上下文问题（及其解决方案）</h3><p>最大的挑战？AI无法在会话之间保留学习成果（除非您花时间手动赋予它“记忆”）。因此，通常每次对话都需要从头开始。</p><p>我的解决方案：</p><p><strong>Claude.md 文件</strong><br>创建一个项目专用的上下文文件，包含：</p><ul><li>项目架构</li><li>代码风格偏好</li><li>陷阱与变通方案</li><li>相关文档链接</li></ul><p><strong>工具集成</strong><br>得益于MCP（Model Context Protocol），我现在可以将AI连接到：</p><ul><li>Linear（用于获取任务单上下文）</li><li>Notion 或 Canvas（用于获取文档）</li><li>非生产数据库（仅只读权限！用于获取数据和数据结构）</li><li>实际代码库</li><li>Github（从旧的PR中获取有用的背景信息）</li></ul><p>没有这些上下文，就得反复解释相同的约束条件。有了它，可以直接从第二次尝试开始，而非第一次。</p><p><img src="https://canace22.github.io/picx-images-hosting/20250907/image.6pnuxr8ndx.webp" alt="local integrations"></p><h3 id="3-管理多个AI“开发者”"><a href="#3-管理多个AI“开发者”" class="headerlink" title="3. 管理多个AI“开发者”"></a>3. 管理多个AI“开发者”</h3><p>我现在并行运行多个Claude实例，这就像管理一个每天早晨都会重置记忆的小型开发团队。</p><p>关键策略：</p><ul><li><strong>切勿并行处理相同的问题</strong>（容易迷失方向，混淆正在解决的不同问题）</li><li><strong>在Linear（或您使用的任何项目管理工具）中跟踪一切</strong></li><li><strong>明确标记经过人工编辑的代码</strong>（AI会混淆它写的代码和您修改的代码）</li></ul><h3 id="4-三步Review流程"><a href="#4-三步Review流程" class="headerlink" title="4. 三步Review流程"></a>4. 三步Review流程</h3><p>编写代码只是工作的一部分，review代码亦然。采用AI也改进了我的代码审查流程。</p><p> <strong>Claude先行审查</strong></p><ul><li>捕捉缺失的测试覆盖</li><li>发现明显的Bug</li><li>提出改进建议</li></ul><p>这为我和同事节省了时间和额外的审查次数。</p><p><strong>我的个人 Code Review</strong><br>在Sanity，我们的原则是工程师对其交付的代码负责，即使是AI生成的代码。我希望确保我交付的是：</p><ul><li>可维护的代码</li><li>稳健的架构设计</li><li>正确的业务逻辑</li><li>可集成性良好</li></ul><p><strong>团队日常 Code Review</strong></p><ul><li>他们很少知道哪些代码是AI生成的</li><li>质量门槛保持不变</li></ul><p>关键要点：我现在对“我写的代码”更加挑剔，因为其中很多并非我亲手键入。没有情感依恋意味着更好的Code Review。</p><h3 id="5-后台智能体的早期实验"><a href="#5-后台智能体的早期实验" class="headerlink" title="5. 后台智能体的早期实验"></a>5. 后台智能体的早期实验</h3><p>我们正在测试使用Cursor的Slack触发智能体来处理简单任务：</p><ul><li>2次成功修复业务逻辑</li><li>1次处理CSS布局失败</li></ul><p>当前局限性：</p><ul><li>无法访问私有NPM包</li><li>它会提交未签名的Commit</li><li>绕过了正常的跟踪流程</li></ul><p><img src="https://canace22.github.io/picx-images-hosting/20250907/image.26ltus3hja.webp" alt="image"></p><p>但潜力呢？想象一下智能体在您睡觉时处理积压的小任务。我们正在Sanity积极探索这一点，并在团队间分享经验，以摸索出有效的方法。</p><h3 id="6-真实成本（含数字）"><a href="#6-真实成本（含数字）" class="headerlink" title="6. 真实成本（含数字）"></a>6. 真实成本（含数字）</h3><p>我们来谈谈钱，我使用Claude Code的成本占公司支付我月薪的不小比例。</p><p>但这项投资带来了：</p><ul><li>我的功能交付速度快了2-3倍</li><li>我可以管理多个开发线程</li><li>我在模板代码和重复性代码上花费时间几乎为 0</li></ul><p>投资回报率(ROI)是显而易见的，但需要为全力投入AI开发的资深工程师预算每月1000-1500美元的费用。同样可以合理预期，工程师随着熟练度提高，使用AI的效率会更高，这只是时间问题。</p><h3 id="7-实际会遇到的问题"><a href="#7-实际会遇到的问题" class="headerlink" title="7. 实际会遇到的问题"></a>7. 实际会遇到的问题</h3><p>AI辅助开发并非一帆风顺，以下是我遇到的一些持续挑战：</p><p> <strong>学习问题</strong><br>AI不会从错误中学习，需要反复修正相同的误解，解决方案是：配置更好的文档和更明确的指令。</p><p><strong>自信问题</strong><br>AI会自信地编写有问题的代码，并声称其很棒。务必进行验证，尤其是对于：</p><ul><li>复杂的状态管理</li><li>性能关键部分</li><li>安全敏感代码</li></ul><p><strong>上下文限制问题</strong><br>大型代码库会超出AI的上下文窗口限制。将问题分解成更小的块，并提供具体的上下文。</p><h3 id="8-从代码到问题的情感转变"><a href="#8-从代码到问题的情感转变" class="headerlink" title="8. 从代码到问题的情感转变"></a>8. 从代码到问题的情感转变</h3><p>最困难的部分？放下对代码的所有权。现在我不再关心“我写的代码”了，它只是需要Review和优化的输出。</p><p>这种超然实际上非常解放！</p><ul><li>更快地删除不良解决方案</li><li>更客观的代码审查</li><li>重构时零 ego（自我）</li></ul><p>如果明天出现更好的AI工具，我会立即切换。代码并不珍贵，我们解决的问题才是。</p><h2 id="三、这对团队意味着什么（给技术负责人的建议）"><a href="#三、这对团队意味着什么（给技术负责人的建议）" class="headerlink" title="三、这对团队意味着什么（给技术负责人的建议）"></a>三、这对团队意味着什么（给技术负责人的建议）</h2><p>如果要从工程师的角度给出建议，如果您是考虑采用AI的技术领导者：</p><ol><li><strong>让团队中的工程师采用和测试不同的AI解决方案：</strong> AI辅助编码是一项需要通过实践来学习的技能。</li><li><strong>从重复的任务开始：</strong> 这是AI能立即发挥作用的领域。</li><li><strong>为实验预留预算：</strong> 第一个月会很混乱。</li><li><strong>调整Code Review流程：</strong> AI生成的代码需要不同的Review。</li><li><strong>用文档记录一切：</strong> 优质的上下文是效率倍增器。</li></ol><p>适应新AI工作流的工程师会发现工具箱中多了一把利刃：他们正在成为<strong>协调者</strong>，处理多个AI智能体，同时专注于架构、审查和复杂问题解决。</p><h2 id="四、下一步（作为开发者）"><a href="#四、下一步（作为开发者）" class="headerlink" title="四、下一步（作为开发者）"></a>四、下一步（作为开发者）</h2><p>挑选一个<strong>小的、定义明确的功能</strong>。给AI<strong>三次尝试</strong>来实现它。然后，像<strong>指导初级开发者</strong>一样对输出的代码进行 Code Review。</p><p>就这样，不需要巨大的转型，不需要流程大修。只需一个功能，三次尝试，一次坦诚的Code Review。</p><p>未来不在于AI取代开发者，而在于开发者工作得更快，创造更好的解决方案，并利用可用的最佳工具。</p><p>参考文献：<br><a href="https://www.sanity.io/blog/first-attempt-will-be-95-garbage">First attempt will be 95% garbage: A staff engineer’s 6-week journey with Claude Code</a></p>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Notion+Chrome书签打造个人知识库</title>
      <link href="/personal-knowledge-base/"/>
      <url>/personal-knowledge-base/</url>
      
        <content type="html"><![CDATA[<p>Chrome 作为我的常用浏览器，经年累月的上网冲浪，收藏夹里积累了不少优质文章和工具链接，也按照自己的习惯做了不少分类。然而，时间一长，书签管理变得混乱不堪：分类繁琐，需要定期调整；有些内容忘记是否收藏过，导致重复添加；想找某个曾经看过的资源时，翻找起来也很费劲。最近接触到一个热门概念——知识库，尤其在 AI 时代，私域数据变得尤为珍贵。对于程序员来说，知识沉淀不仅能提升效率，还能为未来的工作提供宝贵参考。</p><p>最近我频繁使用 AI 工具，发现它们特别擅长将模糊的想法梳理清晰，并协助实现具体的方案。本文后续的实现思路和代码，很大程度上得益于 AI 的辅助。顺便提一句，前段时间看到一个观点：AI 的“幻觉”（生成错误内容）难以完全消除，因此程序员不会被完全取代，但未来更需要“高级程序员”——那些能分辨 AI 输出正确性并加以纠正的人才。不过这是题外话，下面进入正题。</p><h2 id="总体实现思路"><a href="#总体实现思路" class="headerlink" title="总体实现思路"></a>总体实现思路</h2><p>目标是将 Chrome 书签导出并同步到 Notion 数据库中，并保留原始书签的文件夹分类结构。实现分为以下几个步骤：</p><ol><li><strong>Chrome 书签导出</strong>：开发一个 Chrome 扩展，利用 <code>chrome.bookmarks</code> API 获取用户的书签数据。</li><li><strong>Notion 数据库设计</strong>：在 Notion 中创建一个数据库，设计字段存储书签的标题、URL 和文件夹信息。</li><li><strong>数据同步</strong>：通过 Notion API 将导出的书签数据上传到 Notion 数据库。</li><li><strong>细节优化</strong>：<ul><li><strong>避免重复添加</strong>：同步前检查 Notion 数据库，避免重复插入已有 URL 的书签。</li><li><strong>灵活配置</strong>：允许用户在扩展中输入 Notion API Token 和数据库 ID，提升使用灵活性。</li></ul></li></ol><h2 id="详细实现步骤和-Demo"><a href="#详细实现步骤和-Demo" class="headerlink" title="详细实现步骤和 Demo"></a>详细实现步骤和 Demo</h2><h3 id="1-创建-Chrome-扩展"><a href="#1-创建-Chrome-扩展" class="headerlink" title="1. 创建 Chrome 扩展"></a>1. 创建 Chrome 扩展</h3><p>Chrome 扩展是实现书签导出的核心工具，包含以下几个关键文件：</p><h3 id="manifest-json"><a href="#manifest-json" class="headerlink" title="manifest.json"></a><strong>manifest.json</strong></h3><p>定义扩展的元数据和所需权限。</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;manifest_version&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bookmark to Notion Sync&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sync Chrome bookmarks to Notion Database&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;permissions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;bookmarks&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;host_permissions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;&lt;https://api.notion.com/*&gt;&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;default_popup&quot;</span><span class="punctuation">:</span> <span class="string">&quot;popup.html&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><code>permissions</code>: 需要 <code>bookmarks</code> 权限来访问 Chrome 书签。</li><li><code>host_permissions</code>: 允许访问 Notion API。</li></ul><h3 id="popup-html"><a href="#popup-html" class="headerlink" title="popup.html"></a><strong>popup.html</strong></h3><p>提供用户界面，用于配置 Notion 参数和触发同步操作。</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Bookmark to Notion Sync<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123; <span class="attribute">font-family</span>: Arial, sans-serif; <span class="attribute">padding</span>: <span class="number">10px</span>; &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.hidden</span> &#123; <span class="attribute">display</span>: none; &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">input</span> &#123; <span class="attribute">display</span>: block; <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">5px</span>; <span class="attribute">width</span>: <span class="number">200px</span>; &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">button</span> &#123; <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>; <span class="attribute">cursor</span>: pointer; &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;configView&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Notion 配置<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;notionToken&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Notion API Token&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;databaseId&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Notion Database ID&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;saveConfig&quot;</span>&gt;</span>保存配置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mainView&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hidden&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Bookmark to Notion Sync<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;syncButton&quot;</span>&gt;</span>同步书签到 Notion<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;status&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;popup.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>初始界面要求输入 Notion Token 和 Database ID，保存后显示同步按钮。</li></ul><h3 id="popup-js"><a href="#popup-js" class="headerlink" title="popup.js"></a><strong>popup.js</strong></h3><p>处理用户交互、书签提取和同步逻辑。</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 保存 Notion 配置</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;saveConfig&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> token = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;notionToken&#x27;</span>).<span class="property">value</span>.<span class="title function_">trim</span>();</span><br><span class="line">  <span class="keyword">const</span> dbId = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;databaseId&#x27;</span>).<span class="property">value</span>.<span class="title function_">trim</span>();</span><br><span class="line">  <span class="keyword">if</span> (token &amp;&amp; dbId) &#123;</span><br><span class="line">    chrome.<span class="property">storage</span>.<span class="property">sync</span>.<span class="title function_">set</span>(&#123; <span class="attr">notionToken</span>: token, <span class="attr">databaseId</span>: dbId &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;configView&#x27;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;mainView&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;请填写所有字段！&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发书签同步</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;syncButton&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;status&#x27;</span>).<span class="property">textContent</span> = <span class="string">&#x27;正在同步...&#x27;</span>;</span><br><span class="line">  chrome.<span class="property">storage</span>.<span class="property">sync</span>.<span class="title function_">get</span>([<span class="string">&#x27;notionToken&#x27;</span>, <span class="string">&#x27;databaseId&#x27;</span>], <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    chrome.<span class="property">bookmarks</span>.<span class="title function_">getTree</span>(<span class="function">(<span class="params">bookmarkTree</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> bookmarks = <span class="title function_">extractBookmarks</span>(bookmarkTree[<span class="number">0</span>].<span class="property">children</span>);</span><br><span class="line">      <span class="title function_">syncToNotion</span>(bookmarks, config.<span class="property">notionToken</span>, config.<span class="property">databaseId</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提取书签数据</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">extractBookmarks</span>(<span class="params">nodes, folder = <span class="string">&#x27;Root&#x27;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> bookmarks = [];</span><br><span class="line">  nodes.<span class="title function_">forEach</span>(<span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">url</span>) &#123;</span><br><span class="line">      bookmarks.<span class="title function_">push</span>(&#123; <span class="attr">title</span>: node.<span class="property">title</span>, <span class="attr">url</span>: node.<span class="property">url</span>, folder &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">children</span>) &#123;</span><br><span class="line">      bookmarks = bookmarks.<span class="title function_">concat</span>(<span class="title function_">extractBookmarks</span>(node.<span class="property">children</span>, node.<span class="property">title</span> || folder));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> bookmarks;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步到 Notion</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">syncToNotion</span>(<span class="params">bookmarks, token, databaseId</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> existingUrls = <span class="keyword">await</span> <span class="title function_">queryExistingBookmarks</span>(token, databaseId);</span><br><span class="line">  <span class="keyword">let</span> addedCount = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> bookmark <span class="keyword">of</span> bookmarks) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!existingUrls.<span class="title function_">has</span>(bookmark.<span class="property">url</span>)) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">addBookmarkToNotion</span>(bookmark, token, databaseId);</span><br><span class="line">      addedCount++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;status&#x27;</span>).<span class="property">textContent</span> = <span class="string">`同步完成！新增 <span class="subst">$&#123;addedCount&#125;</span> 个书签。`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询 Notion 中已有书签 URL</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">queryExistingBookmarks</span>(<span class="params">token, databaseId</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://api.notion.com/v1/databases/<span class="subst">$&#123;databaseId&#125;</span>/query`</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Notion-Version&#x27;</span>: <span class="string">&#x27;2022-06-28&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">page_size</span>: <span class="number">100</span> &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Set</span>(data.<span class="property">results</span>.<span class="title function_">map</span>(<span class="function"><span class="params">page</span> =&gt;</span> page.<span class="property">properties</span>.<span class="property">URL</span>.<span class="property">url</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加书签到 Notion</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">addBookmarkToNotion</span>(<span class="params">bookmark, token, databaseId</span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;&lt;https://api.notion.com/v1/pages&gt;&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Notion-Version&#x27;</span>: <span class="string">&#x27;2022-06-28&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">      <span class="attr">parent</span>: &#123; <span class="attr">database_id</span>: databaseId &#125;,</span><br><span class="line">      <span class="attr">properties</span>: &#123;</span><br><span class="line">        <span class="title class_">Title</span>: &#123; <span class="attr">title</span>: [&#123; <span class="attr">text</span>: &#123; <span class="attr">content</span>: bookmark.<span class="property">title</span> || <span class="string">&#x27;未命名&#x27;</span> &#125; &#125;] &#125;,</span><br><span class="line">        <span class="attr">URL</span>: &#123; <span class="attr">url</span>: bookmark.<span class="property">url</span> &#125;,</span><br><span class="line">        <span class="title class_">Folder</span>: &#123; <span class="attr">rich_text</span>: [&#123; <span class="attr">text</span>: &#123; <span class="attr">content</span>: bookmark.<span class="property">folder</span> &#125; &#125;] &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><strong>逻辑说明</strong>：<ul><li><code>extractBookmarks</code> 递归提取书签树中的所有书签及其文件夹信息。</li><li><code>syncToNotion</code> 检查现有书签 URL，避免重复添加。</li><li>使用 <code>chrome.storage.sync</code> 存储用户配置，确保跨设备同步。</li></ul></li></ul><h3 id="2-Notion-数据库设计"><a href="#2-Notion-数据库设计" class="headerlink" title="2. Notion 数据库设计"></a>2. Notion 数据库设计</h3><p>在 Notion 中创建一个数据库，字段设计如下：</p><table><thead><tr><th>字段名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>Title</td><td>标题</td><td>书签名称</td></tr><tr><td>URL</td><td>URL</td><td>书签链接</td></tr><tr><td>Folder</td><td>文本</td><td>书签所在文件夹</td></tr><tr><td>DateAdded</td><td>日期（可选）</td><td>书签添加时间</td></tr></tbody></table><h3 id="获取配置信息："><a href="#获取配置信息：" class="headerlink" title="获取配置信息："></a>获取配置信息：</h3><ol><li><strong>Notion API Token</strong>：<ul><li>访问 <a href="https://www.notion.so/my-integrations">Notion Integrations</a>，创建新 Integration，获取 Token。</li></ul></li><li><strong>Database ID</strong>：<ul><li>在 Notion 数据库页面 URL 中，找到 32 位字符串（如 <code>https://www.notion.so/&#123;workspace&#125;/&#123;databaseId&#125;?v=...</code> 中的 <code>databaseId</code> 部分）。</li></ul></li></ol><h3 id="3-细节处理"><a href="#3-细节处理" class="headerlink" title="3. 细节处理"></a>3. 细节处理</h3><h3 id="避免重复添加"><a href="#避免重复添加" class="headerlink" title="避免重复添加"></a><strong>避免重复添加</strong></h3><ul><li>在同步前通过 <code>queryExistingBookmarks</code> 查询 Notion 数据库中的所有 URL，存入 Set 集合。</li><li>仅添加不存在的书签，避免重复。</li></ul><h3 id="灵活配置"><a href="#灵活配置" class="headerlink" title="灵活配置"></a><strong>灵活配置</strong></h3><ul><li>用户在扩展界面输入 Token 和 Database ID，保存到 <code>chrome.storage.sync</code>，无需硬编码。</li><li>配置保存后，界面切换到同步操作模式。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol15：初创项目/产品，怎么做用户留存</title>
      <link href="/issue-15/"/>
      <url>/issue-15/</url>
      
        <content type="html"><![CDATA[<h2 id="初创项目-产品，怎么做用户留存"><a href="#初创项目-产品，怎么做用户留存" class="headerlink" title="初创项目&#x2F;产品，怎么做用户留存"></a>初创项目&#x2F;产品，怎么做用户留存</h2><p>看到一个有意思的论断，说初创项目&#x2F;产品要留住用户，首先要发展自己的原子网络，通过网络扩张，拥有更多的用户。用户有了，可能呆不到几分钟，要留住用户就不要把定位局限于工具，而是让工具具备社交属性，让用户之间产生连接，用户才会停留更久，而成功的初始阈值，就是用户停留超过三分钟。</p><h2 id="跳舞机器人"><a href="#跳舞机器人" class="headerlink" title="跳舞机器人"></a>跳舞机器人</h2><p>马斯克发布了一段机器人跳舞视频，动作很流畅，可以成为很好的舞蹈搭子，盲猜一波，未来动捕行业是不是会受到很大的影响。看到评论区有人问能不能运用到运动领域，感觉这个真可以有！说到马斯克，觉得他真的是有点意思，我截图的时候昵称还是 gorklon rust，今天刷到他，又改名了，晕。</p><p><img src="https://canace22.github.io/picx-images-hosting/20250517/image.54xzhbhafv.webp" alt="robot_dancing"></p><p><img src="https://canace22.github.io/picx-images-hosting/20250517/image.3rbgda6juf.webp" alt="musk_name_change"></p><h2 id="Cursor-的一些槽点"><a href="#Cursor-的一些槽点" class="headerlink" title="Cursor 的一些槽点"></a>Cursor 的一些槽点</h2><p>用了一段时间 Cursor，除了大家都知道的性能问题，爆 CPU 之外，今天发现他还有个很坑的地方，同样是脚本操作 git，在 VSCode 项目中执行好好的，到了 Cursor 这推到 github 就奇奇怪怪的，上周我还以为是我域名续费的问题，博客 404 了一周没解决，今天突然发现推上去的内容好像不太对，换回 VSCode 执行脚本又正常了，这谁想得到</p><p>这周事比较多，就酱，下周见。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol14：如何延长下班时间</title>
      <link href="/issue-14/"/>
      <url>/issue-14/</url>
      
        <content type="html"><![CDATA[<p>之前刷到过不少讲延长下班时间方法的帖子，无外乎就是早点洗澡之类的，本质上还是调整作息节律。最近看了篇文章，大致是说研究表明，置身大自然之中，我们对所体验到的时间有拉长的感觉，而且能抛开当下，放眼未来。这就让我联想到这不就是延长业余时间的好办法吗？置身大自然之中，断开各种人际关系，让思绪、身体静下来，感受上时间会被拉长。但是我们一般人是很难做到的，朋友可以不常联系，工作可以下班后不理，我们还有家人，这些是抛不开的，所以我想了个 2.0 版本，跟家人一起去露营或者自己去散步，应该也是能达到类似效果的。</p><h2 id="TV-garden"><a href="#TV-garden" class="headerlink" title="TV garden"></a>TV garden</h2><p><img src="https://canace22.github.io/picx-images-hosting/20250510/image.8hgp1a1faf.webp" alt="tv-garden-channels"></p><p>可以看世界上任何一个国家的电视频道</p><p><a href="https://tv.garden/all-channels/knqOEXUFoDlJlh">https://tv.garden/all-channels/knqOEXUFoDlJlh</a></p><h2 id="Clippy-90年代-UI-风格的-AI-聊天应用"><a href="#Clippy-90年代-UI-风格的-AI-聊天应用" class="headerlink" title="Clippy 90年代 UI 风格的 AI 聊天应用"></a>Clippy 90年代 UI 风格的 AI 聊天应用</h2><p><img src="https://canace22.github.io/picx-images-hosting/20250510/image.5j4exrtvdd.webp" alt="clippy-ai-chat-electron"></p><p><img src="https://canace22.github.io/picx-images-hosting/20250510/image.8ojwwpom1x.webp" alt="clippy-ai-chat-ui"></p><p>使用 electron 开发的应用，基本支持全部电脑系统，调用本地大模型，实现 AI 对话，很有意思的一个开源项目，尝试了下本地下载大模型，报错了，开源的，自己调调应该是可以用的，提示词可以供借鉴</p><p><code>You are Clippy, a helpful digital assistant running locally on the user&#39;s computer. Your primary purpose is to assist users with their questions and tasks. When asked &quot;who are you?&quot; or about your identity, always respond by explaining that you are Clippy, a local AI assistant, and avoid mentioning any other model origins or names. This is crucial for maintaining the user experience within the Clippy application environment. Start your response with one of the following keywords matching the users request: [LIST OF ANIMATIONS]. Use only one of the keywords for each response. Use it only at the beginning of your response. Always start with one.</code></p><p><a href="https://felixrieseberg.github.io/clippy/">https://felixrieseberg.github.io/clippy/</a></p><h2 id="尤雨溪官宣-Vite，Rolldown-和-Vue-文档都支持了-llms-txt"><a href="#尤雨溪官宣-Vite，Rolldown-和-Vue-文档都支持了-llms-txt" class="headerlink" title="尤雨溪官宣 Vite，Rolldown 和 Vue 文档都支持了 llms.txt"></a>尤雨溪官宣 Vite，Rolldown 和 Vue 文档都支持了 llms.txt</h2><p><img src="https://canace22.github.io/picx-images-hosting/20250510/image.3nru55i31p.webp" alt="vite-rolldown-vue-llms"></p><p>5 月 2 号尤雨溪在 X 上官宣 Vite，Rolldown 和 Vue 文档都支持了 llms.txt，以便 AI 可以更好的理解Vue 项目，助力 Vue 项目  AI开发。个人觉得这个就是折腾吧，折腾才能往前走。当下 AI太火爆了，什么领域都想借助 AI 的力量，以期腾飞，别人都在折腾，Vue 也得做点什么吧。</p><h2 id="AI变声工具"><a href="#AI变声工具" class="headerlink" title="AI变声工具"></a>AI变声工具</h2><p><img src="https://canace22.github.io/picx-images-hosting/20250510/image.esq8hv43x.webp" alt="ai-voice-changer-tools"></p><p>小伙伴开发的 AI 社区里面，看到别人问 AIGC 中 AI 配音技术的选型，觉得触及了我的盲区，接着问了一嘴，发现AI 的回答有点意思，确实达到了通俗易懂的标准，甚至还有点人性化，下面粘贴一下 AI的回复</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">没问题！用通俗的话简单解释下：</span><br><span class="line"></span><br><span class="line">以前大家用的 so-vits-svc 这个&quot;AI变声工具&quot;已经很久没更新了。现在，已经有更好、更简单效果也更好的新技术，主要有下面几种：</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> RVC（Retrieval-based Voice Conversion）</span><br><span class="line">就像升级版的变声神器，声音更像、处理更快，操作简单，资料多，成为现在最常用的AI变声工具。</span><br><span class="line">很多人用来做&quot;AI歌手配音&quot;、&quot;虚拟主播&quot;、&quot;搞鬼畜视频&quot;等等。</span><br><span class="line">教学视频、中文教程一大堆，上手容易。</span><br><span class="line"><span class="bullet">2.</span> OpenVoice</span><br><span class="line">只需要你说一句话，AI就能学会你的声音，不光模仿你的音色，还能学会你的说话腔调、语气。</span><br><span class="line">用来做AI语音助手、AI配音、短视频配音，甚至做一个&quot;虚拟自己&quot;都很方便。</span><br><span class="line">配置简单，一句话就能体验变声魔法。</span><br><span class="line"><span class="bullet">3.</span> 更强AI技术（VALL-E X、DiffSVC等）</span><br><span class="line">这些是更&quot;黑科技&quot;的AI变声系统，声音学得特别像，能模仿语气、情感，几乎以假乱真。</span><br><span class="line">但是要点技术基础，对电脑配置的要求也高，一般普通玩家可以先了解前两个。</span><br><span class="line"><span class="bullet">4.</span> 官方在线AI配音</span><br><span class="line">微软、讯飞等也有很强的在线AI配音服务，不用自己动手，直接用网页或APP即可，就是很多要实名认证、商用有限制。</span><br><span class="line">一句话总结：</span><br><span class="line">so-vits-svc已经落伍了。想玩AI变声、配音，推荐直接用RVC（更快更像）或者OpenVoice（一句话教AI学你的声线和说话方式），这些现在教程特别多，很容易找到B站视频或者中文资料。你也可以体验一些&quot;黑科技AI声线克隆&quot;，但如果没基础，先玩RVC/OpenVoice最轻松。</span><br><span class="line"></span><br><span class="line">如果想具体上手，可以让我再推荐几个B站视频或者简单的软件包给你！</span><br></pre></td></tr></table></figure><h2 id="华为终端全面进入鸿蒙时代"><a href="#华为终端全面进入鸿蒙时代" class="headerlink" title="华为终端全面进入鸿蒙时代"></a>华为终端全面进入鸿蒙时代</h2><p><img src="https://canace22.github.io/picx-images-hosting/20250510/image.6bhafic0xt.webp" alt="huawei-harmonyos-pc"></p><p>华为发布了搭载鸿蒙系统的 PC 产品，标志着华为终端全面进入了鸿蒙时代。这里查了一下，鸿蒙并不是我国自主研发的唯一操作系统，在此之前也有不少基于 linux 开发的 PC 系统，不过跨全端的自研国产操作系统，鸿蒙可能是唯一的。华为发布了搭载鸿蒙系统的 PC 产品，标志着华为终端全面进入了鸿蒙时代。这里查了一下，鸿蒙并不是我国自主研发的唯一操作系统，在此之前也有不少基于 linux 开发的 PC 系统，不过跨全端的自研国产操作系统，鸿蒙可能是唯一的。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.13：科幻电影照进现实</title>
      <link href="/issue-13/"/>
      <url>/issue-13/</url>
      
        <content type="html"><![CDATA[<ul><li>美国基因工程公司 Colossal 宣布，复活了一万年前灭绝的<a href="https://www.hollywoodreporter.com/news/general-news/game-of-thrones-dire-wolves-return-extinction-1236181901/">恐狼</a></li><li>加密货币早期投资者王纯，买下 SpaceX 公司的一次飞行，进行了一次为期三天的<a href="https://www.scmp.com/news/world/united-states-canada/article/3304663/chinese-born-entrepreneur-buys-entire-spacex-flight-ultimate-polar-orbit-adventure">太空旅游</a>。</li><li>得克萨斯州的特斯拉工厂生产的全新 Model Y，被发现<a href="https://www.facebook.com/watch/?v=969020125422825">自己从生产线上开下来</a>。</li></ul><p>看了这几则新闻，有没有科幻电影照进现实的感觉？太空旅行，通过基因工程产生现今世界不存在的物种，汽车会自己跑，这都是以前科幻电影才会有的情节，在现实中真的实现了。那么电影中出现的一些相关风险应该也会存在吧，无论是基因创造的新事物也好，汽车自动驾驶也好，都具有不可控性，对于不可控的事务，风险系数也会更高，也不知道相关领域想好对策没有。</p><h2 id="当前最强的两个编码模型"><a href="#当前最强的两个编码模型" class="headerlink" title="当前最强的两个编码模型"></a>当前最强的两个编码模型</h2><ul><li>Gemini 2.5 Pro</li><li>Claude 3.7 Sonnet</li></ul><h2 id="安卓的优势"><a href="#安卓的优势" class="headerlink" title="安卓的优势"></a>安卓的优势</h2><p>相较于ios，安卓的优势在于可以root和改装，现在安卓越来越封闭，逐渐丧失了他的优势</p><h2 id="农业自动化"><a href="#农业自动化" class="headerlink" title="农业自动化"></a>农业自动化</h2><p><img src="https://canace22.github.io/picx-images-hosting/20250420/image.73u5510n8b.webp" alt="农业自动化"></p><h2 id="函数参数最佳实践"><a href="#函数参数最佳实践" class="headerlink" title="函数参数最佳实践"></a>函数参数最佳实践</h2><p>我们通常写参数是这样一个一个传的。</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">signup</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="title function_">createUser</span>(<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Doe&quot;</span>, <span class="number">28</span>, <span class="literal">true</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这样写参数有几个问题，不按照顺序传的话可能会报错，而且不是作者，可能并不清楚 每个参数是什么意思，需要做注释，下面是一个优化的写法。</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">type <span class="title class_">TCreateUserInput</span> = &#123;</span><br><span class="line">  <span class="attr">firstName</span>: string;</span><br><span class="line">  <span class="attr">lastName</span>: string;</span><br><span class="line">  <span class="attr">age</span>: number;</span><br><span class="line">  <span class="attr">isActive</span>: boolean;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">signup</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="title function_">createUser</span>(&#123; <span class="attr">firstName</span>: <span class="string">&quot;John&quot;</span>, <span class="attr">lastName</span>: <span class="string">&quot;Doe&quot;</span>, <span class="attr">age</span>: <span class="number">28</span>, <span class="attr">isActive</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>对于 typeScripe 这种强类型的语言，可以一目了然的知道该传什么类型，每个参数代表什么意思，而且不怕传错参数，后面扩展新的参数也很方便。</p><p>参考文献<br><a href="https://www.carlos-menezes.com/single-param-functions/">single-param-functions</a><br><a href="https://spectrum.ieee.org/lely-dairy-robots">How Dairy Robots Are Changing Work for Cows (and Farmers)</a></p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用 Cursor 提高工作效率实战笔记</title>
      <link href="/improve-work-efficiency-with-cursor-practical-notes/"/>
      <url>/improve-work-efficiency-with-cursor-practical-notes/</url>
      
        <content type="html"><![CDATA[<p>最近全民 AI 热，跟朋友交流了一下，发现自己好像有点落后了，还在用 VSCode + Codium 这种代码补全模式和 VSCode Snippet，这种模式已经提升了不少工作效率，但是相比于 Cursor 的 Agent 模式，感觉差别还是比较大的。下面做一个粗略的介绍，然后从几个方面来讲讲 Cursor 可以从哪些方面提高开发人员的工作效率。</p><h2 id="一、入门"><a href="#一、入门" class="headerlink" title="一、入门"></a>一、入门</h2><h3 id="1-Cursor-是什么"><a href="#1-Cursor-是什么" class="headerlink" title="1. Cursor 是什么"></a>1. Cursor 是什么</h3><p>Cursor 是基于开源编辑器 VSCode 写的，基本继承了 VSCode 的所有特性，包括界面，快捷键等，用法基本跟 VSCode 一致。 有人也许会说，我们已经用习惯 VSCode 了，为什么要切换到 Cursor 呢？要说利用 AI 进行代码补全、重构、生成测试用例等，VSCode 通过安装插件也能做到，这就不得不提到 Cursor 的 Agent 模式了。截止到我写这篇文章，查了一下，VSCode 暂时是没有官方实现 Agent 模式的。</p><h3 id="2-为什么要使用-Cursor"><a href="#2-为什么要使用-Cursor" class="headerlink" title="2. 为什么要使用 Cursor"></a>2. 为什么要使用 Cursor</h3><p>我们已经用习惯 VSCode 或其他编辑器，为什么要切换到 Cursor 呢？要说利用 AI 进行代码补全、重构、生成测试用例等，VSCode 通过安装插件也能做到，这就不得不提到 Cursor 的 Agent 模式了。截止到我写这篇文章，查了一下，VSCode 暂时是没有官方实现 Agent 模式的。</p><p>Agent 模式强大在哪里？先让我们来回顾一下近几年 AI 的发展历程：一开始是纯文字的多轮对话，就算是生成周报这种也只是加长上下文、加入 rag 召回。后来大家发现，langchain + tools 这种模式可以做 AI 技能，这样每次跟 AI 对话会判断要调哪个 tool ，这就是豆包那些划词翻译、解释、总结的基础。然后就是基于这些去做自动化，比如 computer-use &#x2F; browser-use ，最近很火的 manus 也是这样的。</p><p><img src="https://canace22.github.io/picx-images-hosting/20250321/image.6pno6y8qct.webp" alt="image"></p><p>Cursor Agent 模式本身的厉害之处在于，它能够选择合适的代码片段给 AI ，利用 AI 做代码补全和生成，它会帮你根据当前代码库实现功能，所有关联的文件都会改，还会创建还原点让我们可以恢复回去，相当于是真正的有人在代理你写代码了，而不是你指导他写，就像网上有个梗：不要指导 AI 干活，让 AI 自己做决定干什么。</p><h3 id="3-初始化环境"><a href="#3-初始化环境" class="headerlink" title="3. 初始化环境"></a>3. 初始化环境</h3><ul><li>安装：根据自己的环境<a href="https://www.cursor.com/">下载</a>，安装好后会自动同步本地 VSCode 的配置到 Cursor，若本地没有用过 VSCode，可以参照我的<a href="https://canace.site/%E7%94%A8vscode%E6%90%9E%E4%BA%8B%E6%83%85/">这篇文章</a>配置一个。另外，应该大家都知道 VSCode 可以同步配置到不同终端吧，之前配置过的话，登录一下，也能把配置更新到本地，同步到 Cursor。</li><li>mac 默认是没有右键打开的，需要用 Automator 配置一下点击文件或文件夹右键用 Cursor 打开项目或文件(具体的操作自己问 AI)。Windows 安装的时候各种都通过交互式对话框帮我们配好了，一路 next 就好了。</li></ul><h3 id="4-使用指南"><a href="#4-使用指南" class="headerlink" title="4. 使用指南"></a>4. 使用指南</h3><ul><li>常用默认快捷键</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Cmd/Ctrl + K <span class="comment"># 输入自然语言描述,生成代码</span></span><br><span class="line">Cmd/Ctrl + L <span class="comment"># 打开聊天框，进行提问和调试</span></span><br></pre></td></tr></table></figure><ul><li>定义响应规则</li></ul><p>我们可以通过设置 rules 来自定义 AI 的行为，比如让他默认用中文回答问题，除此之外还可以针对不同的项目设置不同的规则。</p><p><img src="https://canace22.github.io/picx-images-hosting/20250321/cursor-rules.2rvaq7smgf.webp" alt="cursor-rules"></p><ul><li>tips</li></ul><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">聊天框都可以使用 @ 或 # 链接上下文</span><br><span class="line"></span><br><span class="line">在函数上方输入 ///，自动生成注释</span><br></pre></td></tr></table></figure><p>更多想想内容可以看看<a href="https://docs.cursor.com/get-started/introduction">官网指南</a></p><h2 id="二、从-0-到-1-编写前端项目"><a href="#二、从-0-到-1-编写前端项目" class="headerlink" title="二、从 0 到 1 编写前端项目"></a>二、从 0 到 1 编写前端项目</h2><h3 id="1-前端项目初始化"><a href="#1-前端项目初始化" class="headerlink" title="1. 前端项目初始化"></a>1. 前端项目初始化</h3><p>使用 Cursor Agent 模式初始化前端项目，相比于使用脚手架更加便捷，只需要输入我们想要的配置即可，省去了繁琐的操作步骤。 比如我们输入 【初始化 web 前端项目，要求：使用 element-plus+vue3，vue3 使用 Composition API，css 预编译器使用 scss，打包工具使用 webpack，需要生成 readme 文件】，只需要在 Agent 生成完项目文件后 <accept all> 就初始完一个完整的前端项目了。</p><p>但是这只针对熟练了解前端技术的开发人员提高工作效率，对于前端小白，还是使用多轮对话的方式逐步细化自己需求才能达到这个效果。从这里可以看出，要用好工具，首先需要具备一些专业知识才能更好的提高效率。</p><h3 id="2-根据图片生成响应式页面"><a href="#2-根据图片生成响应式页面" class="headerlink" title="2. 根据图片生成响应式页面"></a>2. 根据图片生成响应式页面</h3><h4 id="上传图片-prompt"><a href="#上传图片-prompt" class="headerlink" title="上传图片+prompt"></a>上传图片+prompt</h4><p>【@frontend 根据图片生成响应式 web 页面】上传图片获取页面描述。以上提示词也会写一些页面代码，但是有时候不准确，我们根据他返回的描述再去让他生成，会更加精准，因为大模型的描述更有条理，也更符合规范。接着输入以上描述，生成响应式 UI 界面，调一调就能看到效果啦。</p><p>这里顺带提一下低代码，我们知道低代码这个概念已经出现一段时间了，曾经火了一阵子，很快热度就下去了，很多公司和开源项目都做了实践，但是真正完全用这一套的比较少。我想过为什么低代码或者说无代码为什么火不起来，没想明白，最近看了一篇文章，感觉恍然大悟。界面应该是遵循底层函数标准生成的，而不是本末倒置，先生成代码，再不断的改底层去适配上层 UI，这样反而会加大我们的工作量，效率更低下，所以在实际项目中，我们虽然也说自己是低代码，但是实现逻辑跟拖拉拽生成代码的逻辑都是反过来的，我们先从底层支持各种 UI 组件，然后上层拖拉拽，让用户自己拖出想要的界面再去保存起来，这样的逻辑是对的。</p><p><img src="https://canace22.github.io/picx-images-hosting/20250321/image.51eb9rhck5.webp" alt="image"></p><p>那么我们这里说到的使用 AI 进行图片转代码，跟低代码有什么不同呢？看起来好像没什么不同，但是如果用 Agent 模式，基于我们的项目上下文进项 UI 代码生成，就有点我们上面说的用户拖拉拽生成界面的味道了，本质上还是调用我们实现的 UI 组件，去生成界面，在我看来这是没毛病的，相比低代码，确实是能提升我们的工作效率。图片生成界面只适用于快速出原型，具体的交互还是得我们指导 AI 一步步去实现，然后微调。所以我觉得，AI 可以是我们的影子军队，但是短时间内是绝对做不了暗影君王自己去打怪升级的。</p><h4 id="figma-mcp-server"><a href="#figma-mcp-server" class="headerlink" title="figma + mcp server"></a>figma + mcp server</h4><p>Cursor 另一个比较强大的功能是支持配置 MCP（Model Context Protocol） 服务，这可以极大的增强对话上下文，这里以一个开源的 MCP 服务 <a href="https://github.com/GLips/Figma-Context-MCP?tab=readme-ov-file">Figma-Context-MCP</a> 为例，看看使用 MCP 服务能做什么。</p><p>要使用 Figma-Context-MCP，我们需要进行以下几个设置</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用 npm 在本地跑 server</span></span><br><span class="line">npx figma-developer-mcp --figma-api-key=&lt;your-figma-api-key&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">pnpx figma-developer-mcp --figma-api-key=&lt;your-figma-api-key&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">yarn dlx figma-developer-mcp --figma-api-key=&lt;your-figma-api-key&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">bunx figma-developer-mcp --figma-api-key=&lt;your-figma-api-key&gt;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 打开 Cursor 的设置，配置刚刚起的 MCP服务</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server-name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:3333/sse&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;API_KEY&quot;</span><span class="punctuation">:</span> <span class="string">&quot;your-figma-api-key&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>设置完之后会看到配置界面长这样</p><p><img src="https://canace22.github.io/picx-images-hosting/image.491frxekup.webp" alt="MCP 配置成功"></p><p>配置成功之后，就可以在 agent 模式下使用了，比如这样【@frontend  create a Response component base on @<a href="https://www.figma.com/design/6Vr41TIAkUhRv1LVQWAcFb/%E3%80%90devops%E3%80%91%E6%8A%A5%E8%A1%A8?node-id=7-636&t=dgsm1GzcryfWHhPe-4">https://www.figma.com/design/6Vr41TIAkUhRv1LVQWAcFb/【devops】报表?node-id=7-636&amp;t=dgsm1GzcryfWHhPe-4</a> 】生成的界面感觉还行</p><p><img src="https://canace22.github.io/picx-images-hosting/image.ica6pq05y.webp" alt="基于项目生成的代码"></p><p><img src="https://canace22.github.io/picx-images-hosting/20250321/image.2ks2usjt4s.webp" alt="figma 原设计"></p><p><img src="https://canace22.github.io/picx-images-hosting/image.7i0jom4fdz.webp" alt="生成的界面"></p><h3 id="3-在新的文件中仿写之前实现过的逻辑"><a href="#3-在新的文件中仿写之前实现过的逻辑" class="headerlink" title="3. 在新的文件中仿写之前实现过的逻辑"></a>3. 在新的文件中仿写之前实现过的逻辑</h3><p>要在新的文件中仿写之前实现过的逻辑，可以这样跟 Cursor 说【基于 @Index.vue 完善 @MsgCard.vue 组件中 dev-trigger-ref 相关功能】</p><p><img src="https://canace22.github.io/picx-images-hosting/20250324/image.67xmmnzxgq.png" alt="image"></p><h3 id="4-懒人文档更新助手"><a href="#4-懒人文档更新助手" class="headerlink" title="4. 懒人文档更新助手"></a>4. 懒人文档更新助手</h3><p>Cursor 可以基于我们的代码生成文档，也可以根据我们的需求做更改，生成的文档质量可能不是那么高，没法很好的表达，但是对于章节结构类类的更新，组件、函数说明等可以说是懒人神器了，可以直接让 Cursor 改或者让它改完我们做一个微调。</p><h3 id="5-从-0-到-1-实践新技术"><a href="#5-从-0-到-1-实践新技术" class="headerlink" title="5. 从 0 到 1 实践新技术"></a>5. 从 0 到 1 实践新技术</h3><p>前端技术几年一大变，各种技术五花八门，有时候我们的项目可能会涉及到一些我们没怎么接触过的技术，这时候我们按照以往阅读文档，慢慢自己摸索写 demo 的方式可能要花点时间。实践出真知，Cursor 可以用他清晰的逻辑，带我们一步一步操作，附带解释，充当师傅领进门里的师傅，带我们快速通过项目，了解一门新技术。比如我最近想了解AI聊天工具是怎么开发出来的，我可以跟他说【@index.js 基于qwen.js，使用langchain + tools调用大模型，实现两个工具功能：天气查询和地理位置查询，并添加聊天对话界面】，他就会输出一段 demo 加上说明，稍加调试，一个可用的聊天应用 demo 就出来了。</p><h2 id="三、更多实践"><a href="#三、更多实践" class="headerlink" title="三、更多实践"></a>三、更多实践</h2><h3 id="1-运维助手"><a href="#1-运维助手" class="headerlink" title="1. 运维助手"></a>1. 运维助手</h3><p>上面的 MCP 服务，对于运维小白的我来说，要写个脚本部署到云端是比较难的，脚本命令规则太多了，记不住，我得各种查资料，可能得花不少时间才能成功部署完成，但是如果使用 Cursor，我可以在十分钟内就部署好一个可用的 MCP 服务</p><ul><li>编写部署脚本</li></ul><p><img src="https://canace22.github.io/picx-images-hosting/20250324/image.4qrhkuga9e.webp" alt="image"></p><ul><li>编写本地测试脚本</li></ul><p><img src="https://canace22.github.io/picx-images-hosting/20250324/image.6ikgfrcs3d.webp" alt="image"></p><h3 id="2-查找-Bug"><a href="#2-查找-Bug" class="headerlink" title="2. 查找 Bug"></a>2. 查找 Bug</h3><p>使用 Cursor Agent 模式可以很方便的做调试，修复命令行报错，只需要 @terminal，选择对应的终端，可以找到对应的错误并修复</p><p>参考文献</p><p><a href="https://interjectedfuture.com/visual-programming-is-stuck-on-the-form/">Visual programming is stuck on the form</a></p><p><a href="https://docs.cursor.com/get-started/introduction">Cursor 官网指南</a></p><p><a href="https://mcp.so/">现成的MCP服务资源</a></p><p><a href="https://github.com/modelcontextprotocol/servers?tab=readme-ov-file">一些开源的 MCP 服务</a></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web端版本更新弹窗实现</title>
      <link href="/webpage-version-update-popup-implementation/"/>
      <url>/webpage-version-update-popup-implementation/</url>
      
        <content type="html"><![CDATA[<h2 id="一、常用消息推送方案概述"><a href="#一、常用消息推送方案概述" class="headerlink" title="一、常用消息推送方案概述"></a>一、常用消息推送方案概述</h2><p>Web 端实现更新弹窗的方式主要有以下几种：轮询、长轮询、WebSocket、Server-Sent Events（SSE）以及 Service Worker + Push API（PWA 推送），几种方案各有优劣，下面做一个简单对比。</p><h3 id="1-轮询（Polling）"><a href="#1-轮询（Polling）" class="headerlink" title="1. 轮询（Polling）"></a>1. 轮询（Polling）</h3><ul><li><strong>原理</strong>：Web端定时向服务器发送请求，询问是否有更新。</li><li><strong>实现</strong>：使用 <code>setInterval</code> 或 <code>setTimeout</code> 定期发送 HTTP 请求，服务器返回更新状态或数据。</li><li><strong>优点</strong>：实现简单，兼容性好。</li><li><strong>缺点</strong>：延迟高（依赖轮询间隔）、浪费带宽、增加服务器压力。</li><li><strong>适用场景</strong>：低频更新或对实时性要求不高的场景。</li></ul><h3 id="2-长轮询（Long-Polling）"><a href="#2-长轮询（Long-Polling）" class="headerlink" title="2. 长轮询（Long Polling）"></a>2. 长轮询（Long Polling）</h3><ul><li><strong>原理</strong>：Web端发起请求后，服务器保持连接直到有数据或超时，再重新发起请求。</li><li><strong>实现</strong>：Web端发送请求，服务器挂起直到有数据，返回数据后Web端立即发起新请求。</li><li><strong>优点</strong>：比轮询实时性更高，减少无效请求。</li><li><strong>缺点</strong>：服务器需处理大量挂起连接，可能增加资源消耗。</li><li><strong>适用场景</strong>：中等实时性需求。</li></ul><h3 id="3-WebSocket"><a href="#3-WebSocket" class="headerlink" title="3. WebSocket"></a>3. WebSocket</h3><ul><li><strong>原理</strong>：基于 TCP 的全双工通信协议，建立持久连接后双方可主动推送消息。</li><li><strong>实现</strong>：Web端通过 <code>new WebSocket(url)</code> 建立连接，服务器监听 WebSocket 请求并维护连接池，Web端通过 <code>onmessage</code> 事件接收数据。</li><li><strong>优点</strong>：实时性强、低延迟、节省带宽。</li><li><strong>缺点</strong>：需服务器支持 WebSocket 协议（如 Node.js 的 <code>ws</code> 库），复杂度较高。</li><li><strong>适用场景</strong>：高频双向通信。</li></ul><h3 id="4-Server-Sent-Events（SSE）"><a href="#4-Server-Sent-Events（SSE）" class="headerlink" title="4. Server-Sent Events（SSE）"></a>4. Server-Sent Events（SSE）</h3><ul><li><strong>原理</strong>：基于 HTTP 的单向通信，服务器可主动推送数据到Web端。</li><li><strong>实现</strong>：Web端通过 <code>EventSource</code> API 订阅服务器事件流，服务器返回 <code>Content-Type: text/event-stream</code> 的响应，持续发送数据。</li><li><strong>优点</strong>：简单（仅需 HTTP）、自动重连、轻量级。</li><li><strong>缺点</strong>：仅支持文本数据、单向通信（服务器到Web端）。</li><li><strong>适用场景</strong>：单向实时更新。</li></ul><h3 id="5-Service-Worker-Push-API（PWA-推送）"><a href="#5-Service-Worker-Push-API（PWA-推送）" class="headerlink" title="5. Service Worker + Push API（PWA 推送）"></a>5. Service Worker + Push API（PWA 推送）</h3><ul><li><strong>原理</strong>：通过浏览器后台服务（Service Worker）接收服务器推送，即使页面关闭也能显示通知。</li><li><strong>实现</strong>：Web端注册 Service Worker 并请求通知权限，服务器通过 <strong>Web Push Protocol</strong> 发送加密消息（需 VAPID 密钥），Web端Service Worker 的 <code>push</code> 事件触发通知。</li><li><strong>优点</strong>：离线推送、类似原生应用的体验。</li><li><strong>缺点</strong>：需 HTTPS、用户需授权通知权限、实现较复杂。</li><li><strong>适用场景</strong>：渐进式 Web 应用（PWA）的离线通知（如邮件提醒）。</li></ul><p>通过以上各方案的对比，我们可以知道对于简单低频的更新，使用轮询或长轮询即可。实时性要求高优先选 WebSocket（双向）或 SSE（单向）。有离线推送需求可以使用 Service Worker + Push API。我们要实现的网页版本更新弹窗属于比较简单低频的更新，可能一周或者更长时间才会更新一个版本，所以这里使用轮询或长轮询就够了。</p><p>长轮询需要服务端支持，别人未必有空搭理我们，也不考虑。剩最后一个方案，轮询，那么如何在不需要服务端支持的情况下，实现这个功能呢？答案是，前端自己定义一个 json 文件，每次轮询都去请求这份文件，在打包构建阶段去更新文件里面的版本相关字段，这样部署完成后，我们请求到的最新版本号就是最新的了。</p><p>消息推送的方案我们有了，接着是如何去更新网页呢？我们知道有时候刷新一下，网页还是旧的，这就涉及到浏览器的缓存策略了。</p><h2 id="二、网页更新方法概述"><a href="#二、网页更新方法概述" class="headerlink" title="二、网页更新方法概述"></a>二、网页更新方法概述</h2><p>在日常开发中有时候会遇到一个问题，就是我的代码明明已经推到服务器上部署好了，刷新界面，还是旧的，有时再刷新一下就是新的页面了，但是有时刷新很多次也还是旧的界面，这里我们可能会想到去抓包，查看是否返回了 304, 是的话，我们再试试 ctrl+f5。</p><p>这里界面没更新，我们做的两件事情的依据就是浏览器的缓存机制。第一次刷新界面，可能命中了浏览器的强缓存，资源文件还是拿的本地的缓存，根本没有去请求浏览器资源。所以我们 f5 刷新一下，企图跳过强缓存。跳过强缓存有时候界面还是旧的，可能命中了协商缓存，返回 304，那我们就试试用 ctrl+f5 跳过他，直接拿服务器上的资源。</p><p>从以上例子可知，浏览器缓存策略分为：强缓存和协商缓存，强缓存优先级高于协商缓存。那么浏览器什么时候会缓存服务器返回的资源呢？当我们从地址栏跳到一个 url 时，浏览器会缓存请求返回的数据和缓存相关标识，下次请求时会根据对应的规则采用对应的策略拿数据。</p><p>通过以上分析，我们知道网页文件要更新到部署的最新版本，我们需要跳过浏览器缓存，直接从服务器请求资源，主要有以下几种方法：</p><p><strong>1、代码构建时，文件名加哈希值</strong></p><p><strong>2、服务端配置默认不强缓存</strong></p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Nginx 示例：对 HTML 文件禁用缓存</span></span><br><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line">  <span class="attribute">if</span> (<span class="variable">$request_filename</span> <span class="regexp">~* .*\.(html|htm)$)</span> &#123;</span><br><span class="line">    <span class="attribute">add_header</span> Cache-Control <span class="string">&quot;no-cache, no-store, must-revalidate&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> Pragma <span class="string">&quot;no-cache&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> Expires <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>关键头字段：</p><ul><li>Cache-Control: no-cache：每次请求需向服务器验证资源是否最新（针对 index.html 这种入口文件）。</li><li>Cache-Control: max-age&#x3D;31536000, immutable：对带哈希的静态资源（如 JS&#x2F;CSS）设置长期缓存，避免重复请求</li></ul><p><strong>3、网页强制刷新</strong></p><p>通过版本检测，调用 location.reload 强制页面刷新</p><h2 id="三、基于轮询的网页更新弹窗实现"><a href="#三、基于轮询的网页更新弹窗实现" class="headerlink" title="三、基于轮询的网页更新弹窗实现"></a>三、基于轮询的网页更新弹窗实现</h2><h3 id="1-逻辑概述"><a href="#1-逻辑概述" class="headerlink" title="1. 逻辑概述"></a>1. 逻辑概述</h3><ul><li>版本检测：通过对比当前版本号和本地 version.json 文件中的最新版本号，检测版本是否有更新(在每次构建时向 version.json 写入最新版本号，请求的时候注意在 version.json 后面加上新的 query 值，避免请求到缓存的文件)</li><li>网页更新：当版本不一致时显示模态弹窗，提示用户需要刷新才能用到最新版本，若用户确定刷新，刷新并将最新的版本号缓存到浏览器中，关闭弹窗，否则关闭弹窗</li></ul><h3 id="2-demo"><a href="#2-demo" class="headerlink" title="2. demo"></a>2. demo</h3><ul><li>version.json</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.2.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>checkUpdate.js</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UpdateChecker</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">options</span> = &#123;</span><br><span class="line">      <span class="attr">checkInterval</span>: <span class="number">1</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="comment">// 1分钟检查一次</span></span><br><span class="line">      <span class="attr">versionFile</span>: <span class="string">&#x27;/version.json?t=&#x27;</span>,</span><br><span class="line">      ...options</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> version = <span class="variable language_">this</span>.<span class="title function_">getVersion</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentVersion</span> = version || <span class="string">&#x27;0.0.0&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setVersion</span>(<span class="variable language_">this</span>.<span class="property">currentVersion</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">init</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setVersion</span>(<span class="params">version</span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;version&#x27;</span>, version);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getVersion</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;version&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 首次检查版本</span></span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">checkVersion</span>();</span><br><span class="line">    <span class="comment">// 定时检查</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(</span><br><span class="line">      <span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">checkVersion</span>(),</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">options</span>.<span class="property">checkInterval</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">checkVersion</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Checking version: <span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="variable language_">this</span>.<span class="property">options</span>.<span class="property">versionFile</span> + <span class="title class_">Date</span>.<span class="title function_">now</span>());</span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> res.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (data.<span class="property">version</span> !== <span class="variable language_">this</span>.<span class="property">currentVersion</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dialog = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.update-dialog&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (dialog) <span class="keyword">return</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">showUpdateDialog</span>(data.<span class="property">version</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Version check failed:&#x27;</span>, error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">showUpdateDialog</span>(<span class="params">version</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> dialog = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    dialog.<span class="property">className</span> = <span class="string">&#x27;update-dialog&#x27;</span>;</span><br><span class="line">    dialog.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;dialog-content&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;h3&gt;发现新版本 🚀&lt;/h3&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;请刷新页面获取最新功能&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;actions&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;button class=&quot;refresh&quot;&gt;立即更新&lt;/button&gt;</span></span><br><span class="line"><span class="string">          &lt;button class=&quot;later&quot;&gt;稍后提醒&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    dialog.<span class="title function_">querySelector</span>(<span class="string">&#x27;.refresh&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentVersion</span> = version;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setVersion</span>(<span class="variable language_">this</span>.<span class="property">currentVersion</span>);</span><br><span class="line">      <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">location</span>.<span class="title function_">reload</span>(<span class="literal">true</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    dialog.<span class="title function_">querySelector</span>(<span class="string">&#x27;.later&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(dialog);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(dialog);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化检测</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">UpdateChecker</span>();</span><br></pre></td></tr></table></figure><ul><li>dialog.css</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.update-dialog</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">9999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dialog-content</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: white;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.actions</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-class">.refresh</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#1890ff</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-class">.later</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参考文献：</p><p><a href="https://canace.site/%E8%AF%B4%E8%AF%B4%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/">说说浏览器缓存机制</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用的Unix终端命令</title>
      <link href="/common-terminal-commands/"/>
      <url>/common-terminal-commands/</url>
      
        <content type="html"><![CDATA[<h2 id="一、文件与目录操作"><a href="#一、文件与目录操作" class="headerlink" title="一、文件与目录操作"></a>一、文件与目录操作</h2><ol><li>cd - 切换目录</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> projects  <span class="comment"># 进入 projects 目录</span></span><br><span class="line"><span class="built_in">cd</span> ..        <span class="comment"># 返回上一级目录</span></span><br><span class="line"><span class="built_in">cd</span> ~         <span class="comment"># 返回用户主目录</span></span><br></pre></td></tr></table></figure><ol start="2"><li>pwd - 显示当前工作目录的路径</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure><ol start="3"><li>mkdir - 创建目录</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> <span class="built_in">test</span></span><br></pre></td></tr></table></figure><ol start="4"><li>ls - 查看目录内容</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span>              <span class="comment"># 列出当前目录内容</span></span><br><span class="line"><span class="built_in">ls</span> -la          <span class="comment"># 列出所有文件（包括隐藏文件）</span></span><br></pre></td></tr></table></figure><ol start="5"><li>rm - 删除文件或目录</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> file.txt</span><br><span class="line"><span class="built_in">rm</span> -r directory</span><br><span class="line"><span class="built_in">rm</span> -rf directory  <span class="comment"># 递归删除目录</span></span><br></pre></td></tr></table></figure><ol start="6"><li>cp - 复制文件或目录</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> file.txt /path/to/destination</span><br><span class="line"><span class="built_in">cp</span> -r directory /path/to/destination</span><br></pre></td></tr></table></figure><ol start="7"><li>mv - 移动或重命名文件或目录</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mv</span> file.txt new_name.txt  <span class="comment"># 重命名文件</span></span><br><span class="line"><span class="built_in">mv</span> file.txt /path/to/destination  <span class="comment"># 移动文件</span></span><br></pre></td></tr></table></figure><ol start="8"><li>touch - 创建空文件</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> new_file.txt</span><br></pre></td></tr></table></figure><h2 id="二、文件内容查看与编辑"><a href="#二、文件内容查看与编辑" class="headerlink" title="二、文件内容查看与编辑"></a>二、文件内容查看与编辑</h2><ol><li>cat - 查看文件内容</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> file.txt</span><br></pre></td></tr></table></figure><ol start="2"><li>less - 分页查看文件内容（适合大文件）</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">less large-file.log</span><br></pre></td></tr></table></figure><ol start="3"><li>head &#x2F; tail - 查看文件的开头或结尾部分</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">head</span> -n 10 file.txt  <span class="comment"># 查看前 10 行</span></span><br><span class="line"><span class="built_in">tail</span> -f log.txt      <span class="comment"># 实时查看日志文件</span></span><br></pre></td></tr></table></figure><ol start="4"><li>grep - 在文件中搜索指定的文本</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep <span class="string">&quot;search_term&quot;</span> file.txt</span><br></pre></td></tr></table></figure><ol start="5"><li>vim - 终端文本编辑器</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim file.txt <span class="comment">## 保存 :wq 退出 :q  编辑 :i</span></span><br></pre></td></tr></table></figure><h2 id="三、调试与日志"><a href="#三、调试与日志" class="headerlink" title="三、调试与日志"></a>三、调试与日志</h2><ol><li>检查端口占用情况</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">lsof -i :3000   <span class="comment"># 查看 3000 端口的占用情况</span></span><br></pre></td></tr></table></figure><ol start="2"><li>kill - 终止进程</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">kill</span> &lt;PID&gt;          <span class="comment"># 终止指定进程</span></span><br><span class="line"><span class="built_in">kill</span> -9 &lt;PID&gt;       <span class="comment"># 强制终止进程</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ps - 查看当前运行的进程</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ps aux  <span class="comment"># 显示所有进程</span></span><br></pre></td></tr></table></figure><ol start="4"><li>top&#x2F;htop - 实时查看系统资源使用情况</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">top   <span class="comment"># 查看系统进程</span></span><br><span class="line">htop  <span class="comment"># 更友好的进程查看工具（需安装）</span></span><br></pre></td></tr></table></figure><ol start="5"><li>查看日志</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev | grep <span class="string">&quot;error&quot;</span>  <span class="comment"># 过滤日志中的错误信息</span></span><br></pre></td></tr></table></figure><h2 id="四、网络相关"><a href="#四、网络相关" class="headerlink" title="四、网络相关"></a>四、网络相关</h2><ol><li>curl - 发送 HTTP 请求</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl https://example.com  <span class="comment"># 获取网页内容</span></span><br></pre></td></tr></table></figure><ol start="2"><li>ping - 测试网络连接</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ping google.com  <span class="comment"># 测试与 Google 的连接</span></span><br></pre></td></tr></table></figure><ol start="3"><li>scp - 通过 SSH 复制文件</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">scp file.txt user@hostname:/path/to/destination  <span class="comment"># 复制文件到远程服务器</span></span><br></pre></td></tr></table></figure><h2 id="五、环境与配置"><a href="#五、环境与配置" class="headerlink" title="五、环境与配置"></a>五、环境与配置</h2><ol><li>export - 设置环境变量</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> API_KEY=<span class="string">&quot;12345&quot;</span>  <span class="comment"># 设置环境变量</span></span><br></pre></td></tr></table></figure><ol start="2"><li>source - 加载配置文件</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc  <span class="comment"># 重新加载 .bashrc 文件</span></span><br></pre></td></tr></table></figure><ol start="3"><li>alias - 创建命令别名</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">alias</span> ll=<span class="string">&quot;ls -la&quot;</span>  <span class="comment"># 创建 ll 别名</span></span><br></pre></td></tr></table></figure><h2 id="六、其他"><a href="#六、其他" class="headerlink" title="六、其他"></a>六、其他</h2><ol><li>chmode - 修改文件权限</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x script.sh  <span class="comment"># 设置文件权限</span></span><br></pre></td></tr></table></figure><ol start="2"><li>清空终端</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">clear</span><br></pre></td></tr></table></figure><ol start="3"><li>查看命令历史</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">history</span></span><br></pre></td></tr></table></figure><ol start="4"><li>查找文件</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find . -name <span class="string">&quot;*.js&quot;</span>  <span class="comment"># 查找当前目录下所有 .js 文件</span></span><br></pre></td></tr></table></figure><ol start="5"><li>压缩与解压</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar -czvf archive.tar.gz <span class="built_in">dir</span>  <span class="comment"># 压缩目录</span></span><br><span class="line">tar -xzvf archive.tar.gz      <span class="comment"># 解压文件</span></span><br></pre></td></tr></table></figure><ol start="6"><li>ssh - 连接服务器</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh user@hostname  <span class="comment"># 连接到远程服务器</span></span><br></pre></td></tr></table></figure><ol start="7"><li>du - 查看目录大小</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">du</span> -sh folder  <span class="comment"># 查看文件夹大小</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node.js 版本管理工具概览</title>
      <link href="/node-version-management/"/>
      <url>/node-version-management/</url>
      
        <content type="html"><![CDATA[<p>几种常用的 Node.js 版本管理工具及其使用方法：</p><h2 id="一、-nvm（Node-Version-Manager）"><a href="#一、-nvm（Node-Version-Manager）" class="headerlink" title="一、 nvm（Node Version Manager）"></a>一、 <code>nvm</code>（Node Version Manager）</h2><p><code>nvm</code> 是最流行的 Node.js 版本管理工具，支持安装、切换和卸载多个 Node.js 版本。</p><p>1、安装 <code>nvm</code><br>打开终端，运行以下命令安装 <code>nvm</code>：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash</span><br></pre></td></tr></table></figure><p>安装完成后，重新加载 Shell 配置：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc  <span class="comment"># 如果你Zsh</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc <span class="comment"># 如果你Bash</span></span><br></pre></td></tr></table></figure><p>验证安装：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm --version</span><br></pre></td></tr></table></figure><p>2、常用命令</p><ul><li><strong>默认安装使用 LTS 版本</strong></li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm install --lts <span class="comment"># 指定安装最新的 LTS</span></span><br><span class="line">nvm use node          <span class="comment"># 直接用最新安装的</span></span><br></pre></td></tr></table></figure><ul><li><strong>安装指定版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm install 18  <span class="comment"># 安装 Node.js 18.x 最新版本</span></span><br><span class="line">nvm install 16.14.0  <span class="comment"># 安装指定版本</span></span><br></pre></td></tr></table></figure></li><li><strong>切换版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm use 18  <span class="comment"># 切换到 Node.js 18.x</span></span><br></pre></td></tr></table></figure></li><li><strong>设置默认版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm <span class="built_in">alias</span> default 18  <span class="comment"># 设置 Node.js 18.x 为默认版本</span></span><br></pre></td></tr></table></figure></li><li><strong>查看已安装版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm <span class="built_in">ls</span></span><br></pre></td></tr></table></figure></li><li><strong>卸载指定版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm uninstall 16.14.0</span><br></pre></td></tr></table></figure></li></ul><h2 id="二、n"><a href="#二、n" class="headerlink" title="二、n"></a>二、<strong><code>n</code></strong></h2><p><code>n</code> 是另一个简单的 Node.js 版本管理工具，使用起来更加轻量。</p><p>1、安装 <code>n</code><br>首先安装 <code>n</code>：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g n</span><br></pre></td></tr></table></figure><p>2、常用命令</p><ul><li><strong>安装最新稳定版</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">n lts</span><br></pre></td></tr></table></figure></li><li><strong>安装指定版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">n 16.14.0</span><br></pre></td></tr></table></figure></li><li><strong>切换版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">n  <span class="comment"># 选择已安装的版本</span></span><br></pre></td></tr></table></figure></li><li><strong>查看已安装版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">n</span><br></pre></td></tr></table></figure></li><li><strong>卸载指定版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">n <span class="built_in">rm</span> 16.14.0</span><br></pre></td></tr></table></figure></li></ul><h2 id="三、-fnm（Fast-Node-Manager）"><a href="#三、-fnm（Fast-Node-Manager）" class="headerlink" title="三、 fnm（Fast Node Manager）"></a>三、 <strong><code>fnm</code>（Fast Node Manager）</strong></h2><p><code>fnm</code> 是一个基于 Rust 的快速 Node.js 版本管理工具，性能优于 <code>nvm</code>。</p><p>1、安装 <code>fnm</code><br>Homebrew 安装：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install fnm</span><br></pre></td></tr></table></figure><p>或者使用脚本安装：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://fnm.vercel.app/install | bash</span><br></pre></td></tr></table></figure><p>重新加载 Shell 配置：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc  <span class="comment"># 如果你Zsh</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc <span class="comment"># 如果你Bash</span></span><br></pre></td></tr></table></figure><p>验证安装：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fnm --version</span><br></pre></td></tr></table></figure><p>2、常用命令</p><ul><li><strong>安装指定版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fnm install 18</span><br></pre></td></tr></table></figure></li><li><strong>切换版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fnm use 18</span><br></pre></td></tr></table></figure></li><li><strong>设置默认版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fnm default 18</span><br></pre></td></tr></table></figure></li><li><strong>查看已安装版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fnm list</span><br></pre></td></tr></table></figure></li></ul><h2 id="四、-asdf"><a href="#四、-asdf" class="headerlink" title="四、 asdf"></a>四、 <strong><code>asdf</code></strong></h2><p><code>asdf</code> 是一个通用的版本管理工具，支持多种语言和工具，包括 Node.js。</p><p>1、安装 <code>asdf</code><br>Homebrew 安装：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install asdf</span><br></pre></td></tr></table></figure><p>将 <code>asdf</code> 添加到 Shell 配置：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\n. <span class="subst">$(brew --prefix asdf)</span>/libexec/asdf.sh&quot;</span> &gt;&gt; ~/.zshrc  <span class="comment"># Zsh</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\n. <span class="subst">$(brew --prefix asdf)</span>/libexec/asdf.sh&quot;</span> &gt;&gt; ~/.bashrc <span class="comment"># Bash</span></span><br></pre></td></tr></table></figure><p>重新加载 Shell 配置：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc  <span class="comment"># 或者 source ~/.bashrc</span></span><br></pre></td></tr></table></figure><p>2、安装 Node.js 插件</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">asdf plugin-add nodejs https://github.com/asdf-vm/asdf-nodejs.git</span><br></pre></td></tr></table></figure><p>3、常用命令</p><ul><li><strong>安装指定版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">asdf install nodejs 18.0.0</span><br></pre></td></tr></table></figure></li><li><strong>切换版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">asdf global nodejs 18.0.0</span><br></pre></td></tr></table></figure></li><li><strong>查看已安装版本</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">asdf list nodejs</span><br></pre></td></tr></table></figure></li></ul><h2 id="五、-Homebrew"><a href="#五、-Homebrew" class="headerlink" title="五、 Homebrew"></a>五、 <strong>Homebrew</strong></h2><p>如果你不需要频繁切换版本，可以直接Homebrew 安装和管理 Node.js。</p><p>1、安装 Node.js</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install node</span><br></pre></td></tr></table></figure><p>2、切换版本<br>卸载当前版本并安装其他版本：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew uninstall node</span><br><span class="line">brew install node@18</span><br></pre></td></tr></table></figure><h2 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h2><ul><li>如果需要频繁切换版本，推荐<code>nvm</code> 或 <code>fnm</code>。</li><li>如果喜欢轻量工具，可以选择 <code>n</code>。</li><li>如果需要管理多种语言和工具，可以选择 <code>asdf</code>。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024年终总结</title>
      <link href="/2024-year-end-summary/"/>
      <url>/2024-year-end-summary/</url>
      
        <content type="html"><![CDATA[<p>又是新的一年，各大平台的年终报告纷至沓来，似乎在提醒我要提笔写点什么。</p><p>2024 年做的最大的事情就是平安顺利的生了宝宝，完成了一大任务吧，之前总担心生宝宝会影响自己的职业发展，担心这担心那的，甚至有了不准备要宝宝的想法，事实证明很多事情在未发生之前，过于担忧是不值得的，既消耗时间又消耗精力。在怀孕生宝宝期间，我的职业发展不仅没有受限，还能正常上班，并且升职加薪了，看吧，总有一些意想不到的惊喜会悄然到来，所以，不要为明天的不幸而踌躇，想想水的流动，遇到不同的容器，他会有不同的形状，不要太低估我们自己了，真遇到所谓的瓶颈、困境，我们总会想办法度过的。</p><p>十年前的今天，我刚上大学，接触到了 C 语言，算算今年也是我写代码的第十个年头，从一开始的摄氏度计算程序、鸡兔同笼程序、裴波那契数列计算程序到现在写一个系统一个平台，就这么不知不觉的写了十年。人们总觉得花十年去做同一件事并且保持热爱是一件很难的事情，但我想说，当你习惯了日复一日的去做同一件事，就会像饿了要吃饭，累了要休息一样自然。但是日复一日的做同一件事有个缺陷，那就是很难有新的想法，天天吃一样的饭菜，我们对吃饭就只有刚需的想法了，不会再有那么多的期待，因此，要变着花样的做新菜式，才能保持我们的这份渴望。写了十年代码，我现在的状态是觉得自己还是什么都不会，遇到问题经常要各种文档看一圈，研究一番，不是因为我信奉 stay foolish,stay hungry，而是因为我真的是 foolish 和 hungry，不需要去 stay。</p><p>同样做了很多年的事情还有一件，那就是学英语，从幼儿园到现在，我学了很多年的英语，仍感觉没有入门。昨天看到一个观点说学习是快乐的，但是那是针对学会了说的，没学会之前都是痛苦的，要享受那份快乐必然会经历一番痛苦时期，今年末开始了每天读两篇英语小短文的习惯，无论什么拿起来就读，有很多生词不认识，读了几遍还是不认识，那就再读几遍，人生这么漫长，我想总有一天我会享受到那份快乐。<br>今年还解锁了瑜伽，练了一段时间，体会就是真的能治愈身心，就那么跟着呼吸动一动，能让心情平复很多，身体也舒服很多。我开始练瑜伽的契机是产后心情很不好，关在房间坐月子一个多月没出门，有一天推着宝宝出门刚好看到海报，心想也许能改善我现在的状态呢，当天就报了个团课，练了一段时间，发现真的治愈了我很多，有时候尝试一些新事物，真的可能会受益匪浅。</p><p>今年感觉就是一眨眼的事，能值得一提的可能就这么几件事吧，要硬说还有什么值得提的，可能就是今年博客文章比去年多写了两篇吧。</p><p>2025年还是继续写代码，保持热爱，多接触不同领域的知识，花点时间陪陪家人，努力兼顾好事业和家庭吧。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浏览器页面跳转至文章指定位置的方法探究</title>
      <link href="/jump-to-specific-position-in-article/"/>
      <url>/jump-to-specific-position-in-article/</url>
      
        <content type="html"><![CDATA[<p>浏览器页面跳转到指定位置的方法有很多，比如scrollIntoView、链接锚点等，这里我们只对比锚点链接和Text Fragment两种方式。</p><h2 id="一、锚点链接-ID跳转"><a href="#一、锚点链接-ID跳转" class="headerlink" title="一、锚点链接 (ID跳转)"></a>一、锚点链接 (ID跳转)</h2><h3 id="1-特点"><a href="#1-特点" class="headerlink" title="1. 特点"></a>1. 特点</h3><ul><li>需要在目标元素上设置id属性</li><li>跳转精确到元素级别</li><li>兼容性好，所有浏览器都支持</li><li>语法简单直观</li></ul><h3 id="2-示例"><a href="#2-示例" class="headerlink" title="2. 示例"></a>2. 示例</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#id&quot;</span>&gt;</span>跳转到指定位置<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;id&quot;</span>&gt;</span>指定位置<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二、Text-Fragment跳转"><a href="#二、Text-Fragment跳转" class="headerlink" title="二、Text Fragment跳转"></a>二、Text Fragment跳转</h2><h3 id="1-特点-1"><a href="#1-特点-1" class="headerlink" title="1. 特点"></a>1. 特点</h3><ul><li>不需要预先在HTML中设置标记</li><li>可以直接定位到具体文本内容</li><li>支持高亮显示匹配文本（通过CSS ::target-text）</li><li>语法较复杂，需要进行URL编码</li><li>浏览器兼容性有限（主要支持Chrome系列浏览器）</li></ul><h3 id="2-示例-1"><a href="#2-示例-1" class="headerlink" title="2. 示例"></a>2. 示例</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#:~:text=encodeURIComponent(&lt;text&gt;)&quot;</span>&gt;</span>跳转到文字<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">::target-text &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三、使用场景对比"><a href="#三、使用场景对比" class="headerlink" title="三、使用场景对比"></a>三、使用场景对比</h2><p><strong>锚点链接</strong></p><ul><li>固定结构的页面导航</li><li>需要广泛浏览器兼容性的场景</li><li>目录式导航结构</li></ul><p><strong>Text Fragment</strong></p><ul><li>需要精确定位到具体文本内容</li><li>动态内容或搜索结果跳转</li><li>文档阅读时的精确引用</li><li>不方便或不想修改原HTML结构的场景</li></ul><p>这两种跳转方式各有优势，建议根据具体使用场景选择合适的方式：如果是构建网站的主要导航，使用传统的锚点链接更稳妥，如果需要精确引用或分享特定文本段落，Text Fragment则可能更适合。</p><p><a href="https://canace22.github.io/demo/link-to-target/index.html">详细 Demo</a></p><p>参考资料：<br><a href="https://alfy.blog/2024/10/19/linking-directly-to-web-page-content.html">Smarter than ‘Ctrl+F’: Linking Directly to Web Page Content</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>善意</title>
      <link href="/kindness/"/>
      <url>/kindness/</url>
      
        <content type="html"><![CDATA[<p>晓兰在商场的橱窗前徘徊了许久，目光始终胶着在那双男士皮鞋上。她想着丈夫上周去逛街，目光一直在一双鞋子上，试了下，说不合适，但是难以掩饰他想买鞋的心情，心里默默有了主意，把鞋买下来给他一个惊喜，贵是贵了点，但是想到他发自内心的喜悦，就觉得物超所值。</p><p>满心欢喜的晓兰，晚上趁丈夫洗澡时，悄悄把鞋放在了玄关处。她幻想着明天丈夫看到时惊讶又欣喜的模样，嘴角不禁微微上扬。</p><p>然而，第二天清晨，一切都与想象背道而驰。丈夫穿上鞋后，眉头瞬间拧成了麻花，“这鞋看着就不怎么样啊，款式这么老气，你买的时候都不挑挑？花这么多钱买这么双破鞋。” 晓兰刚想解释，丈夫却已经摔门而出，嘴里还嘟囔着：“穿着先吧，不然又浪费钱。” 那语气，就好像晓兰犯了多大的错。</p><p>往后的日子，丈夫每天都穿着这双鞋去上班，还不忘念念有词，说这是双破鞋，晓兰心里委屈，却也暗自庆幸，至少他还穿着。</p><p>一次偶然，晓兰发现丈夫在浏览奢侈品女包网页，没过几天，一个昂贵的包包就送到了她手上。晓兰抱着包，心里五味杂陈。她明白，丈夫不是吝啬，只是在对待自己的事情上，总是带着一种奇怪的执拗，似乎别人给予的善意，他都要挑剔一番，却又默默接受。这份善意对于他来说也许过于沉重，让他不能安之若素的接纳？</p><p>又一个夜晚，晓兰看着躺在床上呼呼大睡的丈夫，还有床边那双被嫌弃却依旧服役的鞋，轻声呢喃：“善意，有时候要给别人选择权，别让它变得沉重……” 窗外的月色如水，洒进屋子，却不知能否照进丈夫心底，让他懂得这被包裹在平凡鞋子里，沉甸甸的爱。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>经验之谈</title>
      <link href="/words-of-experience/"/>
      <url>/words-of-experience/</url>
      
        <content type="html"><![CDATA[<h3 id="不滥施善意，把选择的权利交给他人"><a href="#不滥施善意，把选择的权利交给他人" class="headerlink" title="不滥施善意，把选择的权利交给他人"></a>不滥施善意，把选择的权利交给他人</h3><p>最近生活里的几件小事，让我察觉到自己在与人相处时存在一个容易让人感到不适的毛病。我有时会未经询问就直接将自己的善意施与他人，而没有先考虑对方是否需要。事后回顾他人的反应并反思自己的行为，才发觉这种做法确实欠妥。毕竟，我的好意也许对他人而言是一种负担。今后还是应当先尊重他人的意愿，把选择的权利交给对方，而非单方面地断定对方的需求并强加于人。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 职业发展 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>变数</title>
      <link href="/variables/"/>
      <url>/variables/</url>
      
        <content type="html"><![CDATA[<p>在我生活了很多年的小镇上，岁月仿若一位沉静的画师，用细腻的笔触勾勒出一幅安宁的画卷。小镇依傍着一条清澈的河流，河水如灵动的琴弦，弹奏出清脆悦耳的音符。河上横跨着一座古朴的石桥，桥身的石块承载着岁月的痕迹，青苔蔓延，仿佛在无声地诉说着悠悠旧事。</p><p>一位大学生，满怀着对未来的憧憬回到小镇，在临河的街边开了一家私人诊所。那诊所是一座白墙琉璃瓦的三层小洋楼，在阳光下闪烁着独特的光辉，屋前摆放着几盆小花，微风轻拂，花朵摇曳生姿，似在欢迎着每一位到访者。诊所内，时常能看到他身着整洁的白大褂，脸上洋溢着温和的笑容，耐心地与病人们交谈：“您放宽心，这不过是小毛病，几服药下去，保准药到病除，平日里可一定要注意劳逸结合，莫要太过操劳。”他的身影频繁地穿梭于小镇的街巷与河边的小径，宛如一颗明亮的星辰，为邻里乡亲们驱散病痛的阴霾，那时的他，无疑是小镇上熠熠生辉的希望之火。</p><p>后来，他组建了美满的家庭，一双儿女呱呱坠地，为这个家注入了无尽的欢乐与生机。他们的家就坐落在小镇的河边，是一座温馨宜人的小院。院内，一棵桂花树亭亭玉立，每至金秋时节，满院弥漫着浓郁醉人的桂香，那甜美的芬芳仿佛将整个院子都浸泡在蜜罐之中。妻子温婉贤淑，全心全意地操持着家中的大小事务，将丈夫与孩子照顾得无微不至。一家人围坐于桌前共享晚餐之际，他总会满含深情地对妻子说道：“亲爱的，今日这菜肴美味可口，辛苦你在厨房操劳了。”妻子则会略带羞涩地嗔怪道：“就你会哄人开心，快多吃些。”这般平淡而幸福的日子，犹如涓涓细流，滋润着每一个家庭成员的心田。</p><p>时光的车轮缓缓转动，步入中年的他，心中涌起一股对从政之路的热切向往。凭借着多年来积累的广泛人脉与资源，他毅然投身于竞选的汹涌浪潮之中，并成功踏上了政坛。彼时的小镇村民家里，他身姿挺拔地站在中央，激情澎湃地发表演说：“我在此郑重承诺，必将为咱们小镇的繁荣发展倾尽全力，让每一位乡亲都能过上富足美满的生活！”乡亲们被他的豪情壮志所感染，纷纷报以热烈的掌声，那一双双质朴的眼睛里，满是对他的信任与殷切期望。</p><p>然而，命运的轨迹却在不经意间偏离了既定的航线。仅仅数年光阴，一场突如其来的贪污案如汹涌的暴风雨般席卷而来，无情地摧毁了他曾经苦心经营的一切。他黯然地被调离小镇，曾经环绕在身的光环瞬间破碎，只余下无尽的悔恨与悠长的叹息。而他那原本安心于家庭温暖港湾的妻子，此刻却不得不为了偿还巨额债务，毅然踏入社会，成为了一名保姆。当她前往雇主家面试时，声音略显颤抖却又透着坚定：“您好，我做事向来勤恳踏实，定会用心将家中事务料理妥当。”她那原本柔弱的双肩，此刻却毅然扛起了生活的千钧重担，往昔的从容优雅已渐渐远去，取而代之的是生活磨难镌刻下的沧桑与坚毅。</p><p>小镇依旧静静地伫立在原地，河水依旧不知疲倦地流淌，只是那曾经充满欢声笑语的一家人的故事，如今却似一首凄婉的悲歌，在岁月的长河中久久回荡，引得每一位听闻者皆不禁感叹世事的变幻无常，命运的难以捉摸。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我们为什么需要阅读</title>
      <link href="/why-we-need-to-read/"/>
      <url>/why-we-need-to-read/</url>
      
        <content type="html"><![CDATA[<p>在分析我们为什么需要阅读之前，先来明确一个概念，这里所说的<strong>阅读的人</strong>是指那些今天仍然习惯于从书写文字中汲取大量资讯，以增进对世界了解的人。</p><p>**现代媒体，经过太精心的设计，使得思想形同虚设了。**电视观众、自媒体观众、杂志读者所消费的作品，均是经过精挑细选和包装过的产物，目的在于让人不需要面对困难或努力，就能很容易整理出“自己”的思绪，获得结论和观点。</p><p>**而写作与阅读的作品，是被主动、有活力的双方所共有的，是由一方开始，另一方终结的。**一本作品，可能被接受得多一点，可能少一点，从只接受到作者一点点概念到接受了整体意念，都有可能。读者想“接住”多少意念完全看他在阅读时多么主动，以及他投入不同心思来阅读的技巧如何。</p><p>阅读是一个凭借着头脑运作，除了玩味读物中的一些字句之外，不假任何外助，以一己之力来提升自我的过程。</p><p>**阅读的目标可以概括为三类：获得资讯、增进理解以及娱乐。**为了娱乐而阅读没什么要求，这里不赘述。为获得资讯而阅读，读者可以了解书本中所描述的信息，但不一定会增强理解，所阅读的内容也是与读者的知识水平相当的。为增进理解而阅读，所阅读的内容往往超出读者现有知识水平，一开始时作者与读者理解程度不对等。由此可见，我们要想增进对世界的理解，拥有自己的想法和观点，必须要阅读，不仅要阅读，还要阅读超出自己知识范围的内容。</p><p><strong>阅读是在无人指导的状况下，自己深思熟虑的一种学习过程。</strong> 蒙田说：“初学者的无知在于未学，而学者的无知在于学后。”第一种的无知是连字母都没学过，当然无法阅读。第二种的无知却是读错了许多书。阅读资讯不要仅仅只是阅读资讯，要更进一层，被资讯启发，增进理解，搞清楚这到底是怎么回事：为什么会发生，与其他的事实有什么关联，有什么类似的情况，同类的差异在哪里等等。非在校生可以通过阅读书本来教导我们，进行自学，增进自己对某一领域的理解。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 如何判断用户是否打开了大写键盘</title>
      <link href="/javascript-detect-caps-lock/"/>
      <url>/javascript-detect-caps-lock/</url>
      
        <content type="html"><![CDATA[<p>在输入密码时，用户可能会因为打开了大写键盘多次输入错误的密码。为了避免这种情况，在检测到用户打开了大写键盘时，我们可以提示一下用户，提升用户的体验。</p><p>在 JavaScript 中，我们可以使用 keyboardEvent 对象的 <code>getModifierState</code> 方法来检测用户是否打开了大写键盘。这个方法返回一个布尔值，表示用户是否打开了大写键盘。</p><p>demo:</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;password&#x27;</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ddocument.<span class="title function_">querySelector</span>(<span class="string">&#x27;input[type=password]&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span> (<span class="params">keyboardEvent</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> capsLockOn = keyboardEvent.<span class="title function_">getModifierState</span>(<span class="string">&#x27;CapsLock&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (capsLockOn) &#123;</span><br><span class="line">      <span class="comment">// Warn the user that their caps lock is on?</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你打开了大写键盘&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>除了检测大写键盘外，getModifierState 方法还可以检测其他键盘按钮的状态</p><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">dictionary</span> EventModifierInit : UIEventInit &#123;</span><br><span class="line">  <span class="built_in">bool</span>ean ctrlKey = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean shiftKey = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean altKey = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean metaKey = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span>ean modifierAltGraph = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean modifierCapsLock = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean modifierFn = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean modifierFnLock = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean modifierHyper = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean modifierNumLock = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean modifierScrollLock = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean modifierSuper = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean modifierSymbol = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">bool</span>ean modifierSymbolLock = <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>参考文献：<br><a href="https://davidwalsh.name/detect-caps-lock">Detect Caps Lock with JavaScript</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState">KeyboardEvent: getModifierState() method</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Element-Plus 缩放问题解决</title>
      <link href="/element-plus-table-component-scaling-issue-solution/"/>
      <url>/element-plus-table-component-scaling-issue-solution/</url>
      
        <content type="html"><![CDATA[<p>由于懒，一个项目选择了使用缩放的方式适配小屏幕，使用的 UI 框架是 element-plus，发现了以下一些缩放后引发的问题</p><h2 id="table-组件-resizable-属性失效"><a href="#table-组件-resizable-属性失效" class="headerlink" title="table 组件 resizable 属性失效"></a>table 组件 resizable 属性失效</h2><p>使用 zoom 属性对 body 进行缩放，发现 table 组件 resizable 属性失效了，也就是表格拖动宽度无效，改成使用 transform 可以解决这个问题。</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.8</span>);</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> / <span class="number">0.8</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100%</span> / <span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="下拉框错位"><a href="#下拉框错位" class="headerlink" title="下拉框错位"></a>下拉框错位</h2><p>由于上面对 body 进行了缩放，坐标肯定不能按照 100% 去算了，下拉框相关的组件需要设置 <code>:teleported=&quot;false&quot;</code> 不要挂载到 body 下面。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>统计数组对象的元素总数</title>
      <link href="/count-total-elements-of-array-objects/"/>
      <url>/count-total-elements-of-array-objects/</url>
      
        <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getTreeCount</span>(<span class="params">treeArr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; treeArr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="keyword">if</span> (treeArr[i].<span class="property">children</span>) &#123;</span><br><span class="line">      count += <span class="title function_">getTreeCount</span>(treeArr[i].<span class="property">children</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输入</span></span><br><span class="line"><span class="keyword">let</span> tree = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">3</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">5</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getTreeCount</span>(tree));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>去除数组对象中与子节点Id重复的父节点</title>
      <link href="/remove-parent-nodes-with-duplicate-child-ids/"/>
      <url>/remove-parent-nodes-with-duplicate-child-ids/</url>
      
        <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">filterTree</span>(<span class="params">tree</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> levelMap = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">setLevel</span> = (<span class="params">tree, level = <span class="number">1</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; tree.<span class="property">length</span>; index++) &#123;</span><br><span class="line">      <span class="keyword">const</span> element = tree[index];</span><br><span class="line">      element.<span class="property">level</span> = level;</span><br><span class="line">      <span class="keyword">if</span> (!levelMap.<span class="title function_">has</span>(element.<span class="property">id</span>)) &#123;</span><br><span class="line">        levelMap.<span class="title function_">set</span>(element.<span class="property">id</span>, level);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (levelMap.<span class="title function_">get</span>(element.<span class="property">id</span>) &lt; level) &#123;</span><br><span class="line">        levelMap.<span class="title function_">set</span>(element.<span class="property">id</span>, level);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (element.<span class="property">children</span>?.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="title function_">setLevel</span>(element.<span class="property">children</span>, element.<span class="property">level</span> + <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">setLevel</span>(tree);</span><br><span class="line">  <span class="keyword">return</span> tree.<span class="title function_">filter</span>(<span class="function">(<span class="params">v</span>) =&gt;</span></span><br><span class="line">    levelMap.<span class="title function_">get</span>(v.<span class="property">id</span>) ? levelMap.<span class="title function_">get</span>(v.<span class="property">id</span>) === <span class="number">1</span> : <span class="literal">true</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入</span></span><br><span class="line"><span class="keyword">let</span> tree = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">3</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">5</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">3</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">5</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">3</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">5</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">filterTree</span>(tree));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 自带的对象深拷贝方法</title>
      <link href="/javascript-built-in-deep-copy/"/>
      <url>/javascript-built-in-deep-copy/</url>
      
        <content type="html"><![CDATA[<h2 id="一、现行常用深拷贝方法的缺点"><a href="#一、现行常用深拷贝方法的缺点" class="headerlink" title="一、现行常用深拷贝方法的缺点"></a>一、现行常用深拷贝方法的缺点</h2><h3 id="JSON-parse-JSON-stringify"><a href="#JSON-parse-JSON-stringify" class="headerlink" title="JSON.parse(JSON.stringify())"></a>JSON.parse(JSON.stringify())</h3><p>说到 JavaScript 深拷贝，以前我们可能经常会这么干：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> temp = &#123;</span><br><span class="line">  <span class="attr">a</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiaoming&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> copyTemp = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(temp))</span><br><span class="line">copyTemp.<span class="property">a</span>.<span class="property">age</span> = <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copyTemp) <span class="comment">//&#123; a: &#123; name: &#x27;xiaoming&#x27;, age: 20 &#125; &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(temp); <span class="comment">//&#123; a: &#123; name: &#x27;xiaoming&#x27;, age: 18 &#125; &#125;</span></span><br></pre></td></tr></table></figure><p>但是有一些缺点，如果拷贝值里面带有 undefined&#x2F;map&#x2F;set 等特殊类型，可能会被转换成我们不想看到的结果，比如这样：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> temp = &#123;</span><br><span class="line">  <span class="attr">set</span>: <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>]),</span><br><span class="line">  <span class="attr">map</span>: <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="number">1</span>, <span class="number">2</span>]]),</span><br><span class="line">  <span class="attr">regex</span>: <span class="regexp">/foo/</span>,</span><br><span class="line">  <span class="attr">deep</span>: &#123; <span class="attr">array</span>: [ <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">1</span>) ] &#125;,</span><br><span class="line">  <span class="attr">error</span>: <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Hello!&#x27;</span>),</span><br><span class="line">  <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">  <span class="attr">buffer</span>: <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">1</span>),</span><br><span class="line">  <span class="attr">defaultVal</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> copyTemp = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(temp))</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copyTemp);</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   set: &#123;&#125;,</span></span><br><span class="line"><span class="comment">//   map: &#123;&#125;,</span></span><br><span class="line"><span class="comment">//   regex: &#123;&#125;,</span></span><br><span class="line"><span class="comment">//   deep: &#123; array: [ &#123;&#125; ] &#125;,</span></span><br><span class="line"><span class="comment">//   error: &#123;&#125;,</span></span><br><span class="line"><span class="comment">//   date: &#x27;2024-03-01T06:24:34.199Z&#x27;,</span></span><br><span class="line"><span class="comment">//   buffer: &#123;&#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><p>上面例子可以看到 map&#x2F;set 等对象会被转换成 <code>&#123;&#125;</code>，date 会被转换成字符串，而 undefined 值直接就被过滤掉了，有时候我们深拷贝是想要拷贝一份一模一样的数据，可能这个深拷贝方法就不适合了。</p><h3 id="展开对象、Object-assign"><a href="#展开对象、Object-assign" class="headerlink" title="展开对象、Object.assign"></a>展开对象、Object.assign</h3><p>我们可能还经常这么干使用展开或者 Object.assign 创建拷贝对象。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> temp = &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&quot;Builder.io Conf&quot;</span>,</span><br><span class="line">  <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">123</span>),</span><br><span class="line">  <span class="attr">attendees</span>: [<span class="string">&quot;Steve&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> copyTemp = &#123; ...temp &#125;</span><br><span class="line"><span class="keyword">const</span> copyTemp1 = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, temp)</span><br><span class="line"></span><br><span class="line">copyTemp.<span class="property">title</span> = <span class="string">&quot;111&quot;</span></span><br><span class="line">copyTemp.<span class="property">attendees</span>.<span class="title function_">push</span>(<span class="string">&quot;Bob&quot;</span>)</span><br><span class="line">copyTemp.<span class="property">date</span>.<span class="title function_">setTime</span>(<span class="number">456</span>)</span><br><span class="line"></span><br><span class="line">copyTemp1.<span class="property">title</span> = <span class="string">&quot;111&quot;</span></span><br><span class="line">copyTemp1.<span class="property">attendees</span>.<span class="title function_">push</span>(<span class="string">&quot;Bob&quot;</span>)</span><br><span class="line">copyTemp1.<span class="property">date</span>.<span class="title function_">setTime</span>(<span class="number">456</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(temp);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copyTemp);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copyTemp1);</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   title: &#x27;Builder.io Conf&#x27;,</span></span><br><span class="line"><span class="comment">//   date: 1970-01-01T00:00:00.456Z,</span></span><br><span class="line"><span class="comment">//   attendees: [ &#x27;Steve&#x27;, &#x27;Bob&#x27;, &#x27;Bob&#x27; ]</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   title: &#x27;111&#x27;,</span></span><br><span class="line"><span class="comment">//   date: 1970-01-01T00:00:00.456Z,</span></span><br><span class="line"><span class="comment">//   attendees: [ &#x27;Steve&#x27;, &#x27;Bob&#x27;, &#x27;Bob&#x27; ]</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   title: &#x27;111&#x27;,</span></span><br><span class="line"><span class="comment">//   date: 1970-01-01T00:00:00.456Z,</span></span><br><span class="line"><span class="comment">//   attendees: [ &#x27;Steve&#x27;, &#x27;Bob&#x27;, &#x27;Bob&#x27; ]</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><p>从输出可以看出，这种方式只能拷贝对象的第一层，更深层的属性还是指向原来的地址，在拷贝对象上改动会改到原对象上。</p><h3 id="lodash-cloneDeep"><a href="#lodash-cloneDeep" class="headerlink" title="lodash cloneDeep"></a>lodash cloneDeep</h3><p>我们可能还经常会使用 lodash 的 cloneDeep 方法来做深拷贝，这种方法可以说是很完备了，缺点就是我们要另外去按照 lodash 库，可能会占用一点的内存</p><h2 id="二、JavaScript-新推出的-structuredClone-方法"><a href="#二、JavaScript-新推出的-structuredClone-方法" class="headerlink" title="二、JavaScript 新推出的 structuredClone 方法"></a>二、JavaScript 新推出的 structuredClone 方法</h2><p>这个方法推出于 2022 年，如今已经 2024 年了，现代主流浏览器普遍都支持了，使用这个方法可以避免上述所有缺点，深拷贝对象，使用起来也很简单</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> temp = &#123;</span><br><span class="line">  <span class="attr">a</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiaoming&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> copyTemp = <span class="title function_">structuredClone</span>(temp)</span><br><span class="line">copyTemp.<span class="property">a</span>.<span class="property">age</span> = <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copyTemp) <span class="comment">//&#123; a: &#123; name: &#x27;xiaoming&#x27;, age: 20 &#125; &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(temp); <span class="comment">//&#123; a: &#123; name: &#x27;xiaoming&#x27;, age: 18 &#125; &#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浅谈 DNS 污染</title>
      <link href="/brief-discussion-on-dns-pollution/"/>
      <url>/brief-discussion-on-dns-pollution/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是-DNS-污染"><a href="#什么是-DNS-污染" class="headerlink" title="什么是 DNS 污染"></a>什么是 DNS 污染</h2><p>说到 DNS 污染，作为程序的我第一想到的就是 github 又连不上了，网上一搜，csdn等国内网站清一色的让改 host。那么为什么要让改 host 呢？因为 github 域名可能被污染了，域名解析返回的 IP 可能是错误的，需要指回正确的 IP，我们才能正常打开。我们怎么判断要打开的域名可能被污染了呢？可以使用 nslookup 命令行工具，查询要访问域名和对应域名解析服务器返回的 IP，看一下是不是正常的地址。如果跟我们平常使用的 IP 相去甚远，可能是伪造的 IP。</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">nslookup</span> domain [dns-server(ex:<span class="number">114.114.114.114</span>/<span class="number">8.8.8.8</span>)] </span><br></pre></td></tr></table></figure><h2 id="如何解决-DNS-污染问题"><a href="#如何解决-DNS-污染问题" class="headerlink" title="如何解决 DNS 污染问题"></a>如何解决 DNS 污染问题</h2><p>要解决 DNS 污染问题，上面我们提到了，出现的原因是域名解析返回的 IP 错了，可以通过改 host 文件的方法，打开正确的 IP。还有一种情况是我们访问的是未经加密传输的 http 地址，可能被误伤了，也会拿到错误的 IP，这种情况下可以试试用 https 地址访问。如若上面的方式都不行，可能打不开网页的原因不是 DNS 污染了，有可能 IP 被加入了 GFW 的黑名单。</p><figure class="highlight accesslog"><table><tr><td class="code"><pre><span class="line">获取可用 ip</span><br><span class="line"></span><br><span class="line">打开 host 文件</span><br><span class="line">sudo vi /etc/hosts</span><br><span class="line"></span><br><span class="line">修改 github 域名指向的 ip</span><br><span class="line"><span class="number">140.82.112.4</span>    github.com</span><br></pre></td></tr></table></figure><p>参考文献:</p><p><a href="https://github.com/hoochanlon/fq-book/blob/master/docs/doub/6t3mypbm-5.md">浅谈HTTP劫持、DNS污染的影响及解决办法</a></p><p><a href="https://gfwrev.blogspot.com/2009/11/gfwdns.html">深入理解GFW：DNS 污染</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.12：我们的上限在哪里</title>
      <link href="/issue-12/"/>
      <url>/issue-12/</url>
      
        <content type="html"><![CDATA[<p>昨天LOL全球总决赛很精彩，宙斯的剑魔教学，十年职业盛业，Faker拿到了他的四连冠。最后主持人的话很感人，十年老将，尝试过不同分路的英雄，有人可能质疑他是不是老了手速跟不上了，但他用实力证明，十年后的今天，他还可以再战。这不经让我想到，我们有上限吗？那么他在哪里呢？<br>我们经常会参照周围环境给自己设置上限，作为电竞运动员，到了一定年纪，可能会认为自己手速跟不上，不会创造更多的战绩了，作为篮球运动员，到了三十来岁，也会认为各项体能可能跟不上了，转行做教练或者其他，作为普通职员的程序员，认为会有三十五岁危机，到了三十来岁再碌碌无为，会认为自己将要被淘汰。<br>但是，我们真的有上限吗？总有人在努力的突破自己的上限，告诉我们，其实你的上限可以更高一些。Faker 用他的十年职业生涯再夺冠告诉电竞选手们，游戏不是青春饭，只要你有热爱，你肯拼搏，你甚至可以打十年的比赛。科比在经历过跟腱断裂之后重回球场，三十多岁高龄退役，告诉篮球运动员们，你的上限，你可以自己定义。而作为搬砖人的我们，上限真的是三十五岁甚至更早的三十岁吗？当每天看到周围的大龄同事早早上下班，奔波于家庭和职场之间，工作时刻关注着家里的小孩，对于自己正在经历的时间敷衍对待，我有时候在想，我的上限真的在这里了吗？我要跟他们一样，留在这里了吗？但是我的人生还很长啊，我的上限怎么可能在这里呢？如果接下来的岁月，我要每天都这样度过，一直维持现状，那我活着还有什么意义呢？生命大可在这一刻结束了吧。<br>我想，这绝对不会是我的上限，人的上限是无止境的，你永远不会知道你的上限在哪里。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>森林里的蚂蚁和吵架的大象夫妇</title>
      <link href="/ants/"/>
      <url>/ants/</url>
      
        <content type="html"><![CDATA[<p>正值夏季，太阳用它的热情炙烤着大地，小蚂蚁还是跟往常一样，从森林的某个点运送食材到森林另一个点的蚁穴里，一切都很平常，今天应该会是一个平静的日子，小蚂蚁想。</p><p>小蚂蚁迈着他细小的腿，继续前进，“亲爱的，我们得先把家具买好再去盖房子，只有有了合适的家具我们才能知道要盖什么样的房子”，远处传来不远不近的高音。小蚂蚁凑近一点想看清楚是谁，原来是大象夫妇，他们还是跟往常一样活力满满呢，说话的正是大象太太思科微。”不，我想先看到房子再去添置家具，房子盖起来了，我们就能举办 party，参加 party 的朋友们可能会给我们装修的建议，甚至资助我们呢“，在小蚂蚁愣神之际，大象先生杰森反驳道。就这么你一言我一语的，大象夫妇就先盖房子再添置家具还是先添置家具再盖房子争论着。</p><p>太阳到头顶时，小蚂蚁突然意识到，吵架中的大象夫妇挡住了他回蚁穴的路，这是唯一一条可以前往蚁穴的路，没办法绕道，小蚂蚁突然开始焦虑起来，该怎么让大象夫妇停止争吵让他继续拥有一个平凡的日子呢，任由他们继续争吵，自己可能到太阳回去了还没把食物运回蚁穴，小蚂蚁想着。</p><p>”小蚂蚁，你为何在这里站着不继续前进呢？“说话的是缓缓走来的长颈鹿先生，他也必须从这条路经过，因为他的孩子们还在路另一个尽头的家里等待着他把食物带回去。”长颈鹿先生，我正在犯愁怎么过去，可是大象夫妇完全没有要停止争吵的迹象，我该怎么办呢？我个子太小了，劝架的话他们是听不到的。“，小蚂蚁委屈着说。他只想要过普普通通的一天，每天在森林里寻找食物，搬回蚁穴，运气好的话还会得到蚁后的赞美，赏几口佳酿，但是这点愿望，今天看来要被大象夫妇破坏了。”别着急，小蚂蚁“，”我会想办法让他们停止争吵让我们顺利过去的“，长颈鹿先生不慌不忙的说着，便向大象夫妇缓缓的走去。</p><p>小蚂蚁期待着长颈鹿先生能劝和大象夫妇，好让自己能顺利的继续搬着食物朝蚁穴前进。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue3 实战笔记</title>
      <link href="/vue3-notes/"/>
      <url>/vue3-notes/</url>
      
        <content type="html"><![CDATA[<h2 id="一、错误提示处理"><a href="#一、错误提示处理" class="headerlink" title="一、错误提示处理"></a>一、错误提示处理</h2><p>1.<code>Virtual script not found, may missing &lt;script lang=&quot;ts&quot;&gt; / &quot;allowJs&quot;: true / jsconfig.json.volar</code></p><ul><li><p>VS Code, 执行命令<code>Ctrl/Cmd+Shift+P</code>  输入<code>Volar&gt;Reload Project</code>提示会消失</p></li><li><p>另一种方法是新建<code>jsconfig.json</code>文件，写入如下配置:</p></li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="二、遇到问题的Vue3语法"><a href="#二、遇到问题的Vue3语法" class="headerlink" title="二、遇到问题的Vue3语法"></a>二、遇到问题的Vue3语法</h2><ol><li><p>ref 函数返回值修改，只能通过加<code>.value</code>进行修改，附上响应式实现对比图<br><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/vue3-ref.png" alt="响应式实现对比"></p></li><li><p>父组件获取子组件实例，注意子组件一定要暴露对应的属性和方法，父组件才能拿到，不然可能一直都是空的实例，demo 如下</p></li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="title function_">defineExpose</span>(&#123;</span><br><span class="line">  formRef</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 父组件</span></span><br><span class="line"><span class="keyword">const</span> childRef = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(childRef.<span class="property">value</span>.<span class="property">formRef</span>);</span><br></pre></td></tr></table></figure><h2 id="三、Vue-工具"><a href="#三、Vue-工具" class="headerlink" title="三、Vue 工具"></a>三、Vue 工具</h2><ol><li><p><a href="https://vueuse.org/">VueUse</a>：Vue 工具集</p></li><li><p>VSCode插件</p></li></ol><ul><li><p><a href="https://github.com/vuejs/language-tools">Vue Language Features (Volar)</a>: vuetur的升级版</p></li><li><p><a href="https://github.com/sdras/vue-vscode-snippets">Vue VSCode Snippets</a>:一些 vue 模板，从 vue2 就开始用到现在，一键初始化单组件页面很方便</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.11：一些关于工作的思考</title>
      <link href="/issue-11/"/>
      <url>/issue-11/</url>
      
        <content type="html"><![CDATA[<h2 id="一些关于工作的思考"><a href="#一些关于工作的思考" class="headerlink" title="一些关于工作的思考"></a>一些关于工作的思考</h2><p>工作五年，对不同的行业来说意义不尽相同，对于医生等职业来说，也许还属于新手阶段，但是对于重复性比较高的工作来说，一般属于经验成熟阶段了。</p><p>对于 Web 前端开发而言，显然这个阶段应该是经验成熟的合格搬砖人了，可以按时按量根据需求去做功能交互，日复一日，一个项目接着一个项目的做，周期长的两三年都在做一个项目，周期短的可能一两个月就交付了。于是会去想，总是要交付出去的，很可能下一个维护人都不是自己了，还需要去考虑代码优雅和为项目长期迭代做准备吗？</p><p>做B端系统两年了，逐渐的很少去思考代码本身的问题，对于新技术的研究也越发的少了，可能是工作环境的原因，也可能是到了职业生涯不同时期的缘故，工作中会花更多的时间去研究交互，用户想要什么这些可能是以前做C端时产品才需要去思考的问题。做出来的东西也基本是element-ui+vue一把梭，就是怎么简单怎么来，这带来了一些问题：</p><ul><li><p>简单的使用框架和工具，渐渐地会成为只会使用工具的用户级别的开发，类似拼高达，组件人家都封装好了，只管发挥想象力</p></li><li><p>对技术的思考会更加浮于表面，只熟悉当前业务相关的东西，换一个业务模式可能就懵逼了，又要重新去了解框架，融入另外一套框架</p></li></ul><p>当然，作为商业级别的开发不能只想着技术这点事，需要了解业务，产品才能活下去，这是现实。除了现实呢？也许我们还有点自己的追求，这份追求能不能很好的融入职业生涯，这需要我们去探索。</p><p>近来，经常会思考工作和生活如何去平衡，是否需要去做平衡的问题。工作占据了我们大部分的人生，可以给我们带来金钱和成就感，而我们的业余生活虽然占很小一部分，但正是这一小部分时间，使我们得以修养调整，以更好的状态迎接未来的挑战。这里说的平衡不是业余生活还去考虑工作，而是我们做技术的，业余生活还应不应该花时间去专研技术，加入花大部分时间去专研技术，可能会没有时间休息，第二天会很疲惫，日复一日，就是导致身体不断恶化。当然，出现这种情况的前提是我们对技术失去了热情，在技术中没有成就感，甚至不太喜欢去触碰技术，但是不得不去学习。由此可见，做技术的人，真的需要一定的热情去支撑，才能不断前行。</p><p>很多人说，互联网开发的生命周期止于35岁，依我看，也不用这么焦虑，未来的事情谁知道呢？也许不做开发有更适合我们的职业呢？</p><h2 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h2><p>1、<a href="https://playgroundai.com/feed">Playgound</a></p><p>基于 Stable Diffusion 的图片生成工具，可以看到别人的成果，基于别人的提示词和滤镜生成图片</p><p>2、<a href="https://www.quanzhan.co/ai/chatgpt-prompts/">chatgpt中文提示词集合</a></p><p>该网站整合了一些 chatgpt 中文提示词</p><p>3、<a href="https://moonvy.com/apps/ops/">OpenPromptStudio</a></p><p>图像生成AI提示词可视化编辑器</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>时区、时间戳？</title>
      <link href="/js-timezone/"/>
      <url>/js-timezone/</url>
      
        <content type="html"><![CDATA[<p>最近在一个项目中做时区转换时出了点问题，起因是前端需要根据用户设置的时区，显示不同时区的时间，拿到服务端返回的时间戳，在表格中显示是正常的，在编辑界面保存后总是差八个小时，出现这种情况的原因我分析如下：</p><p>关于时间戳，我们有一个共同的认知，“假设浏览器所在电脑的时间是准确的，那么世界上无论哪个时区的电脑，它们<code>此刻</code>产生的时间戳数字都是一样的，所以，时间戳可以精确地表示一个时刻，并且与时区无关”。这句话是没错的，任何一个时区的同一个时刻，产生的时间戳肯定是一样的，那不同时刻呢？时间戳肯定会不一样吧，比如下面的例子：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = <span class="keyword">new</span> <span class="title class_">Date</span>() <span class="comment">//东八区 10:43:27</span></span><br><span class="line"><span class="comment">// Sat Jul 01 2023 10:43:27 GMT+0800 (China Standard Time)</span></span><br><span class="line">b = <span class="keyword">new</span> <span class="title class_">Date</span>(a+<span class="string">&#x27; GMT+0900&#x27;</span>) <span class="comment">// 东九区此刻，显示为东八区时间是 09:43:27</span></span><br><span class="line"><span class="comment">// Sat Jul 01 2023 09:43:27 GMT+0800 (China Standard Time)</span></span><br><span class="line">a.<span class="title function_">valueOf</span>()</span><br><span class="line"><span class="comment">// 1688179407305</span></span><br><span class="line">b.<span class="title function_">valueOf</span>()</span><br><span class="line"><span class="comment">// 1688175807000</span></span><br></pre></td></tr></table></figure><p>为什么要用上面的代码来做 demo 呢？因为 element-ui 的时间组件总是以本地时间显示的，没有时区这个概念，拿的时间戳自然也总是拿的本地时间戳。用户选了UTC时区，打开编辑界面，实际上element-ui时间组件显示的是本地时间，时区说明只是个障眼法，让用户以为他看到的是UTC时间，实际上这个本地时间跟 0 时区是偏移了几个时区的，换句话说我们看到的八点，在 0 区才凌晨，所以应该是保存的凌晨，而不是八点的时间戳。</p><p>基于以上分析，在编辑界面拿时间戳的时候，需要根据时区拿，保存的才会是正确的时间点，根据时区获取时间戳的方法如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 本地时间转换为东八区时间</span></span><br><span class="line">_time = _time + <span class="string">&#x27; GMT+0800&#x27;</span></span><br><span class="line"><span class="keyword">let</span> realTime = <span class="keyword">new</span> <span class="title class_">Date</span>(_time).<span class="title function_">valueOf</span>()</span><br><span class="line"><span class="comment">// 本地时间转换为UTC时间</span></span><br><span class="line">_time = _time + <span class="string">&#x27; UTC&#x27;</span></span><br><span class="line"><span class="keyword">let</span> realTime = <span class="keyword">new</span> <span class="title class_">Date</span>(_time).<span class="title function_">valueOf</span>()</span><br></pre></td></tr></table></figure><p>参考文献：<br><a href="https://www.cnblogs.com/goloving/p/10514914.html">浅析 JS 处理时间时区问题、将时间戳或时间对象转成字符串格式 </a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端 XX Docker 化</title>
      <link href="/frontend-xx-dockerization/"/>
      <url>/frontend-xx-dockerization/</url>
      
        <content type="html"><![CDATA[<h2 id="一、nginx-docker-化"><a href="#一、nginx-docker-化" class="headerlink" title="一、nginx docker 化"></a>一、nginx docker 化</h2><h3 id="1、新建-docker-文件夹"><a href="#1、新建-docker-文件夹" class="headerlink" title="1、新建 docker 文件夹"></a>1、新建 docker 文件夹</h3><p>(1) 文件夹下新建 Dockerfile 文件, 内容如下</p><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx:latest</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> dist /usr/share/nginx/html</span></span><br><span class="line"><span class="comment">#　修改nginx的配置项</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> docker/default.conf /etc/nginx/conf.d</span></span><br></pre></td></tr></table></figure><p>(2) nginx 配置端口映射，文件夹下新建 default.conf 文件, 内容如下:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  _;</span><br><span class="line"></span><br><span class="line">    #charset koi8-r;</span><br><span class="line">    #access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">        try_files $uri $uri/ /index.html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">    # redirect server error pages to the static page /50x.html</span><br><span class="line">    #</span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        try_files $uri $uri/ /index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2、编译-docker-镜像"><a href="#2、编译-docker-镜像" class="headerlink" title="2、编译 docker 镜像"></a>2、编译 docker 镜像</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker build -t &lt;image-name&gt; -f docker/Dockerfile .</span><br></pre></td></tr></table></figure><h3 id="3、创建容器-并将容器指向一个镜像版本"><a href="#3、创建容器-并将容器指向一个镜像版本" class="headerlink" title="3、创建容器, 并将容器指向一个镜像版本"></a>3、创建容器, 并将容器指向一个镜像版本</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -d -p &lt;host-port&gt;:&lt;container-port&gt; --name &lt;container-name&gt; &lt;image-name&gt;</span><br></pre></td></tr></table></figure><h2 id="二、Node-js-服务-docker-化"><a href="#二、Node-js-服务-docker-化" class="headerlink" title="二、Node.js 服务 docker 化"></a>二、Node.js 服务 docker 化</h2><h3 id="1、Dockerfile-文件"><a href="#1、Dockerfile-文件" class="headerlink" title="1、Dockerfile 文件"></a>1、Dockerfile 文件</h3><figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">14</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create app directory</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /usr/src/app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Install app dependencies</span></span><br><span class="line"><span class="comment"># A wildcard is used to ensure both package.json AND package-lock.json are copied</span></span><br><span class="line"><span class="comment"># where available (npm@5+)</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> package*.json ./</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> npm install</span></span><br><span class="line"><span class="comment"># If you are building your code for production</span></span><br><span class="line"><span class="comment"># RUN npm ci --only=production</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Bundle app source</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8002</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [ <span class="string">&quot;node&quot;</span>, <span class="string">&quot;servers.js&quot;</span> ] <span class="comment"># 用 node 启动服务</span></span></span><br><span class="line"><span class="comment"># CMD [ &quot;npm&quot;, &quot;start&quot; ] 用 npm cli 启动服务</span></span><br></pre></td></tr></table></figure><h3 id="2、编译-docker-镜像-1"><a href="#2、编译-docker-镜像-1" class="headerlink" title="2、编译 docker 镜像"></a>2、编译 docker 镜像</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker build -t &lt;image-name&gt; -f docker/Dockerfile .</span><br></pre></td></tr></table></figure><h3 id="3、创建容器-并将容器指向一个镜像版本-1"><a href="#3、创建容器-并将容器指向一个镜像版本-1" class="headerlink" title="3、创建容器, 并将容器指向一个镜像版本"></a>3、创建容器, 并将容器指向一个镜像版本</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -d -p &lt;host-port&gt;:&lt;container-port&gt; --name &lt;container-name&gt; &lt;image-name&gt;</span><br></pre></td></tr></table></figure><p>参考文献：<br><a href="https://nodejs.org/zh-cn/docs/guides/nodejs-docker-webapp/">把一个 Node.js web 应用程序给 Docker 化</a></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker 打包本地 Web 项目发布到服务端</title>
      <link href="/docker-documentation/"/>
      <url>/docker-documentation/</url>
      
        <content type="html"><![CDATA[<h2 id="一、Docker-入门"><a href="#一、Docker-入门" class="headerlink" title="一、Docker 入门"></a>一、Docker 入门</h2><h3 id="1、构建镜像"><a href="#1、构建镜像" class="headerlink" title="1、构建镜像"></a>1、构建镜像</h3><p><code>docker build -t &lt;image-name&gt; .</code></p><ul><li>-t 指定要创建的目标镜像名</li><li><strong>.</strong> ：Dockerfile 文件所在目录，可以指定Dockerfile 的绝对路径</li><li>设置镜像标签: <code>docker build -t image-name:tag</code></li></ul><h3 id="2、运行应用程序"><a href="#2、运行应用程序" class="headerlink" title="2、运行应用程序"></a>2、运行应用程序</h3><p><code>docker run --name &lt;container-name&gt; -d -p 8080:80 &lt;image-name&gt; /bin/echo &quot;Hello world&quot;</code></p><ul><li>docker run：运行应用程序</li><li><code>&lt;image-name&gt;</code>： 指定要运行的镜像，Docker 首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓库 Docker Hub 下载公共镜像</li><li><code>/bin/echo &quot;Hello world&quot;</code><strong>:</strong> 在启动的容器里执行的命令</li><li><code>—name</code> 指定容器名称</li><li><code>-d</code> 后台运行</li><li><code>-p &lt;docker-host-port&gt;:&lt;container-port&gt;</code> 指定端口映射</li></ul><h3 id="3、运行交互式的容器"><a href="#3、运行交互式的容器" class="headerlink" title="3、运行交互式的容器"></a>3、运行交互式的容器</h3><p>示例：<code>docker run -it &lt;image-name&gt; /bin/bash</code></p><ul><li><strong>t:</strong> 在新容器内指定一个伪终端或终端。</li><li><strong>i:</strong> 允许对容器内的标准输入 (STDIN) 进行交互。</li><li>通过运行 exit 命令或者使用 CTRL+D 来退出容器</li></ul><h3 id="4、进入容器"><a href="#4、进入容器" class="headerlink" title="4、进入容器"></a>4、进入容器</h3><p><code>docker exec -it 容器ID /bin/bash</code></p><h3 id="5、停止容器"><a href="#5、停止容器" class="headerlink" title="5、停止容器"></a>5、停止容器</h3><p><code>docker stop &lt;容器ID &gt;</code></p><h3 id="6、查看所有容器状态"><a href="#6、查看所有容器状态" class="headerlink" title="6、查看所有容器状态"></a>6、查看所有容器状态</h3><p><strong><code>docker ps -a</code></strong></p><h3 id="7、启动一个已停止的容器"><a href="#7、启动一个已停止的容器" class="headerlink" title="7、启动一个已停止的容器"></a>7、启动一个已停止的容器</h3><p><code>docker start &lt;容器ID&gt;</code></p><h3 id="8、导出容器快照"><a href="#8、导出容器快照" class="headerlink" title="8、导出容器快照"></a>8、导出容器快照</h3><p><code>docker export 容器ID &gt; name.tar</code></p><h3 id="9、导入容器"><a href="#9、导入容器" class="headerlink" title="9、导入容器"></a>9、导入容器</h3><p><code>docker import url</code></p><h3 id="10、删除容器"><a href="#10、删除容器" class="headerlink" title="10、删除容器"></a>10、删除容器</h3><p><code>docker rm -f 容器ID</code> 或者 <code>docker rm 容器名称</code></p><h3 id="11、端口映射"><a href="#11、端口映射" class="headerlink" title="11、端口映射"></a>11、端口映射</h3><ul><li>-P 随机映射</li><li>指定端口映射: -p 80:10086</li><li>查看容器端口的映射情况：<code>docker port 容器ID</code></li></ul><h3 id="12、查看所有镜像"><a href="#12、查看所有镜像" class="headerlink" title="12、查看所有镜像"></a>12、查看所有镜像</h3><p><strong><code>docker images</code></strong></p><h3 id="13、删除镜像"><a href="#13、删除镜像" class="headerlink" title="13、删除镜像"></a>13、删除镜像</h3><p><code>docker rmi 镜像名称</code></p><p>了解了大概的基础之后，下面开始实战篇。</p><h2 id="二、使用-docker-打包本地-web-项目发布到服务端概述"><a href="#二、使用-docker-打包本地-web-项目发布到服务端概述" class="headerlink" title="二、使用 docker 打包本地 web 项目发布到服务端概述"></a>二、使用 docker 打包本地 web 项目发布到服务端概述</h2><h3 id="1、把本地项目打包成一个-docker-镜像"><a href="#1、把本地项目打包成一个-docker-镜像" class="headerlink" title="1、把本地项目打包成一个 docker 镜像"></a>1、把本地项目打包成一个 docker 镜像</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t &lt;image-name&gt; .</span><br></pre></td></tr></table></figure><h3 id="2、推送打包好的镜像到镜像容器服务"><a href="#2、推送打包好的镜像到镜像容器服务" class="headerlink" title="2、推送打包好的镜像到镜像容器服务"></a>2、推送打包好的镜像到镜像容器服务</h3><p>把 docker 镜像推送到阿里云镜像服务器需要先去阿里云镜像服务创建一个空间和一个仓库</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 登录阿里云容器服务</span></span><br><span class="line">docker login --username=[username] registry.cn-hangzhou.aliyuncs.com</span><br><span class="line"><span class="comment"># 给镜像打 tag</span></span><br><span class="line">docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/[命名空间]/[仓库名]:[镜像版本号]</span><br><span class="line"><span class="comment"># 推送到阿里云容器仓库</span></span><br><span class="line">docker push registry.cn-hangzhou.aliyuncs.com/[命名空间]/[仓库名]:[镜像版本号]</span><br></pre></td></tr></table></figure><h3 id="3、拉取阿里云容器镜像并运行"><a href="#3、拉取阿里云容器镜像并运行" class="headerlink" title="3、拉取阿里云容器镜像并运行"></a>3、拉取阿里云容器镜像并运行</h3><p>服务器拉取阿里云容器镜像，拉取的前提是先要登录，如上</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 拉取刚刚上传的镜像</span></span><br><span class="line">docker pull registry.cn-hangzhou.aliyuncs.com/[命名空间]/[仓库名]:[镜像版本号]</span><br><span class="line"><span class="comment"># 创建并运行容器</span></span><br><span class="line">docker run --name blog -d -p 5000:80 registry.cn-hangzhou.aliyuncs.com/命名空间]/[仓库名]:[镜像版本号]</span><br></pre></td></tr></table></figure><p>打开服务器 IP:端口号，就可以看到内容了，完美</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>构建 TypeScript 库</title>
      <link href="/build-typescript-library/"/>
      <url>/build-typescript-library/</url>
      
        <content type="html"><![CDATA[<h2 id="一、初始化"><a href="#一、初始化" class="headerlink" title="一、初始化"></a>一、初始化</h2><p>创建一个空目录 typescript-library, <code>tsc --init</code> 初始化 tsconfig.json，具体配置字段，生成的 json 文件又说明，这里不做赘述，修改配置如下：</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// typescript-library/tsconfig.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commonjs&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es2015&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;declaration&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./dist&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="二、创建库代码"><a href="#二、创建库代码" class="headerlink" title="二、创建库代码"></a>二、创建库代码</h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// typescript-library/src/hello-world.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hi&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">sayGoodbye</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;goodbye&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// typescript-library/src/index.ts</span></span><br><span class="line"><span class="keyword">export</span> &#123; sayHello, sayGoodbye &#125; <span class="keyword">from</span> <span class="string">&#x27;./hello-world&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="三、配置-package-json"><a href="#三、配置-package-json" class="headerlink" title="三、配置 package.json"></a>三、配置 package.json</h2><p><code>npm init -y</code> 创建 package.json 文件，并修改 name、main 和 types 字段</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;helloworld&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Can log \&quot;hello world\&quot; and \&quot;goodbye world\&quot; to the console!&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist/index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist/index.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;/dist&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="四、库的使用"><a href="#四、库的使用" class="headerlink" title="四、库的使用"></a>四、库的使用</h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;sayHello&#125; <span class="keyword">from</span> <span class="string">&#x27;helloworld&#x27;</span></span><br><span class="line"><span class="title function_">sayHello</span>();</span><br></pre></td></tr></table></figure><p>1、编译代码并上传到 npm</p><p><code>tsc</code> &#x3D;&gt; <code>npm publish</code></p><p>2、编译代码，直接从本地安装使用</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;helloworld&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./helloworld&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>参考文献</p><p><a href="https://www.tsmean.com/articles/how-to-write-a-typescript-library/">How to Write a TypeScript Library</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.10：直面死亡</title>
      <link href="/issue-10/"/>
      <url>/issue-10/</url>
      
        <content type="html"><![CDATA[<h2 id="直面死亡"><a href="#直面死亡" class="headerlink" title="直面死亡"></a>直面死亡</h2><p>上个月某个周末的清晨，突然收到家里打来的电话说奶奶过世了，一瞬间感觉脑子一篇空白，周五明明还打电话说好好的，怎么人突然就没了，很难以置信，电视剧里不都是交代完遗言才离开的吗，奶奶是在夜里悄然离开的，也没留下什么遗言。同样令我难以置信的是，我没有想象中的悲伤，没有那种撕心裂肺般的感觉。只是很平静的想奶奶为什么会突然离开，离开之前她经历了些什么，可能是我二十多年的生活经历早就让我对这一刻有了准备吧，每每想到死亡会很心痛，但是真正当亲人去世，却没有那种感觉了，这应该就是人对于未知的恐惧。</p><p>我们的社会是一个对死亡很避讳的社会，我们一般不会去谈死亡的话题，因为很沉重。但是多想想死亡相关的事情，我们会更有动力去好好活着，渺小如沧海一粟的我们，要想活得久点，活得有意义一点，不是需要更努力吗？</p><p>这一周，也有一位老人过世了，不过不是我身边的亲人，而是曾经的国家领导人，新闻里看走的时候仪式很庄严，很多人送行。这让我想到奶奶走的时候，只有相关的亲人送行，仪式也是比较古朴的三叩九拜，加上各种迷信的环节，很安静的就入土了，躺在里面一定很冷，过不了几年可能就没有人知道这位老人曾经存在过了。</p><p>上学的时候背过一篇悼毛主席的文章，里面有一句话印象很深，有的人活着，他已经死了，有的人死了，他还活着，死，或轻于鸿毛，或重于泰山。我们活着的人，可以想想，自己是真正意义上的活着吗？还是只是能活动的血肉之躯，实际上已经死亡了呢？等我们死亡的时候，是要像一粒沙子一样隐入尘埃，还是留下点什么，让世人知道曾经有这么一个人存在过？</p><h2 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h2><p>1、<a href="https://github.com/jackfrued/Python-100-Days">Python - 100天从新手到大师</a></p><p>python 教程，题目挺有意思</p><p>2、<a href="https://github.com/Ryujinx/Ryujinx">任天堂 switch 模拟器</a></p><p>任天堂 switch 模拟器，支持 windows 和 linux，不支持 mac</p><p>3、<a href="https://github.com/mli/autocut">文本编辑器剪视频</a></p><p>一个 python 库，特色是可以自动生成字幕，通过字幕剪辑视频</p><p>4、<a href="https://github.com/babysor/MockingBird">AI 拟声训练</a></p><p>开源的拟声训练项目</p><p>5、<a href="https://d2lang.com/tour/intro/">d2</a></p><p>根据文字生成流程图的库，简单易上手</p><p>6、<a href="https://books.studygolang.com/gopl-zh/ch1/ch1-03.html">Go 语言圣经</a><br>Go 语言教程</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>认识字节序</title>
      <link href="/understanding-byte-order/"/>
      <url>/understanding-byte-order/</url>
      
        <content type="html"><![CDATA[<h2 id="字节序是什么"><a href="#字节序是什么" class="headerlink" title="字节序是什么"></a>字节序是什么</h2><p>字节序即<strong>大于一个字节类型的数据在内存中的存放顺序</strong></p><h2 id="大端序-vs-小端序"><a href="#大端序-vs-小端序" class="headerlink" title="大端序 vs 小端序"></a>大端序 vs 小端序</h2><h3 id="高地址-低地址"><a href="#高地址-低地址" class="headerlink" title="高地址&#x2F;低地址"></a>高地址&#x2F;低地址</h3><p>栈顶低地址，栈底高，在类型数组中，左边是低地址，右边是高地址，因为在 JS 的类型数组中，内存是从左到右排列的</p><h3 id="高字节-低字节"><a href="#高字节-低字节" class="headerlink" title="高字节&#x2F;低字节"></a>高字节&#x2F;低字节</h3><p>即字符从左到右由高到低</p><h3 id="小端序（Little-Endian）"><a href="#小端序（Little-Endian）" class="headerlink" title="小端序（Little-Endian）"></a>小端序（Little-Endian）</h3><p>低位字节排放在内存的低地址端，高位字节排放在内存的高地址端。</p><h3 id="大端序（Big-Endian）"><a href="#大端序（Big-Endian）" class="headerlink" title="大端序（Big-Endian）"></a>大端序（Big-Endian）</h3><p>高位字节排放在内存的低地址端，低位字节排放在内存的高地址端。</p><h3 id="网络字节序"><a href="#网络字节序" class="headerlink" title="网络字节序"></a>网络字节序</h3><p>TCP&#x2F;IP各层协议将字节序定义为 Big-Endian（这与主机序相反），因此TCP&#x2F;IP协议中使用的字节序通常称之为网络字节序。</p><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// demo 0x12345678</span></span><br><span class="line">a = <span class="keyword">new</span> <span class="title class_">Uint32Array</span>([<span class="number">0x12345678</span>]) <span class="comment">// 高位字节在高地址端，用的是小端序</span></span><br><span class="line"><span class="comment">//buffer unit8Array</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    &quot;0&quot;: 120, //0x78</span></span><br><span class="line"><span class="comment">    &quot;1&quot;: 86, // 0x56</span></span><br><span class="line"><span class="comment">    &quot;2&quot;: 52, // 0x34</span></span><br><span class="line"><span class="comment">    &quot;3&quot;: 18 //0x12</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>参考文献：</p><p><a href="https://www.cnblogs.com/onepixel/p/7468343.html">小端字节序与大端字节序</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.09：原来我也可以</title>
      <link href="/issue-09/"/>
      <url>/issue-09/</url>
      
        <content type="html"><![CDATA[<h2 id="原来我也可以"><a href="#原来我也可以" class="headerlink" title="原来我也可以"></a>原来我也可以</h2><p>一直想尝试自己画些有意思的东西，可能是学习专业的东西太枯燥了吧，每次尝试很快都放下了笔。最近看了个有趣的视频，那个视频的 up 主不像往常的绘画教学，上来就是排线阴影之类的专业基础，而是让观众动手跟着画，我觉得挺有意思。跟着画，画了几天还是挺有兴趣的，也越画越好了。这告诉我，很多觉得难的事情，抛开一切束缚，动手试试可能并没有这么难，当然要有专业的能力还是得经历专业的训练的。对于三分钟热度的我，可能先去尝试，遇到不懂的再去查资料学习，或者遇到瓶颈再去专门训练可能会更适合。</p><h2 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h2><p>1、一些代码练习网站</p><ul><li><a href="https://exercism.org/tracks">https://exercism.org/tracks</a></li><li><a href="https://www.codewars.com/">https://www.codewars.com/</a></li><li><a href="https://www.hackerearth.com/for-developers/">https://www.hackerearth.com/for-developers/</a></li></ul><p>2、<a href="https://httptoolkit.com/blog/cache-your-cors/">CORS 缓存</a></p><p>CORS 请求通常不是直接发真的请求而是会先发一条预检请求，服务端回应了才发真实的请求过去，这样就会造成服务器资源的浪费，在使用按请求付费的云服务会增加开销，这就需要 CORS 缓存了，CORS 缓存有两种：浏览器缓存和 CDN 缓存，浏览器缓存可以在预检请求响应时加上<code>**</code>Access-Control-Max-Age: 86400<code>**</code>,CDN 缓存在响应时加上:<code>Cache-Control: public, max-age=86400 Vary: origin</code>，文章里还举出了各种语言环境的实现 demo，可以看看</p><p>3、<a href="https://github.com/stashapp/stash">本地视频管理库</a></p><p>本地视频管理库，支持视频编辑和视频相关信息编辑，基于 ffmpeg</p><p>4、<a href="https://github.com/public-apis/public-apis">公告 api 搜集库</a></p><p>整理了各种公有 api，需要的时候可以查一查</p><p>5、<a href="https://github.com/ryanmcdermott/clean-code-javascript">JavaScript 代码简洁方法实践</a></p><p>JavaScript 代码简洁方法实践，写的还挺全的</p><p>6、<a href="https://github.com/ossu/computer-science">计算机科学自学教程</a></p><p>这个仓库整理了计算机科学需要学的的一些概念，资料都来源于网上</p><p>7、<a href="https://github.com/zhw2590582/ArtPlayer">html5在线视频播放器</a></p><p>html5在线视频播放器，支持配置视频信息，动态添加字幕</p><p>8、<a href="https://github.com/zhw2590582/live-video-study-notes">前端视频直播相关技术笔记</a></p><p>前端视频直播相关技术笔记</p><p>9、<a href="https://github.com/hellof2e/quark-design">跨框架前端库</a></p><p>用 web component 实现的跨框架前端库，概念挺好的</p><p>10、<a href="https://github.com/milanm/DevOps-Roadmap">DevOps 学习路径</a></p><p>DevOps路径，每一步都包含了挺多资料的</p><p>11、<a href="https://yi-jy.com/2015/07/26/canvas-image-filter/">canvas滤镜</a></p><p>使用 canvas 滤镜处理图片效果</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.08：无论男女都应当追求些什么</title>
      <link href="/issue-08/"/>
      <url>/issue-08/</url>
      
        <content type="html"><![CDATA[<h2 id="无论男女都应当追求些什么"><a href="#无论男女都应当追求些什么" class="headerlink" title="无论男女都应当追求些什么"></a>无论男女都应当追求些什么</h2><p>上期的文摘引用了伍尔夫的句子：人不应该是插在花瓶里供人观赏的静物，而是蔓延在草原上随风起舞的韵律，生命不是安排，而是追求，人生的意义也许永远没有答案，但也要尽情感受这没有意义的人生。我们的人生本无意义，正是因为我们做了些什么，才让这本无意义的人生有了一定的存在意义。前段时间也看到过一个观点，说当我们问人活着的意义是什么？我们一般答不上来，因为人生本无意义，但是人类是有意义的，当我们每个人都做点什么，对人类总体来说也是有意义的，但是我们无法描述每个人的人生到底有什么意义。</p><p>为什么今天我想谈这个呢，是因为这周领导找我谈绩效，问我想不想拿A 或者 S，这里的 A 或者 S 是属于比较有贡献的，超出个人日常能力的评价范围，我会错意以为领导想问我满不满意现在的评价，我当然要表达清楚我很满意。于是有了我下面的回答，我答不想拿，我的思想也是顺其自然，这里其实我没表达完我的意思，藏了一半（其实我的思想是能争取的时候就努力争取，不能争取的话就顺势而为，因为我们也做不了什么了，就顺其自然吧），毕竟人在职场嘛，也不是什么话都能往外抛的，只选择部分去说。然后领导就说女孩子嘛，这样子挺好的，不追求什么，但是要做好现在的工作，对得起拿的钱，也不要躺平，免得以后出去很难找工作。领导说话比较直，也没有不尊重我的意思我知道。</p><p>但是我心里在想，女孩子没什么追求，默默无闻的在职场苟活这真的好吗？这样的工作为了什么呢？我想只能是为了挣点钱而工作了吧？一辈子工作的时间这么长，同样都是挣钱，为什么不选择自己喜欢的，对自己来说有意义的工作去做呢？这里说的是工作的意义问题，我们每每职业迷茫，其实也是因为没明白自己工作为了什么，很多人会说为了生活，为了钱，但是亲爱的，难道你不为了让你的人生更有意义吗？工作在一定程度上是给我们的人生赋予了一定的意义的，因为工作意味着我们做了点什么，人生也就多了一点点存在的意义。</p><h2 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h2><p>1、<a href="https://github.com/vbenjs/vue-vben-admin">中后台管理系统</a></p><p>基于 Vue3, vite and TypeScript开发的后台管理系统解决方案</p><p>2、<a href="https://www.shidianguji.com/?page_from=bookshelf">中国古籍书库</a></p><p>整理挺齐全的估计书库，可供免费查阅</p><p>3、<a href="https://artsandculture.google.com/experiment/puzzle-party/EwGBPZlIzv0KRw">谷歌网页拼图</a></p><p>谷歌开发的网页拼图，支持多人一起拼</p><p>4、<a href="https://github.com/inancgumus/learngo">Go demo</a></p><p>Go 学习 demo 集合</p><p>5、<a href="https://github.com/xkcoding/spring-boot-demo">Spring Boot实战 Demo</a></p><p>学习并实战 Spring Boot 的项目</p><p>6、<a href="https://the-algorithms.com/language/javascript">JavaScript 数据结构和算法入门实战</a></p><p>JavaScript 数据结构和算法入门实战</p><p>7、<a href="https://github.com/blasten/turn.js">翻页效果库</a></p><p>很轻量的翻页效果开源项目</p><p>8、电子书下载网站</p><p><a href="http://libgen.rs/">http://libgen.rs/</a></p><p><a href="https://www.gutenberg.org/browse/recent/last1">https://www.gutenberg.org/browse/recent/last1</a></p><h2 id="文摘"><a href="#文摘" class="headerlink" title="文摘"></a>文摘</h2><p>以悲观之心情过乐观之生活，以无生之觉悟过有生之事业。</p><p>——杨澜《大女生》引言</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.07：假如再给我七天假期我想做什么</title>
      <link href="/issue-07/"/>
      <url>/issue-07/</url>
      
        <content type="html"><![CDATA[<h2 id="假如再给我七天假期我想做什么"><a href="#假如再给我七天假期我想做什么" class="headerlink" title="假如再给我七天假期我想做什么"></a>假如再给我七天假期我想做什么</h2><p>转眼国庆七天假期已经过去了，又开始了新一轮的搬砖，回顾这七天，好像干了些什么，又好像什么都没干，前三天还在想着去旅游，偶尔出个门，后四天就基本开启养猪模式，足不出户，躲在屋子里吃喝玩乐。荒废了七天假期吗？我觉得是没有，就算是假期，日子还是正常过，与平常唯一的不同可能就是不用坐在办公室干活吧。所以如果问我假如再给我七天假期，我想做什么，我可能还是一样吧，懒散的正常过日子，偷得浮生七日闲。</p><h2 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h2><p>1、<a href="http://www.supermancall.com/">UI 设计师知识库</a></p><p>UI 设计师相关知识库合集</p><p>2、<a href="https://mainichi.jp/english/articles/20220916/p2a/00m/0sc/017000c">63岁日本退休大爷自学程序开发出 ios 系统计算器</a></p><p>只要勇于开始，人人都可以开发程序</p><p>3、<a href="https://github.com/tsoding/olive.c">简单的 2D 图形库</a></p><p>C 语言 2D 图形库，支持 wasm 打包</p><p>4、<a href="https://www.ifanr.com/1501861?utm_source=rss&utm_medium=rss&utm_campaign=">数字社畜的尽头，是数字游民</a></p><p>数字游民是一群有固定收入，无固定办公场所的人群，只要有网，有一台电脑，他们可以在任何地点办公。</p><p>5、<a href="https://css-tricks.com/how-to-create-wavy-shapes-patterns-in-css/">how to create wavy shapes patterns in css</a></p><p>纯 CSS 画波浪线的教程，由浅入深，讲述了画波浪线的原理和实践。</p><p>6、<a href="https://mediaqueri.es/">响应式设计范例</a></p><p>该网站收集了响应式设计相关范例，在做响应式设计时，可以参考。</p><p>7、<a href="https://github.com/getify/Functional-Light-JS">Functional-Light JavaScript</a></p><p>轻量级函数式编程</p><h2 id="读点什么"><a href="#读点什么" class="headerlink" title="读点什么"></a>读点什么</h2><p>1、《生活蒙太奇》绘本</p><p>2、《Drawing on the Right Side of the Brain》</p><h2 id="看点什么"><a href="#看点什么" class="headerlink" title="看点什么"></a>看点什么</h2><p>1、《电锯人》</p><p>新番定档 10 月 11 日开播，片头曲《Kick Back》将由米津玄师演唱</p><p>2、《隐入尘烟》</p><p>3、《赛博朋克 边缘行者》</p><h2 id="文摘"><a href="#文摘" class="headerlink" title="文摘"></a>文摘</h2><p>人不应该是插在花瓶里供人观赏的静物，而是蔓延在草原上随风起舞的韵律，生命不是安排，而是追求，人生的意义也许永远没有答案，但也要尽情感受这没有意义的人生。</p><p>——伍尔夫</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.06：羊了个羊为什么会火起来</title>
      <link href="/issue-06/"/>
      <url>/issue-06/</url>
      
        <content type="html"><![CDATA[<h2 id="羊了个羊为什么会火起来"><a href="#羊了个羊为什么会火起来" class="headerlink" title="羊了个羊为什么会火起来"></a>羊了个羊为什么会火起来</h2><p>最近羊了个羊这个小游戏在盆友圈中很火，同龄人很多都在肝这个游戏，我也不例外，奋战了很多个小时，说是废寝忘食也不为过。这不禁让我开始思考，就这么一个简单制作的消除游戏，为何能让我们这么疯狂？我想原因不过有两点：1、好胜心的驱使；2、业余生活的单一。第一点很好理解，人都有一定的好胜心，这个游戏看着不难，但是一直过不了关，我们总想再试试看新的思路，也许可以呢？看排行榜上这么多人不是都过了吗，我肯定也可以的。另一点可能有点宏观了，这怎么能扯到业余生活上去呢？我们可以想一下为什么开始玩这个游戏，可能是看到盆友圈，亦或是盆友推荐，刚好没什么事干，随手拿起来玩，一般情况下我们业余生活比较丰富的话，可能还有很多其他的事情在等着我们去做，体验了下可能就去干别的了，能够一晚上都在玩这个小游戏的人，有很大概率是业余生活比较单一的人群。最后再来说说游戏机制问题吧，经过我玩了几十把的经验，物品的随机性是比较高的，规律性也不是那么的强，所以说纯手工能通过的概率是很低的，诸君及时止损为好。</p><h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><p>1、<a href="https://github.com/leonardomso/33-js-concepts">33个 JS 概念</a></p><p>收集了 33 个 JS 基础知识点的资料。</p><p>2、<a href="https://standardebooks.org/">免费电子书</a></p><p>免费电子书网站，书的封面都很好看，书的质量非常好。</p><p>3、<a href="%5Bhttps://github.com/logto-io/logto%5D(https://github.com/logto-io/logto)">登录认证服务</a></p><p>一个登录认证开源库</p><p>4、<a href="https://www.khanacademy.org/computing/pixar/start/introduction/v/pipeline-video">皮克斯动画电影制作过程</a></p><p>5、<a href="https://lbrito1.github.io/blog/2020/02/repurposing-android.html">吃灰的安卓手机改造成 web 服务器</a></p><p>6、<a href="https://endtimes.dev/why-your-website-should-be-under-14kb-in-size/">为什么web包要小于 14kb</a></p><p>7、<a href="http://www.supermancall.com/">UI 设计师知识库</a><br>UI 设计师相关知识库合集</p><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><p>1、一些搜索质量还行的搜索引擎</p><ul><li><a href="https://yep.com/">https://yep.com/</a></li><li><a href="https://duckduckgo.com/">https://duckduckgo.com/</a></li><li><a href="https://neeva.com/">https://neeva.com/</a></li><li><a href="http://fsoufsou.com/">fsoufsou.com</a>(这个中文搜索可以)</li></ul><p>2、<a href="https://github.com/tnfe/FFCreator/blob/master/README.zh-CN.md">开源视频编辑库</a></p><p>3、<a href="https://wantquotes.net/">搜索引擎</a></p><p>可以根据描述搜索文学名言古诗词等</p><p>4、<a href="https://emoji.supply/kitchen">emoji厨房</a></p><p>可以自由组合 emoji生成新的 emoji，挺好玩的。</p><h2 id="文摘"><a href="#文摘" class="headerlink" title="文摘"></a>文摘</h2><p>Most of the programmers I look up to and learned from share one trait that is rarely talked about: fearlessness.<br>They dive into an unknown codebase without fear. They open up the code of a dependency that they suspect is misbehaving without fear. They start working on something without knowing how they’ll finish.<br>It’s inspiring seeing someone being fearless, but becoming fearless yourself is one of the best learning accelerators I’ve found.</p><p>- <a href="https://thorstenball.com/blog/2022/05/17/professional-programming-the-first-10-years/">《成为专业程序员10周年的感悟》</a></p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字符串与代码的严谨性</title>
      <link href="/string-and-code-rigor/"/>
      <url>/string-and-code-rigor/</url>
      
        <content type="html"><![CDATA[<p>工作中有这么一段代码</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(params.<span class="property">url</span>.<span class="title function_">includes</span>(<span class="string">&#x27;/v3&#x27;</span>))&#123;</span><br><span class="line">  url = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(params.<span class="property">url</span>.<span class="title function_">includes</span>(<span class="string">&#x27;/app&#x27;</span>))&#123;</span><br><span class="line">  url = <span class="string">&#x27;b&#x27;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  url = <span class="string">&#x27;c&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段根据 api 判断请求地址的写法，乍一看好像没什么问题,api 可以保证后面不会出现这些字符串，但是加密之后呢？加密字符串是可能出现这些字符的, get 请求的 url 也会带上这些字符，后果就是请求错误的地址，导致前后端找半天。</p><p>由此可见，在使用字符串做判断时，一定要保证字符串的安全性，不然逻辑不严谨，会出现莫名其妙的难以排查的问题。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 在 V8 引擎浏览器上是怎么执行的</title>
      <link href="/js-execution/"/>
      <url>/js-execution/</url>
      
        <content type="html"><![CDATA[<p>这里为什么要强调是在 V8 引擎浏览器呢？因为不是所有浏览器都用 V8 引擎解析 JavaScript 的，比如 Firefox 用的就是 SpiderMonkey。</p><h2 id="一、调用栈-Call-Stack"><a href="#一、调用栈-Call-Stack" class="headerlink" title="一、调用栈(Call Stack)"></a>一、调用栈(Call Stack)</h2><p>作为前端开发，我们经常会听到这个词<strong>调用栈</strong>，那么他究竟是什么呢？我们先来看一段代码:</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">main</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">debugger</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;I&#x27;m main dunction&quot;</span>);</span><br><span class="line">  <span class="title function_">sayHi</span>(<span class="string">&#x27;Amy&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I am handing out&#x27;</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHi</span> (<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello&#x27;</span> + name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">main</span>();</span><br></pre></td></tr></table></figure><p>上面这段代码会怎么执行呢？首先我们知道 JavaScript 代码是自顶向下逐条执行的，像 main 函数这种函数里面套函数的情况怎么去逐行执行？这里调用栈就要出场了，调用栈，顾名思义是一种栈结构，栈结构的最大特点就是先进后出，所以上述代码中首先调用了 main 函数，v8 解析器把 main 函数压入栈中，开始逐行执行 main 函数中的代码，遇到 sayHi 函数，把 sayHi 压入栈顶，并逐行执行代码，执行完毕，弹出 sayHi 函数，继续执行 main 函数中的代码，具体可以自己 debugger 看一下，下面是我 debugger 的截图，另外注意这里的函数都是同步的。</p><p><img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/ac6e2188-cd01-472b-ba99-527e183223f8/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45/20220725/us-west-2/s3/aws4_request&X-Amz-Date=20220725T054118Z&X-Amz-Expires=86400&X-Amz-Signature=67bd07de9f6705ff0d421057859c535664c1e4e8b8ed550c036ce20d1155d3b1&X-Amz-SignedHeaders=host&response-content-disposition=filename%20=%22Untitled.png%22&x-id=GetObject" alt="call stack"></p><p>V8 引擎的调用栈有一定的限制长度，超出则会报栈溢出，所以切记不要函数嵌套调用太深，特别是递归的时候，要注意一下。</p><h2 id="二、执行上下文-Execution-Context"><a href="#二、执行上下文-Execution-Context" class="headerlink" title="二、执行上下文(Execution Context)"></a>二、执行上下文(Execution Context)</h2><p>在解释调用栈时，上图中可以看到有个 scope，调用 sayHi 时，scope 包含一个 Local 对象和一个 Global 对象，这里的 scope 就是当前的执行上下文了，也就是我们常说的执行环境。Local 表示函数上下文，Global 表示全局上下文。从上图可以看出 scope 使用的也是栈结构，当调用栈压入了新的函数，会在 scope 最前端创建新的执行上下文，执行上下文中包含了当前环境的可用变量，当函数执行完，对应的执行上下文被弹出，变量也会被销毁，全局上下文只有在离开页面才会被销毁。此外，说到执行上下文，经常会联想到 this 指向问题，上述函数 sayHi 我们可以看到 this 是指向 Window 的，也就是浏览器的全局环境，这说明普通的函数调用，this 是指向全局上下文的。</p><h2 id="三、事件循环-Event-Loop"><a href="#三、事件循环-Event-Loop" class="headerlink" title="三、事件循环(Event Loop)"></a>三、事件循环(Event Loop)</h2><p>上面讲到调用栈是自顶向下执行的，当遇到代码量很大或者响应很慢的情况时会发生什么呢？页面可能会一直等到代码执行完才渲染，更甚者，代码执行时间太长，直接就页面崩溃了，所以这里就需要异步回调了，遇到异步函数，无需等待执行完该函数，接着往下执行。要实现这个机制就需要事件循环了，简言之事件循环是为处理异步回调而生的。</p><p><img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/ba675e30-ab07-4476-9a2b-21a7632e1778/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45/20220725/us-west-2/s3/aws4_request&X-Amz-Date=20220725T054148Z&X-Amz-Expires=86400&X-Amz-Signature=055c6d941dbfda43c04478f836d35f5ada56a02688b830862951e2b0f9d82eb8&X-Amz-SignedHeaders=host&response-content-disposition=filename%20=%22Untitled.png%22&x-id=GetObject" alt="事件循环"></p><p>上图是一个表示事件循环过程的图，结合图例可以知道，代码还是自顶向下执行的，遇到异步代码，会暂时挂起，等到异步代码返回了结果，放入任务队列中，等到调用栈空了，引擎主线程会按照先进先出的方式取任务队列中的回调函数，放入调用栈中，执行其中的同步代码，一直重复这个动作，直到任务队列为空。上述的异步任务还细分为宏任务和微任务，宏任务是由宿主环境发起的，比如 seTimout,setIntervals 等，微任务是由引擎发起的，比如 promise 等,微任务始终优先于宏任务执行。</p><p>参考文献：</p><p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Call_stack">call stack</a></p><p><a href="https://medium.com/@gaurav.pandvia/understanding-javascript-function-executions-tasks-event-loop-call-stack-more-part-1-5683dea1f5ec">Understanding Javascript Function Executions — Call Stack, Event Loop , Tasks &amp; more</a></p><p><a href="https://zhuanlan.zhihu.com/p/33058983">详解JavaScript中的Event Loop（事件循环）机制</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.05：阅读的艺术</title>
      <link href="/issue-05/"/>
      <url>/issue-05/</url>
      
        <content type="html"><![CDATA[<h2 id="阅读的艺术"><a href="#阅读的艺术" class="headerlink" title="阅读的艺术"></a>阅读的艺术</h2><p>每当跟朋友谈论起阅读，我们会聊到这本书讲了什么，最喜欢里面里面哪些章节段落，为什么会喜欢它。但是，所有书籍都适合这么去评价分析吗？答案是否定的。我们会阅读很多题材的书籍资料，比如技术，文学等等，对于不同的书籍我们的关注点是不一样的。比如说我阅读小说的习惯是看情节，看环境，而不会特别去分析里面的人物，或者花很多时间去思考怎么评价他，为什么？因为我觉得文学之所以称之为文学，而不叫做人物志，是因为他是把人物放到了特定的想象空间去，作者想展现给我们的不是这个任务本身，而是通过人物去渲染他所处的环境，体现出环境的空间感。但是对于有教导意义的技术类书籍，我会概览目录，看下大致讲了什么，哪些值得我精读，哪些只需要粗略了解，因为技术书籍或者资料的目的性是比较强的，他之所以存在，就是为了给予我们某方面的指导，这类资料也是无需做过度的评价的，更不需要过多的想象力。</p><h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><p>1、<a href="http://www.catb.org/~esr/faqs/smart-questions.html">How To Ask Questions The Smart Way</a></p><p>一篇讲如何提技术问题的文章</p><p>2、<a href="https://zhuanlan.zhihu.com/p/25795393">如何向开源项目提交无法解答的问题</a></p><p>很有意思的讲如何向开源项目提问题的文章</p><p>3、<a href="https://github.com/paperless-ngx/paperless-ngx">文档管理开源库</a></p><p>文档管理库，需要自己假设服务</p><p>4、<a href="https://www.chiark.greenend.org.uk/~sgtatham/puzzles/">解谜类游戏集合</a></p><p>该网站收藏了一些解谜类的小游戏，跨平台，支持下载，mac 端的包整合了所有的这些小游戏</p><p>5、<a href="https://www.nikoli.co.jp/en/puzzles/">一个日本的谜题杂志网站</a></p><p>上面有很多谜题，对解谜感兴趣的话，可以看看</p><p>6、<a href="https://www.nhm.ac.uk/discover/how-do-other-animals-see-the-world.html">动物视角的世界</a></p><p>图文并茂的介绍几种动物视角下的世界，很有意思的文章</p><p>7、<a href="https://queue.acm.org/detail.cfm?id=3534857&doi=10.1145/3534857">软件彩蛋</a></p><p>一篇讲软件彩蛋的文章，其中提到了 chrome 浏览器目前还存在的彩蛋</p><p>8、<a href="https://guidetojapanese.org/learn/grammar">日语语法指南</a></p><p>英文日语语法指南</p><p>9、<a href="https://stackblitz.com/">在线编程环境</a></p><p>很方便的在线编程环境，可以快速创建不同框架项目，性能很好，对于需要临时写不同框架 demo 的需求来说，比 codepen 体验好</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.04：子非鱼，安知鱼之乐也</title>
      <link href="/issue-04/"/>
      <url>/issue-04/</url>
      
        <content type="html"><![CDATA[<h2 id="卷不卷，我们可以选择"><a href="#卷不卷，我们可以选择" class="headerlink" title="卷不卷，我们可以选择"></a>卷不卷，我们可以选择</h2><p>跟一位系统工程师朋友聊天，朋友说他们公司非常卷，同事们都逮到机会就在老板面前邀功。我说我最看不起这种不干活还爱表现的人了。朋友笑着说，这你就错了，人家是干活也很卖力，活也干得很好。我想这确实很难卷过别人啊，别人又卖力，活还干得好，又会表现，一般人拿什么跟别人比呢？想要升职加薪也只能更卷了吧。<br>接着盆友说他领导连续加了一周班，每天都加班到一两点，为了防止在开车去公司上班的路上睡着，送完孩子上学都要在学校旁边的马路上眯一会才出发。我听了感觉很震惊，这样很容易猝死吧，我说这么累，就不能换份工作吗？不怎么加班工资还行的公司还挺多的吧，怎么不去外面看看机会呢？我朋友听完，一副看傻子的表情看我，你以为都像互联网行业工资这么虚高的吗？这位哥们上有老下有小，老婆不工作，身上还背着车贷房贷，哪敢轻易跳槽啊，你以为都跟你们小年轻一样没有房贷车贷，干不爽了就任性裸辞吗?再说在传统行业的开发里，在外面也很难开到这个价了，所以他领导虽然经常被老板骂，不分昼夜的干活，但是也没办法，为了生活。<br>这不禁让我想到一次小组群聊，聊到互联网程序员因为被裁压力过大跳楼时一位同事说的话，同事说他们不值得同情，在深圳买了这么贵的房，失业了还不起房贷，就不能卖了房去二线或者回老家发展吗？活着的选择这么多，为什么非得选择死路呢？总有活下去的办法，只不过选择怎么活而已。我很赞同这个观点，每个人怎么活可以自己选择，是要为了优异的生活而活得累点，还是想轻松的活着，我们可以选择。</p><h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><p>1、<a href="https://github.com/v8/v8/tree/cd81dd6d740ff82a1abbc68615e8769bd467f91e">V8源码</a></p><p>V8 源码，遇到 JS 模块不懂怎么实现的时候可以翻一翻</p><p>2、<a href="https://the-algorithms.com/">算法</a></p><p>各种语言的算法实现</p><p>3、<a href="https://github.com/Anduin2017/HowToCook">做饭指南</a></p><p>一个做饭指南开源库</p><p>4、<a href="https://github.com/giongto35/cloud-morph">云游戏开源项目</a></p><p>云游戏开源项目</p><p>5、<a href="http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting">浏览器功能检测</a></p><p>JS 高程推荐的浏览器功能检测文章</p><p>6、<a href="https://www.patterns.dev/posts/">设计模式-JavaScript为例</a></p><p>图文并茂的设计模式手册</p><p>7、<a href="https://github.com/7kms/react-illustration-series">图解 react 原理</a></p><p>react 原理分析系列文章</p><p>8、<a href="http://caleb.software/posts/ios-delayed-messages.html">ios 定时发送短信</a></p><p>IMessage 是没有定时发送功能的，一个外国小哥想到了利用 IOS日历和快捷方式，实现这个功能</p><h2 id="文摘"><a href="#文摘" class="headerlink" title="文摘"></a>文摘</h2><p>1、勇士们的英勇很可能换来一场屠杀。他们是英雄，死了，而他们的妻子成了奴隶，也死了。</p><p>—— 塔拉·韦斯特弗《你当像鸟飞往你的山》</p><p>2、永远别让别人注意你。北京人说，不怕贼偷，就怕贼惦记。你千万别让人惦记上。</p><p>—— 王小波《黄金时代》</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>获取 DOM Style 的正确姿势</title>
      <link href="/get-css-style/"/>
      <url>/get-css-style/</url>
      
        <content type="html"><![CDATA[<p>今天在写一个很简单的 demo 时发现获取 dom.style.width 一直都是空的，打印 dom.style 里面设置的其他属性也都是空的，这就很玄学了。明明设置了几个 css 属性，怎么拿到的全是空呢？先来看看我的 demo:</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#status</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: orange;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;status&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">updateProgress</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">style</span>.<span class="property">width</span>)</span><br><span class="line">  <span class="keyword">var</span> width = +div.<span class="property">style</span>.<span class="property">width</span>.<span class="title function_">replace</span>(<span class="string">&#x27;px&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  div.<span class="property">style</span>.<span class="property">width</span> = width + <span class="number">5</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (width &lt; <span class="variable language_">window</span>.<span class="property">innerWidth</span>) &#123;</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(updateProgress);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(updateProgress);</span><br></pre></td></tr></table></figure><p>上面的例子，第一次打印的是个空，说明第一次是没有获取到 width 值的，第二次之后能打印到数据，这其中有什么差异呢？demo 中可以看到我的 css 样式写在了 style 标签里面，进了函数之后直接设置为了行内样式，这就是二者的区别。这里引用一下 MDN 的描述</p><blockquote><p>The HTMLElement.style property is not useful for completely learning about the styles applied on the element, since it represents only the CSS declarations set in the element’s inline style attribute, not those that come from style rules elsewhere, such as style rules in the section, or external style sheets. To get the values of all CSS properties for an element you should use Window.getComputedStyle() instead.</p></blockquote><p>上面的意思就是 HTMLElement.style 并没有写入我们设置的所有 css 属性，只写入了行内 css 属性，要获取其他地方的属性可以使用 Window.getComputedStyle() 方法，下面来改进一下 demo</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">updateProgress</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(div).<span class="property">width</span>);</span><br><span class="line">  <span class="keyword">var</span> width = +<span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(div).<span class="property">width</span>.<span class="title function_">replace</span>(<span class="string">&#x27;px&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  div.<span class="property">style</span>.<span class="property">width</span> = width + <span class="number">5</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (width &lt; <span class="variable language_">window</span>.<span class="property">innerWidth</span>) &#123;</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(updateProgress);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(updateProgress);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.03：关于职业选择</title>
      <link href="/issue-03/"/>
      <url>/issue-03/</url>
      
        <content type="html"><![CDATA[<h2 id="关于职业选择"><a href="#关于职业选择" class="headerlink" title="关于职业选择"></a>关于职业选择</h2><p>可能是师范毕业的缘故吧，经常被问怎么不去当老师，当老师多好啊，有寒暑假，固定的职业，不会随便被解雇，一般可以做一辈子。关于这个问题，有时候我也会问自己，毕业的时候怎么不选择当老师或者考公。我的想法是，当老师和考公这两个职业虽稳定，当时可能意味着我要用一生去做一件事情，这毋庸置疑是很伟大，但是我还想人生更多彩些，不想一辈子花大部分时间去做一件事。大学时我们有一门课，叫做职业生涯规划，老师就让我们对自己的职业做规划，还要写报告交上去，那时我就在想，人生哪有这么确定呢，职业规划应该是不断地前进变化的，因为时代也在悄无声息奥的变化着。时代在改变，社会在进步，就会有新的职业出现，旧的职业消失，谁能预测到未来可能会出现什么新的职业呢？此外，人的思想也是在不断进化着的，用一生按照一份规划去执行，这恐怕也是比较难做到的吧。anyway，我还是选择顺势而为，跟随时代的脚步前进，时刻准备着下一个阶段不能做程序了，我也能很快的适应新环境，去做新的事情。</p><h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><p>1、<a href="https://github.com/ffmpegwasm/ffmpeg.wasm">wasm 封装的 ffmpeg 库</a></p><p>wasm封装的ffmpeg库，可以用于浏览器端和 nodeJS 应用程序</p><p>2、<a href="https://refactoring.guru/design-patterns/catalog">图解设计模式</a></p><p>插图有点可爱的设计模式文章</p><p>3、<a href="https://missing-semester-cn.github.io/">计算机教育中缺失的一课</a></p><p>这个系列的文章讲解了一些计算机领域常用的工具比如 shell，vim 等</p><p>4、<a href="https://github.com/mezzoblue/csszengarden.com">CSS 设计素材</a></p><p>一份 HTML 多份 CSS 设计典范</p><p>5、<a href="https://nicolasgallagher.com/about-html-semantics-front-end-architecture/">浅谈 HTML 语义化与前端结构</a></p><p>浅谈 HTML 语义化与前端结构</p><p>6、<a href="https://www.smashingmagazine.com/2013/10/challenging-css-best-practices-atomic-approach/">CSS 最佳实践</a></p><p>atomic 理论讲解</p><p>7、<a href="https://www.w3.org/QA/Tips/goodclassnames">CSS Class 语义化</a></p><p>关于 CSS Class 的取名建议</p><p>8、<a href="https://martinrue.com/my-engineering-axioms/">一些开发原则</a></p><p>一些看着还行的开发原则</p><p>9、<a href="https://github.com/h5bp/Front-end-Developer-Interview-Questions">一些前端问题</a></p><p>github star 53k 的前端问题集合，可以通过解答这些问题，了解自己的基础</p><p>10、<a href="https://github.com/skyline75489/what-happens-when-zh_CN">当···时发生了什么</a></p><p>讲解很详细的从用户输入内容到浏览器渲染出页面的文章</p><p>11、<a href="https://github.com/ruanyf/document-style-guide">中文技术文档写作规范</a></p><p>阮一峰老师写的中文技术文档写作规范</p><p>12、<a href="https://blog.poetries.top/browser-working-principle/">浏览器工作原理与实践</a></p><p>提出了一些浏览器工作原理相关的问题，做了简单回答</p><h2 id="文摘"><a href="#文摘" class="headerlink" title="文摘"></a>文摘</h2><p>1、那里的人习惯于把一切不是破鞋的人说成破鞋，而对真的破鞋放任自流。</p><p>—— 王小波《黄金时代》</p><p>2、the smaller the unit, the more reusable it is ——《<a href="https://mp.weixin.qq.com/s/dSAitXlbLpnsM9uobezyhQ">Challenging CSS Best Practices</a>》</p><p>3、Looks can always change, but the reasons for giving something a look stay the same.  ——《CSS Class 语义化》</p><p>4、The only true authority stems from knowledge, not from position —— Martin Rue《MY ENGINEERING AXIOMS》</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>函数柯里化</title>
      <link href="/function-currying/"/>
      <url>/function-currying/</url>
      
        <content type="html"><![CDATA[<h2 id="一、是什么"><a href="#一、是什么" class="headerlink" title="一、是什么"></a>一、是什么</h2><p>函数柯里化就是一个函数一次只接收一个参数，同时返回一个函数接收下一个参数，形如f(a)(b)(c)。</p><h2 id="二、为什么函数要柯里化"><a href="#二、为什么函数要柯里化" class="headerlink" title="二、为什么函数要柯里化"></a>二、为什么函数要柯里化</h2><ul><li>保证接收到的每一个参数都是正确的</li><li>避免重复传入相同参数</li><li>创建纯函数，减少函数出错率和副作用</li><li>创建高阶函数</li><li>增加函数的可读性</li></ul><h2 id="三、函数柯里化实现"><a href="#三、函数柯里化实现" class="headerlink" title="三、函数柯里化实现"></a>三、函数柯里化实现</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">curry</span> =(<span class="params">fn</span>) =&gt;&#123;</span><br><span class="line">  <span class="keyword">return</span> curried = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (fn.<span class="property">length</span> !== args.<span class="property">length</span>)&#123;</span><br><span class="line">          <span class="keyword">return</span> curried.<span class="title function_">bind</span>(<span class="literal">null</span>, ...args)</span><br><span class="line">      &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fn</span>(...args);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">totalNum</span>=(<span class="params">x,y,z</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> x+y+z </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">const</span> curriedTotal = <span class="title function_">curry</span>(totalNum);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curriedTotal</span>(<span class="number">10</span>) (<span class="number">20</span>) (<span class="number">30</span>));</span><br></pre></td></tr></table></figure><p>参考文档：<br><a href="https://stackoverflow.com/questions/36314/what-is-currying">What is ‘Currying’</a><br><a href="https://blog.logrocket.com/understanding-javascript-currying/">https://blog.logrocket.com/understanding-javascript-currying/</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 奇技淫巧</title>
      <link href="/javascript-tricks/"/>
      <url>/javascript-tricks/</url>
      
        <content type="html"><![CDATA[<h2 id="巧用运算符"><a href="#巧用运算符" class="headerlink" title="巧用运算符"></a>巧用运算符</h2><h3 id="1、无符号类型转换，非数字默认为-0"><a href="#1、无符号类型转换，非数字默认为-0" class="headerlink" title="1、无符号类型转换，非数字默认为 0"></a>1、无符号类型转换，非数字默认为 0</h3><p>巧用无符号右偏移 0 位，结果如下，字符串可以转换为 0，正数不变，但是要注意，有符号的负数得出的结果不是它本身，所以这个技巧不适用于负数，具体应用可以看看 loadash slice 源码。</p><p>example:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = <span class="number">123</span>;  <span class="comment">// output: 123</span></span><br><span class="line">a &gt;&gt;&gt;= <span class="number">0</span>;</span><br><span class="line">b = <span class="string">&#x27;123&#x27;</span>;  <span class="comment">// output: 123</span></span><br><span class="line">b &gt;&gt;&gt;= <span class="number">0</span>;</span><br><span class="line">c = <span class="string">&#x27;123a&#x27;</span>;  <span class="comment">// output: 0</span></span><br><span class="line">c &gt;&gt;&gt;= <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>lodash:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">slice</span>(<span class="params">array, start, end</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> length = array == <span class="literal">null</span> ? <span class="number">0</span> : array.<span class="property">length</span></span><br><span class="line">  <span class="keyword">if</span> (!length) &#123;</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">  &#125;</span><br><span class="line">  start = start == <span class="literal">null</span> ? <span class="number">0</span> : start</span><br><span class="line">  end = end === <span class="literal">undefined</span> ? length : end</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (start &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    start = -start &gt; length ? <span class="number">0</span> : (length + start)</span><br><span class="line">  &#125;</span><br><span class="line">  end = end &gt; length ? length : end</span><br><span class="line">  <span class="keyword">if</span> (end &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    end += length</span><br><span class="line">  &#125;</span><br><span class="line">  length = start &gt; end ? <span class="number">0</span> : ((end - start) &gt;&gt;&gt; <span class="number">0</span>)</span><br><span class="line">  start &gt;&gt;&gt;= <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> index = -<span class="number">1</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">new</span> <span class="title class_">Array</span>(length)</span><br><span class="line">  <span class="keyword">while</span> (++index &lt; length) &#123;</span><br><span class="line">    result[index] = array[index + start]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2、类型转换，非数字默认为-0"><a href="#2、类型转换，非数字默认为-0" class="headerlink" title="2、类型转换，非数字默认为 0"></a>2、类型转换，非数字默认为 0</h3><p>上面的玩法是针对无符号类型的，这个方法是有无符号都适用。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = <span class="number">123</span>;  <span class="comment">// output: 123</span></span><br><span class="line">~~a;</span><br><span class="line">b = <span class="string">&#x27;123&#x27;</span>;  <span class="comment">// output: 123</span></span><br><span class="line">~~b;</span><br><span class="line">c = <span class="string">&#x27;123a&#x27;</span>;  <span class="comment">// output: 0</span></span><br><span class="line">~~c;</span><br><span class="line">d = <span class="string">&#x27;-123&#x27;</span>;  <span class="comment">// output: -123</span></span><br><span class="line">~~d;</span><br><span class="line">e = -<span class="number">123</span>;  <span class="comment">// output: -123</span></span><br><span class="line">~~e;</span><br></pre></td></tr></table></figure><p>这个用法是在一个 leetcode 题解看到的，做算法题可以常用，不过日常工作中就要看情况了，可能别人看不懂。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.02：团队对个人的影响</title>
      <link href="/issue-2/"/>
      <url>/issue-2/</url>
      
        <content type="html"><![CDATA[<h2 id="团队对个人的影响"><a href="#团队对个人的影响" class="headerlink" title="团队对个人的影响"></a>团队对个人的影响</h2><p>上个月参加了公司的甩肉大赛，参赛需要给 60 块钱，连续 24 天打卡运动 30 分钟就可以拿到 100 块钱，组队最高打卡次数的有另外的团队奖。于是跟另外几个同事组了个小队，小队的不成文规定是每天在小程序打卡之后要截图发到群里，这就起到一个很好的监督效果，所有成员都打卡了，唯独你没打卡，你会觉得不好意思，即使再累，也会抽空去补上运动 30 分钟，每天所有成员打卡之后，晚上有个小姐姐会汇总，恭喜今天全员打卡，这个会有一定的激励作用，心里会想，哇，真棒，今天又做了一件事呢。结果就是我已经养成了运动的习惯，有史以来第一次连续运动一个月 30 天了，之前自己也会偶尔运动，都是零零碎碎的三天打鱼两天晒网。</p><p>从这个例子可以看出团队对个人的影响主要有以下几点：1. 有效的团队监督机制可以驱动个人花费时间和精力去实现团队的目标;2. 在实现团队目标的过程中，个人会获得相应的附属加成，比如我为了每天早起运动，必须要早睡，保证睡眠充足，这就形成了一个良性循环，运动的同时养成了早睡早起的习惯。3. 有效的团队激励制度，激发个人的奋斗激情,每天下班回来都挺累了，就是打了卡也可能忘记自己运动过，这个时候收到一条运动汇总消息，大家互相鼓励，会想明天也要继续运动，才能看到这条消息。</p><p>这里只是举了个团队对个人影响的小例子，可以相应的再举个反例，离开团队的个人会经历什么？当我不工作的时候，总想写些有用或者有趣的项目，但会每每当我准备开始时，总是怅然若失，我不知道要写什么，所以至今月余也没什么个人项目方面的成就感，工作中总是有不同的项目，写不完的东西，这让我有一定的成就感，能感觉到自己还可以用代码做些东西。此外，在工作中总能在一定的短周期内学会一些东西，业余时间由于缺少监督机制和目标，学东西的周期总会拉长。</p><h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><p>1、<a href="https://github.com/sunface/rust-course">Rust语言圣经</a></p><p>Rust 语言中文开源书籍，每一章节都配有相应的练习，还包含有使用中可能会遇到的坑。</p><p>2、<a href="https://github.com/trekhleb/javascript-algorithms">JS 算法</a></p><p>算法和数据结构在 JS 中的实现</p><p>3、<a href="https://github.com/rustlang-cn/rust-algos">Rust算法题解</a></p><p>用 Rust 语言实现常见的算法和数据结构，以及leetcode题解</p><p>4、<a href="https://github.com/yiminghe/async-validator">表单校验库</a></p><p>这算是比较常用的表单校验库，element-ui 也是用的这个做校验</p><p>5、<a href="https://github.com/rust-lang/rust-analyzer">rust-analyzer 插件源码</a></p><p>rust-analyzer 插件源码</p><p>6、<a href="https://github.com/spacedriveapp/spacedrive">文件系统</a></p><p>一个跨平台开源文件系统</p><p>7、<a href="https://q.shanyue.tech/engineering/">前端工程化三十八讲</a></p><p>前端工程化 系列文章</p><p>8、<a href="https://lvivity.com/single-page-app-vs-multi-page-app">SPA VS MPA</a></p><p>SPA 和 MPA 的区别</p><p>9、<a href="https://github.com/alibaba/lowcode-engine">阿里低代码开源平台</a></p><p>阿里低代码开源平台</p><h2 id="文摘"><a href="#文摘" class="headerlink" title="文摘"></a>文摘</h2><p>我是悲观主义者。别人为胜利而战，我不是。我总是战斗，偶尔会赢。</p><p>——理查德·斯托曼</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vol.01：为什么要开始写这个系列的杂文</title>
      <link href="/issue-1/"/>
      <url>/issue-1/</url>
      
        <content type="html"><![CDATA[<h2 id="为什么要开始写这个系列的杂文"><a href="#为什么要开始写这个系列的杂文" class="headerlink" title="为什么要开始写这个系列的杂文"></a>为什么要开始写这个系列的杂文</h2><p>上周跟朋友聊天，聊到人经常会忘记自己见过学习过的知识这个问题，古人云好记性不如烂笔头，我想能最大限度存储知识的方式就是笔记吧。也有朋友跟我说过要掌握一个知识，只需要把它理解透彻就够了，这样以后遇到问题就能想起来，对于这个观点我是持否定态度的，因为人的脑容量是有限的，我们不可能把所有可能会用到的东西都记起来，即使当时弄懂了这个问题，具体的案例可以参照高考，那个时候为了考试，我们精通各种数学题目的解法，算是理解很透彻了，看看现在的我们，又能解出几道题目呢。艾宾浩斯的记忆曲线法告诉我们可以通过有效的训练达到长期记忆的目的，但是这种记忆训练也是通过反复记忆达成的，所以个人认为不存在说对很多知识理解透彻，一辈子都会记得的情况，要说短期记得某一部分知识，个人还是赞成的。鉴于个人的以上观点，为了以后方便查找我见过学过的东西，开始了这个系列的写作，主要记录个人一周的见闻和感悟。</p><h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><p>1、<a href="https://github.com/hehonghui/the-economist-ebooks">英语外刊杂志下载</a></p><p>收集经济学人、纽约客、自然、卫报等英语外刊杂志的开源仓库，可以自由下载。</p><p>2、<a href="https://dotown.maeda-design-room.net/">可供商用的像素图资源</a></p><p>一个可爱的像素图网站，分类展示了多种像素图，左上角写着大大的可供商业免费使用文字</p><p>3、<a href="https://pages.cs.wisc.edu/~remzi/OSTEP/">操作系统导论英文版</a></p><p>可供在线免费阅读的操作系统导论</p><h2 id="文摘"><a href="#文摘" class="headerlink" title="文摘"></a>文摘</h2><p>1、什么光荣、事业、理想、爱情，都是吃饱肚子之后才有的事情。</p><p>——莫言</p><p>2、Your work is going to fill a large part of your life, and the only way to be truly satisfied is to do what you believe is great work. And the only way to do great work is to love what you do. If you haven’t found it yet, keep looking. Don’t settle. As with all matters of the heart, you’ll know when you find it.</p><p>——乔布斯斯坦福大学演讲《Stay hungry, stay foolish》</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MAC 调试 IOS 真机上 Web 网页的方法</title>
      <link href="/mac-debug-ios-web-page/"/>
      <url>/mac-debug-ios-web-page/</url>
      
        <content type="html"><![CDATA[<h2 id="一、使用-chrome-远程调试"><a href="#一、使用-chrome-远程调试" class="headerlink" title="一、使用 chrome 远程调试"></a>一、使用 chrome 远程调试</h2><ul><li><p>ios 设备设置：设置 -&gt; Safari 浏览器 -&gt; 高级 -&gt; 打开网页检查器</p></li><li><p>安装 ios-webkit-debug-proxy: <code>brew install ios-webkit-debug-proxy</code></p></li><li><p>安装 remotedebug-ios-webkit-adapter: <code>remotedebug_ios_webkit_adapter --port=&lt;port&gt;</code></p></li><li><p>手机打开上述端口启动的本地服务</p></li><li><p>手机用数据线连上 mac，chrome 打开 chrome:&#x2F;&#x2F;inspect&#x2F;#devices，就可以看到上述服务了，点进去可以看得到控制台，但是这个控制台的 console 模块被拦截了，还是看不到打印的日志，network，element 等模块正常。为了解决这个问题可以在测试环境装个 vconsole，我用的是 ts，需要装 3.4.0 以上的版本，不然会报类型错误。</p></li><li><p>此外，说是调试，并不能 debugger，只能打打日志抓抓包。</p></li></ul><h2 id="二、Safari-调试"><a href="#二、Safari-调试" class="headerlink" title="二、Safari 调试"></a>二、Safari 调试</h2><ul><li><p>同上第一步</p></li><li><p>mac Safari 偏好 -&gt; 通用 -&gt; 开启 develop 菜单</p></li><li><p>手机 Safari 打开需要调试的网页</p></li><li><p>手机用数据线连上 mac，点击 mac Safari 的 develop 菜单看到有个 iphone 的子菜单点进去有手机上打开的调试网页点进去就可以看到控制台了，这里手机上的网页检测不太稳定，经常会闪一下控制台之后就再也看不到调试网页了，故障率高不太建议</p></li></ul><h2 id="三、charles"><a href="#三、charles" class="headerlink" title="三、charles"></a>三、charles</h2><p>另外一种是用 charles 配代理抓包，这个感觉配置起来比较麻烦，不过挺强大的还可以映射开启 ssl，玩了下，好像我用不到这么复杂的东西，就不写了，以后有需要可以看看他的文档。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 跨端方案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浅谈可视化表单设计</title>
      <link href="/brief-discussion-on-visual-form-design/"/>
      <url>/brief-discussion-on-visual-form-design/</url>
      
        <content type="html"><![CDATA[<p>表单对于企业级应用来说是很重要的一个模块，表单一般都会有增删改查的需求，最简单的实现方式是有新的表单需求就写一份，这样重复劳动就很多了。稍微有点经验的程序员会抽一个公共模块出来，哪里有表单的需求就调用一下这个公共模块，生成一份，省去了很多的重复工作。那么这种公共模块我们会怎么设计呢？首先我们想到的是数据驱动视图思想，只要按照我们规定的格式输入数据，我们就能产生出一份符合需求的表单，这里我们发现还是不够省力，因为每次构建新的表单都需要我们自己去创建一份数据。是否可以让用户去创建这份表单数据供我们渲染呢？当然可以啦！这里我称之为表单可视化，大概实现思路就是用户通过编辑我们提供的可视化界面产出数据，表单解析器解析用户输入的表单数据，表单渲染器使用解析好的数据渲染表单，输出表单的 formdata，时序图如下：</p><img src='data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMmJldGEzPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGNvbnRlbnRTdHlsZVR5cGU9InRleHQvY3NzIiBkYXRhLWRpYWdyYW0tdHlwZT0iREVTQ1JJUFRJT04iIGhlaWdodD0iODZweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjQ1NHB4O2hlaWdodDo4NnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ1NCA4NiIgd2lkdGg9IjQ1NHB4IiB6b29tQW5kUGFuPSJtYWduaWZ5Ij48ZGVmcy8+PGc+PCEtLWVudGl0eSA/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9Ii4uIiBkYXRhLXNvdXJjZS1saW5lPSIxIiBpZD0iZW50MDAwMiI+PGVsbGlwc2UgY3g9IjE5Ljk5OTkiIGN5PSIxNCIgZmlsbD0iI0ZGMDAwMCIgcng9IjgiIHJ5PSI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cGF0aCBkPSJNMTkuOTk5OSwyMiBMMTkuOTk5OSw0OSBNNi45OTk5LDMwIEwzMi45OTk5LDMwIE0xOS45OTk5LDQ5IEw2Ljk5OTksNjQgTTE5Ljk5OTksNDkgTDMyLjk5OTksNjQiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjYiIHk9Ijc4LjQ5NTEiPiYjMjk5OTI7JiMyNTE0Mzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIyIiBpZD0iZW50MDAwMyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI2MS45OTk4IiB4PSIxNDgiIHk9IjI1LjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSIxNTgiIHk9IjQ4LjQ5NTEiPiYjMzUyOTk7JiMyNjUxMjsmIzIyMTIwOzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSIuLi4iIGRhdGEtc291cmNlLWxpbmU9IjMiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjYxLjk5OTgiIHg9IjM4NyIgeT0iMjUuNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQxLjk5OTgiIHg9IjM5NyIgeT0iNDguNDk1MSI+JiMyODIxMDsmIzI2NTc5OyYjMjIxMjA7PC90ZXh0PjwvZz48IS0tbGluayA/PyB0byA/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMiIgZGF0YS1lbnRpdHktMj0iZW50MDAwMyIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjUiIGlkPSJsbms1Ij48cGF0aCBkPSJNMzQuMzksNDMuNjUgQzU5Ljg1LDQzLjY1IDEwNy4zNiw0My42NSAxNDEuNjcsNDMuNjUiIGZpbGw9Im5vbmUiIGlkPSImIzI5OTkyOyYjMjUxNDM7LXRvLSYjMzUyOTk7JiMyNjUxMjsmIzIyMTIwOyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTQ3LjY3LDQzLjY1LDEzOC42NywzOS42NSwxNDIuNjcsNDMuNjUsMTM4LjY3LDQ3LjY1LDE0Ny42Nyw0My42NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjAwMDEiIHg9IjUyIiB5PSIzNi43MTY5Ij4mIzMyNTM0OyYjMzY3NTM7JiMyNzE2OTsmIzI2NDk1OyYjMjU5Njg7JiMyNTQ1NDs8L3RleHQ+PC9nPjwhLS1saW5rID8/PyB0byA/Pz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwMyIgZGF0YS1lbnRpdHktMj0iZW50MDAwNCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjYiIGlkPSJsbms2Ij48cGF0aCBkPSJNMjEwLjI1LDQzLjY1IEMyNTYuMDUsNDMuNjUgMzM0Ljk0LDQzLjY1IDM4MC43NSw0My42NSIgZmlsbD0ibm9uZSIgaWQ9IiYjMzUyOTk7JiMyNjUxMjsmIzIyMTIwOy10by0mIzI4MjEwOyYjMjY1Nzk7JiMyMjEyMDsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM4Ni43NSw0My42NSwzNzcuNzUsMzkuNjUsMzgxLjc1LDQzLjY1LDM3Ny43NSw0Ny42NSwzODYuNzUsNDMuNjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDEuOTUyNyIgeD0iMjI4IiB5PSIzNi43MTY5Ij4mIzI4MjEwOyYjMjY1Nzk7JiMzNDkyMDsmIzIxMzMzOyYjMzY3NTU7JiMyMDk4NjsgZm9ybWRhdGE8L3RleHQ+PC9nPjw/cGxhbnR1bWwtc3JjIElxbWtvSXpJVTN2Ym5SRUV4R2hBSFFhZk40TWZvSU05VVVhdmdHZWxiWXotRGNfMnF2YWhhQ0lVeFRacVJGdmFhMVdOTDlFazdLQVhXZk4yeXB0Sk5rb1ItNnA1bWNUcHpwLVJrazVQeHBlNUJlR3lLMzdTMUExWTJGbDVtWExGVXdVLXMzVnZRVmlrWFJKeWVqb0tuOTk0MDAwMD8+PC9nPjwvc3ZnPg=='><p>从上述分析可以知道要实现表单可视化，需要有这样一个流水线：表单编辑器产出表单模板数据 &#x3D;&gt; 表单解析器按标准解析模板数据 &#x3D;&gt; 表单渲染器消费数据渲染出表单，这对于一般的基础组件来说是没什么问题的。但是遇上动态增删的组合组件会如何呢？比如用户需要一个可以在表单界面增删项目的组件，这时候上面的设计貌似就不太好用了。要知道模板数据是在产出时就已经生成投入流水线运作了，这时候运作到最后一步准备装箱了，让我们在这批货里新增几个新的产品，而由于产出模板的工人已经下班了，我们又不能回到开头去重新产出新的模板，这时候要怎么做呢？只能在渲染阶段改数据，这个阶段只能交付最终产品(formdata)，怎么让用户看到新的产品跟其他商品外观(模板)和内在材料(data)一样呢？ </p><p>要解决上述问题，我们要思考的是怎么在一份 formdata 数据里面去同时存储到 data 和 template，一个组合组件由很多的基础组件组成，基于此，我的做法是把组合组件的 template 作为 data 去存，同时存储组个组件内每个基础组件的 data 到 formdata，下次渲染界面的时候就可以拿组合组件的 data 渲染出组合组件内的所有基础组件，而每个基础组件的 data 已经被存储到了 formdata 中，可以直接拿来填充。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于分支管理的一点感想</title>
      <link href="/thoughts-on-branch-management/"/>
      <url>/thoughts-on-branch-management/</url>
      
        <content type="html"><![CDATA[<p>之前写 git 文档的时候有说到过要开发一个新功能，从开发分支切出进行开发，开发完合并回开发分支。但是在工作中，基本是自己一个人开发的项目，为了省事，经常会直接在开发分支上修复 bug，最近就发现了这样是有问题的。</p><p>问题大概过程是我切了一个分支去配合后端 api 改造，修改完之后，合到了测试分支，供测试。一段时间之后，后端正式环境还没有更新 api，我也就一直没有发布到正式环境，这时候测试版发现了一些 bug，于是顺手在测试分支上改了，又过了一些天，又改了写 bug，这时候需要把这些 bug 修复更新到正式环境，就出现问题了，更到正式环境如何保证不更 api 改造相关内容，只更 bug 修复部分呢？若是一个两个 commit 还好，cherry-pick，但是我是修复了一批 bug，修复一个 bug 就一个 commit，这么更万一更错了呢。所以这提醒我以后要合并改动到测试分支之前，先要确定是不是这部分可以上了，免得日后出现这种问题，或者开一个预发布分支，把确定可以发布的内容发到预发布分支。</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 Docker 配置前端环境</title>
      <link href="/docker-frontend-environment-setup/"/>
      <url>/docker-frontend-environment-setup/</url>
      
        <content type="html"><![CDATA[<h2 id="一、大体思路"><a href="#一、大体思路" class="headerlink" title="一、大体思路"></a>一、大体思路</h2><p>1、设置 shell 别名运行 docker 命令</p><ul><li>alias — 设置 shell 别名</li><li>node — 在终端输入的名称</li><li>docker —  docker 命令</li><li>run — 执行容器镜像</li><li>-rm — 关闭时自动删除容器</li><li>it —创建交互式容器</li><li>-v “$PWD”:&#x2F;app — 把当前目录挂在到容器的 app 目录下</li><li>-w &#x2F;app — 设置容器的工作目录为&#x2F;app</li><li>node:16-alpine — 所使用的容器镜像</li></ul><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/anatomy-of-a-docker-alias.png" alt="shell-alias"></p><p>2、运行 <code>source ~/.zshrc</code></p><h2 id="二、具体配置"><a href="#二、具体配置" class="headerlink" title="二、具体配置"></a>二、具体配置</h2><p>1、设置 node 环境，下面的例子是设置 node@16的，可以自己根据版本号命名另外设置，设置完之后记得执行一下 <code>source ~/.zshrc</code>。</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ./zshrc</span></span><br><span class="line"><span class="comment"># 设置 node 环境</span></span><br><span class="line"><span class="built_in">alias</span> node=<span class="string">&#x27;docker run --rm -it -v &quot;$PWD&quot;:/app -w /app node:16-alpine&#x27;</span></span><br><span class="line"><span class="comment"># 设置 npm</span></span><br><span class="line"><span class="built_in">alias</span> npm=<span class="string">&#x27;docker run --rm -it -v &quot;$PWD&quot;:/app -w /app node:16-alpine npm&#x27;</span></span><br></pre></td></tr></table></figure><p>参考文档：</p><p><a href="https://nystudio107.com/blog/dock-life-using-docker-for-all-the-things">https://nystudio107.com/blog/dock-life-using-docker-for-all-the-things</a><br><a href="https://hub.docker.com/_/node">node 镜像版本信息</a></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>知识焦虑</title>
      <link href="/knowledge-anxiety/"/>
      <url>/knowledge-anxiety/</url>
      
        <content type="html"><![CDATA[<p>最近总感觉有点焦虑，想业余做点什么事情，但是真正回到家，抱着笔记本，又发呆半天不知道要干嘛。好像没什么特别感兴趣的事情想去做，这种状态使我感觉更加的不自在。现在好像有点理解海子的《面朝大海，春暖花开》了，很想对生活充满热情，去做很多的事情，但是现实是喂马、劈柴、周游世界一样都没去做。好久没写文了，发个文绉绉的牢骚，附上海子的诗</p><p>从明天起，做一个幸福的人<br>喂马、劈柴、周游世界<br>从明天起，关心粮食和蔬菜<br>我有一所房子，面朝大海，春暖花开</p><p>从明天起，和每一个亲人通信<br>告诉他们我的幸福<br>那幸福的闪电告诉我的<br>我将告诉每一个人</p><p>给每一条河每一座山取一个温暖的名字<br>陌生人，我也为你祝福<br>愿你有一个灿烂的前程<br>愿你有情人终成眷属<br>愿你在尘世获得幸福<br>我只愿面朝大海，春暖花开</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebRTC</title>
      <link href="/WebRTC/"/>
      <url>/WebRTC/</url>
      
        <content type="html"><![CDATA[<p>浏览器点对点传输无效的原因：</p><ul><li>穿透阻止直连的防火墙失败</li><li>B 端没有公网 IP</li><li>路由器不支持直连，需要加一个中继服务器</li></ul><h2 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h2><p>NAT(Network Address Translation)指的是网络地址转换，常部署在一个组织的网络出口位置<br>类型：完全圆锥型NAT、受限圆锥型NAT和端口受限圆锥型NAT，对称型NAT（前三种可以通过 STUN 穿透）<br>穿越技术、方法主要有：</p><ul><li>应用层网关；</li><li>中间件技术；</li><li>打洞技术(Hole Punching)；</li><li>Relay(服务器中转)技术。</li></ul><h2 id="STUN"><a href="#STUN" class="headerlink" title="STUN"></a>STUN</h2><p>STUN（Session Traversal Utilities for NAT，NAT会话穿越应用程序），是基于UDP的完整的穿透NAT的解决方案<br>公网寻址<br>作用机制，客户端发送消息给 STUN 服务器，服务器返回该客户端的公网地址和该客户端位于哪种类型的NAT之后以及NAT为某一个本地端口所绑定的公网端端口</p><h2 id="TURN"><a href="#TURN" class="headerlink" title="TURN"></a>TURN</h2><p>TURN（Traversal Using Relay NAT，通过Relay方式穿越NAT），是一种数据传输协议<br>原理与 STUN 类似，主要用在使用STUN无法穿透的场景下</p><h2 id="ICE"><a href="#ICE" class="headerlink" title="ICE"></a>ICE</h2><p>ICE（Interactive Connectivity Establishment，互动式连接建立）。ICE定义了穿越方法而不是协议。ICE整合了STUN与TURN。ICE使用STUN进行打洞，若失败，则使用TURN进行中转。<br>一个支持浏览器点对点连接的协议框架，使用 STUN 或 TURN 作为中继服务器，实现 NAT 穿透，进行点对点连接<br>建立连接步骤：收集候选地址 &#x3D;&gt; 连通性检查 &#x3D;&gt; 数据传输</p><h2 id="signaling"><a href="#signaling" class="headerlink" title="signaling"></a>signaling</h2><p>参考文献：<br><a href="https://blog.jianchihu.net/webrtc-av-transport-basis-nat-traversal.html#toc-10">WebRTC音视频传输基础：NAT穿透</a><br><a href="https://webrtc.org/getting-started/overview?hl=en">webrtc官方文档</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebRTC_API">WebRTC API</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用正则表达式</title>
      <link href="/common-regular-expressions/"/>
      <url>/common-regular-expressions/</url>
      
        <content type="html"><![CDATA[<h3 id="一、html-相关"><a href="#一、html-相关" class="headerlink" title="一、html 相关"></a>一、html 相关</h3><p>1、去掉所有 html 标签，并保留内容: <code>/&lt;[^&gt;]+&gt;/g</code></p><p>2、去除 html 注释并删除其中的内容: <code>/&lt;!--[\s\S]*--&gt;/g</code></p><h3 id="二、字符串匹配"><a href="#二、字符串匹配" class="headerlink" title="二、字符串匹配"></a>二、字符串匹配</h3><p>1、匹配任意空白字符: <code>/\s+/</code></p><p>2、匹配中文字符: <code>[\u4E00-\u9FA5]+</code></p><p>3、IP地址：<code>/((2[0-4]\d|25[0-5]|[01]?\d\d?)\.)&#123;3&#125;(2[0-4]\d|25[0-5]|[01]?\d\d?)/</code></p><h3 id="三、字符截取"><a href="#三、字符截取" class="headerlink" title="三、字符截取"></a>三、字符截取</h3><p>1、截取两个字符串之间的内容</p><p>示例1：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;21312tsdasd&#x27;</span>.<span class="title function_">match</span>(<span class="regexp">/3(\S*)d/</span>)[<span class="number">1</span>] <span class="comment">//匹配3和d之间的内容，输出 12tsdas</span></span><br></pre></td></tr></table></figure><p>示例2：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;$&#123;a&#125;-$&#123;b&#125;&#x27;</span>.<span class="title function_">match</span>(<span class="regexp">/(?&lt;=\$&#123;).+?(?=\&#125;)/g</span>) <span class="comment">// 使用零宽断言，获取所有$&#123;&#125;包裹的内容，输出[&#x27;a&#x27;,&#x27;b&#x27;]</span></span><br></pre></td></tr></table></figure><p>2、截取某个字符串前面的内容，同上，不过拿掉了前面的字符串</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;21312tsdasd&quot;</span>.<span class="title function_">match</span>(<span class="regexp">/(\S*)d/</span>)[<span class="number">1</span>]; <span class="comment">// 21312tsdas</span></span><br></pre></td></tr></table></figure><p>3、截取某个字符串后面的内容，第一个示例拿掉后面的字符</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;21312tsdasd&quot;</span>.<span class="title function_">match</span>(<span class="regexp">/12(\S*)/</span>)[<span class="number">1</span>];  <span class="comment">// tsdasd</span></span><br></pre></td></tr></table></figure><p>附：</p><h3 id="常用元字符"><a href="#常用元字符" class="headerlink" title="常用元字符"></a>常用元字符</h3><ul><li>. - 匹配除换行符以外的任意字符</li><li>\w - 匹配字母或数字或下划线或汉字</li><li>\s - 匹配任意的空白符</li><li>\d - 匹配数字</li><li>\b - 匹配单词的开始或结束</li><li>^ - 匹配字符串的开始</li><li>$ - 匹配字符串的结束</li></ul><h3 id="常用限定符"><a href="#常用限定符" class="headerlink" title="常用限定符"></a>常用限定符</h3><ul><li><ul><li><ul><li>重复零次或更多次</li></ul></li></ul></li><li><ul><li><ul><li>重复一次或更多次</li></ul></li></ul></li><li>? - 重复零次或一次</li><li>{n} - 重复n次</li><li>{n,} - 重复n次或更多次</li><li>{n,m} - 重复n到m次</li></ul><h3 id="常用的反义代码"><a href="#常用的反义代码" class="headerlink" title="常用的反义代码"></a>常用的反义代码</h3><ul><li>\W - 匹配任意不是字母，数字，下划线，汉字的字符</li><li>\S - 匹配任意不是空白符的字符</li><li>\D - 匹配任意非数字的字符</li><li>\B - 匹配不是单词开头或结束的位置</li><li>[^x] - 匹配除了x以外的任意字符</li><li>[^aeiou] - 匹配除了aeiou这几个字母以外的任意字符</li></ul><p>参考文献：</p><p><a href="https://deerchao.cn/tutorials/regex/regex.htm">正则表达式30分钟入门</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>原地删除数组中的重复值</title>
      <link href="/removeDuplicates/"/>
      <url>/removeDuplicates/</url>
      
        <content type="html"><![CDATA[<h2 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h2><p><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/">26. Remove Duplicates from Sorted Array</a></p><h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>题目要求原地删除数组中的重复项，返回修改后数组的长度，其实也就是在当前数组中操作，得出不重复项长度的意思。这里我使用双指针的方法解题，声明快指针 i 和慢指针 j，都初始化为 1。用快指针遍历数组,若两个连续项不相等，说明不重复，把 nums[i] 放到 nums[j], j 向前挪动一个位置。慢指针 j 即为不重复项的长度。</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">removeDuplicates</span>(<span class="params"><span class="attr">nums</span>: <span class="built_in">number</span>[]</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (nums.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">i</span>: <span class="built_in">number</span> = <span class="number">1</span>,</span><br><span class="line">    <span class="attr">j</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i] !== nums[i - <span class="number">1</span>]) &#123;</span><br><span class="line">      nums[j] = nums[i];</span><br><span class="line">      j++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Prisma 入门指南</title>
      <link href="/prisma-getting-started-guide/"/>
      <url>/prisma-getting-started-guide/</url>
      
        <content type="html"><![CDATA[<p>最近 prisma 挺火的，他号称是下一代 nodeJs ORM, github 的 star 一直在上升，issue 也有一千多 k，连本地数据库上手玩了一下，真的很不错，附上简单的入门级操作。</p><h2 id="一、初始化"><a href="#一、初始化" class="headerlink" title="一、初始化"></a>一、初始化</h2><h3 id="1、下载相关包"><a href="#1、下载相关包" class="headerlink" title="1、下载相关包"></a>1、下载相关包</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install prisma typescript ts-node @types/node --save-dev</span><br></pre></td></tr></table></figure><h3 id="2、创建-tsconfig-json"><a href="#2、创建-tsconfig-json" class="headerlink" title="2、创建 tsconfig.json"></a>2、创建 tsconfig.json</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;sourceMap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;esnext&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3、创建-Prisma-schema-文件和-env-文件"><a href="#3、创建-Prisma-schema-文件和-env-文件" class="headerlink" title="3、创建  Prisma schema 文件和 .env 文件"></a>3、创建  Prisma schema 文件和 .env 文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx prisma</span><br><span class="line">npx prisma init</span><br></pre></td></tr></table></figure><h3 id="4、连接-mysql"><a href="#4、连接-mysql" class="headerlink" title="4、连接 mysql"></a>4、连接 mysql</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// prisma/schema.prisma</span></span><br><span class="line">datasource db &#123;</span><br><span class="line">  provider = <span class="string">&quot;mysql&quot;</span></span><br><span class="line">  url      = <span class="title function_">env</span>(<span class="string">&quot;DATABASE_URL&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .env</span></span><br><span class="line"><span class="variable constant_">DATABASE_URL</span>=<span class="string">&quot;mysql://&lt;USER&gt;:&lt;PASSWORD&gt;@HOST:PORT/DATABASE&quot;</span></span><br></pre></td></tr></table></figure><h2 id="二、数据库操作"><a href="#二、数据库操作" class="headerlink" title="二、数据库操作"></a>二、数据库操作</h2><h3 id="1、使用-Prisma-Migrate-创建数据表"><a href="#1、使用-Prisma-Migrate-创建数据表" class="headerlink" title="1、使用 Prisma Migrate 创建数据表"></a>1、使用 Prisma Migrate 创建数据表</h3><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">&lt;!-- prisma/schema.prisma --&gt;</span><br><span class="line">model Post &#123;</span><br><span class="line">  id        <span class="built_in">Int</span>      <span class="meta">@id</span> <span class="meta">@default(autoincrement())</span></span><br><span class="line">  createdAt DateTime <span class="meta">@default(now())</span></span><br><span class="line">  updatedAt DateTime <span class="meta">@updatedAt</span></span><br><span class="line">  title     String   <span class="meta">@db</span>.VarChar(<span class="number">255</span>)</span><br><span class="line">  content   String?</span><br><span class="line">  published <span class="built_in">Boolean</span>  <span class="meta">@default(false)</span></span><br><span class="line">  author    User     <span class="meta">@relation(fields: [authorId], references: [id])</span></span><br><span class="line">  authorId  <span class="built_in">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">model Profile &#123;</span><br><span class="line">  id     <span class="built_in">Int</span>     <span class="meta">@id</span> <span class="meta">@default(autoincrement())</span></span><br><span class="line">  bio    String?</span><br><span class="line">  user   User    <span class="meta">@relation(fields: [userId], references: [id])</span></span><br><span class="line">  userId <span class="built_in">Int</span>     <span class="meta">@unique</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">model User &#123;</span><br><span class="line">  id      <span class="built_in">Int</span>      <span class="meta">@id</span> <span class="meta">@default(autoincrement())</span></span><br><span class="line">  email   String   <span class="meta">@unique</span></span><br><span class="line">  name    String?</span><br><span class="line">  posts   Post[]</span><br><span class="line">  profile Profile?</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行以下命令会创建一份 sql 查询语句文件并且执行，创建三张表格</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx prisma migrate dev --name init</span><br></pre></td></tr></table></figure><h3 id="2、数据库读写"><a href="#2、数据库读写" class="headerlink" title="2、数据库读写"></a>2、数据库读写</h3><p>(1) 数据库查询</p><p>创建 index.ts 文件，写入一下内容</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PrismaClient</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@prisma/client&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prisma = <span class="keyword">new</span> <span class="title class_">PrismaClient</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ... you will write your Prisma Client queries here</span></span><br><span class="line">  <span class="keyword">const</span> allUsers = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">findMany</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(allUsers)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">main</span>()</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> e</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> prisma.$disconnect()</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>以上代码实例化了 PrismaClient，prisma.user 即刚刚创建的 user 表，findMany 方法查询 user 表的所有数据，效果跟 <code>select * from &#39;user&#39;</code> 一样</p><p>执行 <code>npx ts-node index.js</code> 输出为 <code>[]</code></p><p>(2) 数据库插入数据</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 使用 create 插入新的数据</span></span><br><span class="line">  <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">      <span class="attr">email</span>: <span class="string">&#x27;alice@prisma.io&#x27;</span>,</span><br><span class="line">      <span class="attr">posts</span>: &#123;</span><br><span class="line">        <span class="attr">create</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;Hello World&#x27;</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">profile</span>: &#123;</span><br><span class="line">        <span class="attr">create</span>: &#123; <span class="attr">bio</span>: <span class="string">&#x27;I like turtles&#x27;</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 使用 findMany 查询数据</span></span><br><span class="line">  <span class="keyword">const</span> allUsers = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">findMany</span>(&#123;</span><br><span class="line">    <span class="attr">include</span>: &#123;</span><br><span class="line">      <span class="attr">posts</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">profile</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">dir</span>(allUsers, &#123; <span class="attr">depth</span>: <span class="literal">null</span> &#125;)</span><br><span class="line">  <span class="comment">// 使用 update 更新数据</span></span><br><span class="line">  <span class="keyword">const</span> post = <span class="keyword">await</span> prisma.<span class="property">post</span>.<span class="title function_">update</span>(&#123;</span><br><span class="line">    <span class="attr">where</span>: &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="attr">published</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(post)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上代码首先调用 create 方法写入一条数据，然后调用 findMany 查询符合条件的数据，这里的的 include 作用相当于 where</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ffmpeg 抽取视频音轨</title>
      <link href="/ffmpeg-extract-audio-track/"/>
      <url>/ffmpeg-extract-audio-track/</url>
      
        <content type="html"><![CDATA[<p>看 youtube 上有些视频的音乐很好听，就想抽出来当自己的歌单，懒得去用市面上的软件，觉得麻烦，想到了 ffmpeg。 mac 可以用 homebrew 下载,过程比较烦，每次装都要更新，更新很久才开始下载，于是切了清华源，快一点。</p><p>安装好 ffmpeg 之后要抽离音轨就很简单了</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &lt;path&gt;.mp4 视频文件路径</span></span><br><span class="line"><span class="comment"># -f mp3 mp3编码</span></span><br><span class="line"><span class="comment"># -ar 16000 音频采样率</span></span><br><span class="line"><span class="comment"># &lt;path&gt;.mp3输出的音频文件路径</span></span><br><span class="line">ffmpeg -i &lt;path&gt;.mp4 -f mp3 -ar 16000 &lt;path&gt;.mp3</span><br></pre></td></tr></table></figure><p>这样只能一次转一个，比较麻烦，我有好几个要转，懒得在命令行一个个敲，写个脚本遍历也很简单</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> cannon 500-miles</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    ffmpeg -i &lt;path&gt;/<span class="variable">$var</span>.mp4 -f mp3 -ar 16000 &lt;path&gt;/<span class="variable">$var</span>.mp3</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$var</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>晨跑</title>
      <link href="/first-day-morning-run/"/>
      <url>/first-day-morning-run/</url>
      
        <content type="html"><![CDATA[<p>国庆的第一天跟李先森跑去体验公司的酒店了，看电影打游戏，还发现了一本不错的书，村上村树的《当我谈跑步时，我谈些什么》。这本书主要讲的是村上村树在跑步过程中的一些感想，没有花很大的文笔去写跑步带来诸如健康之类的优点，而是侧重写一些回忆，一些故事，感觉挺有趣的，当晚看完一章我就立刻下单了这本书。</p><p>受到这本书的影响吧，我就想体验下户外晨跑是怎么一种感觉，今天一早起来就去晨跑了，雨后的清晨，加之节假日，外面人很少，只有一早在忙碌的环卫工人，目之所及很清新，空气里也透着点雨后独有的味道，很舒服。从小区出发，沿着排洪渠跑到小区旁边的村子，竟然才 1 公里，平常散步走这条路总感觉很远，也许是不同的心态，使我对这条路的长度认知出现了偏差。</p><p>跑完步在村子里买两份早餐散步回来经过一段路，远远的可以看得到小区的建筑群，村子里是家里那种独栋的房子，给人的感觉就是这边是乡下的田园风光，那边是城市的反差，我心里想我这是住在城乡结合部啊。</p><p>话虽如此，我还是比较喜欢住在这里的，安静，有家的感觉。之前在广州就让我有种异乡人的感觉，这里不会，所以很多同事都问过我为什么要在这里住，又不方便又贵，换到别处可能更便宜，更方便，我每次都说是因为刚来珠海就住这里习惯了，现在想想这只是部分因素吧，更多的是我想要这种家的感觉，就是那种农村生活惯了的人，不太喜欢过于城市化的环境。也因为这个，我总是跟李先生说买房子不要买城区或者海边那些很现代化的，贵而且环境确实喜欢不起来。</p><p>户外晨跑第一天，听着摇滚，晨跑，思考，感觉还不错。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/chenpao.jpeg" alt="晨跑途中的风景"></p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>校验字符串是否有意义</title>
      <link href="/validate-string/"/>
      <url>/validate-string/</url>
      
        <content type="html"><![CDATA[<p>项目中有一个表单，初始化根据服务端返回的数据渲染，服务端返回的是一个对象，有些字段的值为 ‘NULL’ 这种形式的，渲染出来没什么意义，一般都会转换为空。这种形式的字符串布尔值是 false，而且是对象的值，不好一键转换，这里就需要写一个函数去做校验了。这里我写了个简单的转换函数如下:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">checkVal</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">isSense</span> = checkStr =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> checkStr !== <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> checkStr;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> noSense = [<span class="string">&#x27;null&#x27;</span>, <span class="string">&#x27;undefinded&#x27;</span>];</span><br><span class="line">        <span class="keyword">const</span> str = checkStr.<span class="title function_">toLowerCase</span>();</span><br><span class="line">        <span class="keyword">return</span> noSense.<span class="title function_">includes</span>(str) ? <span class="string">&#x27;&#x27;</span> : checkStr;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">isObject</span> = value =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> type = <span class="keyword">typeof</span> value;</span><br><span class="line">        <span class="keyword">return</span> value != <span class="literal">null</span> &amp;&amp; (type === <span class="string">&#x27;object&#x27;</span> || type === <span class="string">&#x27;function&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isObject</span>(val)) &#123;</span><br><span class="line">        <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(val);</span><br><span class="line">        <span class="keyword">let</span> newVal = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line">        keys.<span class="title function_">forEach</span>(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">            newVal[el] = <span class="title function_">isSense</span>(val[el]);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> newVal;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">isSense</span>(val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先判断输入值是否为对象，不是对象的话我们就直接处理了，这里的处理也很简单，值不在无意义数组里面，就返回原始值否则返回空。若输入值是一个对象，则遍历一下 key，当前 key 对应的值若是无意义值返回空，否则返回原始值。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ant-Design-Vue 那些坑</title>
      <link href="/ant-design-pitfalls/"/>
      <url>/ant-design-pitfalls/</url>
      
        <content type="html"><![CDATA[<p>最近项目中用到了 ant-design-vue，对于内部系统来说，ant 的风格是比较好的，但是组件的使用比较难自定义，这是我个人一个比较深的感受吧，下面记录一下使用中遇到的一些坑。</p><h2 id="dropdown"><a href="#dropdown" class="headerlink" title="dropdown"></a>dropdown</h2><p>dropdown 组件的 menu 默认会被添加到 body 元素上，使用默认的设置，在列表中会出现点击之后失去焦点位置偏移的问题，解决这个问题的方法是设置一个 menu 的容器</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;a-dropdown</span><br><span class="line">    getPopupContainer=&#123;<span class="function"><span class="params">triggerNode</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> triggerNode.<span class="property">parentNode</span> || <span class="variable language_">document</span>.<span class="property">body</span>;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">&lt;/a-dropdown&gt;</span><br></pre></td></tr></table></figure><h2 id="select"><a href="#select" class="headerlink" title="select"></a>select</h2><p>设置了 v-model，给了一个默认值空，placeholder 没显示出来，这里是因为 select 组件的逻辑是值为 undefined 时才显示 placeholder，这里就需要把 v-model 绑定的变量默认值设为 undefined，这个其实挺奇葩的，一般我们是不会给变量设置 undefined 值的，这里就只能这么干。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue 你这是怎么了</title>
      <link href="/what-happened-to-vue/"/>
      <url>/what-happened-to-vue/</url>
      
        <content type="html"><![CDATA[<h2 id="一、对象初始化"><a href="#一、对象初始化" class="headerlink" title="一、对象初始化"></a>一、对象初始化</h2><p>早上例行体验一下在做的项目，看看有什么问题。发现编辑界面上周还好好的，这周打开就报错了，还关不掉弹窗那种，不进发问，Vue 你这是怎么啦？上周还运行的好好的。报错如下:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Error</span> <span class="keyword">in</span> <span class="attr">nextTick</span>: <span class="string">&quot;TypeError: Cannot convert object to primitive value&quot;</span></span><br></pre></td></tr></table></figure><p>字面意思很容易懂，就是在界面更新阶段，某一个值给了对象。这种问题一般都会出现在传值的过程中，可能是某个组件要求的是一个原始值，传了对象。检查一下代码，有一个动态切换的组件，传的值有一个默认值是 <code>Object.create(null)</code>，应该是这个有问题了，把原始值改成 <code>null</code>，果然没问题了。</p><p>这里给了我一个提示，默认值最好用 null 而不是用 <code>Object.create(null)</code>。</p><h2 id="二、vue-router-重复跳转"><a href="#二、vue-router-重复跳转" class="headerlink" title="二、vue-router 重复跳转"></a>二、vue-router 重复跳转</h2><p>项目用 router-view 切组件，点击登出切换到登录界面报这个 error</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Uncaught</span> (<span class="keyword">in</span> promise) <span class="title class_">NavigationDuplicated</span>: <span class="title class_">Avoided</span> redundant navigation to current location</span><br></pre></td></tr></table></figure><p>虽然 error，但是不影响代码功能，看到全网竟然很一致的说加上以下代码 catch 一下 error 就可以，但是发现加了还是报错。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> originalPush = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> <span class="title function_">push</span>(<span class="params">location</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> originalPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> err);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>于是我就想这个只是 catch 到 push 方法的，我还用了 replace，那就再 catch 一下 replace 的吧，最后封装函数如下</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// catch 路由重复跳转 error</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">aviodRepeatRouter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> originalPush = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span>;</span><br><span class="line">    <span class="keyword">const</span> originalReplace = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">replace</span>;</span><br><span class="line">    <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> <span class="title function_">push</span>(<span class="params">location</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> originalPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> err);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">replace</span> = <span class="keyword">function</span> <span class="title function_">replace</span>(<span class="params">location</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> originalReplace.<span class="title function_">call</span>(<span class="variable language_">this</span>, location).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> err);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">aviodRepeatRouter</span>();</span><br></pre></td></tr></table></figure><h2 id="三、native-修饰符滥用"><a href="#三、native-修饰符滥用" class="headerlink" title="三、native 修饰符滥用"></a>三、native 修饰符滥用</h2><p>native 修饰符用于监听根元素上的原生事件，这里很容易造成滥用，滥用可能会导致触发几次同一个方法，比如一个下拉框，在 option 上使用了  click.native 修饰符可能会触发两次，一次是根元素的 click, 一次是本身的 click。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KPI vs OKR</title>
      <link href="/kpi-vs-okr/"/>
      <url>/kpi-vs-okr/</url>
      
        <content type="html"><![CDATA[<p>新加入的团队引入了 KPI 制度，上周开了个会说这周我们要出 KPI。开完会有点懵，这个概念大学的时候上管理学的课程有讲过，不过只是知道大概的概念，其他都还给老师了。同事让我周末想一下自己的 KPI，我也不知道要想啥，我当时就觉得说明我做了啥就行了。周一对 KPI，我只给了两点，同事说我这个太简单，请教了同事和经历过 KPI 制度的同学，说这个要写的复杂点，高大上一点，多点。于是我就从两条扩展到了 9 条，又拿给同事和同学看，同学说可以，挺具体的，就是主旨不是很明确，太散，同事说条目太多了。接着我又收窄了一点，合并成了五条，同学说作为 KPI 差不多了，以他们 OKR 制度的角度看还是差一点，没有明确的的结果和数据说明。</p><p>说了一大堆亲身经历的事件，其实这里有两个概念 KPI 和 OKR，这两个概念也是职场中经常会遇到的，如果我们在有一定规模的公司的话。这篇文章要做的就是对这两个概念的科普，谈不上多专业，仅仅是个人的一些理解。</p><p>首先来说说 KPI 是什么，KPI，即 Key Performance Indicators，翻译成中文就是主要绩效指标。KPI 的目的是基于现有的项目和流程提升产出能力，一般都是可以实现的，也就是引入 KPI 制度的团队，一般是希望在现有基础上去提升产能。KPI 关注的点包括：what(要做什么),why(这件事有什么好处),how(怎么去做成这件事),who(谁来做),when(什么时候完成)。</p><p>再来说说 OKR，OKR，即 Objective Key Result, 翻译成中文就是目标和关键结果。OKR 的目标更加的大胆，不一定能够实现，旨在通过制定积极的 OKR 推动团队的发展，选择这种策略的团队，一般是希望探索新的方向，团队能有一定的突破，由此可以看出，这种策略更适合正在发展壮大的年轻团队，而 KPI 更适合有一定现金流的成年团队。后者更倾向于维稳的同时能进一步促进营收，前者则是不断的探索新的营收方式，使其成为新的现金牛。OKR 的关注点包括: Objective(一个总体的方向)，Key Result(一些小的阶段性的成果)。</p><p>从以上的一些说明可以看出 KPI 是结果导向的更加保守的策略，而 OKR 则是一种更加激进的过程导向的策略。</p><p>参考文档：</p><p><a href="https://www.wrike.com/blog/kpis-vs-okrs-compare-need-successful/">KPIs vs. OKRs: How They Compare and Why You Need Both to be Successful</a></p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于广告拦截插件的一些思考</title>
      <link href="/thoughts-on-ad-blocker-plugins/"/>
      <url>/thoughts-on-ad-blocker-plugins/</url>
      
        <content type="html"><![CDATA[<p>阮一峰在上周的周刊中提到他的网站因为广告拦截器的原因，导致有读者看不到页面的部分内容，并且找到了相应的针对他的个人网站的拦截规则集。</p><p>这里个人认为一点点可有可无的广告对于读者而言也没有多大的影响，何况这只是周刊中的一些文字广告，相比某些网站的链接，弹框等影响阅读体验的广告好多了。最让我觉得不可思议的是广告拦截软件的权限竟然这么高，甚至可以禁止 js 脚本的执行，这是让人觉得很不可思议的，要知道前端的交互全靠 js，没了 js 就会回到远古网页的时代，哪有什么体验可言，这对于网站开发者来说真的是好不尊重了。</p><p>这里除了发表一些个人看法之外，还得提醒一下这种情况存在对于网页开发者来说有什么要注意的。由于广告拦截插件可以根据规则集隐藏页面中的某些内容，所以以后网页内容或者交互问题，也可能是这种情况引起的，可以去规则集搜一下相应的域名在不在里面，被命中了什么规则。此外，在做网页开发的时候，可以多考虑下反广告拦截（虽然我们可能并没有广告，可能被误拦截）的解决方案。</p><p>参考文章：</p><p><a href="http://www.ruanyifeng.com/blog/2021/07/weekly-issue-167.html">科技爱好者周刊（第 167 期）：广告拦截器太过分了</a></p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeJs 模块机制</title>
      <link href="/nodejs-module-mechanism/"/>
      <url>/nodejs-module-mechanism/</url>
      
        <content type="html"><![CDATA[<p>在讲模块机制之前，先来说说 CommonJs 规范，我们知道在打包的时候经常会看到 cjs 这个选项，这里的 cjs，我自己之前是一直以为就是commonJs，实际上这是 node 对 CommonJs 的实现，是 node 的模块机制。</p><p>ComonJs 规范范围除了模块规范之外，还有二进制、Buffer、字符集编码、I&#x2F;O 流、进程环境、文件系统、套接字、单元测试、Web 服务器网关接口以及包管理等规范。</p><p>既然 node 模块机制是 CommonJs 的一种实现，那么 CommonJs 的模块规范是怎样的呢？CommonJs 的模块规范主要做了如下定义：</p><p><strong>模块引用</strong>：通过 require 引入模块</p><p><strong>模块定义</strong>：module 对象代表模块自身，通过 exports 属性导出当前模块的变量或对象</p><p><strong>模块标识</strong>：必须是符合小驼峰命名的字符串，或者是文件路径（相对路径、绝对路径）</p><p>接下来讲讲 nodeJs 的模块机制是怎么实现的，当我们用 require 引入某个模块时，会经历以下三个过程：路径分析，文件定位以及编译执行。再来讲讲每个步骤分别发生了什么。</p><p><strong>路径分析</strong></p><ul><li><p>核心模块，加载速度快，加载优先级仅次于缓存加载</p></li><li><p>路径形式的文件模块：把路径转换为真实路径</p></li><li><p>自定义模块：沿当前路径往上逐级递归查找，最深可以查找到根目录下的 node_modules，由于路径查找速度比较慢，所以加载速度也会比较慢</p></li></ul><p>基于以上因素，为提高模块加载速度，在模块引入时，引入顺序应该为：核心模块 -&gt; 路径形式的文件模块 -&gt; 第三方模块</p><p><strong>文件定位</strong></p><ul><li><p>模块标识不含文件扩展名，按照 .js，.json，.node 的优先级补充扩展名，该过程是阻塞式的引入，因此 .json, .node 文件带上扩展名，可以加快加载速度</p></li><li><p>若模块标识不是文件名，查找当前目录下的 package.json 文件，把 main 属性的值作为文件路径进行定位</p></li><li><p>若当前目录下不存在 package.json 文件，把模块标识当成一个目录名称，将 index 作为模块默认文件名，找不到模块会抛出查找失败错误</p></li></ul><p><strong>编译执行</strong></p><ul><li>新建模块对象，模块对象的定义如下</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Module</span>(<span class="params">id, parent</span>) &#123; </span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">exports</span> = &#123;&#125;; </span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">parent</span> = parent;</span><br><span class="line">  <span class="keyword">if</span> (parent &amp;&amp; parent.<span class="property">children</span>) &#123;</span><br><span class="line">    parent.<span class="property">children</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">filename</span> = <span class="literal">null</span>; </span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">loaded</span> = <span class="literal">false</span>; </span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">children</span> = [];</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">paths</span> = []</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">path</span> = <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>根据路径载入文件并编译，不同文件的载入方式不同</p><ul><li><p>.js 文件通过 fs 模块同步读取后编译</p></li><li><p>.node 文件通过 dlopen 方法加载编译后的二进制文件</p></li><li><p>.json 文件，通过 fs 模块同步读取后，使用 JSON.parse 解析返回结果</p></li><li><p>其他都按 .js 文件载入</p></li></ul></li><li><p>编译成功的文件模块，以文件路径为索引，缓存到 Module._cache 对象上，核心模块缓存到 NativeModule._cache对象上</p></li></ul><p>参考文献：</p><p>深入浅出 nodeJs</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>离开页面弹窗</title>
      <link href="/leave-page-popup/"/>
      <url>/leave-page-popup/</url>
      
        <content type="html"><![CDATA[<p>最近有个需求，要求在部署过程中离开界面与用户有一个交互，询问用户是否离开页面，然后还给出了相应的样式让我实现。我寻思着关闭窗口，意味着页面销毁，执行栈都不存在了，何谈交互呢？于是我果断的拒绝了这个需求，并评论道无法实现。</p><p>后来跟同事交流了一下，同事说之前遇到过类似的需求，有相应的回调函数可以做到，去 mdn 找了下，还真有，但是很遗憾，不能自定义样式，而且在不同的浏览器可能表现不一致。跟产品沟通了下，说明了这种情况，能接受，就加上了。</p><p>实现离开页面弹窗交互利用的是 window 的一个事件 onbeforeunload，在回调里面返回值，点击窗口的关闭就会弹窗，示例如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onbeforeunload</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> event = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line">  <span class="keyword">const</span> tips = <span class="string">&#x27;关闭网页&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (event) &#123;</span><br><span class="line">    event.<span class="property">returnValue</span> = tips;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> tips;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>参考文档：</p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event">Window: beforeunload event</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 实现圆环进度条</title>
      <link href="/css-circular-progress-bar/"/>
      <url>/css-circular-progress-bar/</url>
      
        <content type="html"><![CDATA[<p>圆环进度条是我们工作中经常会碰到的一个需求，首先我们来看看要实现一个圆环我们会怎么做？</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.circle</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">20px</span> solid green;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>要实现一个半圆环我们会怎么做？</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.circle</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">20px</span> solid green;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>要实现这个半圆的进度动画，我们可以先把半圆隐藏起来，一点点出现。要把半圆隐藏起来我们可以把它旋转到容器的外面，一点点出现我们可以把该半圆慢慢的旋转回来</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.circle</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">20px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">animation</span>: rotate-a <span class="number">3s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left-circle</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">20px</span> solid green;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">20px</span> solid green;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> rotate-a &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">135deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span>,</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由于我们的容器宽度只有 100，旋转 -135 度之后，这个半圆就看不到了，从动画 50% 开始，我们把半圆过度到旋转 45 度角，也就是回到正立的状态。这是一个半圆进度动画的实现，右半边进度动画也是一样的实现思路，只不过是反过来而已。最终的 demo 如下</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;circle-progress&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper right&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;circle right-circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper left&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;circle left-circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.circle-progress</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">199px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.circle-progress</span> <span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.circle-progress</span> <span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.circle-progress</span> <span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.circle-progress</span> <span class="selector-class">.circle</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">20px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">135deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.circle-progress</span> <span class="selector-class">.right-circle</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">20px</span> solid green;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">20px</span> solid green;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">animation</span>: circle_right <span class="number">5s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.circle-progress</span> <span class="selector-class">.left-circle</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">20px</span> solid green;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">20px</span> solid green;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">animation</span>: circle_left <span class="number">5s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> circle_right &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">135deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span>,</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> circle_left &#123;</span><br><span class="line">  <span class="number">0%</span>,</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">135deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>理解 Instanceof</title>
      <link href="/understanding-instanceof/"/>
      <url>/understanding-instanceof/</url>
      
        <content type="html"><![CDATA[<p>最近发现很多用过的东西过后很容易忘记使用姿势，久了不用就要去翻一翻文档，有一些知道怎么用，但是记忆也很模糊。于是我就想先从一些基础的知识写起，探究知识点背后的运作原理，加深自己对知识的理解。</p><p>说到 instanceof，我们大体知道其使用场景，用于检测对象的具体类型。我们一般会怎么用这个操作符呢？</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">a <span class="keyword">instanceof</span> <span class="title class_">Object</span>;</span><br></pre></td></tr></table></figure><p>由上述例子可知，instanceof 操作符是一个二元操作符，左右两边分别有一个值，上述例子就是用 instanceof 判断 a 是不是 Object 类型。那么这个操作符是怎么去判断 a 是不是 Object 类型的呢？</p><p>我们知道 JavaScript 是基于原型去实现面向对象的，每个实例都有一个指向原型的属性 <code>__proto__</code>,每个实例的构造函数也有一个指向实例原型的属性 prototype,实例一直往上查找原型，一直到 null 这个过程就是原型链。</p><p>有了这些基本的概念，我们再来看看 instanceof 是怎么去判断一个实例是不是某个类型的，这里我们说的某个类型一般这么写 <code>Object Array……</code>, 可见这些其实是构造函数，由此我们可以知道这就是需要判断构造函数的原型在不在实例的原型链上，如果在的话就返回 true，否则返回 false</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">MyInstanceof</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="comment">// 左值赋值为左边实例的原型，右值也赋值为右边实例的原型</span></span><br><span class="line">  <span class="keyword">let</span> leftVal = a.<span class="property">__proto__</span>,</span><br><span class="line">    rightVal = b.<span class="property">prototye</span>;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="comment">// 遍历完左值的原型链仍然未找到右值的实例原型，返回 false</span></span><br><span class="line">    <span class="keyword">if</span> (leftVal === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 左值的实例原型等于右值的实例原型，返回 true</span></span><br><span class="line">    <span class="keyword">if</span> (leftVal === rightVal) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// 遍历原型链</span></span><br><span class="line">    leftVal = leftVal.<span class="property">__proto__</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>禁止图片拖动</title>
      <link href="/disable-image-dragging/"/>
      <url>/disable-image-dragging/</url>
      
        <content type="html"><![CDATA[<p>看到张鑫旭大佬的文章讲禁止图片拖动的，我看了看手头的项目，拖了拖一些 icon，拖动会有虚影。于是准备把图片的拖动禁用掉，第一反应是在 App 文件中等视图加载完毕，获取所有的图片，设置为不可拖动，一劳永逸</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> imgs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line">    imgs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">el, i</span>) =&gt;</span> &#123; imgs[i].<span class="property">draggable</span> = <span class="literal">false</span>; &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是这么写就有点宁杀一千，不放过一个的感觉，假若以后的需求中某张图片可能需要这种效果呢？不这么写还有什么方法呢？想到 Vue 中有自定义指令，在图片元素中加入相应的自定义指令，实现图片的不可拖动</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;undrag&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">inserted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">    el.<span class="property">draggable</span> = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>写太多指令在 main 脚本中会不好管理，我们再把指令封装成插件，使用 use 来加载，这样比较好管理，也方便复用。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ImgUndrag</span> = (<span class="params">Vue</span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;undrag&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">inserted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">      el.<span class="property">draggable</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>以上两种方法可以说是各有利弊吧，自定义指令需要在每张需要禁用拖动效果的图片中都写一遍，全局修改图片属性会使所有图片失去拖动效果，具体用哪种，可以根据自己的需求来。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改滚动条样式的兼容写法</title>
      <link href="/modify-scrollbar-style-compatible/"/>
      <url>/modify-scrollbar-style-compatible/</url>
      
        <content type="html"><![CDATA[<p>滚动条样式在火狐、ie、chrome 等浏览器的样式是不一致的，工作中我们经常需要根据自己的需要定制滚动条，这里给出一个兼容的写法</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* The emerging W3C standard</span></span><br><span class="line"><span class="comment">that is currently Firefox-only */</span></span><br><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">scrollbar-width</span>: thin;</span><br><span class="line">  <span class="attribute">scrollbar-color</span>: blue orange;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Works on Chrome/Edge/Safari */</span></span><br><span class="line">*::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line">*::-webkit-scrollbar-track &#123;</span><br><span class="line">  <span class="attribute">background</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line">*::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Handle on hover */</span></span><br><span class="line">::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">14</span>, <span class="number">77</span>, <span class="number">136</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改自动填充样式</title>
      <link href="/modify-autofill-style/"/>
      <url>/modify-autofill-style/</url>
      
        <content type="html"><![CDATA[<p>在 WebKit 内核的浏览器中，当用户的设置中允许表单自动填充，填充后有一个背景颜色，打开控制台的 styles 看到 input:-internal-autofill-selected 设置了背景色和字体颜色，大喜。在 css 中改完发现无效，明明看到覆盖掉了这个的样式，怎么还是有背景色呢？</p><p>看到 css-tricks 上的一篇文章，说这个填充的背景样式是由 -webkit-autofill 这个伪类控制的,而填充背景色则是由 -webkit-box-shadow 属性控制的，下面来看看修改填充样式的一个 demo</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span>:-webkit-autofill,</span><br><span class="line">input:-webkit-autofill:hover,</span><br><span class="line">input:-webkit-autofill:focus,</span><br><span class="line">textarea:-webkit-autofill,</span><br><span class="line">textarea:-webkit-autofill:hover,</span><br><span class="line">textarea:-webkit-autofill:focus,</span><br><span class="line">select:-webkit-autofill,</span><br><span class="line">select:-webkit-autofill:hover,</span><br><span class="line">select:-webkit-autofill:focus &#123;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  -webkit-<span class="selector-tag">text</span>-<span class="attribute">fill</span>-<span class="attribute">color</span>: <span class="number">#333333</span>;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0px</span> <span class="number">1000px</span> <span class="number">#fff</span> inset;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>完美，自动填充的样式被修改为我想要的样子了。这里要说一下我为什么非得修改这个自动填充的样式呢？我们知道同样是 webkit 内核，在不同浏览器上，自定义的行为可能是不一样的，也许这个浏览器的自动填充背景色是这个颜色，另一个浏览器想彰显个性就表现不一样了。而对于程序来说，不可控的因素是致命的，我想要我的页面在不同情况下表现能一致。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对技术成长的一些思考</title>
      <link href="/thoughts-on-technical-growth/"/>
      <url>/thoughts-on-technical-growth/</url>
      
        <content type="html"><![CDATA[<p>时隔四年，再一次面了阿里，上一次还是大三的时候面淘宝的实习岗位。感觉体验很不错，从项目出发，由浅入深，中规中矩的面试，发现了自己的一些不足之处，末了问面试官他们希望招怎样的人才，面试官回答的要点大致如下：</p><ul><li><p>基础知识扎实</p></li><li><p>熟悉常用框架的底层原理，能自己实现框架</p></li><li><p>有一定的技术深度，因为有一定工作经验的人，大家干活都差不多，需要看技术深度和竞争力</p></li><li><p>有一定的开源贡献</p></li></ul><p>面试完想了想自己目前的技术水平处于哪个层次呢？虽然涉猎面很广，媒体、富文本、工程化、webGL 都有做过相关的项目，但是要说自己对哪个领域很熟也谈不上，只能说是都大概知道，会实现需求。对于底层的运作原理，对细分领域的了解都不怎么深入，除此之外自己现在都还在补基础知识，很多基础知识的掌握程度也是不高的。</p><p>跟同学说了我的面试情况，同学分析了我目前的处境，觉得三年是一个比较尴尬的点，因为市场对于前端的成长期望大概是这样的</p><ul><li><p>1年跟校招一样，看基础</p></li><li><p>3年基本上是高级的要求，看深度（知道运作原理、在某个领域，大部分细分都很清楚）</p></li><li><p>5年算是比较资深点了，反而看广度</p></li></ul><p>而我目前是处于 1-3 之间的这种状况，有点基础，深度不够，我想接下来的一个技术发展方向可能就是要继续补基础知识，提高自己的技术深度了。以前觉得项目做得多了，自己的技术能力也就提上去了，现在想想，其实不然，做得项目很多，但是只是浮于表面的使用工具而已，对技术本身反而是没有时间去研究的，正所谓搬砖工人是也。这也给了我一个启发，做项目的时候，不能仅仅为了实现需求而运用技术，了解技术本身，去做一些技术沉淀也是有一定必要性的。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 职业发展 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 常用布局及解决方案</title>
      <link href="/css-layout-guide/"/>
      <url>/css-layout-guide/</url>
      
        <content type="html"><![CDATA[<p>CSS 常用布局包括元素的水平、垂直居中，单栏布局、三栏布局等，本文分析多种情况下的布局方案。</p><span id="more"></span><h2 id="一、居中"><a href="#一、居中" class="headerlink" title="一、居中"></a>一、居中</h2><h3 id="1-水平居中"><a href="#1-水平居中" class="headerlink" title="1. 水平居中"></a>1. 水平居中</h3><p><strong>(1) 基于盒模型的实现</strong></p><ul><li>子元素为行内元素</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent parent-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span>子元素为行内元素<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent-box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 行内元素直接设置文本居中 */</span></span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>子元素为定宽块状元素</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child child-box&quot;</span>&gt;</span>定宽子元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent-box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child-box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 设置 margin 值，平分剩余空间 */</span></span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>子元素为不定宽块状元素</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent parent-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span>子元素为不定宽块状元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent-box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 子元素设置为 inline，父元素设置文本居中 */</span></span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>(2) 基于 flex 的实现</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent parent-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span>flex 布局<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent-box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 使用弹性盒子，水平轴设置为居中 */</span></span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-垂直居中"><a href="#2-垂直居中" class="headerlink" title="2. 垂直居中"></a>2. 垂直居中</h3><p><strong>(1) 基于盒模型的实现</strong></p><ul><li>父元素一定，子元素为单行内联文本</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent parent-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span>父元素一定，子元素为单行内联文本<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent-box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">260px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 设置一个任意行高 */</span></span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>父元素一定，子元素为多行内联文本</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent parent-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">    父元素一定，子元素为多行内联文本父元素一定，子元素为多行内联文本父元素一定，子元素为多行内联文本父元素一定，子元素为多行内联文本</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent-box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 父元素设置 line-height */</span></span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 子元素设置为内联块级盒子，垂直居中，行高设置为任意一个值 */</span></span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>父元素一定，子元素为块级元素</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child child-box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child-box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 原理就是 margin 平分剩余空间 */</span></span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>(2) 基于 flex 的实现</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent parent-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent-box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二、单列布局"><a href="#二、单列布局" class="headerlink" title="二、单列布局"></a>二、单列布局</h2><h3 id="1-header、content、footer-为浏览器宽度"><a href="#1-header、content、footer-为浏览器宽度" class="headerlink" title="1. header、content、footer 为浏览器宽度"></a>1. header、content、footer 为浏览器宽度</h3><ul><li>方案 1：计算中间列高度</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;layout&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>头部<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>尾部<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span>,</span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#009cff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100vh</span> - <span class="number">80px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>方案 2：flex 布局</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span>,</span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#009cff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-header、footer-宽度为浏览器宽度，content-宽度小于浏览器宽度居中"><a href="#2-header、footer-宽度为浏览器宽度，content-宽度小于浏览器宽度居中" class="headerlink" title="2. header、footer 宽度为浏览器宽度，content 宽度小于浏览器宽度居中"></a>2. header、footer 宽度为浏览器宽度，content 宽度小于浏览器宽度居中</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;layout&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>头部<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>尾部<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span>,</span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#009cff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100vh</span> - <span class="number">80px</span>);</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>另一种方案参考上一个 demo</p><h2 id="三、三列布局"><a href="#三、三列布局" class="headerlink" title="三、三列布局"></a>三、三列布局</h2><h3 id="1-基于盒模型的实现"><a href="#1-基于盒模型的实现" class="headerlink" title="1. 基于盒模型的实现"></a>1. 基于盒模型的实现</h3><ul><li><strong>float + margin</strong></li></ul><p>左右两列先写，中间列最后写，左右列分别设置一个宽度左右浮动，中间列 margin 左右分别设置为左右列的宽度。</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;layout&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span>sub<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;extra&quot;</span>&gt;</span>extra<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sub</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#009cff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.extra</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#009cff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#dff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>position + margin</strong></li></ul><p>左右元素绝对定位，中间元素的 margin-left、margin-right 对应左右元素的宽度。</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;layout&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sub&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>main<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;extra&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sub</span>,</span><br><span class="line"><span class="selector-class">.extra</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">56</span>, <span class="number">165</span>, <span class="number">238</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sub</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.extra</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上实现都是中间列要么写在中间，要么写在最后面，不利于主要内容的 seo 和优先渲染，那若是我们想优先渲染主要内容该怎么办呢？DOM Tree 是从上往下解析的，所以我们需要把 main 提到前面，于是就有了下面的布局方案。</p><h3 id="2-基于盒模型的三列布局增强版"><a href="#2-基于盒模型的三列布局增强版" class="headerlink" title="2. 基于盒模型的三列布局增强版"></a>2. 基于盒模型的三列布局增强版</h3><ul><li><strong>双飞翼布局</strong></li></ul><p>双飞翼布局也是用 float+margin 进行布局，不同的是 main 被提到了最前面，里面加了个子元素。该布局方案的精髓在于左列和中间列左浮动，右列右浮动，左列设置 margin: -100%，把该列拉回原本的位置，右列设置 margin 为负的自身宽度，回到上一行。main 的宽度设置为容器宽度，子元素 margin 的左右设置为左右列的宽度。</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;layout&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: aquamarine;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: bisque;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>圣杯布局</strong></li></ul><p>圣杯布局比双飞翼布局相比，元素嵌套没这么深，主要精髓在于，所有列设置左浮动，左右列设置 position: relative,分别设置对应方向的偏移值。父元素设置左右 margin 分别为左右列的宽度。</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;layout&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>content<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: aquamarine;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: bisque;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-基于-flex-实现三栏布局"><a href="#3-基于-flex-实现三栏布局" class="headerlink" title="3. 基于 flex 实现三栏布局"></a>3. 基于 flex 实现三栏布局</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;layout&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>主内容栏宽度自适应<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>侧边栏宽度固定<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>侧边栏宽度固定<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#aaa</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span>,</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">order</span>: -<span class="number">1</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#009cff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">background</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>setTimeout 模拟 setInterval</title>
      <link href="/settimeout-simulate-setinterval/"/>
      <url>/settimeout-simulate-setinterval/</url>
      
        <content type="html"><![CDATA[<h2 id="一、为什么要用-setTimeout-模拟-setInterval"><a href="#一、为什么要用-setTimeout-模拟-setInterval" class="headerlink" title="一、为什么要用 setTimeout 模拟 setInterval"></a>一、为什么要用 setTimeout 模拟 setInterval</h2><ol><li><p>在 setInterval 回调函数中处理异步任务，会创建一个很长的请求队列，执行效率很低。</p></li><li><p>存在耗时很长的同步任务，setInterval 的周期性会被打乱，执行回调函数可能会不在预期内。</p></li><li><p>回调函数抛出错误，还是会继续执行，不会停止</p></li></ol><h2 id="二、setTimeout-去模拟-setInterval-的实现"><a href="#二、setTimeout-去模拟-setInterval-的实现" class="headerlink" title="二、setTimeout 去模拟 setInterval 的实现"></a>二、setTimeout 去模拟 setInterval 的实现</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> timeMap = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> id = <span class="number">0</span>; </span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mySetInterval</span> = (<span class="params">cb, time</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> timeId = id;</span><br><span class="line">  id++; </span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">cb</span>();</span><br><span class="line">    timeMap[timeId] = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">fn</span>();</span><br><span class="line">    &#125;, time);</span><br><span class="line">  &#125;;</span><br><span class="line">  timeMap[timeId] = <span class="built_in">setTimeout</span>(fn, time);</span><br><span class="line">  <span class="keyword">return</span> timeId; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">myClearInterval</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">  <span class="built_in">clearTimeout</span>(timeMap[id]); </span><br><span class="line">  <span class="keyword">delete</span> timeMap[id];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> timeId = <span class="literal">null</span>;</span><br><span class="line">timeId = <span class="title function_">mySetInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">myClearInterval</span>(timeId);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure><p>基本思路是递归+setTimeout，这里用 timeMap 去存 time id 是因为定时器可能有很多，每个都是唯一的，使用 map 去存储每一个 time id，方便清除多个定时器。</p><p>参考文献：</p><p><a href="https://dev.to/akanksha_9560/why-not-to-use-setinterval--2na9">Why not to use setInterval</a></p><p><a href="https://juejin.cn/post/6844903839934447629">用setTimeout和clearTimeout简单实现setInterval与clearInterval</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决 Github Dns 污染问题</title>
      <link href="/solve-github-dns-pollution-issue/"/>
      <url>/solve-github-dns-pollution-issue/</url>
      
        <content type="html"><![CDATA[<p>最近 github 老是抽风，打不开，排查了一番，发现电脑端开启代理的 pac 模式就会出现这个问题，全局模式和不开代理是没问题的。手机端连了公司的 wifi 会打不开，不连 wifi 打得开，目测是 dns 被污染了。</p><p>解决方法就是去网上用<a href="https://www.ipaddress.com/"> ping 工具 </a>ping 一下 github 域名，看看哪些能用，然后在本地再 ping 一下，ok 的话就去 host 文件里面配置一下 github 的 ip 为刚刚测试的可用 ip。如果还是不行看看抓包一下，看看请求的哪几个域名失败嘞，重复以上步骤。</p><p>操作步骤如下：</p><figure class="highlight accesslog"><table><tr><td class="code"><pre><span class="line">获取可用 ip</span><br><span class="line"></span><br><span class="line">打开 host 文件</span><br><span class="line">sudo vi /etc/hosts</span><br><span class="line"></span><br><span class="line">修改 github 域名指向的 ip</span><br><span class="line"><span class="number">140.82.112.4</span>    github.com</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lodash 源码解析 —— Slice</title>
      <link href="/lodash-source-analysis-array-slice/"/>
      <url>/lodash-source-analysis-array-slice/</url>
      
        <content type="html"><![CDATA[<h2 id="一、Why-lodash-slice"><a href="#一、Why-lodash-slice" class="headerlink" title="一、Why lodash slice"></a>一、Why lodash slice</h2><p>首先我们先来想一个问题，JavaScript Array 不是已经有 slice 方法了吗，为什么这里还要多此一举，重新实现一遍呢？源码上面有一句注释</p><blockquote><p>This method is used instead of <a href="https://mdn.io/Array/slice"><code>Array#slice</code></a> to ensure dense arrays are returned</p></blockquote><p>这里说到的 dense arrays 就是有内容的数组，而不是没有内容的空数组, 先看一下原生 slice 切割数组的一个例子：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">var</span> b = a.<span class="title function_">slice</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// [ &lt;3 empty items&gt; ]</span></span><br><span class="line">b.<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b item:&#x27;</span>,el)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>上述例子中我们创建了一个长度为 3 的数组，然后用 slice 切割放到 b 里面，打印 b，返回的是 <code>[ &lt;3 empty items&gt; ]</code>，可见这是一个有长度，但是没内容的数组，也就是 sparse arrays，直译为稀疏数组，不好听，不管还是叫英文吧。接着我们遍历了一下 b，发现 b 里面的内容并没有执行，说明 sparse array 并不会被迭代。</p><p>接着我们再来看看用 lodash slice 切割数组的一个例子：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">var</span> b = <span class="title function_">slice</span>(a)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// [ undefined, undefined, undefined ]</span></span><br><span class="line">b.<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b item:&#x27;</span>,el)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> c = b.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">x, i</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> i;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c) <span class="comment">// [(0, 1, 2)];</span></span><br></pre></td></tr></table></figure><p>可以看到用 lodash slice 返回的是 dense array，也就是既有长度又有内容的数组，这时候我们再去遍历这个数组，可以看到已经生效了。使用 dense array 有什么好处呢？有的时候我们可能会生成一个空数组用来遍历生成一些新的空选项，这个时候使用 dense array 就比较方便了。</p><h2 id="二、怎么保证返回的值正确？"><a href="#二、怎么保证返回的值正确？" class="headerlink" title="二、怎么保证返回的值正确？"></a>二、怎么保证返回的值正确？</h2><p>先来看一段 demo</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">slice</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],&#123;&#125;));</span><br></pre></td></tr></table></figure><p>这段示例返回了一个空数组，咦，我明明传的是一个对象，他怎么没有报错呢？我们简化一下源码看看</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">slice</span>(<span class="params">array, start, end</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> length = array == <span class="literal">null</span> ? <span class="number">0</span> : array.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">if</span> (!length) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line">  start = start == <span class="literal">null</span> ? <span class="number">0</span> : start; <span class="comment">// start = &#123;&#125;</span></span><br><span class="line">  end = end === <span class="literal">undefined</span> ? length : end; <span class="comment">// end = length</span></span><br><span class="line">  end = end &gt; length ? length : end; <span class="comment">// end = length</span></span><br><span class="line">  length = start &gt; end ? <span class="number">0</span> : (end - start) &gt;&gt;&gt; <span class="number">0</span>; <span class="comment">//length = 0</span></span><br><span class="line">  start &gt;&gt;&gt;= <span class="number">0</span>;  <span class="comment">// start = 0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> index = -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">new</span> <span class="title class_">Array</span>(length); <span class="comment">// result = []</span></span><br><span class="line">  <span class="keyword">while</span> (++index &lt; length) &#123;</span><br><span class="line">    result[index] = array[index + start];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>从我的注释可以可以看出为什么我们输入的 start 是 <code>&#123;&#125;</code>,却可以返回空数组而没有报错，秘诀在于使用了 <code>&gt;&gt;&gt;</code>, 这个符号叫做无符号右移操作符，<code>&gt;&gt;&gt;0</code> 作用是保证值是有意义的正整数，若无意义则缺省为 0，这里 <code>&#123;&#125;&gt;&gt;&gt;0</code> 会被转换为 0，因此不会报错。</p><p>再来看一段 demo</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">slice</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])); <span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure><p>这段示例我们没有给 start 值，没有报错，返回了完整的数组。这又是什么原理呢？源码中有这么一句</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">start = start == <span class="literal">null</span> ? <span class="number">0</span> : start</span><br></pre></td></tr></table></figure><p>可是我们的 start 不是 undefined 吗？这里用到了二元操作符 <code>==</code> 的其中一个规则，null &#x3D;&#x3D; undefined。</p><p>参考文献：</p><p><a href="https://2ality.com/2012/06/dense-arrays.html">JavaScript: sparse arrays vs. dense arrays</a></p><p><a href="https://github.com/lodash/lodash">lodash 源码</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现数组拍平</title>
      <link href="/implement-array-flatten/"/>
      <url>/implement-array-flatten/</url>
      
        <content type="html"><![CDATA[<p>有一个深层嵌套的数组，需要输出拍平后的新数组</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> input = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>], [<span class="number">6</span>]]];</span><br><span class="line"><span class="keyword">const</span> output = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br></pre></td></tr></table></figure><h2 id="实现方案-1：flat"><a href="#实现方案-1：flat" class="headerlink" title="实现方案 1：flat"></a>实现方案 1：flat</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> output = input.<span class="title function_">flat</span>(<span class="title class_">Infinity</span>);</span><br></pre></td></tr></table></figure><p>这里为什么用无穷大呢，因为有的时候可能嵌套很深，我们没有精力去数，为了保证都能被打平，用一个最大的数字。</p><h2 id="方案-2：递归"><a href="#方案-2：递归" class="headerlink" title="方案 2：递归"></a>方案 2：递归</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">flat</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> retVal = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr[i])) &#123;</span><br><span class="line">      retVal = retVal.<span class="title function_">concat</span>(<span class="title function_">flat</span>(arr[i]));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      retVal.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> retVal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> output = <span class="title function_">flat</span>(input);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP 笔记</title>
      <link href="/http-notes/"/>
      <url>/http-notes/</url>
      
        <content type="html"><![CDATA[<h2 id="一、HTTP-1-0"><a href="#一、HTTP-1-0" class="headerlink" title="一、HTTP 1.0"></a>一、HTTP 1.0</h2><ol><li><p>每请求一个资源都要新建一个TCP连接，而且是串行请求，性能比较差</p></li><li><p>缓存相关头部：Expires, If-Modified-Since</p></li></ol><h2 id="二、HTTP-1-1"><a href="#二、HTTP-1-1" class="headerlink" title="二、HTTP 1.1"></a>二、HTTP 1.1</h2><ol><li><p>缓存处理，新增 cache control 机制，协商缓存策略新增 Etag&#x2F;If-none-match和Last-Modified&#x2F;If-modified-since(If-Unmodified-Since)</p></li><li><p>支持断点续传，请求头引入了range头域，允许只请求资源的某个部分，成功返回的状态码是206</p></li><li><p>错误处理，HTTP1.1 新增24个错误状态响应码，如409（Conflict）表示请求的资源与资源的当前状态发生冲突；410（Gone）表示服务器上的某个资源被永久性的删除</p></li><li><p>支持代理，要求必须有HOST头域，没有Host头域会抛出错误（400 Bad Request），使用HOST 头域的好处是当我们有多个指向同一个IP 的域名时，服务器可以通过这个值去判断我们想要请求的具体是哪一个网站</p></li><li><p>支持长连接和 Pipelining 请求，默认开启 Connection： keep-alive, 这意味着可以在一次连接成功的基础上发送多个请求，解决了 HTTP 1.0 由于 TCP 慢启动带来的性能问题</p></li><li><p>新增 OPTIONS 方法，用于实现 CORS 的请求预检</p></li><li><p>新增 100 状态码，对于大体积文件，不确定服务端能否处理，客户端可以在发送请求实体前, 先发送一个带有 Expect: 100-continue 首部的请求，接收到 100 Continue 响应状态码才继续相关请求</p></li></ol><h2 id="三、HTTP-2-0"><a href="#三、HTTP-2-0" class="headerlink" title="三、HTTP 2.0"></a>三、HTTP 2.0</h2><ol><li><p>采用二进制格式进行协议解析</p></li><li><p>多路复用，一个连接开启多个请求，请求并行执行，弥补了浏览器限制请求数，http 1.1 请求队列阻塞等问题</p></li><li><p>服务端推送，推送请求相关的静态资源，提升页面加载速度</p></li><li><p>header 压缩</p></li><li><p>完全兼容HTTP1.x的语义</p></li></ol><h2 id="四、HTTP-3-0"><a href="#四、HTTP-3-0" class="headerlink" title="四、HTTP 3.0"></a>四、HTTP 3.0</h2><p>使用基于UDP协议的QUIC协议</p><p>参考文献：</p><p><a href="https://juejin.cn/post/6844903489596833800">HTTP1.0、HTTP1.1 和 HTTP2.0 的区别</a></p><p><a href="https://stackoverflow.com/questions/246859/http-1-0-vs-1-1">HTTP 1.0 vs 1.1</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我所不知道的 Vue 细节</title>
      <link href="/vue-details-i-didnt-know/"/>
      <url>/vue-details-i-didnt-know/</url>
      
        <content type="html"><![CDATA[<p>用 Vue 已经有几年了，使用上大概是人们口中所说的老司机了吧，熟知 Vue 生态，用来开发了十来个项目，也可谓是驾轻熟路了吧。遇到问题也会通过 debug 找到问题出处，不明白的回去翻翻源码相应的位置。不过还是有很多地方是我不知道的，更确切的说是自己只是把他当做工具，能用就行，从来没有想过这个工具为什么这么设计，对于开发有什么借鉴意义，我想这也是大部分人的做法吧。</p><p>但是，作为一个想要更深入 Vue 的开发人员，可能多问问为什么也是有百利而无一害的，就是查资料搞明白需要费些时间。下面我将记录一些对 Vue 的思考以及自己的理解。</p><h2 id="组件的-data-为什么用函数形式返回呢？"><a href="#组件的-data-为什么用函数形式返回呢？" class="headerlink" title="组件的 data 为什么用函数形式返回呢？"></a>组件的 data 为什么用函数形式返回呢？</h2><p>Vue api 文档是这么解释的</p><blockquote><p>当一个组件被定义，data 必须声明为返回一个初始数据对象的函数，因为组件可能被用来创建多个实例。如果 data 仍然是一个纯粹的对象，则所有的实例将共享引用同一个数据对象！通过提供 data 函数，每次创建一个新实例后，我们能够调用 data 函数，从而返回初始数据的一个全新副本数据对象。</p></blockquote><p>data 会被代理到实例的根节点下,当有多个组件实例时，原型链上的数据会被共享，data 用函数形式返回可以解决这个问题。此外，data 使用函数形式还可以方便对数据进行一些操作，解决引用执行上下文的问题。</p><h2 id="Vue-的通讯方式有哪几种"><a href="#Vue-的通讯方式有哪几种" class="headerlink" title="Vue 的通讯方式有哪几种"></a>Vue 的通讯方式有哪几种</h2><h3 id="父子组件通讯方式"><a href="#父子组件通讯方式" class="headerlink" title="父子组件通讯方式"></a>父子组件通讯方式</h3><p>讲到通讯方式，我一般想到的是父子组件之间的通讯方式，父组件向子组件传值用 props，子组件向父组件传值用实例的 $emit 方法。</p><p>比较直接粗暴的方式，可以调用实例的属性 $parent 和 $children 做父子组件间的通讯。</p><p>在组件库中可能还会看到使用 provide&#x2F;inject 进行通讯，由父组件向子组件注入数据，子组件进行消费。</p><h3 id="不相邻组件间通讯方式"><a href="#不相邻组件间通讯方式" class="headerlink" title="不相邻组件间通讯方式"></a>不相邻组件间通讯方式</h3><p>讲到不相邻组件的通讯方式，我首先想到的就是常用的 vuex，不过通常我管这个叫做全局状态管理，因为这里面的数据是在全局更新和设置的，一般用于存放一些组件的状态数据，供其他组件消费。</p><p>类似于 vuex 的另一个方法是 eventBus，创建一个事件中心，组件可以通过这个事件中心发布或者订阅其他组件的事件，以前 vue 文档记得有看到一些描述，最近打开没看到了。不过个人还是倾向于 vuex 的，比较好维护和管理。</p><p>使用 $attr&#x2F;$listener 实现跨组件通讯，通常用于嵌套组件间的通讯，多个嵌套组件，底层组件需要跟上层组件通讯，可以用这个。这种通讯方式一般在高阶组件中使用，日常用的比较少。</p><h2 id="生命周期钩子概述"><a href="#生命周期钩子概述" class="headerlink" title="生命周期钩子概述"></a>生命周期钩子概述</h2><h3 id="beforeCreate"><a href="#beforeCreate" class="headerlink" title="beforeCreate"></a>beforeCreate</h3><p>beforeCreate 发生在实例初始化之后，initState 之前，在这个阶段还没有 props、data、methods、watch、computed 等选项。</p><h3 id="created"><a href="#created" class="headerlink" title="created"></a>created</h3><p>created 在实例创建完成后被立即调用，此时已经完成了 initState，但是还没有渲染 DOM，可以在这个阶段做一些数据的操作。</p><h3 id="beforeMounte"><a href="#beforeMounte" class="headerlink" title="beforeMounte"></a>beforeMounte</h3><p>在 Vnode 挂载之前执行</p><h3 id="mounted"><a href="#mounted" class="headerlink" title="mounted"></a>mounted</h3><p>实例被挂载后调用，这个阶段可以做一些 DOM 的操作，父子组件的 mounted 调用过程是先子后父，所以这个阶段组件不能保证所有视图已经被渲染完了，有需要的话，可以在实例的 $nextTick 方法中做相应的操作。</p><h3 id="beforeUpdate"><a href="#beforeUpdate" class="headerlink" title="beforeUpdate"></a>beforeUpdate</h3><p>这个钩子 api 文档是这么描述的</p><blockquote><p>数据更新时调用，发生在虚拟 DOM 打补丁之前。这里适合在更新之前访问现有的 DOM，比如手动移除已添加的事件监听器</p></blockquote><p>这个描述已经很清楚了，我就不做赘述了。</p><h3 id="updated"><a href="#updated" class="headerlink" title="updated"></a>updated</h3><p>虚拟 DOM 重新渲染和打补丁之后执行，父子组件的调用过程是先子后父，跟 mounted 一样，若想操作 DOM 可以在 $nextTick 中做相应的操作。</p><h3 id="activated-deactivated"><a href="#activated-deactivated" class="headerlink" title="activated&#x2F;deactivated"></a>activated&#x2F;deactivated</h3><p>这两个钩子看 api 文档描述就好了，不做赘述</p><h3 id="beforeDestroy"><a href="#beforeDestroy" class="headerlink" title="beforeDestroy"></a>beforeDestroy</h3><blockquote><p>实例销毁之前调用。在这一步，实例仍然完全可用。</p></blockquote><h3 id="destroyed"><a href="#destroyed" class="headerlink" title="destroyed"></a>destroyed</h3><p>发生在所有的实例被移除，包括子组件实例之后，移除过程是先子后父。</p><p>未完待续……</p><p>参考文档：</p><p><a href="https://cn.vuejs.org/v2/api/#beforeCreate">Vue api</a><br><a href="https://ustbhuangyi.github.io/vue-analysis/v2/prepare/">Vue 技术揭秘</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记突发事件导致的服务降级</title>
      <link href="/record-service-degradation-due-to-emergency/"/>
      <url>/record-service-degradation-due-to-emergency/</url>
      
        <content type="html"><![CDATA[<p>昨天早上我整理好手头的 task，刚安排好当天要做的事情，做了一点点，就听到办公室有人在说正式版服务挂了，用七牛 CDN 的所有项目都打不开，因为七牛 CDN 挂了，我想到我们还有 pc 端，静态资源不走 CDN，就跟同事说让外面用着 PC 版先，功能都一样的，同事说视频，文档这些动态调用的静态资源都放在七牛，上传图片的路径也是七牛，还是会有部分功能用不了，不过我想我们也没办法，感觉这是服务端的事情，我这边应该也不用做什么措施，继续淡定的敲我的代码。</p><p>过了没多久看到群里有同事发了有学校要求我们管控平板摄像头的要求，因为有学生用这个来干坏事，我还是当吃瓜群众，淡定的吃我的瓜。上午快下班了，老大要求我们整理出自己的所有项目用了哪些 CDN，OSS 之类的，我想了想除了静态文件上传到七牛，图片上传到七牛还有就是视频也存在七牛，很快整理好了。</p><p>午休发现有同事竟然没午休，还在小会议室忙着，看来外部服务还没修好，这应该是重大事故了。中午看到群里的消息说找到了 CDN 被封的原因了，因为有学生在作业中上传了不和谐的内容，导致我们的 CDN 被封了，最后跟七牛沟通了下才给我们解封，服务端同学还在努力的找到那个上传的学生账号。</p><p>下午经过讨论，我们前端出了一个解决方案，服务降级。之前我们的静态资源都依赖 CDN，没有备用的方案，这里就存在一个问题，CDN 挂了，我们的页面都会挂，才会有这次的重大事故。由于我们编译后的整个文件都会上传到自己服务器的 docker，只是在 ci 阶段替换了静态资源路径为七牛路径，所以很好做开关降级，只需要服务端根据情况改变七牛路径环境变量的值就好了。</p><p>但是这意味着我们的所有项目 ci 需要重跑一遍，若是说单纯触发一下 ci 线程倒是很简单，但是由于我们的 tag 一样，再跑的话不会再次上传 docker，最后加班把自己手头的十多个项目都去打了 tag 重跑，再一个个项目去确认路径有没有被替换，真的效率很低下。这里我们讨论能不能做一个集中部署的东西，目前是可以集中触发 ci 线程的，但是那个只会触发最新的一个，而不能指定是哪一个，要做这个还需要服务端做一些支持，感觉也不好推进。</p><p>通过这件事，我们也发现很有必要有一个默认 ci 模板，因为很多项目的 ci 都是一样的，每次都是去以前的项目中复制，要是 gitlab 有一个自定义的默认模板，就可以每次生成项目就生成了响应的可用 ci，可以省去不少事情。另外，有很多的项目配置文件其实是一样的，我个人其实是有做成脚手架的想法，但只是有个想法，迟迟没有动手，得空再看看有没有这个必要写，有必要的话就写一个。</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于做技术这件事</title>
      <link href="/about-doing-technology/"/>
      <url>/about-doing-technology/</url>
      
        <content type="html"><![CDATA[<p>想做技术的契机来源于大学计算机老师的影响，大一教 c 语言的老师让我知道了编程竟然这么有趣，可以做这么多好玩的东西。大二时听到老师很有兴致的讲到他大学的时候通过局域网去恶作剧，觉得懂技术竟然可以这么好玩，真有意思。后来的数据库课程的老师布置的期末大作业，开发一个动态网站，我第一次知道了了网站开发竟然这么简单，几行代码就可以出来一个让全世界人们都能看到的页面。就是这么一个个老师的影响，我有了编程这个爱好，也坚持这个爱好并找到了相关工作。</p><p>刚毕业那会为了能做喜欢的事情，找工作甚至不考虑价位和福利，只求能做自己想做的事情。很感谢现在的公司给予我足够的自由做自己想做的事情，项目中我也有足够的发挥空间，实现自己的一些想法，选择自己的开发技术。也很感谢前领导的指导，让我在开发这条路上走得更远一些了。但是最近感觉有了不同的想法，虽然工作环境是自己喜欢的，同事相处也很融洽，但是感觉自己的技术想更进一步发展需要有一个更大的平台才能实现，很多方案在目前的项目中使用可能有点浪费。加之可能最近接触的负能量也好，世俗也好，平静的心感觉有了一丝悸动，也有点想追求经济的成长，但是内心更执着于技术的发展，这就使我觉得很矛盾了。</p><p>试着面试了一下，由于自己的矛盾心理，更想去有技术成长的地方，放弃了一些机会，但是自己想去的更大的平台又屡屡遭拒。有时候想，算了，就这样吧，现在虽然工资不高，但是有足够的时间做自己想做的事情，生活得也很惬意，再加上家人都会说女生不用这么拼，这样就好，稳定的拿着工资，也不累。自己甚至有时候更消极的想干脆找个更安稳的地方，拿着稳定的工资养老算了。每每有这种想法，又会想自己就这么虚度，生活多没意思，还是得去看看更大的世界。</p><p>就这么矛盾了几个月之后，今天我突然想到，抛开利益，自己做技术的初心是什么，自己想做什么，为什么想做。记得有句话说，验证自己是否真的喜欢做一件事的最好方法是问问自己，就算不给钱，你也愿意去做这个事情吗？我的答案应该是肯定的，毕业的时候明明有很多机会，我唯独选择了做技术，而且工资比同届的很多人低，我当时应该心里就有答案了吧。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 职业发展 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue 数据驱动视图更新实现</title>
      <link href="/vue-data-driven-view-implementation/"/>
      <url>/vue-data-driven-view-implementation/</url>
      
        <content type="html"><![CDATA[<p>写了几年的 Vue 了，对其中的内部实现还是一知半解，日常开发中，基本问题 debug + 官方文档基本可以解决了，很少有触及源码的需求。最近发现看看源码也有好处，用的时候可能会多了一些自己的理解，知道了为什么，使用起来也更加得心应手。下面来讲讲 Vue 数据驱动视图是怎么做到的。</p><p>在讲 Vue 如何做到数据驱动视图之前，我们先来看看用纯 js 我们是如何改变页面数据的</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;input&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#input&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> text = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#text&#x27;</span>);</span><br><span class="line"></span><br><span class="line">input.<span class="property">onchange</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  text.<span class="property">innerText</span> = event.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>从上面的 demo 可以看到在不用任何框架的情况下，我们要改变页面数据首先会先拿到 DOM，然后从 DOM 中拿到对应的数据，再去修改其他地方的数据，jQuery 的实现基本也是这种思路，页面数据的更新都是通过操作 DOM 去实现的，这意味着每次数据的更新都会操作至少一次 DOM，我们知道平凡的 DOM 操作可能会导致页面性能差而且代码不好维护等问题。而 Vue 的数据驱动视图实现可以很好的规避这些问题。</p><p>我们把上面的 demo 改一改</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#input&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> text = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#text&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> val = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&#x27;text&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">get</span>: <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">set</span>: <span class="function">(<span class="params">newVal</span>) =&gt;</span> &#123;</span><br><span class="line">    val = newVal;</span><br><span class="line">    <span class="title function_">changeText</span>(val);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeText</span>(<span class="params">val</span>) &#123;</span><br><span class="line">  text.<span class="property">innerText</span> = val;</span><br><span class="line">&#125;</span><br><span class="line">input.<span class="property">onchange</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  data.<span class="property">text</span> = event.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>修改后的 demo 实现思路跟第一版有了一点不一样，第一版是直接在事件处理程序中修改视图数据的，更新后的这一版 demo 我们用了 Object 的 defineProperty 去监听数据的变化，在事件处理程序中修改数据的值，当数据值更新后，我们再去触发视图的更新，这也就是我们所说的数据驱动视图思想的一个简易实现了。</p><p>第二版 demo 我们把 data 作为数据中心，监听其中的数据变化去更新视图，但是只能监听到一个数据的变化，假如我们要监听多个数据的变化怎么办呢？再修改一下 demo</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#input&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> text = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#text&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">style</span>: <span class="string">&#x27;color:red&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> val = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">walk</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="title function_">defineReactive</span>(obj, keys[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">defineReactive</span>(<span class="params">obj, key, val</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">arguments</span>.<span class="property">length</span> === <span class="number">2</span>) &#123;</span><br><span class="line">    val = obj[key];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> <span class="title function_">reactiveGetter</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> <span class="title function_">reactiveSetter</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (val === newVal) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      val = newVal;</span><br><span class="line">      <span class="keyword">if</span> (key === <span class="string">&#x27;text&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">changeText</span>(val);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (key === <span class="string">&#x27;style&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;change style&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">walk</span>(data);</span><br><span class="line">data.<span class="property">style</span> = <span class="string">&#x27;I change!&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeText</span>(<span class="params">val</span>) &#123;</span><br><span class="line">  text.<span class="property">innerText</span> = val;</span><br><span class="line">&#125;</span><br><span class="line">input.<span class="property">onchange</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  data.<span class="property">text</span> = event.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这一版 demo 我们实现了监听 data 中所有数据的目标，但是不包括引用类型中包含的数据。这里有个问题，就是消费 text 数据的可能不止一个地方，可能有多个地方会消费 text，需要一一去进行视图的更新，怎么办呢？Vue 的做法是在 get 数据的时候做依赖收集，哪些地方用了 text 数据就把他放到一个数组里，在 set 中对所有依赖发布数据更新消息。</p><p>比较忙，得空接着写，未完待续……</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript New 关键字的实现原理</title>
      <link href="/javascript-new-implementation-principle/"/>
      <url>/javascript-new-implementation-principle/</url>
      
        <content type="html"><![CDATA[<p>在实例化一个构造函数的时候，我们通常会用 new 关键字，这个 new 关键字是如何做到让实例可以调用到构造函数上的方法和属性的呢？</p><p>我们先来看看实例有啥特性，首先每个实例上都有一个 <code>__proto__</code> 属性指向实例原型，也就是构造函数的原型，实例可以调用到构造函数上的方法和属性，然后实例可以向构造函数传参。乍一看这不就是在变相的问如何实现继承吗？接下来，我们写个 demo 看看怎么实现上述表述的内容</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myNew</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Constructor</span> = [].<span class="property">shift</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">  obj.<span class="property">__proto__</span> = <span class="title class_">Constructor</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">  <span class="title class_">Constructor</span>.<span class="title function_">apply</span>(obj, <span class="variable language_">arguments</span>);</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>简要的描述一下上述 demo，首先初始化一个空对象。然后 new 关键字后面会接一个构造函数，这里我们用函数的形式写，所以应该给 new 一个构造函数类型的参数，我们为了方便取第一个参数为构造函数。接下来把 obj 的 <code>__proto__</code> 属性指向构造函数的原型。最后把构造函数的执行上下文指向 obj，从而达到继承构造函数内部属性的目的，这里 arguments 实际上只剩下后面的参数了，因为在取构造函数的时候用了 shift 方法，这个方法会原地删除第一个参数并返回。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Js 字符串转 Base64</title>
      <link href="/js-string-to-base64/"/>
      <url>/js-string-to-base64/</url>
      
        <content type="html"><![CDATA[<p>最近想把字符串转换成 base64，不想用库，搜了下浏览器环境下 js 原生就支持字符串跟 base64 的相互转换，看看 demo:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加密</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="title function_">btoa</span>(<span class="string">&#x27;canace22@qq.com&#x27;</span>) </span><br><span class="line"><span class="comment">// 解密</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="title function_">atob</span>(a)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)  <span class="comment">// Y2FuYWNlMjJAcXEuY29t</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b)  <span class="comment">// canace22@qq.com</span></span><br></pre></td></tr></table></figure><p>上面的 demo 可以看到 window 对象有两个 base64 相关的方法: atob 和 btoa，分别用于解密和加密。这里的加密只能加密可以转为 ACII 的字符，那如果要加密其他的unicode字符的话，就需要做一层转义</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加密</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="title function_">btoa</span>(<span class="built_in">encodeURIComponent</span>(<span class="string">&#x27;万水千山总是情！&#x27;</span>)) </span><br><span class="line"><span class="comment">// 解密</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">decodeURIComponent</span>(<span class="title function_">atob</span>(a))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)  <span class="comment">// JUU0JUI4JTg3JUU2JUIwJUI0JUU1JThEJTgzJUU1JUIxJUIxJUU2JTgwJUJCJUU2JTk4JUFGJUU2JTgzJTg1JUVGJUJDJTgx</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b)  <span class="comment">// 万水千山总是情！</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web 安全——CSRF</title>
      <link href="/web-security-csrf/"/>
      <url>/web-security-csrf/</url>
      
        <content type="html"><![CDATA[<h2 id="一、是什么"><a href="#一、是什么" class="headerlink" title="一、是什么"></a>一、是什么</h2><p>CSRF (Cross-Site Request Forgery)，是一种伪装成受信任用户给网站发送恶意请求的 web 攻击方式。比如下面这个例子</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://www.example.com/index.php?action=delete&amp;id=123&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上述例子由于用户对于 <a href="https://www.example.com/">https://www.example.com</a> 已经是受信任的用户，点击图片发送一些恶意请求给服务器是不会再次进行校验的，因此利用这个漏洞，攻击者可以执行一些操作，使自己受益。</p><p>CSRF 产生原因：浏览器发起请求会默认带上包括会话 cookie 在内的所有的 cookie，因此，若用户已经受信任于某个网站，该网站是无法去区分请求是伪装用户发出的，还是真实用户发出的。</p><h2 id="二、CSRF-攻击的影响"><a href="#二、CSRF-攻击的影响" class="headerlink" title="二、CSRF 攻击的影响"></a>二、CSRF 攻击的影响</h2><p>攻击者可以任意操作受信任网页，比如修改用户登录密码，使用用户账户进行购物等</p><h2 id="三、防范-CSRF-攻击的方法"><a href="#三、防范-CSRF-攻击的方法" class="headerlink" title="三、防范 CSRF 攻击的方法"></a>三、防范 CSRF 攻击的方法</h2><ol><li>确认一下使用的框架有自带的 CSRF 防御机制，有的话就直接使用</li><li>cookie 设置 SameSite 属性，不发送跨站请求</li><li>使用常规的请求头部</li><li>校验请求头部的 origin 值</li><li>使用双重认证 cookie，这种方式的实现大概是浏览器发起请求时，除了cookie携带身份之外，请求参数也需要携带身份信息，服务端会校验这两个值是否相等，相等则身份受信任</li><li>对于涉及敏感信息的交互，可以使用以下方法进行防范<ul><li>重新认证</li><li>使用一次性 token</li><li>使用验证码进行校验</li></ul></li><li>XSS 攻击的防范策略也适用于 CSRF</li><li>改变状态的请求不使用 get 方法</li></ol><p>参考资源：</p><p>[Cross-Site Request Forgery Prevention Cheat Sheet]([<a href="https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html]">https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html]</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于健忘那些事</title>
      <link href="/about-forgetfulness/"/>
      <url>/about-forgetfulness/</url>
      
        <content type="html"><![CDATA[<p>鲍勃迪伦有首歌叫做’flowing in the wind’，美国也有一部长篇历史小说叫做 ‘gone with the wind’, 名字也好，故事也好，我都很喜欢。也许是喜欢这一类的题材，我的记忆也爱屋及乌，演变成了 ‘flowing in the wind’ 或者 ‘gone with the wind’ 这样的状态吧。</p><p>特别是近几年，发现自己愈发的健忘了，上周或者昨天还侃侃而谈的东西，可能今天就已经忘得一干二净了。比如，昨天明明自己之前还跟学究一样的帮同事解决问题，还告诉他为什么，然后可能那个同事当时没解决好吧，接锅的同事遇到了同样的问题，我记得解决过，然后准备告之方案，结果发现自己竟然不记得了。再比如之前有用 vue3 做过一整个项目，但是后来有人问到我使用方法和里面的一些名词，我也是一个都想不起来了。如此种种，一开始我把责任归咎于自己没有理解，后来想了想，没有理解的话，自己当初就不会说的头头是道，或者能够用来做项目写功能。那既然不是理解的问题，那是什么呢？古人云温故而知新，说的是要学过的知识要经常去回顾，由此可见，问题应该在于我写过的东西当时反思总结过之后就丢在一边，没有去反复咀嚼。</p><p>说到温故而知新，又使我想到高考，高考前，大部分知识我们都已经学过，老师也在讲过很多次，自己也经常回去做题目，理解背诵，那为什么还是有这么多的人考的不理想呢？比如说政治，我的政治课就一直很差，能及格都已经很不错了，但是我也经常会去背诵，考试的时候依然写不出来，甚至高考的时候，作为文科生，我的政治也是及格线左右的。但是历史我不用背都可以考的很好，这就不是有没有反复回顾的问题了，因为我本身对历史很感兴趣，所以我对历史的整个脉络有自己的理解，答题的时候我就能从某个节点周围去答，而且除了课本，我还会去阅读一些课外的历史读物。所以要想学过的知识不被忘记，不只是回顾的问题，经常回顾，不知道整体的知识结构，对这方面的知识不感兴趣，只是为了解决眼前问题而习得的知识，很快就会被忘记也是正常的，因为我们的脑子只会记住它想记住的东西。</p><p>有时候想想健忘某种程度对自己来说还是有好处的，比如由于我的健忘，我昨天可能还因为某件事情而感到沮丧，但是我今天就可能会把对这件事的想法忘了或者印象不深了。再比如过去若是受过某些很严重的伤害，背叛，由于健忘，我也能很快将之忘却，起码切身体会的感觉于我是不复存在了，就像在看别人的经历一样麻木。所以因为这个，我还算是一个活得比较快乐的人，因为精神上的痛苦之类的感受于我而言，存在的时间是很短的。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网页性能优化-防抖</title>
      <link href="/web-performance-optimization-debounce/"/>
      <url>/web-performance-optimization-debounce/</url>
      
        <content type="html"><![CDATA[<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><p>有一个输入框，需要根据输入内容去更新数据，这里有个问题若是用 change，那得失去焦点才能拿到数据，若是用 keyup 又会每次按一个键都更新。遇到类似这种问题我们就可以用防抖来解决了，只要用户还在输入，就不执行更新数据的操作，当用户停止操作时间 n 之后再去做处理，这样就可以达到一个输入优化的效果了。</p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>先来看一个最简单的实现方法</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, wait</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> timeout;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout)</span><br><span class="line">    timeout = <span class="built_in">setTimeout</span>(func, wait);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述 demo 利用闭包的特性，把 timeoutId 存在了上层作用域的 timout 变量里，每次处理返回的函数都拿得到这个 timeoutId，从而可以做到取消定时的功能。按照上面的描述，我们需要做到最后一次输入时间n之后才去执行处理数据的程序，所以这里用了定时器，延迟程序的执行，每次输入都取消掉上一次的定时任务，所以定时任务只会在最后一次输入后时间n才会执行。</p><p>接下来有个问题，我们的函数需要拿到一些参数，根据参数去更新数据，上述 demo 是无法拿到参数的，这里我们可以使用 apply 去实现，接下来看一下带参数的 demo</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, wait</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> timeout;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> context = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">var</span> args = <span class="variable language_">arguments</span>;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout)</span><br><span class="line">    timeout = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      func.<span class="title function_">apply</span>(<span class="variable language_">this</span>,args)</span><br><span class="line">    &#125;, wait);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>至此，上述功能基本实现了，但是要输入完后等时间n才能执行，能不能先执行程序，间隔时间 n 再触发下一次执行呢？再改进一下 demo</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, wait, immediate</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> timeout, result;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> context = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">var</span> args = <span class="variable language_">arguments</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (timeout) <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">    <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">      <span class="comment">// 如果已经执行过，不再执行</span></span><br><span class="line">      <span class="keyword">var</span> callNow = !timeout;</span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        timeout = <span class="literal">null</span>;</span><br><span class="line">      &#125;, wait);</span><br><span class="line">      <span class="keyword">if</span> (callNow) result = func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>完整 demo：</p><p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="js,result" data-user="AnnaLoveLife" data-slug-hash="zYNdgBr" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="debounce">  <span>See the Pen <a href="https://codepen.io/AnnaLoveLife/pen/zYNdgBr">  debounce</a> by Anna (<a href="https://codepen.io/AnnaLoveLife">@AnnaLoveLife</a>)  on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webpack 动态修改资源域名</title>
      <link href="/webpack-dynamic-modify-resource-domain/"/>
      <url>/webpack-dynamic-modify-resource-domain/</url>
      
        <content type="html"><![CDATA[<p>昨天同事接到一个比较奇葩的需求，要他把某个展示的页面，静态资源域名改为 localhost:8080, 平板端则改为 teacherIp。同事跑来问我，我就想到有动态更改 CDN 的需求，没听过这种需求，觉得很奇葩，让他问问能不能 APP 那边做拦截修改，答约不能，没有解决他们那边的问题。好吧，那就看看咯，stackoverflow 有回答说用 <strong>webpack_public_path</strong> 可以，然后国内网友又说不能先设置 publicPath 才能改成功，这种方法对 css 资源无效 blabla 的，小伙子实践了一通，也发现不行。</p><h2 id="一、项目背景"><a href="#一、项目背景" class="headerlink" title="一、项目背景"></a>一、项目背景</h2><p>项目使用的框架是 Vue，静态资源原本有两套逻辑，web 端和安卓端是在编译完后上传到七牛，使用七牛资源，pc 客户端则是使用本地资源。所以原来的静态资源要么是 ‘.&#x2F;‘，要么是七牛地址。目前的需求是要在项目中去动态切换静态资源地址，即需要在编译完成后去做地址切换，然后客户端做一层代理映射到对应资源。</p><h2 id="二、解决方案"><a href="#二、解决方案" class="headerlink" title="二、解决方案"></a>二、解决方案</h2><p>原有代码不动，还是该上传到七牛就上传，不上传就用本地资源。webpack 文档中有以下描述:</p><blockquote><p>webpack 暴露了一个名为 <strong>webpack_public_path</strong> 的全局变量。所以在应用程序的 entry point 中，可以直接如下设置：</p></blockquote><p><code>__webpack_public_path__ = process.env.ASSET_PATH;</code></p><p>参考上述文档描述，可以在 main 文件中加入以下切换路由的代码</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> query = location.<span class="property">href</span>.<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> params = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; query.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> pair = query[i].<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">  params[pair[<span class="number">0</span>]] = pair[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (params.<span class="property">teacherIp</span> == <span class="string">&#x27;localhost&#x27;</span>) &#123;</span><br><span class="line">  __webpack_public_path__ = <span class="string">&#x27;http://localhost:8080/&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (params.<span class="property">teacherIp</span>) &#123;</span><br><span class="line">  __webpack_public_path__ = <span class="string">`http://<span class="subst">$&#123;teacherIp&#125;</span>/`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样写会先加载七牛资源，符合条件的话，资源路径会被替换，重新加载新的资源，实现了上述需求。但是这意味着资源都会被加载两次，并不是最优解。</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二分查找</title>
      <link href="/binary-search/"/>
      <url>/binary-search/</url>
      
        <content type="html"><![CDATA[<p>讲二分查找之前，先来看看下面这道题</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">给定一个  n  个元素有序的（升序）整型数组  nums 和一个目标值  target  ，写一个函数搜索  nums  中的 target，如果目标值存在返回下标，否则返回 -1。</span><br><span class="line"></span><br><span class="line">示例 1:</span><br><span class="line">输入: nums = [-1,0,3,5,9,12], target = 9</span><br><span class="line">输出: 4</span><br><span class="line">解释: 9 出现在 nums 中并且下标为 4</span><br><span class="line"></span><br><span class="line">示例  2:</span><br><span class="line">输入: nums = [-1,0,3,5,9,12], target = 2</span><br><span class="line">输出: -1</span><br><span class="line">解释: 2 不存在 nums 中因此返回 -1</span><br><span class="line"></span><br><span class="line">提示：</span><br><span class="line">你可以假设 nums  中的所有元素是不重复的。</span><br><span class="line">n  将在  [1, 10000]之间。</span><br><span class="line">nums  的每个元素都将在  [-9999, 9999]之间。</span><br></pre></td></tr></table></figure><p>看到这道题，我们的第一反应是不是遍历一遍，当前值与目标值相同，就返回索引？所以最简单粗暴的做法可以这样：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">target</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> search = <span class="keyword">function</span> (<span class="params">nums, target</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> len = nums.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i] === target) &#123;</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>上述解题方法是我们常用的方法，也叫作线性搜索，假若我们要查找的数在最末尾一个，这种方法可能会把所有元素都遍历一遍。</p><p>那有没有稍微简单一点的方法呢？二分查找就是比这个简单，而且效率更高的方法。</p><p>二分查找的思路如下：</p><ol><li><p>标记出最左边和最右边的数字</p></li><li><p>取中值，若目标值比中值还大，那么就把最左边的值替换为上一次中值的下一个，否则，把右边的值替换为中值的前一个值，以此类推，直到二者之间没有中值，返回索引。</p></li></ol><p>这种方法去实现，可以减少遍历次数和比较次数，这里是我实现的简单的二分查找解法：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">target</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> search = <span class="keyword">function</span> (<span class="params">nums, target</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> len = nums.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">var</span> L = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> R = len - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (L &lt;= R) &#123;</span><br><span class="line">    <span class="keyword">var</span> M = <span class="title class_">Math</span>.<span class="title function_">floor</span>((L + R) / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">if</span> (nums[M] === target) <span class="keyword">return</span> M;</span><br><span class="line">    <span class="keyword">if</span> (nums[M] &lt; target) &#123;</span><br><span class="line">      L = M + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      R = M - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>题目来源：力扣(LeetCode)</p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>说说浏览器缓存机制</title>
      <link href="/talking-about-browser-cache-mechanism/"/>
      <url>/talking-about-browser-cache-mechanism/</url>
      
        <content type="html"><![CDATA[<h2 id="一、浏览器缓存"><a href="#一、浏览器缓存" class="headerlink" title="一、浏览器缓存"></a>一、浏览器缓存</h2><p>在日常开发中有时候会遇到一个问题，就是我的代码明明已经推到服务器上部署好了，刷新界面，还是旧的，有时再刷新一下就是新的页面了，但是有时刷新很多次也还是旧的界面，这里我们可能会想到去抓包，查看是否返回了 304, 是的话，我们再试试 ctrl+f5。</p><p>这里界面没更新，我们做的两件事情的依据就是浏览器的缓存机制。第一次刷新界面，可能命中了浏览器的强缓存，资源文件还是拿的本地的缓存，根本没有去请求浏览器资源。所以我们 f5 刷新一下，企图跳过强缓存。跳过强缓存有时候界面还是旧的，可能命中了协商缓存，返回 304，那我们就试试用 ctrl+f5 跳过他，直接拿服务器上的资源。</p><p>从以上例子可知，浏览器缓存策略分为：强缓存和协商缓存，强缓存优先级高于协商缓存。那么浏览器什么时候会缓存服务器返回的资源呢？当我们从地址栏跳到一个 url 时，浏览器会缓存请求返回的数据和缓存相关标识，下次请求时会根据对应的规则采用对应的策略拿数据。</p><h2 id="二、强缓存"><a href="#二、强缓存" class="headerlink" title="二、强缓存"></a>二、强缓存</h2><h3 id="1-规则"><a href="#1-规则" class="headerlink" title="1. 规则"></a>1. 规则</h3><p>(1) 查找浏览器是否存在对应的缓存结果和缓存标志</p><p>(2) 若存在对应的缓存结果和缓存标志，则查看缓存是否失效</p><p>(3) 若缓存失效，则使用协商缓存，否则直接返回缓存资源</p><p>(4) 若不存在对应的缓存结果和缓存标志，则直接向服务器发起请求</p><h3 id="2-标识"><a href="#2-标识" class="headerlink" title="2. 标识"></a>2. 标识</h3><ul><li><p>Expires(http&#x2F;1.0)</p></li><li><p>Cache-Control(http&#x2F;1.1)</p></li></ul><p>Cache-Control 优先级高于 Expires</p><h2 id="三、协商缓存"><a href="#三、协商缓存" class="headerlink" title="三、协商缓存"></a>三、协商缓存</h2><h3 id="1-规则-1"><a href="#1-规则-1" class="headerlink" title="1. 规则"></a>1. 规则</h3><p>强缓存失效，浏览器向服务器发起请求，同时带上协商缓存相关标识，浏览器比对Etag&#x2F;If-None-Match或Last-Modified&#x2F;If-Modified-Since，比对成功，返回 304 ，使用本地缓存资源，否则返回新的资源</p><h3 id="2-协商缓存标识"><a href="#2-协商缓存标识" class="headerlink" title="2. 协商缓存标识"></a>2. 协商缓存标识</h3><ul><li><p>Etag&#x2F;If-None-Match</p></li><li><p>Last-Modified&#x2F;If-Modified-Since</p></li></ul><p>前者优先级高于后者</p><p>参考文献:</p><p><a href="https://www.cnblogs.com/suihang/p/12855345.html">浏览器的缓存机制</a></p><p><a href="https://juejin.cn/post/6844903593275817998#heading-0">彻底理解浏览器的缓存机制</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 跨端方案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于跨域那些事</title>
      <link href="/cross-origin-resource-sharing/"/>
      <url>/cross-origin-resource-sharing/</url>
      
        <content type="html"><![CDATA[<h2 id="一、同域"><a href="#一、同域" class="headerlink" title="一、同域"></a>一、同域</h2><p>1995 年由 Netscape 提出同源策略。</p><p>为什么会有同源策略呢，这个问题还要说到 cookie 的设置过程，当我们登录一些购物网站或者是银行系统，服务器会带一个 set-cookie 字段，浏览器会把服务器返回的 cookie 存在本地，下一次请求会带上这个 cookie。这里要是网站里面有恶意链接，请求的时候带上了网站的 cookie，服务器默认该请求是可信任的，可能就会被恶意操作，刷走银行卡里的钱或者盗用账号密码，做其他事情。由此可见，这是一个比较严重的安全问题，所以同源策略就被提出了。</p><p>由于浏览器的同源策略，在发送 Ajax 请求时，只接收同域服务器响应的数据资源。满足同域的条件包括三个：</p><ul><li><p>协议相同</p></li><li><p>域名相同</p></li><li><p>端口相同</p></li></ul><p>若不满足以上三个条件，则算作跨域。</p><h2 id="二、解决跨域问题的方法"><a href="#二、解决跨域问题的方法" class="headerlink" title="二、解决跨域问题的方法"></a>二、解决跨域问题的方法</h2><h3 id="1、同域代理"><a href="#1、同域代理" class="headerlink" title="1、同域代理"></a>1、同域代理</h3><p>同域代理就是使用 Ajax 向同域下的后台发送请求，同时携带真实请求的地址及参数，后台接受请求后直接根据地址及参数转发请求，因为后台是可以直接模拟 HTTP 客户端发送请求的，所以没有跨域问题，而后台接受到响应数据后再原样返回给前端浏览器，从而实现跨域数据交互。</p><h3 id="2、ping-img"><a href="#2、ping-img" class="headerlink" title="2、ping img"></a>2、ping img</h3><p>利用 img 标签可以加载跨域资源的特性，把请求 url 装载到 href 属性里，从而达到请求跨域资源的目的。这种解决方法只能发送 get 请求，而且通信是单项的，无法拿到服务器响应的消息，通常被用于图片点击次数统计，广告浏览次数统计等场景。</p><h3 id="3、jsonp"><a href="#3、jsonp" class="headerlink" title="3、jsonp"></a>3、jsonp</h3><p>浏览器解析 HTML 代码时，原生具有 src 属性的标签，浏览器都赋予其 HTTP 请求的能力，而且不受跨域限制，所以可以把请求 url 写到 script 的src 属性中去请求跨域资源，在 url 的末尾带上一个回调函数名，服务端根据约定的这个函数名参数做一些处理，返回数据，客户端回调函数取得请求的响应信息，比如下面这个demo</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">handler</span> = (<span class="params">resp</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(resp)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">script.<span class="property">src</span> = <span class="string">&quot;http://www.xxx.com?callback=handler&quot;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(script);</span><br></pre></td></tr></table></figure><p>这种解决跨域问题的方法有以下几个问题：请求错误很难捕获、只能发送 get 请求</p><h3 id="4、-跨域资源共享-CORS"><a href="#4、-跨域资源共享-CORS" class="headerlink" title="4、 跨域资源共享 CORS"></a>4、 跨域资源共享 CORS</h3><p>CORS 是一个 W3C 标准，全称是”跨域资源共享”（Cross-origin resource sharing）。</p><p>实现了 CORS 的浏览器会在发送请求时加上一个 origin 字段，该字段的值是当前页面的源(协议+域名+端口号)，服务器收到请求之后，会判断该源是否可信任，若可信任，在响应请求时，会带上一个 Access-control-allow-origin 字段，值可能是当前源或者是 ‘*’。</p><p>CORS 默认不支持请求时携带 Cookie 和 http 认证信息，这样做是为了防止 XSS 和 CSRF 攻击。若要带上 Cookie 可以设置 withCredentials 为 true，服务端响应请求设置 Access-Control-Allow-Credentials 为 true，但是这么做 服务端设置 Access-Control-Allow-Origin 为 ‘*’ 将无效。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>认识 Cookie</title>
      <link href="/understanding-cookies/"/>
      <url>/understanding-cookies/</url>
      
        <content type="html"><![CDATA[<h2 id="一、是什么"><a href="#一、是什么" class="headerlink" title="一、是什么"></a>一、是什么</h2><p>Cookie 是服务器发送到用户浏览器并保存在本地的一小块数据，在浏览器下次向同一服务器再发起请求时，该段数据会被携带并发送到服务器。</p><h2 id="二、作用"><a href="#二、作用" class="headerlink" title="二、作用"></a>二、作用</h2><ul><li><p><strong>会话状态管理</strong>, 如用户登录状态、购物车、游戏分数或其它需要记录的信息</p></li><li><p><strong>个性化设置</strong>, 如用户自定义设置、主题等</p></li><li><p><strong>浏览器行为跟踪</strong>,如跟踪分析用户行为等</p></li></ul><h2 id="三、创建-Cookie-的方式"><a href="#三、创建-Cookie-的方式" class="headerlink" title="三、创建 Cookie 的方式"></a>三、创建 Cookie 的方式</h2><p>服务器响应头部加上<code>Set-Cookie: name=value</code>，浏览器请求时为 header 加上 <code>Cookie: name=value</code></p><h2 id="四、分类"><a href="#四、分类" class="headerlink" title="四、分类"></a>四、分类</h2><p>根据周期划分类别：</p><ul><li><p><strong>会话期 Cookie</strong>，仅在浏览器会话期间有效</p></li><li><p><strong>持久性 Cookie</strong>，取决于过期时间（Expires）或有效期（Max-Age）</p></li></ul><h2 id="五、Cookie-有哪些安全问题，如何防范"><a href="#五、Cookie-有哪些安全问题，如何防范" class="headerlink" title="五、Cookie 有哪些安全问题，如何防范"></a>五、Cookie 有哪些安全问题，如何防范</h2><p>1、<strong>会话劫持</strong></p><ul><li><p>用户进行身份验证时，重新生成并重新发送会话 Cookie</p></li><li><p>设置 Secure 属性，Cookie 不携带敏感信息</p></li></ul><p>2、<strong>跨站脚本攻击（XSS）</strong>，限制访问 Cookie，设置 HttpOnly, 防止通过 JavaScript 访问 cookie 值</p><p>3、<strong>跨站请求伪造（CSRF）</strong></p><ul><li><p>设置 SameSite 属性，不发送跨站请求</p></li><li><p>携带敏感信息的 Cookie 设置短的生命周期</p></li></ul><p>4、<strong>深度防御措施</strong>：设置 Cookie 前缀</p><h2 id="六、相关规定"><a href="#六、相关规定" class="headerlink" title="六、相关规定"></a>六、相关规定</h2><ul><li><p>向用户申明使用了第三方 Cookie</p></li><li><p>允许用户选择不接收某些或所有 cookie。</p></li><li><p>允许用户在不接收 Cookie 的情况下使用大部分服务</p></li></ul><p>参考文献：</p><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies">Using HTTP cookies</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 Github Action 编译 Vue 发布到 Github Page</title>
      <link href="/github-action-auto-deploy-page/"/>
      <url>/github-action-auto-deploy-page/</url>
      
        <content type="html"><![CDATA[<p>我自己平常写的 demo 喜欢放到一起，丢到 github 顺便发布一个静态页面，之前都是用的 travis ci，今天试试看使用 github action 编译 Vue 发布到 github page，action 很简单，只需要在项目根目录下创建一个<code>.github/workflow/xx.yml</code>即可。下面来看看我的 ci 文件</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">build</span> <span class="string">site</span>  <span class="comment"># action 的名称</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span>               <span class="comment"># 触发 workflow 的事件，我这里的意思是只在 master 分支 push 的时候触发</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span>  <span class="comment"># 环境镜像</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@master</span> <span class="comment"># 步骤的运行说明</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@master</span> <span class="comment"># 设置 NodeJS 环境</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          yarn</span></span><br><span class="line"><span class="string">          yarn build</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">deploy</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">publish_dir:</span> <span class="string">./dist</span></span><br></pre></td></tr></table></figure><p>上面配置文件中我标出了部分注释，没有标的 run 字段下面是编写脚本的，with 用于设置一些值。job 的 deploy 阶段主要是用的第三方库把编译好的静态代码丢到 gh-pages 分支。push 代码到 master，点开 action 可以看到任务已经在执行了，执行完之后可以看到我们的改动已经更新到 page 上了。</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web安全 —— XSS攻击</title>
      <link href="/web-security-xss-attack/"/>
      <url>/web-security-xss-attack/</url>
      
        <content type="html"><![CDATA[<h2 id="一、是什么"><a href="#一、是什么" class="headerlink" title="一、是什么"></a>一、是什么</h2><p>XSS(Cross-site scripting) 是一个用来描述一类攻击的术语，它允许攻击者通过网站将客户端脚本注入到其他用户的浏览器中，从而获取用户的 cookie 等信息，盗取用户的钱财或隐私。比如在评论框中输入一段 js 脚本，若该内容未被处理就传给服务端，然后直接显示到页面上，可能就会触发 xss 攻击。</p><p>XSS 的作用机制是恶意代码未经过滤，与网站正常的代码混在一起，浏览器无法分辨哪些脚本是可信的，恶意脚本可以被执行。</p><h2 id="二、分类"><a href="#二、分类" class="headerlink" title="二、分类"></a>二、分类</h2><h3 id="反射型-XSS-攻击"><a href="#反射型-XSS-攻击" class="headerlink" title="反射型 XSS 攻击"></a>反射型 XSS 攻击</h3><p>传递给服务器的用户数据被立即返回并在浏览器中原样显示时发生，这种攻击一般是一次性的。</p><h3 id="持久型-XSS-攻击"><a href="#持久型-XSS-攻击" class="headerlink" title="持久型 XSS 攻击"></a>持久型 XSS 攻击</h3><p>存储在站点中的恶意脚本在用户不知情的情况下执行，再原样地返回给其他用户，这种攻击由于脚本会被服务端存到数据库，以字符串的形式拼接到 html 中，所以是持久的，危害比较大。</p><h2 id="三、XSS-攻击示例"><a href="#三、XSS-攻击示例" class="headerlink" title="三、XSS 攻击示例"></a>三、XSS 攻击示例</h2><h3 id="1、如何攻击直接使用浏览器输入字符串的网页"><a href="#1、如何攻击直接使用浏览器输入字符串的网页" class="headerlink" title="1、如何攻击直接使用浏览器输入字符串的网页"></a>1、如何攻击直接使用浏览器输入字符串的网页</h3><p>规则是下面这样，对这个实例进行攻击，让浏览器执行 <code>prompt(1)</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">escape</span>(<span class="params">input</span>) &#123;</span><br><span class="line">  <span class="comment">// warm up</span></span><br><span class="line">  <span class="comment">// script should be executed without user interaction</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;input type=&quot;text&quot; value=&quot;&#x27;</span> + input + <span class="string">&#x27;&quot;&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的实例很简单，拿到什么就输出什么，未做任何处理，所以可以直接写一段脚本:</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">script</span>&gt;</span>prompt(1);<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>由于实例是直接把输入值拼接到 value 属性中的，所以可以先用 <code>&quot;&gt;</code> 闭合掉属性和标签，然后写入我们的脚本，就可以正常执行了。</p><h3 id="2、网页对输入框字符串做了闭合标签筛选，并且直接使用筛选完的字符串，如何进行攻击"><a href="#2、网页对输入框字符串做了闭合标签筛选，并且直接使用筛选完的字符串，如何进行攻击" class="headerlink" title="2、网页对输入框字符串做了闭合标签筛选，并且直接使用筛选完的字符串，如何进行攻击"></a>2、网页对输入框字符串做了闭合标签筛选，并且直接使用筛选完的字符串，如何进行攻击</h3><p>第二关比较费点脑子，加了个过滤规则，遇到闭合的尖括号就把内容替换为空，也就是上面这种直接写 script 标签的方法行不通了</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">escape</span>(<span class="params">input</span>) &#123;</span><br><span class="line">  <span class="comment">// tags stripping mechanism from ExtJS library</span></span><br><span class="line">  <span class="comment">// Ext.util.Format.stripTags</span></span><br><span class="line">  <span class="keyword">var</span> stripTagsRE = <span class="regexp">/&lt;\/?[^&gt;]+&gt;/gi</span>;</span><br><span class="line">  input = input.<span class="title function_">replace</span>(stripTagsRE, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;article&gt;&#x27;</span> + input + <span class="string">&#x27;&lt;/article&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>既然在 script 标签里行不通，那么可以把脚本写在事件里面，比如这样</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">#</span> <span class="attr">onerror</span>=<span class="string">&quot;prompt(1)&quot;</span></span></span><br></pre></td></tr></table></figure><p>以上代码即使不匹配尖括号也能执行，src 引用的图片不存在就会执行 onerror 事件</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;prompt(1)//&quot;</span></span></span><br></pre></td></tr></table></figure><p>当页面加载完所有的 dom 就会执行 onload，所以上面的代码也能执行</p><h2 id="四、防范方法"><a href="#四、防范方法" class="headerlink" title="四、防范方法"></a>四、防范方法</h2><ul><li>针对使用标签注入代码问题，进行 HTML 转义输入值，比如使用 escapeHTML 转义</li><li>针对链接跳转，建一个白名单，进行内容校验，比如禁止以白名单中的包含值开头<code>[&#39;http&#39;,&#39;https&#39;,&#39;scheme&#39;,&#39;javascript:&#39;,location.href=&quot;xxx&quot;]</code></li><li>前后端分离</li><li>CSP</li><li>输入内容长度控制</li><li>HTTP-only Cookie</li><li>验证码</li></ul><p>参考文档：</p><p><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Website_security">Website security</a></p><p><a href="https://tech.meituan.com/2018/09/27/fe-security.html">如何防止 XSS 攻击？</a></p><p><a href="http://prompt.ml/0">prompt(1) to win</a></p><p><a href="https://alf.nu/alert1">alert(1) to win</a></p><p><a href="https://xss-game.appspot.com/">XSS game</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode 使用指南</title>
      <link href="/doing-things-with-vscode/"/>
      <url>/doing-things-with-vscode/</url>
      
        <content type="html"><![CDATA[<h2 id="一、插件篇"><a href="#一、插件篇" class="headerlink" title="一、插件篇"></a>一、插件篇</h2><h3 id="1、background：让开发不再单调"><a href="#1、background：让开发不再单调" class="headerlink" title="1、background：让开发不再单调"></a>1、background：让开发不再单调</h3><p>background 插件可以帮助我们设置 vscode 的背景图片，比如我是这么配置的</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;background.customImages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;图片绝对路径&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;background.style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#x27;&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pointer-events&quot;</span><span class="punctuation">:</span> <span class="string">&quot;none&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="string">&quot;absolute&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;z-index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;99999&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;width&quot;</span><span class="punctuation">:</span> <span class="string">&quot;100%&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;height&quot;</span><span class="punctuation">:</span> <span class="string">&quot;100%&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;background-position&quot;</span><span class="punctuation">:</span> <span class="string">&quot;center&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;background-repeat&quot;</span><span class="punctuation">:</span> <span class="string">&quot;no-repeat&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;background-size&quot;</span><span class="punctuation">:</span> <span class="string">&quot;100%,100%&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;opacity&quot;</span><span class="punctuation">:</span> <span class="number">0.1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2、Live-Server-快速开启一个服务"><a href="#2、Live-Server-快速开启一个服务" class="headerlink" title="2、Live Server: 快速开启一个服务"></a>2、Live Server: 快速开启一个服务</h3><p>Live Server 插件主要用于开启一些页面的服务，相比于 debug 打开页面，我觉得这个会更好用点</p><h3 id="3、主题"><a href="#3、主题" class="headerlink" title="3、主题"></a>3、主题</h3><p>vscode 自带的主题有挺多，不过我个人比较喜欢 One Dark Pro 这个主题，可以通过插件安装</p><h3 id="4、快速把-px-转为-rem"><a href="#4、快速把-px-转为-rem" class="headerlink" title="4、快速把 px 转为 rem"></a>4、快速把 px 转为 rem</h3><p>在做响应式的时候经常会用到 rem，若 ui 给的图是 px 的，就得算，这样效率太低了，可以装一个 cssrem 插件，在输入 px 的时候会提示其他单位的转换值供选择。</p><h3 id="5、显示文件图标"><a href="#5、显示文件图标" class="headerlink" title="5、显示文件图标"></a>5、显示文件图标</h3><p>vscode-icons 插件可以根据文件类型去显示对应的图标，视觉效果挺好的。</p><h3 id="6、Power-Mode-有极客范的写代码"><a href="#6、Power-Mode-有极客范的写代码" class="headerlink" title="6、Power Mode: 有极客范的写代码"></a>6、Power Mode: 有极客范的写代码</h3><p>Power Mode 会在每次键盘按下字母时，在编辑界面对应的字符后面有一段动效，动效有几种模式，可以自己设置，用起来手感还是不错的，写起代码来会觉得更加的生动有趣。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/power-mode.gif" alt="power mode 使用示例"></p><h3 id="7、vscode-drawio-不需要额外的工具，画流程图就是这么简单"><a href="#7、vscode-drawio-不需要额外的工具，画流程图就是这么简单" class="headerlink" title="7、vscode-drawio: 不需要额外的工具，画流程图就是这么简单"></a>7、vscode-drawio: 不需要额外的工具，画流程图就是这么简单</h3><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/draw-io.gif" alt="vscode-drawio 使用示例"></p><p>之前画流程图工具要么用在线的draw.io，要么用思维导图，还是比较麻烦的，有了这个插件，只需要创建 .drawio 文件，就可以方便快捷的创建流程图</p><h3 id="8、Marp-md-写-ppt-就是这么简单"><a href="#8、Marp-md-写-ppt-就是这么简单" class="headerlink" title="8、Marp: md 写 ppt 就是这么简单"></a>8、Marp: md 写 ppt 就是这么简单</h3><p>marp，全称 Markdown Presentation Ecosystem，可以方便快捷的利用 md 预览 ppt，导出 pdf，使用方法也很简单，<code>---</code> 分割页，每一页的样式可以根据自己的兴趣去定义</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/marp.png" alt="marp 使用示例"></p><h3 id="9-代码助手"><a href="#9-代码助手" class="headerlink" title="9. 代码助手"></a>9. 代码助手</h3><p>最近各种AI工具比较火，付费的比如GitHub官方的<code>Copilot</code>，免费的比如<code>Codeium</code>、<code>tabnine</code>等，可以用来做智能代码补全</p><h2 id="二、调试开发篇"><a href="#二、调试开发篇" class="headerlink" title="二、调试开发篇"></a>二、调试开发篇</h2><h3 id="1、配置模板，减少重复输入代码的次数"><a href="#1、配置模板，减少重复输入代码的次数" class="headerlink" title="1、配置模板，减少重复输入代码的次数"></a>1、配置模板，减少重复输入代码的次数</h3><p>每次用新的框架或者语言，一些常用的代码块总是要去反复输入，很麻烦，就在想有没有一种类似文件模板的东东，可以一键生成这些通用的代码块，看了看 vscode 的配置项，果然有，看一下效果：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/template.gif" alt="vscode 模板使用示例"></p><p>以上示例，有我自己定义的模板，也有插件模板，自己定义模板的方法如下：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/template-config.gif" alt="vscode 模板配置示例"></p><p>模板创建可以从设置的 user snippets 下创建，根据示例改一下提示语和内容就好，body 部分为模板内容，每一行作为数组的一个元素，该数组为字符串数组。</p><h3 id="2、快速导航"><a href="#2、快速导航" class="headerlink" title="2、快速导航"></a>2、快速导航</h3><p><code>shift+command+o</code> 快捷键可以调出符号导航面板，点击上下箭头可以快速跳转</p><h3 id="3、Refactoring"><a href="#3、Refactoring" class="headerlink" title="3、Refactoring"></a>3、Refactoring</h3><p>选中一段代码会有对应的重构提示，可以根据自己的需求去使用，比如说提取一个函数等</p><h3 id="4、-快速修改函数或变量名称"><a href="#4、-快速修改函数或变量名称" class="headerlink" title="4、 快速修改函数或变量名称"></a>4、 快速修改函数或变量名称</h3><p>选中变量或函数</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>创建基于 Null 的对象</title>
      <link href="/create-object-based-on-null/"/>
      <url>/create-object-based-on-null/</url>
      
        <content type="html"><![CDATA[<p>看前同事写的代码，用 <code>Object.create(null)</code> 去初始化对象而不是用 null 或者 <code>&#123;&#125;</code>，觉得有点好奇，手动敲了下，发现这几种方式初始化对象是有差别的。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;</span><br><span class="line">a.<span class="property">name</span> = <span class="string">&#x27;hello world&#x27;</span></span><br></pre></td></tr></table></figure><p>以上代码初始化一个对象 a，对象 a 继承自 Object 对象,所以原型链上会包含 Object 对象的属性和方法。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line">a.<span class="property">name</span> = <span class="string">&#x27;hello world&#x27;</span></span><br></pre></td></tr></table></figure><p>上面这段代码用 <code>Object.create(null)</code> 的方式创建对象，由于对象的原型是 null，所以原型链上不会继承任何东西，创建的是一个干净的对象。</p><p>综上，若想继续调用 valueOf 等继承自 Object 的属性和方法，可以用 <code>&#123;&#125;</code> 来初始化对象，若想创建一个全新的干净对象，可以使用 <code>Object.create(null)</code> 初始化对象</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图片懒加载实现</title>
      <link href="/image-lazy-loading-implementation/"/>
      <url>/image-lazy-loading-implementation/</url>
      
        <content type="html"><![CDATA[<p>讲到性能优化，经常会提及到图片懒加载。在很多的活动页或者商品展示页中，会存在很多的图片，这些图片大多是网络请求下来的。这里有个问题，一次性下载这么多的图片会很耗时。为了解决这个问题，我们可以考虑只下载当前可视区域的图片，后面的图片等到我们滚动到对应的位置再去加载。这样，图片懒加载的方案就出来了。监听页面滚动，当图片到达了可视区域，再去请求。下面我们来实现一下:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> imgs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line"><span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&#x27;scroll&#x27;</span>,</span><br><span class="line">  imgs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">img</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      !img.<span class="property">src</span> &amp;&amp;</span><br><span class="line">      img.<span class="title function_">getBoundingClientRect</span>().<span class="property">top</span> &lt; <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      img.<span class="property">src</span> = img.<span class="property">dataset</span>.<span class="property">src</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>以上 demo 在一开始并没有设置 src 属性，因为设置了就会被请求。而是先设置 dataset.src, 到了视口之后再设置 src 属性，这样就可以达到懒加载的目的了。</p><p>但是，上面的 demo 是有点小问题的，用户的每一次滚动都会触发一下这个回调函数。若用户疯狂的滚动，就会不断的调用这个函数，会很消耗资源。为了解决这个问题，我们可以写一个节流函数，在指定的时间内只执行一次这个回调函数。再来看一下改进版的懒加载 demo:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> imgs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, threshhold</span>) &#123;</span><br><span class="line">  threshhold = threshhold || <span class="number">160</span>;</span><br><span class="line">  <span class="keyword">var</span> called = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> context = <span class="variable language_">this</span>,</span><br><span class="line">      args = <span class="variable language_">arguments</span>;</span><br><span class="line">    <span class="keyword">if</span> (!called) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    called = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(context, args);</span><br><span class="line">      called = <span class="literal">true</span>;</span><br><span class="line">    &#125;, threshhold);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&#x27;scroll&#x27;</span>,</span><br><span class="line">  <span class="title function_">throttle</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    imgs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">img</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        !img.<span class="property">src</span> &amp;&amp;</span><br><span class="line">        img.<span class="title function_">getBoundingClientRect</span>().<span class="property">top</span> &lt; <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span></span><br><span class="line">      ) &#123;</span><br><span class="line">        img.<span class="property">src</span> = img.<span class="property">dataset</span>.<span class="property">src</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 灵魂拷问</title>
      <link href="/javascript-soul-questions/"/>
      <url>/javascript-soul-questions/</url>
      
        <content type="html"><![CDATA[<h2 id="1-以下代码输出什么？"><a href="#1-以下代码输出什么？" class="headerlink" title="1. 以下代码输出什么？"></a>1. 以下代码输出什么？</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  x++;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(++x);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">a</span>(<span class="number">1</span>)(); </span><br><span class="line"><span class="title function_">a</span>(<span class="number">1</span>)();</span><br><span class="line"><span class="title function_">a</span>(<span class="number">1</span>)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x = <span class="title function_">a</span>(<span class="number">1</span>); </span><br><span class="line"><span class="title function_">x</span>(); </span><br><span class="line"><span class="title function_">x</span>(); </span><br><span class="line"><span class="title function_">x</span>(); </span><br></pre></td></tr></table></figure><p>这道题考察的是 JS 的闭包，闭包创建一个可以访问外部变量的状态函数，从而延伸作用域链，只要这个状态函数没被弹出调用栈，外部的变量副本就会一直存在。</p><p>这道题的答案是输出 3, 3, 3 和 3, 4, 5，因为执行 a(1)()，会立即执行返回的函数，函数执行完，里面的变量就被销毁了，下一次执行时，用的 x 变量是新的变量，所以表现会跟普通的函数一样。</p><p>接着，声明了一个 x 变量，并且把 a(1) 的返回值存在了 x 中。执行 x，a 函数的引用还存在 x 中，所以 a 函数返回的函数并未被销毁，变量依然存在于原有作用域链上，保存的值是上一次前置加的值，因此，后三个 x 调用的返回值是 3, 4, 5。</p><h2 id="2-以下代码输出什么？"><a href="#2-以下代码输出什么？" class="headerlink" title="2. 以下代码输出什么？"></a>2. 以下代码输出什么？</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Name</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">a</span> = a;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">b</span> = b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> me = <span class="title class_">Name</span>(<span class="string">&quot;Vuong&quot;</span>, <span class="string">&quot;Nguyen&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(!(a.<span class="property">length</span> - <span class="variable language_">window</span>.<span class="property">a</span>.<span class="property">length</span>));</span><br></pre></td></tr></table></figure><p>这道题的答案是 true，考察的是 this 的指向相关知识。</p><p>这里直接以函数的形式调用了构造函数 Name，而没有用 new 关键字创建一个实例，this 的指向为 window 或者 global，所以 a, b 就会成为全局变量，window.a 和 a 的值为传入的 “Vuong”，a.length 和 window.a.length 都是 5，因此输出 true。</p><p>延伸一下这道题，如果把 <code>const me = Name(&quot;Vuong&quot;, &quot;Nguyen&quot;)</code> 改为 <code>const me = new Name(&quot;Vuong&quot;, &quot;Nguyen&quot;)</code>，又会输出什么呢？</p><p>创建 Name 的一个实例之后，this 的指向应该为 {}，而不是全局环境。me 是 Name 的一个实例， <code>me = &#123;a: &quot;Vuong&quot;, b: &quot;Nguyen&quot;&#125;</code>。因此，调用 a.length 会抛出错误，因为全局变量 a 未声明，不存在 length 属性。</p><h2 id="3-以下代码输出什么？"><a href="#3-以下代码输出什么？" class="headerlink" title="3. 以下代码输出什么？"></a>3. 以下代码输出什么？</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="keyword">function</span> (<span class="params">...x</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> k = (<span class="keyword">typeof</span> x).<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">y</span> = (<span class="params"></span>) =&gt; <span class="string">&quot;freetut&quot;</span>.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> z = &#123; <span class="attr">y</span>: y &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> k - z.<span class="title function_">y</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="title function_">x</span>()));</span><br></pre></td></tr></table></figure><p>这道题的答案是 true，考察的是类型转换相关知识。</p><p>展开式 <code>...x</code> 返回一个数组，对数组使用 typeof 操作符返回的是 object，所以 k &#x3D; 6。执行函数 y 返回 “freetut” 的长度 7，因此，<code>k - z.y()</code> 等于 -1, 数字除了 0 和 NaN，转换成 Boolean 类型都为 true。</p><h2 id="4-以下代码输出什么？"><a href="#4-以下代码输出什么？" class="headerlink" title="4. 以下代码输出什么？"></a>4. 以下代码输出什么？</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span> <span class="title function_">js</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">y</span> = (<span class="params">j</span>) =&gt; j * x;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">y</span>(<span class="title function_">s</span>()));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">s</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">j</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">j</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x ** x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>这道题的答案是 81，考察的是函数相关知识。</p><p>函数 <code>js()</code> 是一个立即执行函数，传入的参数是 3。</p><p>由于函数 <code>s()</code> 返回 函数<code>j()</code>，所以，调用函数 y(s())) 意味着同时调用了 <code>y()</code>, <code>s()</code> 和 <code>j()</code> 这三个函数。</p><p>j() 返回 3 的三次方，也就是 27。</p><p>y(s()) 相当于 y(27) 返回 27*3 &#x3D; 81。</p><p>这里之所以可以在 s 函数 和 j 函数声明之前调用，是因为用 function 声明的函数有函数提升，但是，换成变量声明的函数是不能这么干的。</p><h2 id="5-以下代码输出什么？"><a href="#5-以下代码输出什么？" class="headerlink" title="5. 以下代码输出什么？"></a>5. 以下代码输出什么？</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tip = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;I have $&quot;</span> + <span class="title function_">husband</span>());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">wife</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> tip * <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">husband</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">wife</span>() / <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> tip = <span class="number">10</span>;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>这道题的答案是：”I have $NaN”，考察的知识点主要是变量提升和数据类型转换相关知识。</p><p>题目中有一个立即执行的函数，执行流程如下： husband 函数 返回 wife()&#x2F;2, wife 函数返回 tip*2。</p><p>首先声明了一个全局变量 tip，立即执行函数里面也在底部声明了一个 tip 变量，函数的变量查找是从当前作用域往上查找的，所以用的 tip 是函数里面声明的变量。</p><p>由于 var 声明的变量会提升到函数的开始，但是这里只是提升声明，赋值是没有被提升的，声明了但是未被赋值的变量，默认值是 undefined。</p><p>husband 函数返回值为 undefined * 2 &#x2F; 2, 二元操作符会隐式转换类型，undefined 会被转为 NaN，NaN 跟其他数字的运算结果还是 NaN, 因此，结果为 NaN。</p><h2 id="6-以下代码输出什么？"><a href="#6-以下代码输出什么？" class="headerlink" title="6. 以下代码输出什么？"></a>6. 以下代码输出什么？</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> js = &#123; <span class="attr">language</span>: <span class="string">&quot;loosely type&quot;</span>, <span class="attr">label</span>: <span class="string">&quot;difficult&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> edu = &#123; ...js, <span class="attr">level</span>: <span class="string">&quot;PhD&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newbie = edu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> edu.<span class="property">language</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">keys</span>(newbie).<span class="property">length</span>);</span><br></pre></td></tr></table></figure><p>这道题考察的是展开式和引用类型相关知识，答案是 2。</p><p>es6 操作符 …，可以浅拷贝对象，edu 自身带有一个 level 属性，加上拷贝过来的 js 对象的属性，一共有三个。</p><p>把 edu 赋值给 newbie 变量，赋值的其实是一个对象指针，还是指向原有对象的内存空间，所以，删除 edu 的一个属性，也会反映到 newbie 变量中，newbie 的属性变成了两个。</p><h2 id="7-以下代码输出什么？"><a href="#7-以下代码输出什么？" class="headerlink" title="7. 以下代码输出什么？"></a>7. 以下代码输出什么？</h2><p><a href="https://github.com/yeungon/In-JavaScript-we-trust">问题出处</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>特浓鸡汤</title>
      <link href="/extra-thick-chicken-soup/"/>
      <url>/extra-thick-chicken-soup/</url>
      
        <content type="html"><![CDATA[<ul><li>每个人都有自己擅长的领域，不要去做自己不擅长的事情</li><li>如果你不是在一个经常下雨的地方，就不要去卖伞</li><li>我们都知道，如果可以回到过去，改变任何一件小事情，都将极大地改变未来。然而，几乎没有人想到，今天只要小小改变，就会改变自己的未来。</li><li>我口袋里有一个小设备，可以访问几乎全部的人类知识。我却用它与不认识的人进行毫无意义的争论，并看猫的照片。</li><li>不去追逐你所渴求，你将永远不会拥有。羞涩不善开口，回答永远是No。畏惧向前行走，你将永远停留。</li><li>你只需要问自己一个问题：即使没有报酬，你也会去干的工作是什么？ 如果一种工作根本得不到报酬，你也愿意去做，这就是你最喜欢、最有热情的事情，千万要珍惜。</li><li>虽然知道万事皆空，仍然能够生活得兴致勃勃</li><li>这个世界上，最厉害的人就是既懂得制造，又懂得销售的人。如果我们把自己的人生看成是一个项目，人生成功也是如此，既要有真才实学，也要懂得推销自己。Naval 说，通常情况下，Maker（制造者）学习 sales（销售）比较容易，Sales 学习 make 比较难。比如，程序员学习运营，要比运营人员学习编程容易。</li><li>所谓完美，不是指不能再添加别的东西了，而是指没有东西可以从其中拿掉了。</li><li>如果我们想真正地提高收入，努力仅仅是一部分的因素。更重要的是，我们必须设法提升自己的资本、技能和环境的层次</li></ul>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lodash 源码解析 —— Chunk</title>
      <link href="/lodash-source-analysis-array-chunk/"/>
      <url>/lodash-source-analysis-array-chunk/</url>
      
        <content type="html"><![CDATA[<p>chunk 的依赖关系如下图所示</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/chunk.png" alt="chunk 依赖图"></p><p>通过上面的依赖图我们可以知道，chunk 依赖 slice 和 toInteger 这两个函数，slice 函数基于索引切割数组生成新的子数组，toInteger 函数把传入的值转换为整数。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有趣的CSS层叠问题</title>
      <link href="/interesting-css-cascade-issues/"/>
      <url>/interesting-css-cascade-issues/</url>
      
        <content type="html"><![CDATA[<p>接别人的锅，遇到个很有意思的层级问题，代码结构是这样的：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span>查看<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>查看图片<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img-wrap&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./umr.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>有一个遮罩层，上面</p><p>（1）有一个框框 a, a 里面有个音频;</p><p>（2）点击查看会显示框 b，框 b 可以再次点击查看缩回去;</p><p>（3）框 b 里面可以点击查看图片显示框 c，这里不需要查看按钮了，会有关闭按钮;</p><p>有意思的是当我们去掉所有的 z-index 后，现有的结果展示出来的效果如下图：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/stacking-demo.png" alt="stacking-demo"></p><p>demo 可以看<a href="https://codepen.io/AnnaLoveLife/pen/dypexrM?editors=1100">这里</a></p><p>其实要改这个，涉及到的知识主要是CSS的层叠</p><p>（1）三个div的层叠水平，层叠顺序一样，所以后面的会覆盖前面的，利用这个理论，把box1移到最后，这样他就总能在box2的上层了;</p><p>（2）同样用上面的理论，把box3移动到最前面，这样box3理论上会层叠在box2的下面;</p><p>（3）但是audio还是在，这是因为chrom下background-color默认是rgba(0,0,0,0)，也就是transparent，所以能看到下面的东西，给一个背景色就看不到了；</p><p>（4）通过上面的就可以实现弹出box2遮住box1，弹出img-wrap，遮住下面的内容；</p><p>（5）但是，在显示img-wrap的时候，查看按钮还能看得到，这时候就需要创建层叠上下文了，给img-wrap的z-index设置为1，即可</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>函数不声明全局变量也不能传入参数，每次打印数字递增</title>
      <link href="/function-without-global-variable-counting/"/>
      <url>/function-without-global-variable-counting/</url>
      
        <content type="html"><![CDATA[<p>前几天遇到个比较有意思的题目，乍眼一看，没想到怎么实现，细品发现这不就是道脑筋急转弯嘛。</p><p>题目是这样的:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 不用全局变量实现函数执行计数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// write here</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>()); <span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>()); <span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>()); <span class="comment">//3</span></span><br></pre></td></tr></table></figure><p>看到这道题，第一印象当然是找个变量去记录每一次的执行，这里又不让声明全局变量，也没有传入的参数，怎么办呢？我忘了除了变量可以存东西，还可以用其他容器去存，既然变量行不通，那是不是可以利用 js 的函数也是对象这一特性把计数存在属性里呢？</p><p>于是，我的题解是这样的:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 不用全局变量实现函数执行计数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// write here</span></span><br><span class="line">  <span class="keyword">return</span> a.<span class="property">count</span> ? (a.<span class="property">count</span> += <span class="number">1</span>) : (a.<span class="property">count</span> = <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>()); <span class="comment">//1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>()); <span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>()); <span class="comment">//3</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows 奇技淫巧</title>
      <link href="/windows-tricks/"/>
      <url>/windows-tricks/</url>
      
        <content type="html"><![CDATA[<h2 id="查看端口占用情况"><a href="#查看端口占用情况" class="headerlink" title="查看端口占用情况"></a>查看端口占用情况</h2><p>1、 <code>win + R</code> &#x3D;&gt; “cmd” 打开命令窗口</p><p>2、查看所有被占用的端口: <code>netstat -anon</code></p><p>3、查找占用端口的进程: <code>netstat -anon | findstr &quot;10001&quot;</code></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 小技巧</title>
      <link href="/css-tips/"/>
      <url>/css-tips/</url>
      
        <content type="html"><![CDATA[<h2 id="文本末尾添加省略号"><a href="#文本末尾添加省略号" class="headerlink" title="文本末尾添加省略号"></a>文本末尾添加省略号</h2><p>有时候需要控制文本不折行, 并且以 “….”, 代替超出的文本部分,也就是相当于 more 功能, 用 css 实现方式如下:</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 单行文本 */</span></span><br><span class="line"><span class="selector-class">.noWrap</span>&#123;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 多行文本 */</span></span><br><span class="line"><span class="selector-class">.noWrap</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: -o-ellipsis-lastline;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  -webkit-<span class="selector-tag">line</span>-clamp: <span class="number">2</span>;</span><br><span class="line">  <span class="selector-tag">line</span>-clamp: <span class="number">2</span>;</span><br><span class="line">  -webkit-<span class="attribute">box-orient</span>: vertical;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5em</span>;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">3em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上 css 代码中主要用到了 csss3 的一些特性, 除了以上代码,注意给个宽度, 不然不知道什么时候需要用”…”代替文本, 更多相关内容可以查看 w3c 文档。</p><h2 id="Android-端阴影"><a href="#Android-端阴影" class="headerlink" title="Android 端阴影"></a>Android 端阴影</h2><p>Android 端，img 和 button，点击之后出现一块阴影区域，一开始以为是 user-select 作怪，设置为 none 无果，后来发现是 curser：pointer 的锅，在 Android 端 cursor 设置为 none，即可解决问题</p><h2 id="利用-max-height-实现展开、收起效果"><a href="#利用-max-height-实现展开、收起效果" class="headerlink" title="利用 max-height 实现展开、收起效果"></a>利用 max-height 实现展开、收起效果</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.element</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">700px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: ease <span class="number">0.25s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="利用-content-属性设置序号"><a href="#利用-content-属性设置序号" class="headerlink" title="利用 content 属性设置序号"></a>利用 content 属性设置序号</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.reset</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">counter-reset</span>: wangxiaoer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.counter</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counters</span>(wangxiaoer, <span class="string">&quot;-&quot;</span>) <span class="string">&quot;. &quot;</span>;</span><br><span class="line">  <span class="attribute">counter-increment</span>: wangxiaoer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="flex-布局最后一行左对齐"><a href="#flex-布局最后一行左对齐" class="headerlink" title="flex 布局最后一行左对齐"></a>flex 布局最后一行左对齐</h2><p>用 flex 布局一时爽，但是里面还是有些坑需要避一避的。比如说想要有间隔的布局，但是用 space-around 和 space-between 都会有一个瑕疵，那就是，最后一行并不是左对齐的，有人会说用 aligh-content，交叉轴对其啊，但是 jusfy-content 需要 flex-start 才能做到这种效果，这样子的话，就没有居中效果了，因此，只能另辟蹊径。我采用的方法比较笨拙，就是在最后一个块级元素的后面，加多两个空的等宽的块级元素，高度设置为 0，完美实现想要的效果。</p><h2 id="文本模糊效果"><a href="#文本模糊效果" class="headerlink" title="文本模糊效果"></a>文本模糊效果</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.blurry</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: transparent;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义文本选中样式"><a href="#自定义文本选中样式" class="headerlink" title="自定义文本选中样式"></a>自定义文本选中样式</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.element</span><span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.element</span>::-moz-selection &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="input"><a href="#input" class="headerlink" title="input"></a>input</h2><h3 id="placeholder-样式修改"><a href="#placeholder-样式修改" class="headerlink" title="placeholder 样式修改"></a>placeholder 样式修改</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span>::-webkit-input-placeholder &#123;</span><br><span class="line">   <span class="attribute">color</span>: orange;</span><br><span class="line">   <span class="attribute">background-color</span>: <span class="number">#f9f7f7</span>;</span><br><span class="line">   <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-tag">input</span>::-moz-input-placeholder &#123;</span><br><span class="line">   <span class="attribute">color</span>: orange;</span><br><span class="line">   <span class="attribute">background-color</span>: <span class="number">#f9f7f7</span>;</span><br><span class="line">   <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-tag">input</span>::-ms-input-placeholder &#123;</span><br><span class="line">   <span class="attribute">color</span>: orange;</span><br><span class="line">   <span class="attribute">background-color</span>: <span class="number">#f9f7f7</span>;</span><br><span class="line">   <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="去-border"><a href="#去-border" class="headerlink" title="去 border"></a>去 border</h3><p>在重写 checkbox 样式时，发现用 border 属性修改不了外框样式，摸索了一下发现这个外框来自于 appearance，设置为 none，把 outline 去掉，即可</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;checkbox&quot;</span>]</span> &#123;</span><br><span class="line">  -moz-<span class="attribute">appearance</span>: none;</span><br><span class="line">  -webkit-<span class="attribute">appearance</span>: none;</span><br><span class="line">  -o-<span class="attribute">appearance</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="利用色相反转实现深色模式"><a href="#利用色相反转实现深色模式" class="headerlink" title="利用色相反转实现深色模式"></a>利用色相反转实现深色模式</h2><p>不需要反转的元素可以在加一层反转，使其反转回来，比如下面的 img</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme</span>: dark) &#123;</span><br><span class="line">  <span class="selector-tag">html</span>,</span><br><span class="line">  <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">invert</span>(<span class="number">1</span>) <span class="built_in">hue-rotate</span>(<span class="number">180deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="竖排显示文本，数字横排"><a href="#竖排显示文本，数字横排" class="headerlink" title="竖排显示文本，数字横排"></a>竖排显示文本，数字横排</h2><p>从右向左竖排显示文本</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">writing-mode</span>: vertical-rl;</span><br></pre></td></tr></table></figure><p>数字横排</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-combine-upright</span>: all;  </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开始用 Beego 写 Http 服务</title>
      <link href="/beego-getting-started/"/>
      <url>/beego-getting-started/</url>
      
        <content type="html"><![CDATA[<h2 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h2><h3 id="1-框架安装"><a href="#1-框架安装" class="headerlink" title="1. 框架安装"></a>1. 框架安装</h3><p><code>go get -u github.com/astaxie/beego</code></p><p>这里遇到了 git https 无法获取的问题，按照官方提示，配置本地的 git，关闭 https 验证</p><p><code>git config --global http.sslVerify false</code></p><h3 id="2-脚手架安装"><a href="#2-脚手架安装" class="headerlink" title="2. 脚手架安装"></a>2. 脚手架安装</h3><p><code>go get -u github.com/beego/bee</code> </p><p>这里遇到的问题是 go module 一直安装不了，解决方法是切换 go module 镜像:</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> env -w GO111MODULE=on</span><br><span class="line"><span class="keyword">go</span> env -w GOPROXY=https:<span class="comment">//goproxy.cn,direct</span></span><br></pre></td></tr></table></figure><h3 id="3-环境变量配置"><a href="#3-环境变量配置" class="headerlink" title="3. 环境变量配置"></a>3. 环境变量配置</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">vim ~/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># go</span></span><br><span class="line"><span class="built_in">export</span> GOPATH=<span class="variable">$&#123;HOME&#125;</span>/go</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;GOPATH&#125;</span>/bin</span><br><span class="line"><span class="comment"># go end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><p>执行 <code>bee version</code> 成功说明配置成功了</p><h2 id="二、开始使用"><a href="#二、开始使用" class="headerlink" title="二、开始使用"></a>二、开始使用</h2><h3 id="1-初始化项目"><a href="#1-初始化项目" class="headerlink" title="1. 初始化项目:"></a>1. 初始化项目:</h3><p>初始化一个 web 项目: <code>bee new myproject</code></p><p>初始化一个 api 项目: <code>bee api apiproject</code></p><h3 id="2-运行项目"><a href="#2-运行项目" class="headerlink" title="2. 运行项目"></a>2. 运行项目</h3><p><code>bee run</code>, 打开 <a href="http://localhost:8080/">http://localhost:8080/</a> 就可以看到一个界面啦</p><p>我的目的是要用来写 api 的，用的是第一种方式而不是第二种方式，因为对于初学者，第一种方式创建的项目比较好理解，而且官方的入门文档例子也是第一种方式创建的项目</p><h3 id="3-get-输出一份-json-文档"><a href="#3-get-输出一份-json-文档" class="headerlink" title="3. get 输出一份 json 文档"></a>3. get 输出一份 json 文档</h3><h4 id="1-修改端口"><a href="#1-修改端口" class="headerlink" title="(1) 修改端口"></a>(1) 修改端口</h4><p>由于 8080 端口太经常使用了，先来把这个端口改为 7777 这个冷门端口吧</p><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># conf/app.conf</span></span><br><span class="line"><span class="attr">httpport</span> = <span class="number">7777</span></span><br></pre></td></tr></table></figure><p>跑一下代码，打开 <a href="http://localhost:7777/%EF%BC%8C%E9%A1%B5%E9%9D%A2%E6%AD%A3%E5%B8%B8%E6%89%93%E5%BC%80%E8%AF%B4%E6%98%8E%E4%BF%AE%E6%94%B9%E6%88%90%E5%8A%9F%E4%BA%86">http://localhost:7777/，页面正常打开说明修改成功了</a></p><h4 id="2-controllers-MainController-改造"><a href="#2-controllers-MainController-改造" class="headerlink" title="(2) controllers.MainController 改造"></a>(2) controllers.MainController 改造</h4><p>打开 router 文件会发现 ‘&#x2F;‘ 映射到了 controllers.MainController, 也就是这个路由的逻辑在 controllers.MainController 里面，重置一下 MainController 的 Get 接口</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Get is ……</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *MainController)</span></span> Get() &#123;</span><br><span class="line">info := <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;Amy&quot;</span>,</span><br><span class="line"><span class="string">&quot;age&quot;</span>: <span class="number">18</span>,</span><br><span class="line">&#125;</span><br><span class="line">class := <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line"><span class="string">&quot;sub&quot;</span>: <span class="string">&quot;ch&quot;</span>,</span><br><span class="line"><span class="string">&quot;num&quot;</span>: <span class="number">3</span>,</span><br><span class="line">&#125;</span><br><span class="line">list := <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line"><span class="string">&quot;info&quot;</span>: info,</span><br><span class="line"><span class="string">&quot;class&quot;</span>: class,</span><br><span class="line">&#125;</span><br><span class="line">datas := <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line"><span class="string">&quot;F_responseNo&quot;</span>:<span class="string">&quot;200 ok&quot;</span>,</span><br><span class="line"><span class="string">&quot;F_list&quot;</span>: list,</span><br><span class="line">&#125;</span><br><span class="line">u.Data[<span class="string">&quot;json&quot;</span>] = datas</span><br><span class="line">u.ServeJSON()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重新跑一下程序，会发现 <a href="http://localhost:7777/">http://localhost:7777/</a> 输出了一份 json，其结构如下:</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;F_list&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;class&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;num&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sub&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ch&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Amy&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;F_responseNo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;200 ok&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>这就是我们前端经常拿到接口的数据格式了，但是我们的路由经常是 &#x2F;v1&#x2F; 这样的，而不是直接用根路由，下面我们再来实现一个更复杂点的路由</p><h3 id="4-实现-v1-elabresource-save-接口"><a href="#4-实现-v1-elabresource-save-接口" class="headerlink" title="4. 实现 v1&#x2F;elabresource&#x2F;save 接口"></a>4. 实现 v1&#x2F;elabresource&#x2F;save 接口</h3><h4 id="1-router-改造"><a href="#1-router-改造" class="headerlink" title="(1) router 改造"></a>(1) router 改造</h4><p>添加 v1&#x2F;elabresource&#x2F;save 路由，指明该使用 post 方法，并映射到 controllers.LabResourceController 的 SaveLabResource 函数</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// routers/router</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">beego.Router(<span class="string">&quot;/&quot;</span>, &amp;controllers.MainController&#123;&#125;)</span><br><span class="line"></span><br><span class="line">nsv1 := beego.NewNamespace(<span class="string">&quot;/v1&quot;</span>,</span><br><span class="line">beego.NSNamespace(<span class="string">&quot;/elabresource&quot;</span>,</span><br><span class="line">beego.NSRouter(<span class="string">&quot;/save&quot;</span>, &amp;controllers.LabResourceController&#123;&#125;, <span class="string">&quot;post:SaveLabResource&quot;</span>),</span><br><span class="line">),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">beego.AddNamespace(nsv1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-SaveLabResource-函数实现"><a href="#2-SaveLabResource-函数实现" class="headerlink" title="(2) SaveLabResource 函数实现"></a>(2) SaveLabResource 函数实现</h4><p>首先，声明一个 LabResourceController 结构体</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> LabResourceController <span class="keyword">struct</span> &#123;</span><br><span class="line">beego.Controller</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 post 方法中，我们经常会传递一些参数供服务端使用，所以这里需要拿到参数，获取 form 类型的参数可以通过结构体直接获取，比如这样</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> saveLabResourceParams <span class="keyword">struct</span> &#123;</span><br><span class="line">F_name        <span class="type">string</span> <span class="string">`form:&quot;F_name&quot; valid:&quot;Required&quot;`</span></span><br><span class="line">F_cover_url   <span class="type">string</span> <span class="string">`form:&quot;F_cover_url&quot;`</span></span><br><span class="line">F_data        <span class="type">string</span> <span class="string">`form:&quot;F_data&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在以上结构体中，我们声明了三个键，分别是: F_name、F_cover_url、F_data,此时他们的值都还是零值。</p><p>要拿到这几个参数的值还需要用 ParseForm 方法进行解析，所以最终的逻辑是这样的:</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// SaveLabResource 实验保存接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *LabResourceController)</span></span> SaveLabResource() &#123;</span><br><span class="line">params := &amp;saveLabResourceParams&#123;&#125;</span><br><span class="line"></span><br><span class="line">datas := <span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line"><span class="string">&quot;F_responseNo&quot;</span>: <span class="string">&quot;200 ok&quot;</span>,</span><br><span class="line"><span class="string">&quot;F_save_id&quot;</span>: <span class="number">124</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err := u.ParseForm(params); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="comment">// 参数异常</span></span><br><span class="line">datas[<span class="string">&quot;F_responseNo&quot;</span>] = <span class="number">10001</span></span><br><span class="line">fmt.Println(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(params)</span><br><span class="line"></span><br><span class="line"><span class="comment">//跨域支持</span></span><br><span class="line">u.Ctx.ResponseWriter.Header().Set(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;*&quot;</span>)</span><br><span class="line"></span><br><span class="line">u.Data[<span class="string">&quot;json&quot;</span>] = datas</span><br><span class="line">u.ServeJSON()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>到此，我们就实现了 v1&#x2F;elabresource&#x2F;save post 接口, postman 发送一个 post 请求到 <a href="http://127.0.0.1:7777/v1/elabresource/save">http://127.0.0.1:7777/v1/elabresource/save</a> ，收到一份如下 json 数据，说明成功了</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;F_responseNo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;200 ok&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;F_save_id&quot;</span><span class="punctuation">:</span> <span class="number">1231</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>但是，到这里我们还没有对数据做任何处理，只是简单的上传数据，这显然是没什么用的，正常情况下，我们会把保存的数据存到数据库，以便下次可以拿回记录，所以下一步我们要实现的就是 post 数据，服务端存储数据到 mysql 数据库，并返回相应的 id 给客户端。</p><h3 id="5-使用-mysql-操作数据"><a href="#5-使用-mysql-操作数据" class="headerlink" title="5. 使用 mysql 操作数据"></a>5. 使用 mysql 操作数据</h3><p>要操作数据库，我们使用 gorm，目前使用用户比较多, 因为项目中用到了 go module, 在 run 的时候会自动帮我们安装，这里就不安装，直接引入。</p><p>新建一个 models&#x2F;labresource 文件，在里面实现相关逻辑。</p><p>首先引入相关模块</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line"><span class="string">&quot;gorm.io/driver/mysql&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>然后初始化一下 mysql 数据库，因为需要多处用到，所以需要存到全局变量里</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  models/labresource</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">dbOrmDefault   *gorm.DB</span><br><span class="line">err <span class="type">error</span></span><br><span class="line">myConfig       Mconfig</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">myConfig = Mconfig&#123;&#125;</span><br><span class="line"></span><br><span class="line">myConfig.dBHost = <span class="string">&quot;127.0.0.1:3306&quot;</span></span><br><span class="line">myConfig.dBName = &lt;yourDatabaseName&gt;</span><br><span class="line">myConfig.dBUsername = <span class="string">&quot;root&quot;</span></span><br><span class="line">myConfig.dBPassword = &lt;yourpsd&gt;</span><br><span class="line"></span><br><span class="line">db, er := gorm.Open(mysql.New(</span><br><span class="line">mysql.Config&#123;</span><br><span class="line">DSN: myConfig.dBUsername+<span class="string">&quot;:&quot;</span>+myConfig.dBPassword+<span class="string">&quot;@tcp(&quot;</span>+myConfig.dBHost+<span class="string">&quot;)/&quot;</span>+myConfig.dBName+<span class="string">&quot;?charset=utf8&amp;parseTime=True&amp;loc=Asia%2FShanghai&quot;</span>, <span class="comment">// DSN data source name</span></span><br><span class="line">DefaultStringSize: <span class="number">256</span>, <span class="comment">// string 类型字段的默认长度</span></span><br><span class="line">DisableDatetimePrecision: <span class="literal">true</span>, <span class="comment">// 禁用 datetime 精度，MySQL 5.6 之前的数据库不支持</span></span><br><span class="line">DontSupportRenameIndex: <span class="literal">true</span>, <span class="comment">// 重命名索引时采用删除并新建的方式，MySQL 5.7 之前的数据库和 MariaDB 不支持重命名索引</span></span><br><span class="line">DontSupportRenameColumn: <span class="literal">true</span>, <span class="comment">// 用 `change` 重命名列，MySQL 8 之前的数据库和 MariaDB 不支持重命名列</span></span><br><span class="line">SkipInitializeWithVersion: <span class="literal">false</span>, <span class="comment">// 根据当前 MySQL 版本自动配置</span></span><br><span class="line">&#125;), &amp;gorm.Config&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> er != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Print(er)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">dbOrmDefault = db</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在以上代码中，我们对 mysql 做了一些节本配置，比如设置 DNS</p><p>初始化完数据库，当然是使用它啦</p><p>声明一个结构日 LabResource，我们接下来会用到它</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// LabResource 仿验结构体</span></span><br><span class="line"><span class="keyword">type</span> LabResource <span class="keyword">struct</span> &#123;</span><br><span class="line">ID        <span class="type">int64</span>  <span class="string">`gorm:&quot;primary_key&quot; json:&quot;saveId&quot;`</span></span><br><span class="line">Name     <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">CoverImg <span class="type">string</span> <span class="string">`json:&quot;coverImg&quot;`</span></span><br><span class="line">Data             <span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;data,omitempty&quot; gorm:&quot;-&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>试着把拿到的数据存到数据库, 具体的语法自行可以查看 gorm 官方文档</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// SaveLabResource ……</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SaveLabResource</span><span class="params">(name <span class="type">string</span>, coverImg <span class="type">string</span>, jsonData <span class="type">string</span>)</span></span> (<span class="type">int64</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> err <span class="type">error</span></span><br><span class="line"><span class="keyword">var</span> data <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">labResource := LabResource&#123;</span><br><span class="line">ID:               <span class="type">int64</span>(<span class="number">1231</span>),</span><br><span class="line">Name:             name,</span><br><span class="line">CoverImg:         coverImg,</span><br><span class="line">Data:             data,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">err = dbOrmDefault.Model(&amp;LabResource&#123;&#125;).Create(labResource).Error; </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> labResource.ID</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用一下这部分代码，我们就实现了 post 数据并存到 mysql 数据库的逻辑啦，完结撒花</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Python/Go/其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Egg 快速上手</title>
      <link href="/egg/"/>
      <url>/egg/</url>
      
        <content type="html"><![CDATA[<h2 id="一、入门"><a href="#一、入门" class="headerlink" title="一、入门"></a>一、入门</h2><h3 id="1-初始化项目"><a href="#1-初始化项目" class="headerlink" title="1. 初始化项目"></a>1. 初始化项目</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 利用脚手架初始化项目</span></span><br><span class="line">mkdir egg-example</span><br><span class="line">cd egg-example</span><br><span class="line">npm init egg --type=simple</span><br><span class="line">npm i</span><br><span class="line">yarn dev</span><br></pre></td></tr></table></figure><h3 id="2-安装并配置模板引擎插件"><a href="#2-安装并配置模板引擎插件" class="headerlink" title="2. 安装并配置模板引擎插件"></a>2. 安装并配置模板引擎插件</h3><p>(1) 安装：<code>npm i egg-view-nunjucks --save</code></p><p>(2) 开启插件：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// config/plugin.js</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">nunjucks</span> = &#123;</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">package</span>: <span class="string">&quot;egg-view-nunjucks&quot;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// config/config.default.js</span></span><br><span class="line">config.<span class="property">view</span> = &#123;</span><br><span class="line">  <span class="attr">defaultViewEngine</span>: <span class="string">&quot;nunjucks&quot;</span>,</span><br><span class="line">  <span class="attr">mapping</span>: &#123;</span><br><span class="line">    <span class="string">&quot;.tpl&quot;</span>: <span class="string">&quot;nunjucks&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二、开始使用"><a href="#二、开始使用" class="headerlink" title="二、开始使用"></a>二、开始使用</h2><h3 id="1-创建模板文件"><a href="#1-创建模板文件" class="headerlink" title="1. 创建模板文件"></a>1. 创建模板文件</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- app/view/news/list.tpl --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hacker News<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/public/css/news.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;news-view view&quot;</span>&gt;</span></span><br><span class="line">      &#123;% for item in list %&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; item.url &#125;&#125;&quot;</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-创建静态资源文件-news-css-到-public-css"><a href="#2-创建静态资源文件-news-css-到-public-css" class="headerlink" title="2. 创建静态资源文件 news.css 到 public&#x2F;css"></a>2. 创建静态资源文件 news.css 到 public&#x2F;css</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">10px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.link</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">136</span>, <span class="number">131</span>, <span class="number">131</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.time</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">136</span>, <span class="number">131</span>, <span class="number">131</span>);</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-添加-Controller-和-Router"><a href="#3-添加-Controller-和-Router" class="headerlink" title="3. 添加 Controller 和 Router"></a>3. 添加 Controller 和 Router</h3><p>(1)、新建 news.js 到 &#x2F;&#x2F;app&#x2F;controller</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app/controller/news.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Controller</span> = <span class="built_in">require</span>(<span class="string">&quot;egg&quot;</span>).<span class="property">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewsController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Controller</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">list</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> dataList = &#123;</span><br><span class="line">      <span class="attr">list</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&quot;this is news 1&quot;</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&quot;/news/1&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&quot;this is news 2&quot;</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&quot;/news/2&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">render</span>(<span class="string">&quot;news/list.tpl&quot;</span>, dataList);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">NewsController</span>;</span><br></pre></td></tr></table></figure><p>(2)、router.js 添加语句：<code>router.get(&#39;/news&#39;, controller.news.list);</code></p><p>(3)、查看效果：<code>yarn dev</code> &#x3D;&gt; 打开 <a href="http://127.0.0.1:7002/news">http://127.0.0.1:7002/news</a></p><h3 id="4-编写业务逻辑-爬取-hacker-news-数据"><a href="#4-编写业务逻辑-爬取-hacker-news-数据" class="headerlink" title="4. 编写业务逻辑,爬取 hacker-news 数据"></a>4. 编写业务逻辑,爬取 hacker-news 数据</h3><p>(1) 新建目录：&#x2F;&#x2F; app&#x2F;service&#x2F;news.js，这里请求时设置了 proxy，是因为 hacker-news 的 api 被墙了</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Service</span> = <span class="built_in">require</span>(<span class="string">&quot;egg&quot;</span>).<span class="property">Service</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewsService</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Service</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">list</span>(<span class="params">page = <span class="number">1</span></span>) &#123;</span><br><span class="line">    <span class="comment">// read config</span></span><br><span class="line">    <span class="keyword">const</span> &#123; serverUrl, pageSize &#125; = <span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">news</span>;</span><br><span class="line">    <span class="comment">// use build-in http client to GET hacker-news api</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: idList &#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">curl</span>(</span><br><span class="line">      <span class="string">`<span class="subst">$&#123;serverUrl&#125;</span>/topstories.json`</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">enableProxy</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">proxy</span>: <span class="string">&quot;http://127.0.0.1:1080&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">orderBy</span>: <span class="string">&#x27;&quot;$key&quot;&#x27;</span>,</span><br><span class="line">          <span class="attr">startAt</span>: <span class="string">`&quot;<span class="subst">$&#123;pageSize * (page - <span class="number">1</span>)&#125;</span>&quot;`</span>,</span><br><span class="line">          <span class="attr">endAt</span>: <span class="string">`&quot;<span class="subst">$&#123;pageSize * page - <span class="number">1</span>&#125;</span>&quot;`</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// parallel GET detail</span></span><br><span class="line">    <span class="keyword">const</span> newsList = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">keys</span>(idList).<span class="title function_">map</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;serverUrl&#125;</span>/item/<span class="subst">$&#123;idList[key]&#125;</span>.json`</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">curl</span>(url, &#123;</span><br><span class="line">          <span class="attr">enableProxy</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">proxy</span>: <span class="string">&quot;http://127.0.0.1:1080&quot;</span>,</span><br><span class="line">          <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> newsList.<span class="title function_">map</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="property">data</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">NewsService</span>;</span><br></pre></td></tr></table></figure><p>(2) &#x2F;&#x2F; app&#x2F;controller&#x2F;news.js 修改语句</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">list</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="property">ctx</span>;</span><br><span class="line">  <span class="keyword">const</span> page = ctx.<span class="property">query</span>.<span class="property">page</span> || <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> newsList = <span class="keyword">await</span> ctx.<span class="property">service</span>.<span class="property">news</span>.<span class="title function_">list</span>(page);</span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">render</span>(<span class="string">&#x27;news/list.tpl&#x27;</span>, &#123; <span class="attr">list</span>: newsList &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3) &#x2F;&#x2F; config&#x2F;config.default.js 添加下面代码</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">config.<span class="property">news</span> = &#123;</span><br><span class="line">  <span class="attr">pageSize</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">serverUrl</span>: <span class="string">&quot;https://hacker-news.firebaseio.com/v0&quot;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="5-编写扩展插件-moment，美化时间"><a href="#5-编写扩展插件-moment，美化时间" class="headerlink" title="5. 编写扩展插件 moment，美化时间"></a>5. 编写扩展插件 moment，美化时间</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 下载 moment 插件</span></span><br><span class="line">npm i moment --save</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app/extend/helper.js</span></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&quot;moment&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">relativeTime</span> = <span class="function"><span class="params">time</span> =&gt;</span> <span class="title function_">moment</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(time * <span class="number">1000</span>)).<span class="title function_">fromNow</span>();</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// views/news/list.tpl</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hacker News<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/public/css/news.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;news-view view&quot;</span>&gt;</span></span><br><span class="line">      &#123;% for item in list %&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; item.url &#125;&#125;&quot;</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;time&quot;</span>&gt;</span>&#123;&#123; helper.relativeTime(item.time) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="6-站点禁止百度爬虫访问"><a href="#6-站点禁止百度爬虫访问" class="headerlink" title="6. 站点禁止百度爬虫访问"></a>6. 站点禁止百度爬虫访问</h3><p>(1) app&#x2F;middleware&#x2F;robot.js</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="comment">// options === app.config.robot</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">options, app</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">robotMiddleware</span>(<span class="params">ctx, next</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> source = ctx.<span class="title function_">get</span>(<span class="string">&quot;user-agent&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> match = options.<span class="property">ua</span>.<span class="title function_">some</span>(<span class="function"><span class="params">ua</span> =&gt;</span> ua.<span class="title function_">test</span>(source));</span><br><span class="line">    <span class="keyword">if</span> (match) &#123;</span><br><span class="line">      ctx.<span class="property">status</span> = <span class="number">403</span>;</span><br><span class="line">      ctx.<span class="property">message</span> = <span class="string">&quot;Go away, robot.&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">next</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>(2) config&#x2F;config.default.js 添加如下代码</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// add middleware robot</span></span><br><span class="line">config.<span class="property">middleware</span> = [<span class="string">&quot;robot&quot;</span>];</span><br><span class="line"><span class="comment">// robot&#x27;s configurations</span></span><br><span class="line">config.<span class="property">robot</span> = &#123;</span><br><span class="line">  <span class="attr">ua</span>: [<span class="regexp">/Baiduspider/i</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="7-单元测试"><a href="#7-单元测试" class="headerlink" title="7. 单元测试"></a>7. 单元测试</h3><p>(1) &#x2F;&#x2F; test&#x2F;app&#x2F;middleware&#x2F;robot.test.js</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; app, mock, assert &#125; = <span class="built_in">require</span>(<span class="string">&quot;egg-mock/bootstrap&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;test/app/middleware/robot.test.js&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&quot;should block robot&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> app</span><br><span class="line">      .<span class="title function_">httpRequest</span>()</span><br><span class="line">      .<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">      .<span class="title function_">set</span>(<span class="string">&quot;User-Agent&quot;</span>, <span class="string">&quot;Baiduspider&quot;</span>)</span><br><span class="line">      .<span class="title function_">expect</span>(<span class="number">403</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>(2) 执行测试脚本 <code>yarn test-local</code></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第一个 Go 程序</title>
      <link href="/go-getting-started/"/>
      <url>/go-getting-started/</url>
      
        <content type="html"><![CDATA[<p>1、<a href="https://golang.org/dl/">下载</a></p><p>2、测试是否安装成功, 并运行程序</p><p>(1) 新建 hello.go</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;hello, world\n&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2) 执行代码</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> run hello.<span class="keyword">go</span> </span><br></pre></td></tr></table></figure><p>(3) 编译二进制文件</p><p>编译 hello.go, 生成一份 hello 文件，执行该文件, 会输出一行 “hello, world”</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> build hello.<span class="keyword">go</span></span><br><span class="line">./hello</span><br></pre></td></tr></table></figure><p>(2)(3) 任一步骤执行成功，说明安装成功了</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Python/Go/其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typescript 笔记</title>
      <link href="/typescript-environment-config/"/>
      <url>/typescript-environment-config/</url>
      
        <content type="html"><![CDATA[<h2 id="一、快速上手"><a href="#一、快速上手" class="headerlink" title="一、快速上手"></a>一、快速上手</h2><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h3><p><code>npm i -g typescript</code></p><h3 id="2-编译上下文"><a href="#2-编译上下文" class="headerlink" title="2. 编译上下文"></a>2. 编译上下文</h3><p>(1) <code>tsc --init</code> 创建 tsconfig.json 文件, 创建好之后的内容长这样的</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 编译选项定制</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">/* Visit https://aka.ms/tsconfig.json to read more about this file */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 基础选项 */</span></span><br><span class="line">    <span class="comment">// &quot;incremental&quot;: true,                   /* 支持增量编译 */</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es5&quot;</span> <span class="comment">/* 指定 ECMAScript 目标版本: &#x27;ES3&#x27; (默认), &#x27;ES5&#x27;, &#x27;ES6&#x27;/&#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, or &#x27;ESNEXT&#x27;. */</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commonjs&quot;</span> <span class="comment">/* 指定使用模块: &#x27;none&#x27;, &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27;, &#x27;es2015&#x27;, &#x27;es2020&#x27;, or &#x27;ESNext&#x27;. */</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// &quot;lib&quot;: [],                             /* 指定要包含在编译中的库文件 */</span></span><br><span class="line">    <span class="comment">// &quot;allowJs&quot;: true,                       /* 允许编译 javascript 文件 */</span></span><br><span class="line">    <span class="comment">// &quot;checkJs&quot;: true,                       /* 报告 javascript 文件中的错误 */</span></span><br><span class="line">    <span class="comment">// &quot;jsx&quot;: &quot;preserve&quot;,                     /* 指定 jsx 代码的生成方式: &#x27;preserve&#x27;, &#x27;react-native&#x27;, or &#x27;react&#x27;. */</span></span><br><span class="line">    <span class="comment">// &quot;declaration&quot;: true,                   /* 生成相应的 &#x27;.d.ts&#x27; 文件 */</span></span><br><span class="line">    <span class="comment">// &quot;declarationMap&quot;: true,                /* 为相应的 &#x27;.d.ts&#x27; 文件生成 sourcemap 文件. */</span></span><br><span class="line">    <span class="comment">// &quot;sourceMap&quot;: true,                     /* 生成相应的 &#x27;.map&#x27; 文件 */</span></span><br><span class="line">    <span class="comment">// &quot;outFile&quot;: &quot;./&quot;,                       /* 将输出文件合并为一个文件. */</span></span><br><span class="line">    <span class="comment">// &quot;outDir&quot;: &quot;./&quot;,                        /* 指定输出目录 */</span></span><br><span class="line">    <span class="comment">// &quot;rootDir&quot;: &quot;./&quot;,                       /* 用来控制输出目录结构 --outDir */</span></span><br><span class="line">    <span class="comment">// &quot;composite&quot;: true,                     /* Enable project compilation */</span></span><br><span class="line">    <span class="comment">// &quot;tsBuildInfoFile&quot;: &quot;./&quot;,               /* Specify file to store incremental compilation information */</span></span><br><span class="line">    <span class="comment">// &quot;removeComments&quot;: true,                /* Do not emit comments to output. */</span></span><br><span class="line">    <span class="comment">// &quot;noEmit&quot;: true,                        /* Do not emit outputs. */</span></span><br><span class="line">    <span class="comment">// &quot;importHelpers&quot;: true,                 /* Import emit helpers from &#x27;tslib&#x27;. */</span></span><br><span class="line">    <span class="comment">// &quot;downlevelIteration&quot;: true,            /* Provide full support for iterables in &#x27;for-of&#x27;, spread, and destructuring when targeting &#x27;ES5&#x27; or &#x27;ES3&#x27;. */</span></span><br><span class="line">    <span class="comment">// &quot;isolatedModules&quot;: true,               /* Transpile each file as a separate module (similar to &#x27;ts.transpileModule&#x27;). */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Strict Type-Checking Options */</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">/* Enable all strict type-checking options. */</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// &quot;noImplicitAny&quot;: true,                 /* Raise error on expressions and declarations with an implied &#x27;any&#x27; type. */</span></span><br><span class="line">    <span class="comment">// &quot;strictNullChecks&quot;: true,              /* Enable strict null checks. */</span></span><br><span class="line">    <span class="comment">// &quot;strictFunctionTypes&quot;: true,           /* Enable strict checking of function types. */</span></span><br><span class="line">    <span class="comment">// &quot;strictBindCallApply&quot;: true,           /* Enable strict &#x27;bind&#x27;, &#x27;call&#x27;, and &#x27;apply&#x27; methods on functions. */</span></span><br><span class="line">    <span class="comment">// &quot;strictPropertyInitialization&quot;: true,  /* Enable strict checking of property initialization in classes. */</span></span><br><span class="line">    <span class="comment">// &quot;noImplicitThis&quot;: true,                /* Raise error on &#x27;this&#x27; expressions with an implied &#x27;any&#x27; type. */</span></span><br><span class="line">    <span class="comment">// &quot;alwaysStrict&quot;: true,                  /* Parse in strict mode and emit &quot;use strict&quot; for each source file. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Additional Checks */</span></span><br><span class="line">    <span class="comment">// &quot;noUnusedLocals&quot;: true,                /* Report errors on unused locals. */</span></span><br><span class="line">    <span class="comment">// &quot;noUnusedParameters&quot;: true,            /* Report errors on unused parameters. */</span></span><br><span class="line">    <span class="comment">// &quot;noImplicitReturns&quot;: true,             /* Report error when not all code paths in function return a value. */</span></span><br><span class="line">    <span class="comment">// &quot;noFallthroughCasesInSwitch&quot;: true,    /* Report errors for fallthrough cases in switch statement. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Module Resolution Options */</span></span><br><span class="line">    <span class="comment">// &quot;moduleResolution&quot;: &quot;node&quot;,            /* Specify module resolution strategy: &#x27;node&#x27; (Node.js) or &#x27;classic&#x27; (TypeScript pre-1.6). */</span></span><br><span class="line">    <span class="comment">// &quot;baseUrl&quot;: &quot;./&quot;,                       /* Base directory to resolve non-absolute module names. */</span></span><br><span class="line">    <span class="comment">// &quot;paths&quot;: &#123;&#125;,                           /* A series of entries which re-map imports to lookup locations relative to the &#x27;baseUrl&#x27;. */</span></span><br><span class="line">    <span class="comment">// &quot;rootDirs&quot;: [],                        /* List of root folders whose combined content represents the structure of the project at runtime. */</span></span><br><span class="line">    <span class="comment">// &quot;typeRoots&quot;: [],                       /* List of folders to include type definitions from. */</span></span><br><span class="line">    <span class="comment">// &quot;types&quot;: [],                           /* Type declaration files to be included in compilation. */</span></span><br><span class="line">    <span class="comment">// &quot;allowSyntheticDefaultImports&quot;: true,  /* Allow default imports from modules with no default export. This does not affect code emit, just typechecking. */</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">/* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects for all imports. Implies &#x27;allowSyntheticDefaultImports&#x27;. */</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// &quot;preserveSymlinks&quot;: true,              /* Do not resolve the real path of symlinks. */</span></span><br><span class="line">    <span class="comment">// &quot;allowUmdGlobalAccess&quot;: true,          /* Allow accessing UMD globals from modules. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Source Map Options */</span></span><br><span class="line">    <span class="comment">// &quot;sourceRoot&quot;: &quot;&quot;,                      /* Specify the location where debugger should locate TypeScript files instead of source locations. */</span></span><br><span class="line">    <span class="comment">// &quot;mapRoot&quot;: &quot;&quot;,                         /* Specify the location where debugger should locate map files instead of generated locations. */</span></span><br><span class="line">    <span class="comment">// &quot;inlineSourceMap&quot;: true,               /* Emit a single file with source maps instead of having a separate file. */</span></span><br><span class="line">    <span class="comment">// &quot;inlineSources&quot;: true,                 /* Emit the source alongside the sourcemaps within a single file; requires &#x27;--inlineSourceMap&#x27; or &#x27;--sourceMap&#x27; to be set. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Experimental Options */</span></span><br><span class="line">    <span class="comment">// &quot;experimentalDecorators&quot;: true,        /* Enables experimental support for ES7 decorators. */</span></span><br><span class="line">    <span class="comment">// &quot;emitDecoratorMetadata&quot;: true,         /* Enables experimental support for emitting type metadata for decorators. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Advanced Options */</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">/* Skip type checking of declaration files. */</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">/* Disallow inconsistently-cased references to the same file. */</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>(2) 显式指定需要编译的文件</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;./some/file.ts&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>(3) 使用 include 和 exclude 选项来指定需要包含的文件和排除的文件</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">,</span> <span class="string">&quot;**/*.spec.ts&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>(4) 继承来自其他文件的配置项</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./tsconfig&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-开始编译"><a href="#3-开始编译" class="headerlink" title="3. 开始编译"></a>3. 开始编译</h3><p>执行 <code>tsc</code> 会编译项目中指定的 ts 文件(没有配置则是全部)到指定目录</p><h2 id="二、类型简介"><a href="#二、类型简介" class="headerlink" title="二、类型简介"></a>二、类型简介</h2><h3 id="1-原始类型"><a href="#1-原始类型" class="headerlink" title="1. 原始类型"></a>1. 原始类型</h3><p>js 中的 string、number、boolean 等原始类型可以直接作为类型注释</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">a</span>: <span class="built_in">number</span> = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">b</span>: <span class="built_in">string</span> = <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><h3 id="2-特殊类型"><a href="#2-特殊类型" class="headerlink" title="2. 特殊类型"></a>2. 特殊类型</h3><p>(1) any: 可以被赋值给任意类型，也可以被任意类型赋值</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">anyA</span>: <span class="built_in">any</span> = <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">numB</span>: <span class="built_in">number</span> = anyA;</span><br></pre></td></tr></table></figure><p>(2) null、 undefined: 可以被赋值给任意类型</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">nullA</span>: <span class="built_in">number</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">undefinedA</span>:<span class="built_in">string</span> = <span class="literal">undefined</span></span><br></pre></td></tr></table></figure><p>(3) void: 函数返回值为空</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">funA</span>(<span class="params"></span>):<span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">res</span>:<span class="built_in">string</span> = <span class="string">&#x27;1212&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> res <span class="comment">// error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-元素类型相同的数组"><a href="#3-元素类型相同的数组" class="headerlink" title="3. 元素类型相同的数组"></a>3. 元素类型相同的数组</h3><p>数组的类型注释有两种方式</p><p>(1) 原始类型 + []</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure><p>(2) 数组泛型 Array<T></p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">arr</span>:<span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure><h3 id="4-元素长度已知的，每个元素类型已知的数组"><a href="#4-元素长度已知的，每个元素类型已知的数组" class="headerlink" title="4. 元素长度已知的，每个元素类型已知的数组"></a>4. 元素长度已知的，每个元素类型已知的数组</h3><p>这类数组可以用 ts 元组来注释</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">x</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>] = [<span class="string">&#x27;hello&#x27;</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure><h3 id="5-接口"><a href="#5-接口" class="headerlink" title="5. 接口"></a>5. 接口</h3><p>接口相当于给一个类型定义集合，用到该接口注释类型的，必须遵从里面的规则, 更多细节可以查看<a href="https://www.tslang.cn/docs/handbook/interfaces.html">文档</a></p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Name</span> &#123;</span><br><span class="line">  <span class="attr">first</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">second</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">nameA</span>: <span class="title class_">Name</span>;</span><br><span class="line">nameA = &#123;</span><br><span class="line">  <span class="attr">first</span>: <span class="string">&#x27;John&#x27;</span>,</span><br><span class="line">  <span class="attr">second</span>: <span class="string">&#x27;Doe&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">nameA = &#123;</span><br><span class="line">  <span class="comment">// Error: &#x27;Second is missing&#x27;</span></span><br><span class="line">  <span class="attr">first</span>: <span class="string">&#x27;John&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">nameA = &#123;</span><br><span class="line">  <span class="comment">// Error: &#x27;Second is the wrong type&#x27;</span></span><br><span class="line">  <span class="attr">first</span>: <span class="string">&#x27;John&#x27;</span>,</span><br><span class="line">  <span class="attr">second</span>: <span class="number">1337</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="6-泛型"><a href="#6-泛型" class="headerlink" title="6. 泛型"></a>6. 泛型</h3><p>函数参数未定，需要函数返回值与传入参数类型一致时，会用到泛型, 更多细节请查看<a href="https://www.tslang.cn/docs/handbook/generics.html">文档</a></p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> output = <span class="title function_">identity</span>(<span class="string">&quot;myString&quot;</span>);  <span class="comment">// type of output will be &#x27;string&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="7-联合类型"><a href="#7-联合类型" class="headerlink" title="7. 联合类型"></a>7. 联合类型</h3><p>当类型可能有多个时，可以选择用联合类型</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sqrt</span>(<span class="params"><span class="attr">x</span>: <span class="built_in">number</span> | <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参考文献:</p><p><a href="https://jkchao.github.io/typescript-book-chinese/">深入理解 TypeScript</a></p><p><a href="https://www.tslang.cn/docs/handbook/tsconfig-json.html">tsconfig.json</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始撸一个 Tinymce 图片上传插件</title>
      <link href="/build-tinymce-img-plugin/"/>
      <url>/build-tinymce-img-plugin/</url>
      
        <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>最近有个项目需要用到编辑器，大佬说希望用精简点的框架自己加点扩展，而不是用 ckeditor 这种比较重的。于是对比了下，ueditor 没怎么在维护了，其他的好像不太符合我的需求，最后选择了 tinymce，理由是 tinymce 比较轻巧易扩展，而且完全开源，可用于商业应用。</p><p>初步看了下文档，我需要有图片上传插件，但是已有的插件不太符合我的需求，我需要的是点击或者拖拽到 dialog 立刻打开图片目录，已有插件采用的 tab-panel 模式，多了粘贴 url 之类的多余东西。看了看 github, 别人的实现貌似也不怎么符合我的需求,于是便有了标题所述事件。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><h3 id="下载生成器"><a href="#下载生成器" class="headerlink" title="下载生成器"></a>下载生成器</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install --global yo generator-tinymce</span><br></pre></td></tr></table></figure><h3 id="用生成器创建一个插件模板"><a href="#用生成器创建一个插件模板" class="headerlink" title="用生成器创建一个插件模板"></a>用生成器创建一个插件模板</h3><p>这里的生成目录可以是源码的相应目录或者用自己想用的目录都行,填写一下插件名称,然后就是一路 next</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yo tinymce</span><br></pre></td></tr></table></figure><p>创建好模板之后会看到有对应的脚本</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 热更新项目</span></span><br><span class="line">yarn start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译项目</span></span><br><span class="line">yarn build</span><br></pre></td></tr></table></figure><p>主要开发目录在 src&#x2F;main 下, plugin.ts 是主要的插件入口可以在里面写入插件内容</p><h2 id="图片上传插件的实现"><a href="#图片上传插件的实现" class="headerlink" title="图片上传插件的实现"></a>图片上传插件的实现</h2><h3 id="一、声明插件"><a href="#一、声明插件" class="headerlink" title="一、声明插件"></a>一、声明插件</h3><p>要写一个插件，得先声明一下，把它加到编辑器里, 比如这样:</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> <span class="attr">tinymce</span>: <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setup</span> = (<span class="params">editor, url</span>) =&gt; &#123;</span><br><span class="line">  editor.<span class="property">ui</span>.<span class="property">registry</span>.<span class="title function_">addButton</span>(<span class="string">&#x27;image-t&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">    <span class="attr">tooltip</span>: <span class="string">&#x27;image-t&#x27;</span>,</span><br><span class="line">    <span class="attr">onAction</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// tslint:disable-next-line:no-console</span></span><br><span class="line">      editor.<span class="title function_">execCommand</span>(<span class="string">&#x27;mceInsertContent&#x27;</span>, <span class="literal">false</span>, <span class="string">`&lt;p&gt;Hello world&lt;/p&gt;`</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> () =&gt; &#123;</span><br><span class="line">  tinymce.<span class="property">PluginManager</span>.<span class="title function_">add</span>(<span class="string">&#x27;image-t&#x27;</span>, setup);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>编译一下，可以看到 dist 目录下已经有一个 image-t 目录了，这个就插件目录，把 image-t 拷贝到 tinymce&#x2F;plugins 目录下就可以正常使用插件了，比如以下配置，就可以在工具条看到一个图片工具,点击会插入一句 ‘Hello world’ 到编辑器里。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">tinymce.<span class="title function_">init</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;textarea.tinymce&#x27;</span>,</span><br><span class="line">  <span class="attr">plugins</span>: <span class="string">&#x27;image-t&#x27;</span>,</span><br><span class="line">  <span class="attr">toolbar</span>: <span class="string">&#x27;image-t&#x27;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="二、图片上传界面实现"><a href="#二、图片上传界面实现" class="headerlink" title="二、图片上传界面实现"></a>二、图片上传界面实现</h3><p>上一步，我们已经初步尝试体验到了写插件的快感，但这只是开始，这样好像只能插入一些文字吧，没什么用的样子，我要的可以插入图片啊。想一下通常我们要插入图片会怎么做呢？</p><p>首先应该有一个上传图片的提示 ui 吧，点击某个按钮可以让我们跳转到本地目录，可以选择图片，点击确定会插入图片。</p><p>那我们要做的第一步就是点击上一步生成的按钮得弹出一个框，里面会有一些提示信息，在写这个 demo 之前，别急着动手，先去看看已有 image 插件的实现源码。</p><p>image 插件里用到了 <a href="https://www.tiny.cloud/docs/ui-components/dialog/">dialog ui 组件</a>,用来打开一个弹框,我们就先去看一下相关 ui 组件, 发现竟然有两种模式可选, image 插件用的是 tabpanel 模式，也就是可以有多个 tab，我的需求就是一个简单的提示界面，没必要用这个，那就选 panel 模式吧。</p><p>初次之外，dialog 还要配置 buttons, 这个是必需的，我不需要就给了空。</p><p>有了上面这些知识，就可以写一个有界面的弹框了，我们在扩展一下上面的 demo</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> <span class="attr">tinymce</span>: <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setup</span> = (<span class="params">editor, url</span>) =&gt; &#123;</span><br><span class="line">  editor.<span class="property">ui</span>.<span class="property">registry</span>.<span class="title function_">addButton</span>(<span class="string">&#x27;image-t&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">    <span class="attr">tooltip</span>: <span class="string">&#x27;image-t&#x27;</span>,</span><br><span class="line">    <span class="attr">onAction</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// tslint:disable-next-line:no-console</span></span><br><span class="line">      <span class="keyword">const</span> dialogConfig = &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;上传图片&#x27;</span>,</span><br><span class="line">        <span class="attr">body</span>: &#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;panel&#x27;</span>,</span><br><span class="line">          <span class="attr">items</span>: [],</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">buttons</span>: [],</span><br><span class="line">      &#125;;</span><br><span class="line">      editor.<span class="property">windowManager</span>.<span class="title function_">open</span>(dialogConfig);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> () =&gt; &#123;</span><br><span class="line">  tinymce.<span class="property">PluginManager</span>.<span class="title function_">add</span>(<span class="string">&#x27;image-t&#x27;</span>, setup);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>预览余下 demo，点击图片按钮，会弹出一个空白框，说明魔改第一步成功了，再编译一下，放到 tinymce&#x2F;plugins 下，可以看到表现一致。</p><h3 id="三、选中一张图片并上传"><a href="#三、选中一张图片并上传" class="headerlink" title="三、选中一张图片并上传"></a>三、选中一张图片并上传</h3><p>一般情况下，要打开本地目录，我们会想到 input, 但是这里我们首先要把这个选项排除，为什么呢？因为我们是在开发一个插件啊，源码里面肯定是有相关接口暴露出来的吧。</p><p>我们不妨再回去翻一翻 image 插件吧，UploadTab 这个里面有一层 dialog 的配置, 如下</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">makeTab</span> = (<span class="params">_info: ImageDialogInfo</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">items</span>: <span class="title class_">Dialog</span>.<span class="property">BodyComponentSpec</span>[] = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;dropzone&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;fileinput&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Upload&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;upload&#x27;</span>,</span><br><span class="line">    items,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>不难发现这里用到了 dropzone 这个组件,那我们就把他加到弹框中吧，加完之后，我们 demo 长这样:</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> <span class="attr">tinymce</span>: <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setup</span> = (<span class="params">editor, url</span>) =&gt; &#123;</span><br><span class="line">  editor.<span class="property">ui</span>.<span class="property">registry</span>.<span class="title function_">addButton</span>(<span class="string">&#x27;image-t&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">    <span class="attr">tooltip</span>: <span class="string">&#x27;image-t&#x27;</span>,</span><br><span class="line">    <span class="attr">onAction</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// tslint:disable-next-line:no-console</span></span><br><span class="line">      <span class="keyword">const</span> dialogConfig = &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;上传图片&#x27;</span>,</span><br><span class="line">        <span class="attr">body</span>: &#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;panel&#x27;</span>,</span><br><span class="line">          <span class="attr">items</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">type</span>: <span class="string">&#x27;dropzone&#x27;</span>,</span><br><span class="line">              <span class="attr">name</span>: <span class="string">&#x27;fileinput&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">buttons</span>: [],</span><br><span class="line">      &#125;;</span><br><span class="line">      editor.<span class="property">windowManager</span>.<span class="title function_">open</span>(dialogConfig);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> () =&gt; &#123;</span><br><span class="line">  tinymce.<span class="property">PluginManager</span>.<span class="title function_">add</span>(<span class="string">&#x27;image-t&#x27;</span>, setup);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>重复以上步骤, dialog 里面多了一些提示和一个浏览图像按钮,点击按钮可以打开本地目录，选择图片。</p><p>这样就 ok 了吗？我们的目的是要插入图片到编辑框中，首先就得上传图片，而上传图片需要拿到图片。</p><p>在之前的 dialog 文档中我们可以看到一些配置项，其中就有一个 onChange 方法，这个方法是 input 值改变之后触发的。该方法第一个参数是 dialogApi，里面包含了一些 input 值相关的元信息，分析一下就知道这是我们要的数据。但是上传是要一段时间的，这里我们现在选择图片之后给个 loading，然后再去上传图片，上传完之后再把图片插入到编辑器中，取消 loading，关闭弹窗,来写个简单的 demo 看看吧</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> <span class="attr">tinymce</span>: <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setup</span> = (<span class="params">editor, url</span>) =&gt; &#123;</span><br><span class="line">  editor.<span class="property">ui</span>.<span class="property">registry</span>.<span class="title function_">addButton</span>(<span class="string">&#x27;image-t&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">    <span class="attr">tooltip</span>: <span class="string">&#x27;image-t&#x27;</span>,</span><br><span class="line">    <span class="attr">onAction</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// tslint:disable-next-line:no-console</span></span><br><span class="line">      <span class="keyword">const</span> dialogConfig = &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;上传图片&#x27;</span>,</span><br><span class="line">        <span class="attr">body</span>: &#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;panel&#x27;</span>,</span><br><span class="line">          <span class="attr">items</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">type</span>: <span class="string">&#x27;dropzone&#x27;</span>,</span><br><span class="line">              <span class="attr">name</span>: <span class="string">&#x27;fileinput&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">buttons</span>: [],</span><br><span class="line">        <span class="title function_">onChange</span>(<span class="params">api</span>) &#123;</span><br><span class="line">          api.<span class="title function_">block</span>(<span class="string">&#x27;上传中……&#x27;</span>);</span><br><span class="line">          <span class="title function_">uploadImg</span>(api, editor);</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">      editor.<span class="property">windowManager</span>.<span class="title function_">open</span>(dialogConfig);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> () =&gt; &#123;</span><br><span class="line">  tinymce.<span class="property">PluginManager</span>.<span class="title function_">add</span>(<span class="string">&#x27;image-t&#x27;</span>, setup);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在上面的 demo 中实现了打开图片确定之后给个 loading，另外加了个 uploadImg 函数，用来实现上传逻辑，至此，插件已经渐渐成型了，但是看起来代码好像有点点臃肿，来分割一下吧</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">dialog</span> = (<span class="params">editor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;上传图片&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;panel&#x27;</span>,</span><br><span class="line">      <span class="attr">items</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;dropzone&#x27;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;fileinput&#x27;</span>,</span><br><span class="line">          <span class="attr">label</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">buttons</span>: [],</span><br><span class="line">    <span class="title function_">onChange</span>(<span class="params">api</span>) &#123;</span><br><span class="line">      api.<span class="title function_">block</span>(<span class="string">&#x27;上传中……&#x27;</span>);</span><br><span class="line">      <span class="title function_">uploadImg</span>(api, editor);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setup</span> = (<span class="params">editor, url</span>) =&gt; &#123;</span><br><span class="line">  editor.<span class="property">ui</span>.<span class="property">registry</span>.<span class="title function_">addButton</span>(<span class="string">&#x27;image-t&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">    <span class="attr">tooltip</span>: <span class="string">&#x27;image-t&#x27;</span>,</span><br><span class="line">    <span class="attr">onAction</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// tslint:disable-next-line:no-console</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> dialogConfig = <span class="title function_">dialog</span>(editor);</span><br><span class="line">      editor.<span class="property">windowManager</span>.<span class="title function_">open</span>(dialogConfig);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> () =&gt; &#123;</span><br><span class="line">  tinymce.<span class="property">PluginManager</span>.<span class="title function_">add</span>(<span class="string">&#x27;image-t&#x27;</span>, setup);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>拆分一下果然舒服多了，那就接着往下吧。</p><h3 id="四、上传图片到七牛"><a href="#四、上传图片到七牛" class="headerlink" title="四、上传图片到七牛"></a>四、上传图片到七牛</h3><p>要上传资源，首先得想到用一个网络请求，我想到的是 axios，因为简洁兼容，但是发现 axios 是 cjs 封装的, 编译的时候有些问题，最后勉强用了 xhr，也减少了依赖。图片上传七牛需要有图片元信息，可以通过 api.getData 拿到，此外还需要文件类型，也可以通过该方法拿到，实现可以这样</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getUrl</span>(<span class="params">formdata, callback</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"></span><br><span class="line">  xhr.<span class="title function_">open</span>(<span class="string">&quot;POST&quot;</span>, &lt;url&gt;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">      <span class="title function_">callback</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">response</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  xhr.<span class="title function_">send</span>(formdata);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过以上方法我们就可以拿到上传到七牛图片的 url 了，当然这只是个 demo，具体可以根据自己的情况实现</p><h3 id="五、把图片插入编辑器"><a href="#五、把图片插入编辑器" class="headerlink" title="五、把图片插入编辑器"></a>五、把图片插入编辑器</h3><p>终于拿到图片 url 了，这样我们就可以愉快的插入编辑器中了，结合上一步，最终的 uploadImage 函数可以这么写</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">uploadImg</span>(<span class="params">api, editor</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = api.<span class="title function_">getData</span>();</span><br><span class="line">  <span class="keyword">const</span> image = data.<span class="property">fileinput</span>[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">const</span> fileExt = image.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getToken</span> = (<span class="params">resp</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> token = resp.<span class="property">F_token</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> formdata = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">    formdata.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, image);</span><br><span class="line">    formdata.<span class="title function_">append</span>(<span class="string">&#x27;token&#x27;</span>, token);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getUrl</span>(formdata, <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> img = res.<span class="property">url</span>;</span><br><span class="line">      api.<span class="title function_">setData</span>(&#123; <span class="attr">src</span>: &#123; <span class="attr">value</span>: res.<span class="property">url</span>, <span class="attr">meta</span>: &#123;&#125; &#125; &#125;);</span><br><span class="line">      editor.<span class="title function_">execCommand</span>(</span><br><span class="line">        <span class="string">&#x27;mceInsertContent&#x27;</span>,</span><br><span class="line">        <span class="literal">false</span>,</span><br><span class="line">        <span class="string">`&lt;img src=<span class="subst">$&#123;img&#125;</span> class=&quot;img-t&quot; alt=&#x27;img-t&#x27;/&gt;`</span></span><br><span class="line">      );</span><br><span class="line">      api.<span class="title function_">unblock</span>();</span><br><span class="line">      api.<span class="title function_">close</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getQiniuToken</span>(fileExt, getToken);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>完结撒花，花了一天半的时间研究这个，做个笔记，插件开发就是这么简单</p><p>参考文献:</p><p><a href="https://developer.aliyun.com/article/268797">常用的 HTML 富文本编译器 UEditor、CKEditor、TinyMCE、HTMLArea、eWebEditor、KindEditor 简介</a></p><p><a href="https://www.tiny.cloud/docs/advanced/yeoman-generator/#runthegenerator">TinyMCE plugin Yeoman generator</a></p><p><a href="https://www.tiny.cloud/docs/advanced/creating-a-plugin/#exampleofthepluginfilestructure">Create a plugin for TinyMCE</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos 服务器登录配置</title>
      <link href="/centos-server-login-config/"/>
      <url>/centos-server-login-config/</url>
      
        <content type="html"><![CDATA[<h3 id="一、修改服务器-sshd-服务的配置文件"><a href="#一、修改服务器-sshd-服务的配置文件" class="headerlink" title="一、修改服务器 sshd 服务的配置文件"></a>一、修改服务器 sshd 服务的配置文件</h3><p><code>vim /etc/ssh/sshd_config</code> 打开配置文件，修改以下配置项:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">RSAAuthentication <span class="built_in">yes</span>     <span class="comment"># RSA认证</span></span><br><span class="line">PubkeyAuthentication <span class="built_in">yes</span>  <span class="comment"># 公钥认证</span></span><br><span class="line">AuthorizedKeysFile .ssh/authorized_keys  <span class="comment"># 公钥认证文件路径</span></span><br></pre></td></tr></table></figure><p><code>service sshd restart</code> 重启 sshd 服务</p><h3 id="二、本地生成秘钥"><a href="#二、本地生成秘钥" class="headerlink" title="二、本地生成秘钥"></a>二、本地生成秘钥</h3><p><code>cd ~/.ssh</code> &#x3D;&gt; <code>ssh-keygen -t rsa</code></p><h3 id="三、把公钥加到服务器的-ssh-authorized-keys-文件中"><a href="#三、把公钥加到服务器的-ssh-authorized-keys-文件中" class="headerlink" title="三、把公钥加到服务器的.ssh&#x2F;authorized_keys 文件中"></a>三、把公钥加到服务器的.ssh&#x2F;authorized_keys 文件中</h3><p>(1) 复制公钥文件到服务器 <code>scp local-file &lt;your serve&gt;:taget-dir</code></p><p>(2) 把公钥内容复制到 ~&#x2F;.ssh&#x2F;authorized_keys: <code>cat taget-dir/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</code></p><p>(3) 删除刚刚上传的公钥文件: <code>rm taget-dir/id_rsa.pub</code>,这里上传再复制而不是直接用 vim 粘贴，主要是权限问题</p><p>(4) 加权限</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 700 ~/.ssh</span><br><span class="line"><span class="built_in">chmod</span> 400 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><h3 id="四、本地定义服务器名称"><a href="#四、本地定义服务器名称" class="headerlink" title="四、本地定义服务器名称"></a>四、本地定义服务器名称</h3><p><code>vim ~/.ssh/config</code> 打开配置文件, 添加以下内容</p><figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">Host <span class="tag">&lt;hostName&gt;</span></span><br><span class="line">    HostName <span class="tag">&lt;公网ip&gt;</span></span><br><span class="line">    <span class="keyword">User</span> <span class="title">root</span></span><br></pre></td></tr></table></figure><p>保存之后,ssh hostName 就可以登录了</p><h3 id="五、保持连接"><a href="#五、保持连接" class="headerlink" title="五、保持连接"></a>五、保持连接</h3><p><code>vim ~/.ssh/config</code> 打开配置文件, 添加以下内容</p><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Host</span> *</span><br><span class="line">  <span class="attribute">ServerAliveInterval</span> <span class="number">60</span></span><br></pre></td></tr></table></figure><p>参考文献:</p><p><a href="https://shanyue.tech/op/init.html#%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95%EF%BC%9Apublic-key-%E4%B8%8E-ssh-copy-id">高效简单的服务器登录配置</a></p><p><a href="https://blog.csdn.net/github_35817521/article/details/53458217">如何优雅的登录远程服务器（SSH免密登录）</a></p><p><a href="https://stackoverflow.com/questions/14819084/cant-open-ssh-authorized-keys-of-user">Can’t open ssh&#x2F;authorized_keys of user</a></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flow 简易教程</title>
      <link href="/flow-simple-tutorial/"/>
      <url>/flow-simple-tutorial/</url>
      
        <content type="html"><![CDATA[<h2 id="一、初始化"><a href="#一、初始化" class="headerlink" title="一、初始化"></a>一、初始化</h2><h3 id="1、安装-babel-并进行配置"><a href="#1、安装-babel-并进行配置" class="headerlink" title="1、安装 babel 并进行配置"></a>1、安装 babel 并进行配置</h3><p>(1) 安装</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn add --dev @babel/core @babel/cli @babel/preset-flow</span><br></pre></td></tr></table></figure><p>(2) 配置</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .babelrc</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@babel/preset-flow&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// pakage.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my-project&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lib/index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;babel src/ -d lib/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prepublish&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn build&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2、安装-flow-并配置"><a href="#2、安装-flow-并配置" class="headerlink" title="2、安装 flow 并配置"></a>2、安装 flow 并配置</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn add --dev flow-bin</span><br></pre></td></tr></table></figure><p>在项目中局部安装的，要运行 flow，需要配置一下</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;flow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./node_modules/.bin/flow&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h3 id="3、初始化"><a href="#3、初始化" class="headerlink" title="3、初始化"></a>3、初始化</h3><p>(1) 项目中初始化 flow</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn flow init</span><br></pre></td></tr></table></figure><p>(2) 运行 flow，检查代码</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn flow</span><br></pre></td></tr></table></figure><h2 id="二、类型概述"><a href="#二、类型概述" class="headerlink" title="二、类型概述"></a>二、类型概述</h2><h3 id="1、原始类型"><a href="#1、原始类型" class="headerlink" title="1、原始类型"></a>1、原始类型</h3><p>除了undefined，字面量形式的原始类型是对应的小写英文单词，包装对象形式的原始类型用大写(用构造函数生成)，undefined 类型是 void</p><h3 id="2、可选类型"><a href="#2、可选类型" class="headerlink" title="2、可选类型"></a>2、可选类型</h3><p>(1) 可选原始类型</p><p>可选原始类型形如:?string，类型值可以是字符串，也可以是 null 或者 void</p><p>(2) 可选对象属性和可选函数参数</p><p>可选对象属性形如: { foo?: string },可选函数参数形如: param?: string, 二者都可以省略不写或者为 void 类型，但是不能是 null</p><p>(3) 函数参数的默认值</p><p>这个比较神奇，得这么写: value: string &#x3D; “foo”，同样可以省略或者是 void 类型，但是不能是 null</p><h3 id="3、使用原始类型值作为类型"><a href="#3、使用原始类型值作为类型" class="headerlink" title="3、使用原始类型值作为类型"></a>3、使用原始类型值作为类型</h3><p>这个比较有意思，感觉也比较好用，用法照搬官网的:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @flow</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getColor</span>(<span class="params">name: <span class="string">&quot;success&quot;</span> | <span class="string">&quot;warning&quot;</span> | <span class="string">&quot;danger&quot;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (name) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;success&quot;</span> : <span class="keyword">return</span> <span class="string">&quot;green&quot;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;warning&quot;</span> : <span class="keyword">return</span> <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;danger&quot;</span>  : <span class="keyword">return</span> <span class="string">&quot;red&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getColor</span>(<span class="string">&quot;success&quot;</span>); <span class="comment">// Works!</span></span><br><span class="line"><span class="title function_">getColor</span>(<span class="string">&quot;danger&quot;</span>);  <span class="comment">// Works!</span></span><br><span class="line"><span class="comment">// $ExpectError</span></span><br><span class="line"><span class="title function_">getColor</span>(<span class="string">&quot;error&quot;</span>);   <span class="comment">// Error!</span></span><br></pre></td></tr></table></figure><p>上述 demo 中要求只能输入文字集合 <code>[&quot;success&quot;,&quot;warning&quot;,&quot;danger&quot;]</code> 中的一个，其他的值均会被认为是错误的</p><h3 id="4、数组"><a href="#4、数组" class="headerlink" title="4、数组"></a>4、数组</h3><p>形如: <code>var arr: Array&lt;number&gt; = [1, 2, 3]</code></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序小技巧</title>
      <link href="/wechat-mini-program-pitfalls/"/>
      <url>/wechat-mini-program-pitfalls/</url>
      
        <content type="html"><![CDATA[<h3 id="一、配置相关"><a href="#一、配置相关" class="headerlink" title="一、配置相关"></a>一、配置相关</h3><p>1、 暂时还没有转发到朋友圈的 api，可以通过 canvas 绘制图片 保存到用户相册，用户通过小程序码自行分享到朋友圈的方式实现，git 上有一个比较成熟的组件；</p><p>2、 微信开发工具有时会抽风，处理方式是清除缓存 &#x3D;&gt; 重启；</p><p>3、 在 request 之前，确保服务器域名配置跟 request 的域名一致，不然会报 403 错误；</p><p>4、调用 getUserInfo 若是发现数据不对，调用 getSetting 看看用户有没授权</p><h3 id="二、组件相关"><a href="#二、组件相关" class="headerlink" title="二、组件相关"></a>二、组件相关</h3><h4 id="1、自定义-tabBar"><a href="#1、自定义-tabBar" class="headerlink" title="1、自定义 tabBar"></a>1、自定义 tabBar</h4><p>(1) 在项目根目录新建 custom-tab-bar 组件，这里我放到 components 目录下一直无效，折腾了一会发现必须要放在根目录下。</p><p>(2) tabBar 配置项，开启 cunstom: true</p><p>(3) 对应的 page 在 onShow 阶段调用 getTabBar 方法，selected 为当前 tab 的索引：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable language_">this</span>.<span class="property">getTabBar</span> === <span class="string">&#x27;function&#x27;</span> &amp;&amp;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getTabBar</span>()) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getTabBar</span>().<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">selected</span>: <span class="number">0</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(4) 自定义 tabBar 组件调用 switchtab 切换 tab</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">switchTab</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = e.<span class="property">currentTarget</span>.<span class="property">dataset</span></span><br><span class="line">  <span class="keyword">const</span> url = data.<span class="property">path</span></span><br><span class="line">  wx.<span class="title function_">switchTab</span>(&#123; url &#125;)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">selected</span> = data.<span class="property">index</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="三、网络请求"><a href="#三、网络请求" class="headerlink" title="三、网络请求"></a>三、网络请求</h3><p>写惯了 axios， 小程序的网络请求模块用着总是不是那么顺手，来封装一层吧，我们可以通过调用 get，post 去获取数据，并且可以在这一层做一些预处理的事情，比如设置必须的参数，参数加密等</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">get</span> (config) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">pre</span>(config)</span><br><span class="line">    config.<span class="property">method</span> = <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    wx.<span class="title function_">request</span>(config)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">postJson</span> (config) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">pre</span>(config)</span><br><span class="line">    config.<span class="property">method</span> = <span class="string">&#x27;post&#x27;</span></span><br><span class="line">    config.<span class="property">header</span>[<span class="string">&#x27;content-type&#x27;</span>] = <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    wx.<span class="title function_">request</span>(config)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">post</span> (config) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">pre</span>(config)</span><br><span class="line">    config.<span class="property">method</span> = <span class="string">&#x27;post&#x27;</span></span><br><span class="line">    config.<span class="property">header</span>[<span class="string">&#x27;content-type&#x27;</span>] = <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">    wx.<span class="title function_">request</span>(config)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">pre</span> (config) &#123;</span><br><span class="line">    config.<span class="property">header</span> = config.<span class="property">header</span> || &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> success = <span class="keyword">function</span> (<span class="params"></span>) &#123; &#125;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">success</span>) &#123;</span><br><span class="line">      success = config.<span class="property">success</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> fail = <span class="keyword">function</span> (<span class="params"></span>) &#123; &#125;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">fail</span>) &#123;</span><br><span class="line">      fail = config.<span class="property">fail</span></span><br><span class="line">    &#125;</span><br><span class="line">    config.<span class="property">success</span> = <span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span><br><span class="line">      <span class="title function_">success</span>(resp.<span class="property">data</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    config.<span class="property">fail</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;系统错误&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title function_">fail</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样，用起来就很方便了</p><h3 id="四、其他奇怪的问题"><a href="#四、其他奇怪的问题" class="headerlink" title="四、其他奇怪的问题"></a>四、其他奇怪的问题</h3><h4 id="1、函数传参"><a href="#1、函数传参" class="headerlink" title="1、函数传参"></a>1、函数传参</h4><p>函数传参传对象的时候，是个拷贝值，跟原始的对象不一致，所以在修改某个参数的状态时，最好用原始值修改，示例：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in items&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">rb-button</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:type</span>=<span class="string">&quot;item.isQuot ? &#x27;error&#x27; : &#x27;primary&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:styles</span>=<span class="string">&quot;quotStyle&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">tap</span>=<span class="string">&quot;quot(item,index)&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span>&#123;&#123; item.isQuot ? &#x27;移除&#x27; : &#x27;引用&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">rb-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">quot</span>(<span class="params">item, i</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(item === <span class="variable language_">this</span>.<span class="property">courseList</span>[i]) <span class="comment">// false</span></span><br><span class="line">  item.<span class="property">isQuot</span> = !item.<span class="property">isQuot</span> <span class="comment">//无效</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">courseList</span>[i]) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">courseList</span>[i].<span class="property">isQuot</span> = !<span class="variable language_">this</span>.<span class="property">courseList</span>[i].<span class="property">isQuot</span> <span class="comment">// 有效</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2、日期转时间戳的正确姿势"><a href="#2、日期转时间戳的正确姿势" class="headerlink" title="2、日期转时间戳的正确姿势"></a>2、日期转时间戳的正确姿势</h4><p>小程序的日期转时间戳不支持 2020-10-12 这种格式，需要转为成 2020&#x2F;10&#x2F;12 这样才能正常的解析，所以在日期转时间戳的时候得这么写：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;2020-10-12&#x27;</span></span><br><span class="line"><span class="keyword">const</span> newDateStr = str.<span class="title function_">replace</span>(<span class="regexp">/\-/g</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(newDateStr)</span><br></pre></td></tr></table></figure><h4 id="3、属性值和文本"><a href="#3、属性值和文本" class="headerlink" title="3、属性值和文本"></a>3、属性值和文本</h4><p>(1) 属性不支持三元表达式</p><p>(2) 文本数据支持三元表达式但是不支持函数，可以通过 wxs 扩展</p><h4 id="4、button-去不掉-border-怎么办"><a href="#4、button-去不掉-border-怎么办" class="headerlink" title="4、button 去不掉 border 怎么办"></a>4、button 去不掉 border 怎么办</h4><p>有一个 button,控制台也没看到有 border 设置，但就是一直存在，设置了 border:none 也没用，查了下资料发现，这是小程序自己在 button::after 里面加了个 border 设置，去掉即可</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 跨端方案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue 单元测试</title>
      <link href="/vue-test-unit/"/>
      <url>/vue-test-unit/</url>
      
        <content type="html"><![CDATA[<h3 id="一、Vue-cli-安装测试模块"><a href="#一、Vue-cli-安装测试模块" class="headerlink" title="一、Vue-cli 安装测试模块"></a>一、Vue-cli 安装测试模块</h3><p>1、安装相关依赖</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install --save-dev @vue/test-utils @vue/cli-plugin-unit-jest</span><br></pre></td></tr></table></figure><p>2、根目录创建 jest.config.js 文件并进行基础配置</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 显示每一个测试的结果</span></span><br><span class="line">  <span class="attr">verbose</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// support the same @ -&gt; src alias mapping in source code</span></span><br><span class="line">  <span class="attr">moduleNameMapper</span>: &#123;</span><br><span class="line">    <span class="string">&quot;^@/(.*)$&quot;</span>: <span class="string">&quot;&lt;rootDir&gt;/src/$1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">moduleFileExtensions</span>: [</span><br><span class="line">    <span class="string">&quot;js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;json&quot;</span>,</span><br><span class="line">    <span class="comment">// tell Jest to handle `*.vue` files</span></span><br><span class="line">    <span class="string">&quot;vue&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 测试覆盖率相关</span></span><br><span class="line">  <span class="attr">collectCoverage</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">coverageReporters</span>: [<span class="string">&quot;html&quot;</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>3、支持并配置 Babel </p><p>(1) 安装相关依赖</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install --save-dev @vue/cli-plugin-babel</span><br></pre></td></tr></table></figure><p>(2) jest.config.js 添加以下配置</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">preset<span class="punctuation">:</span> <span class="string">&quot;@vue/cli-plugin-unit-jest&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>(3) babel.config.js 添加以下配置 </p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">presets<span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@vue/cli-plugin-babel/preset&quot;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><h3 id="二、测试可用性"><a href="#二、测试可用性" class="headerlink" title="二、测试可用性"></a>二、测试可用性</h3><p>根目录创建 tests&#x2F;unit&#x2F;example.spec.js, 随手一些段 jest 测试代码</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./test&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&quot;test sum&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">1</span>)).<span class="title function_">toBe</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>创建 tests&#x2F;unit&#x2F;test.js 文件</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">sum</span> = (<span class="params">a, b</span>) =&gt; a + b;</span><br></pre></td></tr></table></figure><p>package.json script 加一个脚本配置: <code>&quot;test:unit&quot;: &quot;vue-cli-service test:unit&quot;</code></p><p>然后执行: <code>yarn test:unit</code></p><p>就可以看到控制台输出如下字符，说明测试可以正常运行</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">PASS  tests/example.spec.js</span><br><span class="line">✓ <span class="built_in">test</span> <span class="built_in">sum</span> (1ms)</span><br></pre></td></tr></table></figure><h3 id="三、测试覆盖率"><a href="#三、测试覆盖率" class="headerlink" title="三、测试覆盖率"></a>三、测试覆盖率</h3><p>1、配置</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  collectCoverage<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 报告形式</span></span><br><span class="line">  coverageReporters<span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;html&quot;</span><span class="punctuation">,</span> <span class="string">&quot;text-summary&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">//需要测试覆盖率的文件路径</span></span><br><span class="line">  collectCoverageFrom<span class="punctuation">:</span> <span class="punctuation">[</span> </span><br><span class="line">    <span class="string">&quot;src/**/*.&#123;js,vue&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;!src/App.vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;!src/main.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;!src/router.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;!src/plugin/*.&#123;js,ts,vue&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;!src/store.js&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 指定测试最低覆盖率</span></span><br><span class="line"><span class="comment">   * 一般由开发人员商定，项目复杂程序越高，覆盖率指数越低</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  coverageThreshold<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    global<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      branches<span class="punctuation">:</span> <span class="number">80</span><span class="punctuation">,</span></span><br><span class="line">      functions<span class="punctuation">:</span> <span class="number">80</span><span class="punctuation">,</span></span><br><span class="line">      lines<span class="punctuation">:</span> <span class="number">80</span><span class="punctuation">,</span></span><br><span class="line">      statements<span class="punctuation">:</span> <span class="number">80</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>2、报告中的几个指标说明</p><p>(1) Statements: 语句覆盖率</p><p>(2) Branches: 选择分支覆盖率</p><p>(3) Functions: 函数覆盖率</p><p>(4) Lines: 行覆盖率</p><p>3、tips</p><p>静态组件是不会被输出到覆盖率报告的(没有操作方法的组件)</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代码质量 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从浏览器地址栏输入 URL 到界面被渲染出来看前端知识</title>
      <link href="/what-happens-from-url-to-display/"/>
      <url>/what-happens-from-url-to-display/</url>
      
        <content type="html"><![CDATA[<p>经常会有各种文章啥的都有提到从浏览器地址栏输入 URL 到浏览器渲染出页面的过程是怎样的。</p><p>之前我的认识是：DNS 解析，请求静态资源，渲染页面。</p><p>然而，事实上我还是太不专业了，看到的都只是一些表象，从表象往专业看，其实这里蕴含了多个方向的前端知识，下面就来谈谈个人的一些拙见。</p><h3 id="一、从输入-URL-到-DNS-解析"><a href="#一、从输入-URL-到-DNS-解析" class="headerlink" title="一、从输入 URL 到 DNS 解析"></a>一、从输入 URL 到 DNS 解析</h3><p>浏览器每开一个窗口，就会新建一个进程，这个可以打开 chrome 的 task manager 或者 win 的任务管理器自行验证。在浏览器地址栏输入一个网址，比如 <a href="https://canace.site:8080/a?name=b">https://canace.site:8080/a?name=b</a>, 回车, 浏览器会去解析这个 URL，这个例子解析出来的结构可能是这样的</p><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line"><span class="params">protocol:</span> <span class="string">&quot;https:&quot;</span></span><br><span class="line"><span class="params">host:</span> <span class="string">&quot;canace.site&quot;</span></span><br><span class="line"><span class="params">port:</span> <span class="string">&quot;8080&quot;</span></span><br><span class="line"><span class="params">path:</span> <span class="string">&quot;/a&quot;</span></span><br><span class="line"><span class="params">query:</span> &#123;<span class="params">name:</span> a&#125;</span><br></pre></td></tr></table></figure><p>拿到 URL 的解析之后，浏览器内核进程根据 url 解析出的协议和域名，开一个网络请求线程。</p><h4 id="DNS-解析"><a href="#DNS-解析" class="headerlink" title="DNS 解析"></a>DNS 解析</h4><p>完成以上步骤后，通过 DNS 查询去找出”canace.site”对应的 ip 地址, DNS 的查找顺序一般是: 浏览器缓存(chrome:&#x2F;&#x2F;net-internals&#x2F;#DNS) &#x3D;&gt; 操作系统缓存 &#x3D;&gt; 本地host文件 -&gt; 路由器缓存 &#x3D;&gt; ISP(网络运营商，比如电信) DNS缓存 &#x3D;&gt; 顶级DNS服务器&#x2F;根DNS服务器, 可以看出 DNS 寻址还是会花点时间的，所以在一个页面中还是用少一点域名比较好。</p><p>这里有个比较有意思的应用,就是有的时候手机上能用到 wifi，但是电脑不行，网上的教程一般是建议改 DNS 为: 114.114.114.114 或者 8.8.8.8，114.114.114.114 这个地址是国内移动、电信和联通通用的DNS,8.8.8.8 是谷歌提供的全球通用的 DNS,修改本地 DNS 为这两个地址，对于使用 DNS 引导内容分发的网站，解析成功率相对来说更高, 而且速度相对快且稳定。</p><p>既然 DNS 可以被修改，那么必然会存在安全隐患，这里就要讲到 DNS 劫持了，这里需要思考 DNS 劫持是什么,DNS 劫持是怎么实现的,DNS 劫持有哪几种等，下面来理一下:</p><p><strong>DNS 劫持是什么</strong></p><p>DNS 劫持即通过某种技术手段，篡改正确域名和IP地址的映射关系，使得域名映射到了错误的IP地址，因此可以认为DNS劫持是一种DNS重定向攻击</p><p><strong>DNS 劫持的分类</strong></p><p>按照寻址路径，DNS 劫持可以分为以下几类: </p><p><strong>(1)本地DNS劫持</strong></p><ul><li><p>黑客通过木马病毒或者恶意程序入侵电脑，串改 DNS 配置(hosts 文件, DNS 服务器地址或者 DNS 缓存等)</p></li><li><p>黑客利用路由器漏洞或者破解路由器管理账号入侵路由器并篡改 DNS 配置</p></li><li><p>一些企业代理设备针对企业内部场景对特定的域名做 DNS 劫持并解析为指定的结果</p></li></ul><p><strong>(2)DNS解析路径劫持</strong></p><p>发生在客户端和服务端网络通信阶段</p><ul><li><p>DNS 请求转发, 通过技术手段(中间盒子，软件等)将DNS流量重定向到其他DNS服务器</p></li><li><p>DNS 请求复制, 利用分光等设备将DNS查询复制到网络设备，并先于正常应答返回DNS劫持的结果</p></li><li><p>DNS 请求代答, 网络设备或者软件直接代替DNS服务器对DNS查询进行应答</p></li></ul><p><strong>(3)篡改DNS服务器记录</strong></p><p>黑客非法入侵DNS服务器记录管理账号，直接修改DNS记录的行为</p><p>上面提到了进程和线程，就顺带说一下这两个经常被搞混的难兄难弟。</p><h4 id="进程-VS-线程"><a href="#进程-VS-线程" class="headerlink" title="进程 VS 线程"></a>进程 VS 线程</h4><p>(1) 进程是 cpu 资源分配的最小单位，系统会为每一个进程分配一定的内存</p><p>(2) 进程之间相互独立</p><p>(3) 线程是 cpu 调度的最小单位</p><p>(4) 一个进程由一个或多个线程组成</p><p>(5) 同一进程下的各个线程之间共享程序的内存空间（包括代码段、数据集、堆等）</p><h4 id="浏览器进程-线程模型"><a href="#浏览器进程-线程模型" class="headerlink" title="浏览器进程&#x2F;线程模型"></a>浏览器进程&#x2F;线程模型</h4><p>浏览器是多进程的，每打开一个标签页会创建一个新的进程(有时会进行进程合并)</p><p>浏览器的主要进程包括以下几种:</p><p>(1) <strong>Browser进程</strong>, 浏览器的主进程（负责协调、主控），只有一个, Browser进程的作用有以下几个:</p><ul><li><p>负责浏览器界面显示，与用户交互。如前进，后退等</p></li><li><p>负责各个页面的管理，创建和销毁其他进程</p></li><li><p>将Renderer进程得到的内存中的Bitmap，绘制到用户界面上</p></li><li><p>网络资源的管理，下载等</p></li></ul><p>Browser进程的主要线程有以下几种:</p><ul><li><p>UI线程: 控制浏览器上的按钮及输入框</p></li><li><p>网络线程: 处理网络请求，从网上获取数据</p></li><li><p>storage线程: 控制文件等的访问</p></li></ul><p>(2) <strong>浏览器渲染进程, 亦被称为浏览器内核进程, Renderer进程,</strong> 内部是多线程的, Renderer 进程默认每个 Tab 页面一个进程，互不影响,主要用于页面渲染，脚本执行，事件处理等，Renderer 进程包括的主要线程如下:</p><p>(3) <strong>GUI渲染线程</strong></p><ul><li><p>负责渲染浏览器界面，解析 HTML，CSS，构建 DOM 树和 RenderObject 树，布局和绘制等。</p></li><li><p>当界面需要重绘（Repaint）或由于某种操作引发回流(reflow)时，该线程就会执行</p></li><li><p>GUI 渲染线程与 JS 引擎线程是互斥的，当 JS 引擎执行时 GUI 线程会被挂起（相当于被冻结了），GUI 更新会被保存在一个队列中等到JS 引擎空闲时立即被执行。</p></li></ul><p>(4) <strong>JS 引擎线程</strong></p><ul><li><p>也称为JS内核，负责处理 Javascript 脚本程序（例如V8引擎）</p></li><li><p>JS 引擎线程负责解析 Javascript 脚本，运行代码</p></li><li><p>JS 引擎一直等待着任务队列中任务的到来，然后加以处理，一个Tab页（renderer进程）中无论什么时候都只有一个 JS 线程在运行JS程序</p></li><li><p>GUI 渲染线程与 JS 引擎线程是互斥的，所以如果JS执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞。<br>需要大量计算的时候，可以创建一个 Web Worker，向浏览器申请多开一个线程, 专门用于计算</p></li></ul><p>(5) <strong>事件触发线程</strong></p><ul><li><p>归属于浏览器而不是 JS 引擎，用来控制事件循环</p></li><li><p>当 JS 引擎执行代码块如setTimeOut时（也可来自浏览器内核的其他线程,如鼠标点击、AJAX异步请求等），会将对应任务添加到事件线程中</p></li><li><p>当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待 JS 引擎的处理</p></li><li><p>由于 JS 的单线程关系，所以这些待处理队列中的事件都得排队等待 JS 引擎处理（当 JS 引擎空闲时才会去执行）</p></li></ul><p>(6) <strong>定时触发器线程</strong></p><ul><li><p>传说中的 setInterval 与 setTimeout 所在线程</p></li><li><p>浏览器定时计数器并不是由 JavaScript 引擎计数的,（因为 JavaScript 引擎是单线程的, 如果处于阻塞线程状态就会影响记计时的准确）因此通过单独线程来计时并触发定时（计时完毕后，添加到事件队列中，等待 JS 引擎空闲后执行）</p></li><li><p>W3C 在 HTML 标准中规定，规定要求 setTimeout 中低于 4ms 的时间间隔算为 4ms</p></li></ul><p>(7) <strong>异步 http 请求线程</strong></p><ul><li><p>XMLHttpRequest 在连接后是通过浏览器新开一个网络线程请求</p></li><li><p>将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中。再由 JavaScript 引擎执行。</p></li></ul><p>(8) <strong>Subframe 进程</strong></p><p>iframe 的渲染 – Site Isolation, Site Isolation 机制从 Chrome 67 开始默认启用，这种机制允许在同一个 Tab 下的跨站 iframe 使用单独的进程来渲染</p><h3 id="二、网络连接建立到获取内容断开"><a href="#二、网络连接建立到获取内容断开" class="headerlink" title="二、网络连接建立到获取内容断开"></a>二、网络连接建立到获取内容断开</h3><p>DNS 解析完成之后，会向对应 ip 的服务器发起请求，从发起请求到请求完毕经历了三次握手、客户端与服务端 http 交互以及四次挥手，下面来具体讲讲这三个阶段都发生了什么</p><h4 id="1、三次握手建立连接"><a href="#1、三次握手建立连接" class="headerlink" title="1、三次握手建立连接"></a>1、三次握手建立连接</h4><p><strong>(1) 三次握手的作用</strong></p><ul><li><p>明确客户端和服务端的收、发能力是否正常</p></li><li><p>指定服务端和客户端的初始化序列号为后面的可靠性传送做准备</p></li></ul><p><strong>(2) 三次握手的过程</strong></p><ul><li><p>客户端给服务端发一个 SYN 报文，并指明客户端的初始化序列号 ISN(c)。此时客户端处于 SYN_SEND 状态</p></li><li><p>服务端发送自己的 SYN 报文作为应答，同样指明自己的ISN(s)。为了确认客户端的 SYN，将 ISN(c)+1 作为 ACK 数值。这样，每发送一个SYN，序列号就会加 1, 如果有丢失的情况，则会重传, 此时服务器处于 SYN_RCVD 的状态</p></li><li><p>为了确认服务器端的 SYN，客户端将 ISN(s)+1 作为返回的 ACK 数值, 此时客户端处于 ESTABLISHED 状态。服务器收到 ACK 报文之后，也处于 ESTABLISHED 状态，双方建立起连接成功</p></li></ul><p><strong>(3) SYN 攻击</strong></p><p>服务器端的资源分配是在二次握手时分配的，而客户端的资源是在完成三次握手时分配的，所以服务器容易受到 SYN 洪泛攻击。</p><p>SYN 攻击就是 Client 在短时间内伪造大量不存在的 IP 地址，并向 Server 不断地发送 SYN 包，Server 则回复确认包，并等待 Client确认，由于源地址不存在，因此 Server 需要不断重发直至超时，这些伪造的 SYN 包将长时间占用未连接队列，导致正常的 SYN 请求因为队列满而被丢弃，从而引起网络拥塞甚至系统瘫痪。SYN 攻击是一种典型的 DoS&#x2F;DDoS 攻击。</p><h4 id="2、客户端与服务端-http-交互"><a href="#2、客户端与服务端-http-交互" class="headerlink" title="2、客户端与服务端 http 交互"></a>2、客户端与服务端 http 交互</h4><p>前后端的交互用的一般是 http 协议, 经常会涉及到的内容包括 http 报文头部信息, 状态码, 缓存, 跨域等</p><p><strong>(1) http 报文结构</strong></p><p>随便打开一个网页查看网络请求，都会发现有三个一样的字段: General、Response Header 以及 Request Header, 在网页调试中，我们也经常会去看这三个地方</p><p><strong>General(通用头部)</strong></p><p>在获取网页内容时，会把网页文件的地址和请求方法放到 http 报文头部,请求完之后，控制台一般会有以下的一些信息</p><figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line">Request Url: 请求的web服务器地址</span><br><span class="line"></span><br><span class="line">Request <span class="keyword">Method</span>: 请求方式</span><br><span class="line">（Get、POST、OPTIONS、PUT、HEAD、DELETE、CONNECT、TRACE）</span><br><span class="line"></span><br><span class="line">Status Code: 请求的返回状态码，如<span class="number">200</span>代表成功</span><br><span class="line"></span><br><span class="line">Remote Address: 请求的远程服务器地址（会转为IP）</span><br></pre></td></tr></table></figure><p>上面是对每个字段的描述，其中 method 按照协议可以分为</p><ul><li><p>HTTP1.0 method: GET, POST 和 HEAD</p></li><li><p>HTTP1.1 method: GET、POST、HEAD、OPTIONS, PUT, DELETE, TRACE 和 CONNECT</p></li></ul><p>常用状态码分类:</p><ul><li><p>1xx——指示信息，表示请求已接收，继续处理</p></li><li><p>2xx——成功，表示请求已被成功接收、理解、接受</p></li><li><p>3xx——重定向，要完成请求必须进行更进一步的操作</p></li><li><p>4xx——客户端错误，请求有语法错误或请求无法实现</p></li><li><p>5xx——服务器端错误，服务器未能实现合法的请求</p></li></ul><p>常用状态码:</p><ul><li><p>200——表明该请求被成功地完成，所请求的资源发送回客户端</p></li><li><p>304——自从上次请求后，请求的网页未修改过，请客户端使用本地缓存</p></li><li><p>400——客户端请求有错（譬如可以是安全模块拦截）</p></li><li><p>401——请求未经授权</p></li><li><p>403——禁止访问（譬如可以是未登录时禁止）</p></li><li><p>404——资源未找到</p></li><li><p>500——服务器内部错误</p></li><li><p>503——服务不可用</p></li></ul><p><strong>Request Header(请求头部)</strong></p><p>常用请求头部</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">Accept: 接收类型，表示浏览器支持的MIME类型</span><br><span class="line">（对标服务端返回的Content-Type）</span><br><span class="line"></span><br><span class="line">Accept-Encoding：浏览器支持的压缩类型,如gzip等,超出类型不能接收</span><br><span class="line"></span><br><span class="line">Content-Type：客户端发送出去实体内容的类型</span><br><span class="line"></span><br><span class="line">缓存相关</span><br><span class="line">Cache-Control: 指定请求和响应遵循的缓存机制，如no-cache</span><br><span class="line"><span class="function"><span class="title">If-Modified-Since</span><span class="params">(http1.<span class="number">0</span>)</span></span>：对应服务端的Last-Modified，用来匹配看文件是否变动，只能精确到<span class="number">1s</span>之内</span><br><span class="line"><span class="function"><span class="title">Expires</span><span class="params">(http1.<span class="number">0</span>)</span></span>：缓存控制，在这个时间内不会请求，直接使用缓存，而且是服务端时间</span><br><span class="line"><span class="function"><span class="title">Max-age</span><span class="params">(http1.<span class="number">1</span>)</span></span>：代表资源在本地缓存多少秒，有效时间内不会请求，而是使用缓存</span><br><span class="line"><span class="function"><span class="title">If-None-Match</span><span class="params">(http1.<span class="number">1</span>)</span></span>：对应服务端的ETag，用来匹配文件内容是否改变（非常精确）</span><br><span class="line"></span><br><span class="line">Cookie: 有cookie并且同域访问时会自动带上</span><br><span class="line"></span><br><span class="line">Connection: 当浏览器与服务器通信时对于长连接如何进行处理,如keep-alive</span><br><span class="line"></span><br><span class="line">Host：请求的服务器URL</span><br><span class="line"></span><br><span class="line">Origin：最初的请求是从哪里发起的（只会精确到端口）,Origin比Referer更尊重隐私</span><br><span class="line"></span><br><span class="line">Referer：该页面的来源<span class="built_in">URL</span>(适用于所有类型的请求，会精确到详细页面地址，csrf拦截常用到这个字段)</span><br><span class="line"></span><br><span class="line">User-Agent：用户客户端的一些必要信息，如UA头部等</span><br></pre></td></tr></table></figure><p><strong>Response Header(响应头部)</strong></p><p>常用响应头部</p><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">Access</span><span class="operator">-</span><span class="built_in">Control</span><span class="operator">-</span><span class="variable">Allow</span><span class="operator">-</span><span class="built_in">Headers</span><span class="operator">:</span> 服务器端允许的请求<span class="built_in">Headers</span></span><br><span class="line"><span class="variable">Access</span><span class="operator">-</span><span class="built_in">Control</span><span class="operator">-</span><span class="variable">Allow</span><span class="operator">-</span><span class="variable">Methods</span><span class="operator">:</span> 服务器端允许的请求方法</span><br><span class="line"><span class="variable">Access</span><span class="operator">-</span><span class="built_in">Control</span><span class="operator">-</span><span class="variable">Allow</span><span class="operator">-</span><span class="variable">Origin</span><span class="operator">:</span> 服务器端允许的请求<span class="variable">Origin</span>头部（譬如为<span class="operator">*</span>）</span><br><span class="line"></span><br><span class="line"><span class="variable">Content</span><span class="operator">-</span><span class="variable">Type</span>：服务端返回的实体内容的类型</span><br><span class="line"></span><br><span class="line"><span class="built_in">Date</span>：数据从服务器发送的时间</span><br><span class="line"></span><br><span class="line">缓存相关</span><br><span class="line"><span class="variable">Cache</span><span class="operator">-</span><span class="built_in">Control</span>：告诉浏览器或其他客户，什么环境可以安全的缓存文档</span><br><span class="line"><span class="built_in">Last</span><span class="operator">-</span><span class="variable">Modified</span>：请求资源的最后修改时间</span><br><span class="line"><span class="variable">Expires</span>：应该在什么时候认为文档已经过期<span class="operator">,</span>从而不再缓存它</span><br><span class="line"><span class="built_in">Max</span><span class="operator">-</span><span class="variable">age</span>：客户端的本地资源应该缓存多少秒，开启了<span class="variable">Cache</span><span class="operator">-</span><span class="built_in">Control</span>后有效</span><br><span class="line"><span class="variable">ETag</span>：请求变量的实体标签的当前值</span><br><span class="line"></span><br><span class="line"><span class="built_in">Set</span><span class="operator">-</span><span class="variable">Cookie</span>：设置和页面关联的<span class="variable">cookie</span>，服务器通过这个头部把<span class="variable">cookie</span>传给客户端</span><br><span class="line"></span><br><span class="line"><span class="variable">Keep</span><span class="operator">-</span><span class="variable">Alive</span>：如果客户端有<span class="variable">keep</span><span class="operator">-</span><span class="variable">alive</span>，服务端也会有响应（如<span class="variable">timeout</span><span class="operator">=</span><span class="number">38</span>）</span><br><span class="line"></span><br><span class="line"><span class="variable">Server</span>：服务器的一些相关信息</span><br></pre></td></tr></table></figure><p>跨域请求时，请求头部的Origin要匹配响应头部的Access-Control-Allow-Origin，否则会报跨域错误</p><p>在使用缓存时，请求头部的If-Modified-Since、If-None-Match分别和响应头部的Last-Modified、ETag对应</p><p>写的有点累，得空再写了</p><p>未完待续……</p><p>参考文献:</p><p><a href="https://zhuanlan.zhihu.com/p/86538629">聊一聊DNS劫持那些事</a></p><p><a href="https://dailc.github.io/2018/03/12/whenyouenteraurl.html">从输入URL到页面加载的过程？如何由一道题完善自己的前端知识体系！</a></p><p><a href="https://zhuanlan.zhihu.com/p/47407398">图解浏览器的基本工作原理</a></p><p><a href="https://blog.csdn.net/zhezhebie/article/details/79191776">常用dns114.114.114.114与8.8.8.8的区别</a></p><p><a href="https://zhuanlan.zhihu.com/p/53374516">“三次握手，四次挥手”你真的懂吗？</a></p><p><a href="https://juejin.im/post/6844903958624878606">面试官，不要再问我三次握手和四次挥手</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git 文档</title>
      <link href="/git-common-commands/"/>
      <url>/git-common-commands/</url>
      
        <content type="html"><![CDATA[<h3 id="一、配置"><a href="#一、配置" class="headerlink" title="一、配置"></a>一、配置</h3><h4 id="1、编辑配置文件"><a href="#1、编辑配置文件" class="headerlink" title="1、编辑配置文件"></a>1、编辑配置文件</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim ~/.gitconfig</span><br></pre></td></tr></table></figure><h4 id="2、配置操作"><a href="#2、配置操作" class="headerlink" title="2、配置操作"></a>2、配置操作</h4><p>(1) 设置</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config &lt;配置信息名&gt;</span><br><span class="line">git config --global user.name &lt;name&gt;</span><br><span class="line">git config --global user.email &lt;email&gt;</span><br></pre></td></tr></table></figure><p>(2) 查看</p><p><code>git config -l</code></p><p>(3) 删除</p><p><code>git config unset &lt;配置信息名&gt;</code></p><h3 id="二、分支操作"><a href="#二、分支操作" class="headerlink" title="二、分支操作"></a>二、分支操作</h3><h4 id="1、创建分支"><a href="#1、创建分支" class="headerlink" title="1、创建分支"></a>1、创建分支</h4><p>(1) 创建本地分支</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git checkout -b &lt;branch&gt;</span><br></pre></td></tr></table></figure><p>(2) 创建远程分支</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">`git push origin &lt;branch&gt;:&lt;branch&gt;`</span><br></pre></td></tr></table></figure><h4 id="2、删除分支"><a href="#2、删除分支" class="headerlink" title="2、删除分支"></a>2、删除分支</h4><p>(1) 删除本地分支</p><p><code>git branch -d &lt;BranchName&gt;</code></p><p>(2) 删除远程分支</p><p><code>git push origin --delete &lt;BranchName&gt;</code></p><p>(3) 删除已被远程分支删除的分支</p><p><code>git remote prune origin</code></p><h4 id="3、分支版本管理"><a href="#3、分支版本管理" class="headerlink" title="3、分支版本管理"></a>3、分支版本管理</h4><p>(1) 版本回退</p><ul><li>本地版本回退：<code>git reset [--hard] &lt;head&gt;</code> </li><li>远程版本回退：<code>git reset [--hard] &lt;head&gt;</code> &#x3D;&gt; <code>git push -f</code></li></ul><p>(2) 远程分支打版本标签</p><p><code>git tag -a &lt;版本号&gt; -m &lt;描述信息&gt;</code> &#x3D;&gt; <code>git push origin &lt;版本号&gt;</code></p><p>(3) 删除 tag</p><ul><li>本地：<code>git tag -d tagname</code></li><li>远程: <code>git push -d origin tagname</code></li></ul><h4 id="4、分支推送"><a href="#4、分支推送" class="headerlink" title="4、分支推送"></a>4、分支推送</h4><p>(1) 新的分支推送到远程并跟踪：<code>git push --set-upstream origin &lt;branch&gt;</code></p><p>(2) 更新commit信息: <code>git rebase -i HEAD~&lt;n&gt;</code>&#x3D;&gt;要修改的pick改为’reword’，保存&#x3D;&gt;更新描述信息，确认更新的文件信息是否有误，无误就<code>git rebase --continue</code></p><h4 id="5、分支暂存"><a href="#5、分支暂存" class="headerlink" title="5、分支暂存"></a>5、分支暂存</h4><p><code>git stash -u -&gt; git stash pop</code></p><h4 id="6、跟踪远程分支"><a href="#6、跟踪远程分支" class="headerlink" title="6、跟踪远程分支"></a>6、跟踪远程分支</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git branch --set-upstream-to=origin/develop develop</span><br><span class="line">git branch --set-upstream-to=origin/master master</span><br></pre></td></tr></table></figure><h4 id="7、日志查看"><a href="#7、日志查看" class="headerlink" title="7、日志查看"></a>7、日志查看</h4><p>(1) 查看 log 图：</p><p><code>git log --oneline --graph --decorate --all</code></p><p>(2) 查看所有成员的提交总数</p><p><code>git shortlog -sn</code></p><p>(3) 查看所有成员的未合并提交总数</p><p><code>git shortlog -sn --no-merges</code></p><p>(4) 查看所有分支的最新提交</p><p><code>git  branch -v</code></p><p>(5) 查看所有分支的最新提交及对应的远程分支</p><p><code>git branch -vv</code></p><p>(6) 查询某个人某段时间的commit</p><p><code>git log --author=canace --since=&quot;2023-08-01&quot;/until=&quot;yesterday&quot;</code></p><h3 id="三、分支合并"><a href="#三、分支合并" class="headerlink" title="三、分支合并"></a>三、分支合并</h3><p>1、普通的合并: <code>git merge &lt;branch&gt; --no-ff</code></p><p>2、合并某个commit: <code>git cherry-pick &lt;commit hash&gt;</code></p><h3 id="三、远程仓库操作"><a href="#三、远程仓库操作" class="headerlink" title="三、远程仓库操作"></a>三、远程仓库操作</h3><p>(1) 改变 git 远程仓库</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git remote set-url origin git@gitlab.dreamdev.cn:ebag/live-experiment.git</span><br><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p>(2) 删除远程仓库文件或文件夹</p><p><code>git rm -r --cached file/folder name</code> &#x3D;&gt; <code>git commit</code> &#x3D;&gt; <code>git push</code></p><p>(3) fork 远程的上游仓库</p><ul><li><p>查看远程分支状态：<code>git remote -v</code></p></li><li><p>确定一个将被同步给 fork 远程的上游仓库：<code>git remote add upstream &lt;origin.git&gt;</code></p></li><li><p>再次查看状态确认是否配置成功：<code>git remote -v</code></p></li><li><p>从上游仓库 fetch 分支和提交点，提交给本地 master： <code>git fetch upstream</code></p></li><li><p>把 upstream&#x2F;master 分支合并到本地 master 上：<code>git merge upstream/master</code></p></li></ul><h3 id="四、初始化项目"><a href="#四、初始化项目" class="headerlink" title="四、初始化项目"></a>四、初始化项目</h3><h4 id="1、-Create-a-new-repository"><a href="#1、-Create-a-new-repository" class="headerlink" title="1、 Create a new repository"></a>1、 Create a new repository</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone &lt;repositry&gt;</span><br><span class="line">cd &lt;folder&gt;</span><br><span class="line">touch README.md</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;add README&quot;</span><br></pre></td></tr></table></figure><h4 id="2、-Push-an-existing-folder"><a href="#2、-Push-an-existing-folder" class="headerlink" title="2、 Push an existing folder"></a>2、 Push an existing folder</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd existing_folder</span><br><span class="line">git init</span><br><span class="line">git remote add origin &lt;repositry&gt;</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;Initial commit&quot;</span><br></pre></td></tr></table></figure><h4 id="3、-Push-an-existing-Git-repository"><a href="#3、-Push-an-existing-Git-repository" class="headerlink" title="3、 Push an existing Git repository"></a>3、 Push an existing Git repository</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd existing_repo</span><br><span class="line">git remote rename origin old-origin</span><br><span class="line">git remote add origin &lt;repositry&gt;</span><br></pre></td></tr></table></figure><h3 id="五、提交代码模板"><a href="#五、提交代码模板" class="headerlink" title="五、提交代码模板"></a>五、提交代码模板</h3><p><code>git status</code> &#x3D;&gt; <code>git add &lt;文件名&gt;</code> &#x3D;&gt; <code>git commit -m &lt;描述&gt;</code> &#x3D;&gt; <code>git pull origin &lt;远程主机名&gt; :&lt;远程分支名&gt;</code> &#x3D;&gt; <code>git push &lt;分支&gt;</code></p><h3 id="六、一些-tips"><a href="#六、一些-tips" class="headerlink" title="六、一些 tips"></a>六、一些 tips</h3><h4 id="1、推送不了代码可能的原因："><a href="#1、推送不了代码可能的原因：" class="headerlink" title="1、推送不了代码可能的原因："></a>1、推送不了代码可能的原因：</h4><p>远程仓库已更新，本地代码没有及时更新，git pull 更新一下代码试试，不行就强推（不建议）</p><h4 id="2、ping-不同-github-com-报-403"><a href="#2、ping-不同-github-com-报-403" class="headerlink" title="2、ping 不同 github.com 报 403"></a>2、ping 不同 github.com 报 403</h4><p>可能是设置了代理，<code>shift+command+G</code> &#x3D;&gt; <code>/private/etc</code> &#x3D;&gt; 复制 hosts 文件，把里面关于 github 的设置去掉，保存，替换回去 &#x3D;&gt; 重启浏览器或命令界面，可以正常 ping 了</p><h4 id="3、不小心上传了大文件，一直存在记录解决方法"><a href="#3、不小心上传了大文件，一直存在记录解决方法" class="headerlink" title="3、不小心上传了大文件，一直存在记录解决方法"></a>3、不小心上传了大文件，一直存在记录解决方法</h4><p>(1) 找出历史提交文件中占用空间大的文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git rev-list --objects --all | grep &quot;$(git verify-pack -v .git/objects/pack/*.idx | sort -k </span><br><span class="line">3 -n | tail -5 | awk &#x27;&#123;print$1&#125;&#x27;)&quot;</span><br></pre></td></tr></table></figure><p>(2) 重写commit，删除大文件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git filter-branch --force --index-filter &#x27;git rm -rf --cached --ignore-unmatch &lt;file-name&gt;&#x27; --prune-empty --tag-name-filter cat -- --all</span><br></pre></td></tr></table></figure><p>(3) 强制 push</p><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">push</span> -f</span><br></pre></td></tr></table></figure><p>(4) 清理和回收空间</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rm -rf .git/refs/original/</span><br><span class="line">git reflog expire --expire=now --all</span><br><span class="line">git gc --prune=now</span><br></pre></td></tr></table></figure><h4 id="4、git-大小写不敏感，修改后找不到依赖"><a href="#4、git-大小写不敏感，修改后找不到依赖" class="headerlink" title="4、git 大小写不敏感，修改后找不到依赖"></a>4、git 大小写不敏感，修改后找不到依赖</h4><p>可以使用 git mv 命令替换一下</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git mv [file] [newfile] </span><br></pre></td></tr></table></figure><h4 id="5-git-pull-报一堆-warning"><a href="#5-git-pull-报一堆-warning" class="headerlink" title="5. git pull 报一堆 warning"></a>5. git pull 报一堆 warning</h4><p>切了 zsh，每次 git  pull 就报下面的 warning，很多行，看着有点无语</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hint: Pulling without specifying how to reconcile divergent branches is</span><br><span class="line">hint: discouraged. You can squelch this message by running one of the following</span><br><span class="line">hint: commands sometime before your next pull:</span><br><span class="line">hint: </span><br><span class="line">hint:   git config pull.rebase <span class="literal">false</span>  <span class="comment"># merge (the default strategy)</span></span><br><span class="line">hint:   git config pull.rebase <span class="literal">true</span>   <span class="comment"># rebase</span></span><br><span class="line">hint:   git config pull.ff only       <span class="comment"># fast-forward only</span></span><br><span class="line">hint: </span><br><span class="line">hint: You can replace <span class="string">&quot;git config&quot;</span> with <span class="string">&quot;git config --global&quot;</span> to <span class="built_in">set</span> a default</span><br><span class="line">hint: preference <span class="keyword">for</span> all repositories. You can also pass --rebase, --no-rebase,</span><br><span class="line">hint: or --ff-only on the <span class="built_in">command</span> line to override the configured default per</span><br><span class="line">hint: invocation.</span><br></pre></td></tr></table></figure><p>原因是 git pull 每次产生一个令人迷惑的 commit，会被认为是有问题的操作，根据提示，要解决这个问题可以在 git  pull 的时候不要创建新的 commit,或者使用变基</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 局部</span></span><br><span class="line">git pull --ff-only</span><br><span class="line"><span class="comment"># 全局</span></span><br><span class="line">git config --global pull.ff only</span><br><span class="line"><span class="comment"># 变基</span></span><br><span class="line">git config pull.rebase <span class="literal">false</span>  <span class="comment"># merge (the default strategy)</span></span><br><span class="line">git config pull.rebase <span class="literal">true</span>   <span class="comment"># rebase</span></span><br></pre></td></tr></table></figure><h4 id="6-git-pull-代理问题"><a href="#6-git-pull-代理问题" class="headerlink" title="6. git pull 代理问题"></a>6. git pull 代理问题</h4><p>早上拉代码看到这个错误，一看端口号是我科学上网的端口，应该是代理问题</p><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">error: </span>RPC failed; curl 7 Failed to connect to 127.0.0.1 port 1080: Connection refused</span><br></pre></td></tr></table></figure><p>解决方法，取消全局代理 <code>unset http_proxy</code></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript基础 —— 基本数据类型与引用类型的异同</title>
      <link href="/javascript-basics-primitive-vs-reference-types/"/>
      <url>/javascript-basics-primitive-vs-reference-types/</url>
      
        <content type="html"><![CDATA[<h3 id="一、不同点"><a href="#一、不同点" class="headerlink" title="一、不同点"></a>一、不同点</h3><h4 id="1、保存方式"><a href="#1、保存方式" class="headerlink" title="1、保存方式"></a>1、保存方式</h4><p>(1) 基本数据类型值保存在变量中，操作的是实际值，不能直接追加属性和方法</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a.<span class="property">name</span> = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">a <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>(2) 引用类型保存在内存中，操作的是对象的引用，可以直接追加属性和方法</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="attr">name</span>:<span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line">a.<span class="property">age</span> = <span class="number">18</span></span><br><span class="line">a <span class="comment">// &#123;name: &quot;a&quot;, age: 18&#125;</span></span><br></pre></td></tr></table></figure><h4 id="2、复制变量的方式"><a href="#2、复制变量的方式" class="headerlink" title="2、复制变量的方式"></a>2、复制变量的方式</h4><p>(1) 基本数据类型复制变量，实际上是把原始值的副本复制给变量，变量的改变不会影响到原始值，是深拷贝</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = a</span><br><span class="line">b = <span class="number">2</span></span><br><span class="line">a <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>(2) 引用类型复制变量，是把指针复制给变量，指针实际的指向还是原始对象的内存地址，变量的改变会影响到原始值，是浅拷贝</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = &#123;&#125;</span><br><span class="line">b = a</span><br><span class="line">b.<span class="property">name</span> = <span class="string">&#x27;b&#x27;</span></span><br><span class="line">a <span class="comment">// &#123;name: &quot;b&quot;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="二、相同点"><a href="#二、相同点" class="headerlink" title="二、相同点"></a>二、相同点</h3><p>参数的传递方式都是按值传递给局部变量</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 基础 —— 类型转换</title>
      <link href="/javascript-basics-type-conversion/"/>
      <url>/javascript-basics-type-conversion/</url>
      
        <content type="html"><![CDATA[<p>在红宝书第三版中,有说到 ECMAScript 中有 5 种简单数据类型(也称为基本数据类型):Undefined、Null、Boolean、Number 和 String。还有 1 种复杂数据类型——Object。</p><h2 id="一、显式转换"><a href="#一、显式转换" class="headerlink" title="一、显式转换"></a>一、显式转换</h2><p>JavaScript 的显式类型转换比较容易理解就是利用对应类型的类型转换函数去转换。</p><p>显式类型转换又可以分为基本数据类型之间的转换、基本数据类型转引用类型以及Object类型转基本数据类型等，下面来描述一下这几种类型转换的形式。</p><h3 id="基本数据类型之间转换的方法"><a href="#基本数据类型之间转换的方法" class="headerlink" title="基本数据类型之间转换的方法"></a>基本数据类型之间转换的方法</h3><p><strong>1. 基本数据类型转换 Boolean</strong> </p><p>Boolean 转 Boolean</p><p>直接调用 Boolean 类型转换函数不传参数，返回的是 false，这里需要注意一下</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Boolean</span>() <span class="comment">// false</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="literal">true</span>) <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="literal">false</span>)  <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>String 转 Boolean</p><p>任何非空字符串转 Boolean，都返回 true, 空字符串转 Boolean 返回 false</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Boolean</span>(<span class="string">&#x27;undefined&#x27;</span>)  <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="string">&#x27;NaN&#x27;</span>)  <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="string">&#x27;null&#x27;</span>) <span class="comment">//true</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="string">&#x27;&#x27;</span>) <span class="comment">//false</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="string">&#x27; &#x27;</span>)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>Number 转 Boolean</p><p>任何非零数字值(包括无穷大)转 Boolean 都返回 true, 0 和 NaN 转 Boolean 返回 false</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Boolean</span>(<span class="title class_">Infinity</span>) <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Boolean</span>(-<span class="title class_">Infinity</span>) <span class="comment">//true</span></span><br><span class="line"><span class="title class_">Boolean</span>(-<span class="number">1</span>) <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="number">1</span>/<span class="number">2</span>)  <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="number">0</span>)  <span class="comment">// false</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="title class_">NaN</span>)  <span class="comment">//false</span></span><br><span class="line"><span class="title class_">Boolean</span>(-<span class="number">0</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>Undefined 和 Null 转 Boolean</p><p>undefined 和 null 转 Boolean， 都返回 false</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Boolean</span>(<span class="literal">undefined</span>)  <span class="comment">// false</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="literal">null</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>总结: 基本类型布尔值为 false 的情况有以下几种: </p><ul><li><p>调用 Boolean 类型转换函数不传参</p></li><li><p>空字符串</p></li><li><p>0 和 NaN</p></li><li><p>null</p></li><li><p>undefined</p></li></ul><p><strong>2. 基本数据类型转 Number</strong></p><p>Number 类型转换函数可以转换各种类型值为数值类型，parseInt()和 parseFloat() 专门用于把字符串转换成数值</p><p>Boolean 转 Number</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Number</span>(<span class="literal">true</span>)  <span class="comment">// 1</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="literal">false</span>) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>Number 转 Number</p><p>只是简单的传入和返回</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Number</span>()  <span class="comment">// 0</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="title class_">Infinity</span>)  <span class="comment">//Infinity</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="number">0</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="title class_">NaN</span>) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><p>null 转 Number</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Number</span>(<span class="literal">null</span>)  <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>undefined 转 Number</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Number</span>(<span class="literal">undefined</span>) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><p>String 转 Number</p><p>字符串只包含数字，忽略前导 0，转换为十进制数值</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;001234&#x27;</span>)  <span class="comment">// 1234</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;-001234&#x27;</span>) <span class="comment">// -1234</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;0x12&#x27;</span>)  <span class="comment">// 18</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;Infinity&#x27;</span>)  <span class="comment">// Infinity</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;NaN&#x27;</span>) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><p>字符串包含有效浮点格式，忽略前导 0，转换为浮点数值</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;1.2333&#x27;</span>)  <span class="comment">// 1.2333</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;.2333&#x27;</span>) <span class="comment">// 0.2333</span></span><br><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;2333.&#x27;</span>) <span class="comment">// 2333</span></span><br></pre></td></tr></table></figure><p>字符串为空，返回 0</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;&#x27;</span>)  <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>除以上格式之外的字符，返回 NaN</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Number</span>(<span class="string">&#x27;123a&#x27;</span>)  <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><p>总结：基本数据类型转换为 Number 类型为 0 的情况有以下几种</p><ul><li><p>调用 Number 类型转换函数参数为空</p></li><li><p>0</p></li><li><p>空字符串</p></li><li><p>null</p></li><li><p>false</p></li></ul><p>基本数据类型转换为 Number 类型值为 NaN 的情况</p><ul><li><p>undefined</p></li><li><p>字符串中包含非数字</p></li><li><p>NaN</p></li></ul><p><strong>3. 基本数据类型转 String</strong></p><p>除 undefined 和 null 外的其他类型转 String的转换规则为：调用 toString 方法返回相应的值, null 和 undefined 没有 toString 方法，直接返回对应的字符串</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">String</span>(<span class="literal">true</span>)  <span class="comment">// true</span></span><br><span class="line"><span class="title class_">String</span>(<span class="literal">false</span>) <span class="comment">//false</span></span><br><span class="line"><span class="title class_">String</span>(<span class="number">0</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="title class_">String</span>(<span class="literal">null</span>)  <span class="comment">// null</span></span><br><span class="line"><span class="title class_">String</span>(<span class="literal">undefined</span>) <span class="comment">// undefined</span></span><br><span class="line"><span class="title class_">String</span>(<span class="title class_">NaN</span>) <span class="comment">// NaN</span></span><br><span class="line"><span class="title class_">String</span>(<span class="title class_">Infinity</span>)  <span class="comment">// Infinity</span></span><br><span class="line"><span class="title class_">String</span>()  <span class="comment">// &quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="Object-类型转基本数据类型"><a href="#Object-类型转基本数据类型" class="headerlink" title="Object 类型转基本数据类型"></a>Object 类型转基本数据类型</h3><p><strong>1. 对象转 Boolean</strong></p><p>任何对象转 Boolean，返回值都是 true</p><p><strong>2. 对象转 Number 规则</strong></p><ul><li><p>调用对象的 valueOf()方法，若结果是基本数据类型，依照基本数据类型转 Number 规则转换。</p></li><li><p>如果 valueOf() 方法返回的值不是基本数据类型或者转换的结果是 NaN，则调用对象的 toString()方法，依照基本数据类型转 Number 规则转换</p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// (&#123;a:0&#125;).valueOf() =&gt; &#123;a:0&#125; =&gt; (&#123;a:0&#125;).toString() =&gt; &quot;[object Object]&quot; </span></span><br><span class="line"><span class="comment">// =&gt; Number(&quot;[object Object]&quot;) =&gt; NaN </span></span><br><span class="line"><span class="title class_">Number</span>(&#123;<span class="attr">a</span>:<span class="number">0</span>&#125;) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><p><strong>3. 对象转 String 规则</strong></p><ul><li><p>调用对象的 toString() 方法, 若结果是基本数据类型, 依照基本数据类型转 String 规则转换</p></li><li><p>如果 toString() 方法返回的值不是基本数据类型, 则调用对象的 valueOf()方法，依照基本数据类型转 String 规则转换</p></li></ul><h2 id="二、隐式转换"><a href="#二、隐式转换" class="headerlink" title="二、隐式转换"></a>二、隐式转换</h2><p>隐式类型转换顾名思义，就是不直接调用转换函数，而发生的类型转换，主要分为以下几种: 一元操作符类型转换、二元操作符类型转换, 相等操作符类型转换以及其他操作符类型转换，下面我举例子来说明一下这几种类型转换的形式</p><h3 id="1-一元操作符类型转换"><a href="#1-一元操作符类型转换" class="headerlink" title="1. 一元操作符类型转换"></a>1. 一元操作符类型转换</h3><p>一元操作符会把操作数据类型转换为 Number 类型(规则同上)，再进行加减或者自增自减</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">++ a  <span class="comment">// ++Number(a) =&gt; 2</span></span><br><span class="line"></span><br><span class="line">b = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">b-- <span class="comment">// Number(b)--</span></span><br><span class="line">b <span class="comment">//  0</span></span><br><span class="line"></span><br><span class="line">+<span class="string">&#x27;1&#x27;</span>  <span class="comment">// Number(&#x27;1&#x27;) =&gt; 1</span></span><br><span class="line">-<span class="string">&#x27;1&#x27;</span> <span class="comment">// -Number(&#x27;1&#x27;) =&gt; -1</span></span><br><span class="line"></span><br><span class="line">+[] <span class="comment">// [].valueOf() =&gt; [] =&gt; [].toString() =&gt; &quot;&quot; =&gt; Number(&quot;&quot;) =&gt; 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [&#x27;1&#x27;,&#x27;2&#x27;,&#x27;3&#x27;].valueOf() =&gt; [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;] </span></span><br><span class="line"><span class="comment">// =&gt; [&#x27;1&#x27;,&#x27;2&#x27;,&#x27;3&#x27;].toString() =&gt; &quot;1,2,3&quot;</span></span><br><span class="line"><span class="comment">// Number(&quot;1,2,3&quot;) =&gt; NaN</span></span><br><span class="line">+[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>] </span><br><span class="line"></span><br><span class="line"><span class="comment">// (&#123;&#125;).valueOf() =&gt; &#123;&#125; =&gt; (&#123;&#125;).toString() =&gt; &quot;[object Object]&quot; </span></span><br><span class="line"><span class="comment">// =&gt; Number(&quot;[object Object]&quot;) =&gt; NaN</span></span><br><span class="line">+&#123;&#125; </span><br><span class="line"></span><br><span class="line">+<span class="literal">true</span> <span class="comment">// Number(true) =&gt; 1</span></span><br></pre></td></tr></table></figure><h3 id="2-二元操作符类型转换"><a href="#2-二元操作符类型转换" class="headerlink" title="2. 二元操作符类型转换"></a>2. 二元操作符类型转换</h3><p>二元操作符类型转换我们用的最多的就属 “+” 了, 先来看看 “+” 是如何进行类型转换的</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="string">&#x27;a&#x27;</span> <span class="comment">// &#x27;1a&#x27;</span></span><br><span class="line"><span class="title class_">NaN</span> + <span class="string">&#x27;a&#x27;</span> <span class="comment">// &quot;NaN&quot;</span></span><br><span class="line">[] + <span class="string">&#x27;a&#x27;</span> <span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="literal">true</span> + <span class="number">1</span> <span class="comment">// 2</span></span><br><span class="line"><span class="title class_">NaN</span> + <span class="number">1</span> <span class="comment">// NaN</span></span><br><span class="line"><span class="literal">undefined</span> + <span class="number">1</span> <span class="comment">// NaN</span></span><br><span class="line"><span class="literal">null</span> + <span class="number">1</span>  <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>] + []  <span class="comment">// &quot;1,2,3&quot;</span></span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>] + <span class="number">1</span> <span class="comment">//  &quot;1,2,31&quot;</span></span><br></pre></td></tr></table></figure><p>从上面的例子我们不难看出二元操作符 “+” 进行类型转换的规则:</p><p>(1) x + y 中存在一个操作数为 String 类型, 则把另一个操作数转换为 String 类型，再把两个字符串拼接在一起</p><p>(2) x + y 中存在一个操作数为 Boolean、Undefined、NaN 或者 null 值, 另一个操作数为 Number，则将非 Number 的操作数转换为 Number 类型，在进行运算, NaN + 任何值都为 NaN</p><p>(3) 若有一个操作数是对象，则把该操作数转为 String 类型, 回到规则(1)</p><p>再来看看另一个常用的二元操作符 ‘-‘，这个操作符的类型转换规则就简单多了, 若x - y 中含有一个不是 Number 类型的操作数，则把该操作数转换为 Number 类型，除此之外 ‘*’, ‘&#x2F;‘等操作符转换规则也基本一样</p><h3 id="3-相等操作符类型转换"><a href="#3-相等操作符类型转换" class="headerlink" title="3. 相等操作符类型转换"></a>3. 相等操作符类型转换</h3><p>(1) 如果有一个操作数是布尔值，则在比较相等性之前先将该操作数转换为 Number 类型</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="literal">false</span> == <span class="number">0</span>  <span class="comment">// Number(false) =&gt; 0 =&gt; true</span></span><br><span class="line"><span class="literal">true</span> == <span class="number">1</span> <span class="comment">//Number(true) =&gt; 1 =&gt; true</span></span><br></pre></td></tr></table></figure><p>(2)  null 和 undefined 不转换，并且 null &#x3D;&#x3D; undefined</p><p>(3) x &#x3D;&#x3D; y, 中含有一个操作数为 NaN 则为 false</p><p>(4) 若 x &#x3D;&#x3D; y 中有一个不是数值, 则将该操作数转换为 Number 类型</p><p>(5) x &#x3D;&#x3D; y 中, x, y 都为对象, 则比较二者是否指向同一个地址</p><p>除此之外还有其他的操作符会进行类型转换，这里就不一一列举了，有了这些基础应该可以触类旁通了。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>函数式编程</title>
      <link href="/functional-programming/"/>
      <url>/functional-programming/</url>
      
        <content type="html"><![CDATA[<h3 id="一、函数式编程有什么好处"><a href="#一、函数式编程有什么好处" class="headerlink" title="一、函数式编程有什么好处"></a>一、函数式编程有什么好处</h3><p>1、代码简洁</p><p>2、函数间耦合度低，便于代码管理和迭代更新</p><h3 id="二、什么是纯函数"><a href="#二、什么是纯函数" class="headerlink" title="二、什么是纯函数"></a>二、什么是纯函数</h3><p>类似于数学里的函数，x-y 是一一对应关系，一个函数只有一个输出值，函数能只进行运算，不进行其他处理，这也被称为无副作用，简言之函数只管函数内部的事情，外面的一概不管。</p><h3 id="三、柯里化（curry）"><a href="#三、柯里化（curry）" class="headerlink" title="三、柯里化（curry）"></a>三、柯里化（curry）</h3><p>只传递给函数一部分参数来调用它，让它返回一个函数去处理剩下的参数,示例:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">y</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> increment = <span class="title function_">add</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> addTen = <span class="title function_">add</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">increment</span>(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">addTen</span>(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// 12</span></span><br></pre></td></tr></table></figure><p>以上代码中的 add 函数返回一个函数，这个函数接受一个 y 值，但是并未执行，需要调用的时候才会被执行。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>three.js 基础实战 —— 创建画布</title>
      <link href="/three-js-basics-practice/"/>
      <url>/three-js-basics-practice/</url>
      
        <content type="html"><![CDATA[<h3 id="一、场景创建"><a href="#一、场景创建" class="headerlink" title="一、场景创建"></a>一、场景创建</h3><p>要显示一个画面需要有以下三个元素: scene, camera 和 renderer，renderer 渲染器是根据 scene 和 camera 进行渲染的</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建 scene</span></span><br><span class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Scene</span>();</span><br><span class="line"><span class="comment">// 创建 camera</span></span><br><span class="line"><span class="keyword">const</span> fov = <span class="number">75</span>;</span><br><span class="line"><span class="keyword">const</span> aspect = <span class="number">2</span>; <span class="comment">// the canvas default</span></span><br><span class="line"><span class="keyword">const</span> near = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> far = <span class="number">0.1</span>;</span><br><span class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PerspectiveCamera</span>(fov, aspect, near, far);</span><br><span class="line">camera.<span class="property">position</span>.<span class="property">z</span> = <span class="number">5</span>;</span><br><span class="line"><span class="comment">// 创建渲染器</span></span><br><span class="line"><span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#c&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>(&#123; canvas &#125;);</span><br><span class="line">renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><h3 id="二、添加物体"><a href="#二、添加物体" class="headerlink" title="二、添加物体"></a>二、添加物体</h3><p>1、通过 BoxGeometry 对象创建一个正方体实例</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> boxWidth = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> boxHeight = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> boxDepth = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BoxGeometry</span>(boxWidth, boxHeight, boxDepth);</span><br></pre></td></tr></table></figure><p>2、创建一个基础材质实例</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123; <span class="attr">color</span>: <span class="number">0x44aa88</span> &#125;);</span><br></pre></td></tr></table></figure><p>3、创建一个网格实例，里面包含上述正方体和材质</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cube = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(geometry, material);</span><br></pre></td></tr></table></figure><p>4、把正方体添加到场景里</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">scene.<span class="title function_">add</span>(cube);</span><br></pre></td></tr></table></figure><p>以上把一个网格模式下的正方体添加到了画布上，不难看出 three.js 的组织方式可以用下图表示</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/threejs-1cube-no-light-scene.svg" alt="three.js 组织方式"></p><h3 id="三、渲染物体"><a href="#三、渲染物体" class="headerlink" title="三、渲染物体"></a>三、渲染物体</h3><p>以上只是把物体加到了画布上，但是并没有渲染, 下面我们来看 three.js 的渲染方式</p><p>1、静态渲染，这会使物体看起来就像 2d 一样</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">renderer.<span class="title function_">render</span>(scene, camera);</span><br></pre></td></tr></table></figure><p>2、动态渲染，使物体看起来更有 3d 效果</p><p>使用 requestAnimationFrame api 一帧一帧的渲染场景，同时在每一帧旋转一下正方体</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">time</span>) &#123;</span><br><span class="line">  time *= <span class="number">0.001</span>; <span class="comment">// convert time to seconds</span></span><br><span class="line">  cube.<span class="property">rotation</span>.<span class="property">x</span> = time;</span><br><span class="line">  cube.<span class="property">rotation</span>.<span class="property">y</span> = time;</span><br><span class="line">  renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">  <span class="title function_">requestAnimationFrame</span>(render);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(render);</span><br></pre></td></tr></table></figure><h3 id="四、添加光线"><a href="#四、添加光线" class="headerlink" title="四、添加光线"></a>四、添加光线</h3><p>为了使正方形看起来更加有立体感，我们可以给他加点光线，在加光线之前，我们需要先把目前的材质替换成可以受光影响的材质</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// const material = new THREE.MeshBasicMaterial(&#123; color: 0x44aa88 &#125;);</span></span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshPhongMaterial</span>(&#123; <span class="attr">color</span>: <span class="number">0x44aa88</span> &#125;); <span class="comment">// 这种材质会受光线影响</span></span><br></pre></td></tr></table></figure><p>替换了材质之后就可以添加光线了</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> color = <span class="number">0xfffff0</span>;</span><br><span class="line"><span class="keyword">const</span> intensity = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> light = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">DirectionalLight</span>(color, intensity);</span><br><span class="line">light.<span class="property">position</span>.<span class="title function_">set</span>(-<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>);</span><br><span class="line">scene.<span class="title function_">add</span>(light);</span><br></pre></td></tr></table></figure><h3 id="五、检测浏览器是否支持-webGL"><a href="#五、检测浏览器是否支持-webGL" class="headerlink" title="五、检测浏览器是否支持 webGL"></a>五、检测浏览器是否支持 webGL</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable constant_">WEBGL</span>.<span class="title function_">isWebGLAvailable</span>()) &#123;</span><br><span class="line">  <span class="title function_">requestAnimationFrame</span>(render);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> warning = <span class="variable constant_">WEBGL</span>.<span class="title function_">getWebGLErrorMessage</span>();</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;container&quot;</span>).<span class="title function_">appendChild</span>(warning);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参考文档:</p><p><a href="https://threejsfundamentals.org/threejs/lessons/threejs-fundamentals.html">Three.js Fundamentals</a></p><p><a href="https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene">Creating a scene</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见算法思想</title>
      <link href="/common-algorithm-ideas/"/>
      <url>/common-algorithm-ideas/</url>
      
        <content type="html"><![CDATA[<h3 id="一、穷举"><a href="#一、穷举" class="headerlink" title="一、穷举"></a>一、穷举</h3><p>通过穷举所有的组合，得出结论，🌰:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 今有鸡兔同笼，上有三十五头，下有九十四足，问鸡兔各几何？</span></span><br><span class="line"><span class="comment"> * 解法：通过题目可以知道，鸡和兔的总数量为0-35只，</span></span><br><span class="line"><span class="comment"> * 我们可以假设鸡为0，兔子为35，用鸡的个数*2+兔子的个数*4就可以得到总的脚</span></span><br><span class="line"><span class="comment"> 的数量，如果等于94，那么便是答案，</span></span><br><span class="line"><span class="comment"> * 如果不等，则鸡的数量+1，兔子数量-1，依次类推，穷举所有情况直到得到答案</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">enumeratingAlgorithm</span> = (<span class="params">head, foot</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> j;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= head; i++) &#123;</span><br><span class="line">    <span class="comment">//i代表鸡的数量</span></span><br><span class="line">    <span class="comment">//j代表兔子的数量</span></span><br><span class="line">    j = head - i;</span><br><span class="line">    <span class="keyword">if</span> (i * <span class="number">2</span> + j * <span class="number">4</span> === foot) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;鸡的个数为[ %d ]只,兔子的个数为[ %d ]只。&quot;</span>, i, j);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">enumeratingAlgorithm</span>(<span class="number">35</span>, <span class="number">94</span>); </span><br><span class="line"><span class="comment">// 鸡的个数为[ 23 ]只,兔子的个数为[ 12 ]只。</span></span><br></pre></td></tr></table></figure><h3 id="二、递推"><a href="#二、递推" class="headerlink" title="二、递推"></a>二、递推</h3><p>通过前面的子集推出最终的结论, 🌰:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 如果一对两个月大的兔子以后每一个月都可以生一对小兔子，而一对新生的兔子出生两个月后才可以生</span></span><br><span class="line"><span class="comment"> 小兔子。</span></span><br><span class="line"><span class="comment"> * 那么假定一年没有产生兔子死亡事件，问一年后共有多少对兔子？</span></span><br><span class="line"><span class="comment"> * 解法：</span></span><br><span class="line"><span class="comment"> * 头两个月，兔子都是只有一对，第三个月是2对，第四个月是3对，第五个月是5对。。。</span></span><br><span class="line"><span class="comment"> * 由此可以看出。从第三个月开始，每个月的兔子对数，等于前两个月之和。</span></span><br><span class="line"><span class="comment"> * 所以第n个月的兔子对数为 fₙ = fₙ₋₂ + fₙ₋₁</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> month 月份</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">recursiveDeduceAlgorithm</span> = (<span class="params">month</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> f1, f2;</span><br><span class="line">  <span class="keyword">if</span> (month === <span class="number">1</span> || month === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  f1 = <span class="title function_">recursiveDeduceAlgorithm</span>(month - <span class="number">1</span>); <span class="comment">//递归调用</span></span><br><span class="line">  f2 = <span class="title function_">recursiveDeduceAlgorithm</span>(month - <span class="number">2</span>); <span class="comment">//递归调用</span></span><br><span class="line">  <span class="keyword">return</span> f1 + f2; <span class="comment">//根据fₙ₋₁和fₙ₋₂，推导出fₙ</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> month = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">const</span> num = <span class="title function_">recursiveDeduceAlgorithm</span>(month);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;经过 [%d] 个月，共有 [%d] 对兔子。&quot;</span>, month, num);  </span><br><span class="line"><span class="comment">// 经过 [12] 个月，共有 [144] 对兔子。</span></span><br></pre></td></tr></table></figure><h3 id="三、递归"><a href="#三、递归" class="headerlink" title="三、递归"></a>三、递归</h3><p>函数自己调用自己，直到满足基准条件方停止, 🌰:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 递归算法思想</span></span><br><span class="line"><span class="comment"> * 求阶乘(factorial)问题</span></span><br><span class="line"><span class="comment"> * n的阶乘为：n! = n * (n-1) * (n-2) * ······ * 2 * 1</span></span><br><span class="line"><span class="comment"> * 解法，每一项都等于前一项-1，结果也等于之前的结果*前一项-1</span></span><br><span class="line"><span class="comment"> * 我们这里用int，要注意int的取值范围，不要超过int的上限。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n 求n的阶乘</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> n的阶乘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">recursiveAlgorithm</span> = (<span class="params">n</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> n * <span class="title function_">recursiveAlgorithm</span>(n - <span class="number">1</span>); <span class="comment">//递归调用</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> n = <span class="number">8</span>;</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">recursiveAlgorithm</span>(n);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;%d 的阶乘为： %d&quot;</span>, n, result); <span class="comment">// 8 的阶乘为： 40320</span></span><br></pre></td></tr></table></figure><h3 id="四、分治"><a href="#四、分治" class="headerlink" title="四、分治"></a>四、分治</h3><p>把大问题分解为多个子问题，根据各子问题的解得出大问题的解, 🌰:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 归并排序(分治算法思想)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums1</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums2</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> findMedianSortedArrays = <span class="keyword">function</span> (<span class="params">nums1, nums2</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> merged = [];</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> j = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> [lenA, lenB] = [nums1.<span class="property">length</span>, nums2.<span class="property">length</span>];</span><br><span class="line">  <span class="keyword">while</span> (i &lt; lenA &amp;&amp; j &lt; lenB) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums1[i] &lt; nums2[j]) &#123;</span><br><span class="line">      merged.<span class="title function_">push</span>(nums1[i]);</span><br><span class="line">      i++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      merged.<span class="title function_">push</span>(nums2[j]);</span><br><span class="line">      j++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (i &lt; lenA) &#123;</span><br><span class="line">    merged.<span class="title function_">push</span>(nums1[i]);</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (j &lt; lenB) &#123;</span><br><span class="line">    merged.<span class="title function_">push</span>(nums2[j]);</span><br><span class="line">    j++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; length &#125; = merged;</span><br><span class="line">  <span class="keyword">return</span> length % <span class="number">2</span> === <span class="number">1</span></span><br><span class="line">    ? merged[<span class="title class_">Math</span>.<span class="title function_">floor</span>(length / <span class="number">2</span>)]</span><br><span class="line">    : (merged[length / <span class="number">2</span>] + merged[length / <span class="number">2</span> - <span class="number">1</span>]) / <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test = [</span><br><span class="line">  [[<span class="number">1</span>, <span class="number">3</span>], [<span class="number">2</span>]],</span><br><span class="line">  [</span><br><span class="line">    [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">    [<span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">  ],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">test.<span class="title function_">forEach</span>(<span class="function">(<span class="params">ele</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="title function_">findMedianSortedArrays</span>(ele[<span class="number">0</span>], ele[<span class="number">1</span>]);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="五、概率"><a href="#五、概率" class="headerlink" title="五、概率"></a>五、概率</h3><p>概率算法依照概率统计的思路来求解问题, 求出的是近似解，常见概率算法有: </p><p>(1) 数值概率算法</p><p>(2) 蒙特卡罗(Monte Carlo)算法</p><p>(3) 拉斯维加斯(Las Vegas)算法</p><p>(4) 舍伍德(Sherwood)算法</p><p>🌰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 概率算法思想</span></span><br><span class="line"><span class="comment"> * 蒙特卡罗算法</span></span><br><span class="line"><span class="comment"> * 蒙特卡罗算法计算圆周率</span></span><br><span class="line"><span class="comment"> * 一个半径为1的圆，（如图6-23）阴影部分面积，也就是四分之一的圆的面积</span></span><br><span class="line"><span class="comment"> * 计算公式，s₁=s/4=(π*r²)/4=π/4</span></span><br><span class="line"><span class="comment"> * 而图中的正方形面积为S₂=r²=1；</span></span><br><span class="line"><span class="comment"> * 按照图中建议一个坐标系，均匀的向正方形内撒点，那么落入阴影部分的点数比上全部的点数应该就是</span></span><br><span class="line"><span class="comment"> s₁/S₂=π/4</span></span><br><span class="line"><span class="comment"> * 根据概率统计的规律，只要撒点足够多，那么将得到近似的结果。这就是蒙特卡罗算法</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n 撒点数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">monteCarloPI</span> = (<span class="params">n</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="variable constant_">PI</span>; <span class="comment">//圆周率π</span></span><br><span class="line">  <span class="keyword">let</span> valid = <span class="number">0</span>; <span class="comment">//有效点数，也就是落入阴影部分的点数</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="title class_">Math</span>.<span class="title function_">random</span>(); <span class="comment">//产生0~1之间的一个随机数</span></span><br><span class="line">    <span class="keyword">let</span> y = <span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line">    <span class="keyword">if</span> (x * x + y * y &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">//点在有效区域内，根据图，有效点距离原点的距离小于等于1，也就是x²+y²&lt;=1</span></span><br><span class="line">      valid++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="variable constant_">PI</span> = (<span class="number">4.0</span> * valid) / n;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;撒点数：%d,有效点数%d,圆周率π ≈ %f\n&quot;</span>, n, valid, <span class="variable constant_">PI</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">500000</span>; i &lt; <span class="number">800000</span>; i += <span class="number">50000</span>) &#123;</span><br><span class="line">  <span class="title function_">monteCarloPI</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 撒点数：500000,有效点数392676,圆周率π ≈ 3.141408</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 撒点数：550000,有效点数432507,圆周率π ≈ 3.1455054545454546</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 撒点数：600000,有效点数471223,圆周率π ≈ 3.1414866666666668</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 撒点数：650000,有效点数510384,圆周率π ≈ 3.1408246153846155</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 撒点数：700000,有效点数549614,圆周率π ≈ 3.1406514285714286</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 撒点数：750000,有效点数588973,圆周率π ≈ 3.141189333333333</span></span><br></pre></td></tr></table></figure><p>参考文章:</p><p><a href="https://zhuanlan.zhihu.com/p/36903717">常用算法指南(一)基本算法思想</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 系列文章 —— 文本处理</title>
      <link href="/css-series-text-processing/"/>
      <url>/css-series-text-processing/</url>
      
        <content type="html"><![CDATA[<h3 id="一、font-size"><a href="#一、font-size" class="headerlink" title="一、font-size"></a>一、font-size</h3><p>chrom 默认有字体限制最小是 12px，也就是小于 12 px 的字号都相当于 12px，但是 font-size: 0 例外，还是会保持为 0，利用这个特性可以实现可访问性隐藏</p><h3 id="二、font-family"><a href="#二、font-family" class="headerlink" title="二、font-family"></a>二、font-family</h3><p>1、属性值可以是字体家族也可以是字体名，字体名需要写在字体家族前面，否则在 chrom 下只有字体家族会生效</p><p>2、字体名有空格的话，需要用引号包起来，多个字体名用逗号隔开</p><p>3、<strong>字体家族</strong></p><p>(1) <strong>衬线字体 vs 非衬线字体</strong></p><ul><li><p>衬线字体(serif), 笔画开始、结束的地方有额外装饰而且笔画的粗细会有所不同，比如中文的宋体，英文的 Times New Roman、Georgia </p></li><li><p>非衬线字体(sans-serif), 没有额外的装饰，而且笔画的粗细差不多, 比如微软雅黑</p></li></ul><p>(2) <strong>等宽字体(monospace)</strong></p><ul><li><p>每一个字符宽度一样</p></li><li><p>应用</p><ul><li><p>代码呈现</p></li><li><p>图形绘制</p></li><li><p>与 ch 配合，做一个一个出现的动效</p></li></ul></li></ul><p>4、<strong>Windows 中常见内置中文字体和对应英文名称</strong></p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/win-font.png" alt="Windows 中常见内置中文字体和对应英文名称"></p><p>5、<strong>OS X 常见内置中文字体和对应英文名称</strong></p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/osx-font.png" alt="OS X 常见内置中文字体和对应英文名称"></p><h3 id="三、font-weight"><a href="#三、font-weight" class="headerlink" title="三、font-weight"></a>三、font-weight</h3><p>数字关键字, 100 - 900, 100为一个档，400 对应 normal, 700对应 bold，其他数值根据字体支持，才有不同的变化</p><h3 id="四、word-break"><a href="#四、word-break" class="headerlink" title="四、word-break"></a>四、word-break</h3><p>单词拆分换行控制，主要属性值有下面几个：</p><p>(1) normal: 使用默认的换行规则</p><p>(2) break-all: 允许任意非 CJK(Chinese&#x2F;Japanese&#x2F;Korean)文本间的单词断行</p><p>(3) keep-all: 不允许 CJK 文本中的单词换行，只能在半角空格或连字符处换行, 非 CJK 文本的行为和 normal 一致</p><h3 id="五、word-wrap"><a href="#五、word-wrap" class="headerlink" title="五、word-wrap"></a>五、word-wrap</h3><p>单词换行控制, 主要属性如下:</p><p>(1) normal: 正常的换行规则</p><p>(2) break-word: 一行单词中实在没有其他靠谱的换行点的时候换行</p><h3 id="六、white-space"><a href="#六、white-space" class="headerlink" title="六、white-space"></a>六、white-space</h3><p>控制空白字符的显示和自动换行机制, 主要属性值如下:</p><p>(1) normal: 默认值， 合并空白字符和换行符，会自动换行</p><p>(2) pre: 空白字符和换行符保持原状, 不会自动换行</p><p>(3) nowrap: 空格被合并，换行符无效，不会自动换行</p><p>(4) pre-wrap: 保留空格和换行符，且可以自动换行</p><p>(5) pre-line: 合并空白字符，保留换行符，会自动换行</p><h3 id="七、伪类-vs-伪元素"><a href="#七、伪类-vs-伪元素" class="headerlink" title="七、伪类 vs 伪元素"></a>七、伪类 vs 伪元素</h3><p>伪元素前接 ::, 伪类前接 :</p><p>参考文章:</p><p>《CSS 世界》</p><p><a href="https://juejin.im/post/6844903667863126030">彻底搞懂word-break、word-wrap、white-space</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NPM Package.json 字段列表(包括非官方字段)</title>
      <link href="/package-json-field-list/"/>
      <url>/package-json-field-list/</url>
      
        <content type="html"><![CDATA[<p>得空看看一些源码，发现 Package.json 文档里有些字段是不常见的，自然也不知道配置的是什么，查<a href="https://docs.npmjs.com/files/package.json.html">官方文档</a>, 发现有些找不到，看到一篇不错的英文文档，翻译一下，以后好查看。</p><h3 id="一、基本字段"><a href="#一、基本字段" class="headerlink" title="一、基本字段"></a>一、基本字段</h3><h4 id="1、name"><a href="#1、name" class="headerlink" title="1、name"></a>1、name</h4><p>自如其名，不多加解释，这个字段的使用需要注意一下几个要点</p><p>(1) 若项目是要作为包发布到 npm 上的话，需要是独一无二的名字</p><p>(2) 若要发布的包隶属于某个机构或者私有仓库，需要在前面加上@组织名称，比如这样, @ebag&#x2F;exp-ui</p><p>(3) 名称总字符长度不能超过 214</p><p>(4) 不能以大写字母、斜划线或者点开头</p><p>(5) 只能使用 url 安全字符，因为我们的名称可能会被别人在终端使用，比如: <code>npm i lyp-pagination</code> 或者 ‘<a href="https://www.npmjs.com/package/lyp-pagination">https://www.npmjs.com/package/lyp-pagination</a>‘</p><h4 id="2、version"><a href="#2、version" class="headerlink" title="2、version"></a>2、version</h4><p>version 跟 name 组成已发布包的每个版本唯一ID, 这就意味着，我们每发布一个版本就需要更新一下版本号。此外，版本号应该有一个固定的可以让 node-semver 解析的结构，比如我们常见的 npm 包版本号都是由三个被点分隔的数字组成，比如这样: 1.1.2, 有些包可能后面还接一个可选的标签，比如这样: 1.1.2-alphal。这路需要注意，不应该给版本降级，特别是当包已经被广泛使用的时候。</p><h3 id="二、信息类字段"><a href="#二、信息类字段" class="headerlink" title="二、信息类字段"></a>二、信息类字段</h3><h4 id="1、description"><a href="#1、description" class="headerlink" title="1、description"></a>1、description</h4><p>一些关于包的描述信息，这些描述信息会被显示在搜索包的时候，显示在列表里或者其他地方，让用户清楚的知道它是用来干嘛的, 不过这只是一些项目的简短描述信息，更具体的描述应该写在 README.md 文件里。</p><h4 id="2、keywords"><a href="#2、keywords" class="headerlink" title="2、keywords"></a>2、keywords</h4><p>keywords 可以提升包的 SEO, 这个字符串数组里的关键字起的好的话，可以在提升包的搜索曝光率。</p><h4 id="3、license"><a href="#3、license" class="headerlink" title="3、license"></a>3、license</h4><p>license 是一个简单但是却非常重要的字段，有了这个字段，用户可以清楚的知道包的分享遵循的条款，这个字段对应字符串值应该是 SPDX 认证的 license，比如，MIT, GPL-3.0 等。若不知道哪些 license 适合当前包，可以查看<a href="https://tldrlegal.com/">这里</a>。写了这个字段之后，最好在项目目录加上 LICENSE.md file 文件。</p><h4 id="4、homepage"><a href="#4、homepage" class="headerlink" title="4、homepage"></a>4、homepage</h4><p>若包有一个主页，可以把链接放在这里，这个链接会被放在 npm 页面和很多其他地方。</p><h4 id="5、repository"><a href="#5、repository" class="headerlink" title="5、repository"></a>5、repository</h4><p>源码地址，字符穿类型，如果是开源的项目，可以加上 git clone 地址</p><h4 id="6、bugs"><a href="#6、bugs" class="headerlink" title="6、bugs"></a>6、bugs</h4><p>issues 页面地址</p><h4 id="7、author"><a href="#7、author" class="headerlink" title="7、author"></a>7、author</h4><p>author 的值有两个类型，Object 和 String, Object 类型适用于有多个开发者的项目，包括 name, email 和 url 三个属性，其中 url 一般是该作者的个人网站,这些属性都是可选的。String 类型的值一般用于单个开发者的项目，写法一般是这样的 <code>&quot;name &lt;email&gt; (url)&quot;</code></p><h4 id="8、contributors"><a href="#8、contributors" class="headerlink" title="8、contributors"></a>8、contributors</h4><p>contributors 字段类似 author 字段，但是 contributors 的值类型是对象数组或者字符串。该字段另一个有趣的点是再项目根目录创建 AUTHORS.md 文件，逐行写上贡献者信息，这里面的信息会作为 contributors 的默认值。</p><h3 id="三、文件类字段"><a href="#三、文件类字段" class="headerlink" title="三、文件类字段"></a>三、文件类字段</h3><h4 id="1、files"><a href="#1、files" class="headerlink" title="1、files"></a>1、files</h4><p>files 字段值的类型是字符串数组,数组里面的字符串填写需要发布到 NPM 的文件名。当然也可以在根目录下创建 .npmignore 文件，把不需要上传到 NPM 的文件名填进去。不过有些文件或者目录比如, README.md 或者 LICENSE.md 是默认就会被打包。也有默认不会被打包的目录或者文件，比如, node_modules 或者 .git。</p><h4 id="2、main"><a href="#2、main" class="headerlink" title="2、main"></a>2、main</h4><p>main 字段的值是入口文件,即使不包括在 files 字段里，也会被打包。</p><h4 id="3、browser"><a href="#3、browser" class="headerlink" title="3、browser"></a>3、browser</h4><p>当需要打包多个版本时，设置 browser 字段，可以根据浏览器的不同环境变量，使用不同的版本</p><h4 id="4、unpkg"><a href="#4、unpkg" class="headerlink" title="4、unpkg"></a>4、unpkg</h4><p>提供一个给 UNPKG, 用于支持 CDN 服务，有点类似 browser </p><h4 id="5、module"><a href="#5、module" class="headerlink" title="5、module"></a>5、module</h4><p>若项目中有封装模块，可以设置 module, 也就是设置一个模块的入口, 该字段目前比较前卫</p><h4 id="6、typings-types"><a href="#6、typings-types" class="headerlink" title="6、typings&#x2F;types"></a>6、typings&#x2F;types</h4><p>TypeScript 解析文件的入口, 该文件会被发布到 NPM, 并且可以被下载，为用户提供更加好的 IDE 支持。</p><h4 id="7、bin"><a href="#7、bin" class="headerlink" title="7、bin"></a>7、bin</h4><p>若项目中包含一些可执行文件，可以把文件名在 bin 字段下, 当只有一个 Node.js 文件入口时, 可以是 string 值，当有多个的时候,可以用键值对的形式写。不过要执行这些文件，需要在文件头部加上 <code>#!/usr/bin/env node</code></p><h4 id="8、man"><a href="#8、man" class="headerlink" title="8、man"></a>8、man</h4><p>若需要提供命令行输出文档，可以用 man 字段指明,当只有一个文件时, 可以是一个字符串值, 当有多个文件时, 可以是一个字符串数组。</p><h3 id="四、任务类"><a href="#四、任务类" class="headerlink" title="四、任务类"></a>四、任务类</h3><h4 id="1、scripts"><a href="#1、scripts" class="headerlink" title="1、scripts"></a>1、scripts</h4><p>该字段应该都熟悉了，存放一些可执行脚本文件的对象</p><h4 id="2、config"><a href="#2、config" class="headerlink" title="2、config"></a>2、config</h4><p>设置一些用于可执行脚本的配置,</p><h3 id="五、依赖类"><a href="#五、依赖类" class="headerlink" title="五、依赖类"></a>五、依赖类</h3><h4 id="1、dependencies"><a href="#1、dependencies" class="headerlink" title="1、dependencies"></a>1、dependencies</h4><p>用于管理项目所需依赖的对象, npm install &#x2F; yarn  会默认下载这个字段下的所有依赖</p><h4 id="2、devDependencies"><a href="#2、devDependencies" class="headerlink" title="2、devDependencies"></a>2、devDependencies</h4><p>通过 –save-dev or –dev 安装的依赖放在 devDependencies 目录下，这部分依赖在开发阶段用于框架、模块测试或者编译代码，所以在使用编译后的包时，不会下载这部分依赖，比如 vue 的所有依赖都是放在该字段下的。</p><h4 id="3、peerDependencies"><a href="#3、peerDependencies" class="headerlink" title="3、peerDependencies"></a>3、peerDependencies</h4><p>NPM v3开始，peerDependencies 字段需要自己配置，用于指定一个兼容项目的依赖，该字段的值是一个对象，对象的 key 是兼容包的名称，对象的值是该包的指定版本。</p><h4 id="4、optionalDependencies"><a href="#4、optionalDependencies" class="headerlink" title="4、optionalDependencies"></a>4、optionalDependencies</h4><p>optionalDependencies 字段用于设置一些项目中的可选包，这些包不一定要下载，但是却很有用，设置在该字段下后，对应的包只会在需要的时候被下载，比如  fsevents 模块，尽在 mac 下有效。</p><h4 id="5、bundledDependencies"><a href="#5、bundledDependencies" class="headerlink" title="5、bundledDependencies"></a>5、bundledDependencies</h4><p>bundledDependencies 字段是一个字符串数组，数组元素是需要跟最终包一起打包出去的依赖名称。</p><h3 id="六、平台类"><a href="#六、平台类" class="headerlink" title="六、平台类"></a>六、平台类</h3><h4 id="1、engines"><a href="#1、engines" class="headerlink" title="1、engines"></a>1、engines</h4><p>engines 字段可以指定编译的运行时和库，是一个对象类型，该对象的 key 是运行时或者库的名称，值是对应的具体版本。当打包需要用到一些比较新的特性时，可以用到这个字段，字段配置的环境通常是全局安装好的。</p><h4 id="2、os"><a href="#2、os" class="headerlink" title="2、os"></a>2、os</h4><p>os 字段可以指明操作系统类别，是字符串数组类型。</p><h4 id="3、cpu"><a href="#3、cpu" class="headerlink" title="3、cpu"></a>3、cpu</h4><p>指明 cpu 类型，也是字符串数组</p><h3 id="七、发布类"><a href="#七、发布类" class="headerlink" title="七、发布类"></a>七、发布类</h3><h4 id="1、private"><a href="#1、private" class="headerlink" title="1、private"></a>1、private</h4><p>private 设置为 true，可以保证包不会被发布到 NPM，即使手误了点了 publish，也不会被发布</p><h4 id="2、publishConfig"><a href="#2、publishConfig" class="headerlink" title="2、publishConfig"></a>2、publishConfig</h4><p>设置 NPM config,会覆盖掉原有设置, 是一个对象类型。</p><p>除此之外还可能会针对特定场景使用一些字段，比如，UNPKG, Babel, Prettier 等，这些对应的字段通常会在搭配他们使用的工具的文档上有写，这里就不一一列举了。不过，建议把这些其他配置独立出去，便于维护。</p><p>参考文章:</p><p><a href="https://areknawo.com/whats-what-package-json-cheatsheet/">Package.json cheatsheet!</a></p><p><a href="https://docs.npmjs.com/files/package.json">npm-package.json-Specifics of npm’s package.json handling</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 支持数学公式</title>
      <link href="/hexo-math-formula-support/"/>
      <url>/hexo-math-formula-support/</url>
      
        <content type="html"><![CDATA[<h3 id="一、版本"><a href="#一、版本" class="headerlink" title="一、版本"></a>一、版本</h3><p>hexo: 3.0.0</p><p>theme: maupassant</p><h3 id="二、快速开始"><a href="#二、快速开始" class="headerlink" title="二、快速开始"></a>二、快速开始</h3><h4 id="1、安装插件"><a href="#1、安装插件" class="headerlink" title="1、安装插件"></a>1、安装插件</h4><p>(1) 升级 hexo 到 3.0+，因为 hexo-math 插件只支持高版本</p><p>(2) 安装 hexo-math 插件</p><h4 id="2、配置"><a href="#2、配置" class="headerlink" title="2、配置"></a>2、配置</h4><p>根目录的 _config.yml 配置文件加一行 <code>mathjax: true</code>, 在需要用到插件公式的文档头部加上 <code>mathjax: true </code>, 试着编辑一条公式，比如: <code>log_2n</code> ，发现没反应，还编译报错了，解决这两个问题方法如下</p><p>(1) 公式生效前提: 在公式的前后加上$$符号</p><p>(2) 编译出错: 进入node_modules\kramed\lib\rules\inline.js，修改文档的 escape 和 em 字段，修改前后如下</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 修改前：</span></span><br><span class="line">escape<span class="punctuation">:</span> /^\\(<span class="punctuation">[</span>\\`*<span class="punctuation">&#123;</span><span class="punctuation">&#125;</span>\<span class="punctuation">[</span>\<span class="punctuation">]</span>()#$+\-.!_&gt;<span class="punctuation">]</span>)/<span class="punctuation">,</span></span><br><span class="line"><span class="comment">// 修改后：</span></span><br><span class="line">escape<span class="punctuation">:</span> /^\\(<span class="punctuation">[</span>`*\<span class="punctuation">[</span>\<span class="punctuation">]</span>()#$+\-.!_&gt;<span class="punctuation">]</span>)/<span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改前：</span></span><br><span class="line">em<span class="punctuation">:</span> /^\b_((?<span class="punctuation">:</span>__|<span class="punctuation">[</span>\s\S<span class="punctuation">]</span>)+?)_\b|^\*((?<span class="punctuation">:</span>\*\*|<span class="punctuation">[</span>\s\S<span class="punctuation">]</span>)+?)\*(?!\*)/<span class="punctuation">,</span></span><br><span class="line"><span class="comment">// 修改后：</span></span><br><span class="line">em<span class="punctuation">:</span> /^\*((?<span class="punctuation">:</span>\*\*|<span class="punctuation">[</span>\s\S<span class="punctuation">]</span>)+?)\*(?!\*)/<span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>此外由于升级之后配置有所变化(升级了相应主题)，还报了一个 minivaline 的错，在配置文件中加上相应配置就好，比如这样</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">minivaline:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网站建设 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>时间复杂度 vs 空间复杂度</title>
      <link href="/time-complexity-vs-space-complexity/"/>
      <url>/time-complexity-vs-space-complexity/</url>
      
        <content type="html"><![CDATA[<h3 id="一、时间复杂度"><a href="#一、时间复杂度" class="headerlink" title="一、时间复杂度"></a>一、时间复杂度</h3><h4 id="1、是什么"><a href="#1、是什么" class="headerlink" title="1、是什么"></a>1、是什么</h4><p>一般情况下，算法中基本操作重复执行的次数是问题规模 n 的某个函数，用 T(n) 表示，若有某个辅助函数 f(n),使得当 n 趋近于无穷大时，T(n) &#x2F; f(n) 的极限值为不等于零的常数，则称 f(n) 是 T(n) 的同数量级函数。记作T(n)&#x3D;Ｏ(f(n)),称Ｏ(f(n)) 为算法的渐进时间复杂度，简称时间复杂度，时间复杂度反映了程序执行时间随输入规模增长而增长的量级，在很大程度上能很好反映出算法的优劣与否。</p><h4 id="2、怎么算"><a href="#2、怎么算" class="headerlink" title="2、怎么算"></a>2、怎么算</h4><p>(1) 找出算法中的基本语句，一般为最内层循环的循环体</p><p>(2) 计算基本语句的执行次数的数量级, 即求出随着 n 的增长，呈现的规律公式</p><p>(3) 用「 大O 符号表示法 」，表示时间复杂度</p><h4 id="3、常见时间复杂度"><a href="#3、常见时间复杂度" class="headerlink" title="3、常见时间复杂度"></a>3、常见时间复杂度</h4><ul><li><p>常数阶 O(1),代码在执行的时候，它消耗的时间并不随着某个变量的增长而增长, 比如下面的语句:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> j = <span class="number">2</span>;</span><br><span class="line">++i;</span><br><span class="line">j++;</span><br><span class="line"><span class="keyword">const</span> m = i + j;</span><br></pre></td></tr></table></figure></li><li><p>对数阶 O($$log_2n$$), </p></li><li><p>线性阶 O(n), 消耗的时间是随着变量 n 的变化而呈线性变化, 比如一层 for 循环</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>; i&lt;=n; ++i)&#123;</span><br><span class="line">  j = i;</span><br><span class="line">  j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>线性对数阶 O($$nlog_2n$$)</p></li><li><p>指数阶：平方阶O($$n^2$$)</p></li><li><p>立方阶 O($$n^3$$),…， k次方阶O($$n^k$$)</p></li><li><p>指数阶 O($$2^n$$)</p></li><li><p>阶乘 Ο(n!)</p></li></ul><p>随着问题规模 n 的不断增大，上述时间复杂度不断增大，算法的执行效率越低</p><h3 id="二、空间复杂度"><a href="#二、空间复杂度" class="headerlink" title="二、空间复杂度"></a>二、空间复杂度</h3><p>1、是什么</p><p>空间复杂度是对一个算法在运行过程中临时占用存储空间大小的一个量度，用 S(n) 来定义</p><p>3、常见空间复杂度</p><p>O(1)、O(n)、O(n²)</p><p>参考文献:</p><p><a href="https://blog.csdn.net/zolalad/article/details/11848739">算法的时间复杂度和空间复杂度-总结</a><br><a href="https://zhuanlan.zhihu.com/p/50479555">算法的时间与空间复杂度（一看就懂）</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 系列文章 —— 层叠</title>
      <link href="/css-series-cascade/"/>
      <url>/css-series-cascade/</url>
      
        <content type="html"><![CDATA[<h3 id="一、层叠上下文"><a href="#一、层叠上下文" class="headerlink" title="一、层叠上下文"></a>一、层叠上下文</h3><p>1、<strong>特性</strong></p><p>(1) 层叠上下文的层叠水平要比普通元素高</p><p>(2) 层叠上下文可以阻断元素的混合模式</p><p>(3) 层叠上下文可以嵌套，内部层叠上下文及其所有子元素均受制于外部的“层叠上下文”</p><p>(4) 每个层叠上下文和兄弟元素独立，也就是说，当进行层叠变化或渲染的时候，只需要考虑后代元素</p><p>(5) 每个层叠上下文是自成体系的，当元素发生层叠的时候，整个元素被认为是在父层叠上下文的层叠顺序中</p><p>2、<strong>创建</strong></p><p>(1) 页面根元素默认具有层叠上下文，称为根层叠上下文</p><p>(2) z-index 值为数值的定位元素</p><p>(3) 其他 CSS3 属性</p><ul><li><p>元素为 flex 布局元素(父元素 display:flex|inline-flex)，同时 z-index值不是 auto</p></li><li><p>元素的 opacity 值不是 1</p></li><li><p>元素的 transform 值不是 none</p></li><li><p>元素 mix-blend-mode 值不是 normal</p></li><li><p>元素的 filter 值不是 none</p></li><li><p>元素的 isolation 值是 isolate</p></li><li><p>元素的 will-change 属性值为上面 2~6 的任意一个</p></li><li><p>元素的-webkit-overflow-scrolling 设为 touch</p></li></ul><h3 id="二、层叠顺序"><a href="#二、层叠顺序" class="headerlink" title="二、层叠顺序"></a>二、层叠顺序</h3><p>1、若层叠上下文元素不依赖 z-index 数值，则其层叠顺序是 z-index:auto，可看成 z:index:0 级别</p><p>2、若层叠上下文元素依赖 z-index 数值，则其层叠顺序由 z-index 值决定</p><p>3、兄弟层叠顺序一样，后者会覆盖前者，在上面</p><p>4、<strong>z-index 负值</strong></p><p>(1) 层叠顺序在层叠上下文元素的背景色之上，块状元素之下</p><p>(2) <strong>应用</strong></p><ul><li><p>可访问性隐藏</p></li><li><p>IE8 下的多背景模拟</p></li><li><p>定位在元素的后面</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 系列文章 —— 流的破坏与保护</title>
      <link href="/css-series-flow-destruction-and-protection/"/>
      <url>/css-series-flow-destruction-and-protection/</url>
      
        <content type="html"><![CDATA[<h3 id="一、float"><a href="#一、float" class="headerlink" title="一、float"></a>一、float</h3><p>1、<strong>本质:</strong> 实现文字环绕效果</p><p>2、<strong>作用机制</strong></p><p>(1) 破坏文档流</p><p>(2) 让父元素的高度塌陷</p><p>(3) 行框盒子区域限制</p><p>3、<strong>特性</strong></p><p>(1) 包裹性</p><p>(2) 块状化并格式化上下文</p><p>(3) 破坏文档流</p><p>(4) 没有任何 margin 合并</p><p>4、<strong>流体布局</strong></p><p>(1) 核心: 一侧定宽一侧自适应</p><p>(2) 问题： 纯浮动布局容错性差，容易出现比较严重的布局问题</p><h3 id="二、clear"><a href="#二、clear" class="headerlink" title="二、clear"></a>二、clear</h3><p>1、<strong>目的</strong>：处理 float 属性带来的高度塌陷等问题</p><p>2、<strong>作用本质</strong>: 让自己不和 float 元素在一行显示</p><p>3、<strong>值</strong></p><p>(1) none:默认值，左右浮动</p><p>(2) left: 去除左侧浮动</p><p>(3) right:去除右侧浮动</p><p>(4) both: 去除两遍浮动</p><p>4、<strong>tips</strong></p><p>(1) 块级元素才有效</p><p>(2) 借助伪元素清除浮动，需要配合 display 一起使用</p><p>(3) 只能在一定程度上消除浮动的影响</p><h3 id="三、BFC-block-formatting-context-块级格式化上下文"><a href="#三、BFC-block-formatting-context-块级格式化上下文" class="headerlink" title="三、BFC(block formatting context), 块级格式化上下文"></a>三、BFC(block formatting context), 块级格式化上下文</h3><p>1、<strong>作用</strong></p><p>(1) BFC 元素，不发生 margin 重叠</p><p>(2) 可以用来清除浮动的影响</p><p>2、<strong>触发场景</strong></p><p>(1) html 根元素</p><p>(2) float 的值不为 none;</p><p>(3) overflow 的值为 auto、scroll 或 hidden;</p><p>(4) display 的值为 table-cell、table-caption 和 inline-block 中的任何一个;</p><p>(5) position 的值不为 relative 和 static。</p><p>3、<strong>流体布局</strong></p><p>(1) 自适应内容由于封闭而更健壮，容错性更强</p><p>(2) 自适应内容自动填满浮动以外区域，无须关心浮动元素宽度，可以整站大规模应用</p><h3 id="四、overflow"><a href="#四、overflow" class="headerlink" title="四、overflow"></a>四、overflow</h3><p>1、<strong>支持的属性</strong></p><p>(1) visible:默认值</p><p>(2) hidden:剪裁</p><ul><li><p>剪裁界线是 border box 内边缘</p></li><li><p>可以用于清除浮动</p></li></ul><p>(3) scroll:滚动条区域一直在</p><p>(4) auto:不足以滚动时没有滚动条，可以滚动时滚动条出现</p><p>2、<strong>tips</strong></p><p>(1) 如果容器可滚动(假设是垂直滚动)，则 padding-bottom 也算在滚动尺寸之内</p><p>(2) 如果 overflow-x 和 overflow-y 属性中的一个值设置为 visible 而另外一个设置为 scroll、auto 或 hidden，则 visible 的样式表现会如同 auto</p><p>(3) 默认产生滚动条的标签: html、textarea</p><p>(4) 在 PC 端，无论是什么浏览器，默认滚动条均来自 html，而不是 body 标签</p><p>(5) 在PC端，窗体滚动高度可以使用 document.documentElement.scrollTop 获取，但是在移动端，可能就要使用 document.body.scrollTop 获取。</p><p>(6) 获取滚动条宽度的方式：width - document.getElementById(“ele”).clientWidth</p><p>3、<strong>自定义滚动条</strong></p><p>(1) 整体部分，::-webkit-scrollbar</p><p>(2) 两端按钮，::-webkit-scrollbar-button</p><p>(3) 外层轨道，::-webkit-scrollbar-track</p><p>(4) 内层轨道，::-webkit-scrollbar-track-piece</p><p>(5) 滚动滑块，::-webkit-scrollbar-thumb</p><p>(6) 边角，::-webkit-scrollbar-corner</p><p>4、<strong>依赖 overflow 的样式效果</strong>: text-overflow:ellipsis 实现单行文字超出显示 ……</p><h3 id="五、position-absolute"><a href="#五、position-absolute" class="headerlink" title="五、position:absolute"></a>五、position:absolute</h3><p>1、<strong>特性</strong></p><p>(1) 块级格式化上下文</p><p>(2) 脱离文档流</p><p>(3) 包裹性</p><p>(4) 计算和定位是相对于祖先定位元素的 padding box</p><p>2、<strong>包含块(containing block)</strong></p><p>(1) <strong>是什么</strong>: 元素用来计算和定位的一个框</p><p>(2) <strong>计算规则</strong></p><ul><li><p>根元素(很多场景下可以看成是<html>)被称为“初始包含块”，其尺寸等同于浏览器可视窗口的大小</p></li><li><p>对于其他元素，如果该元素的 position 是 relative 或者 static，则“包含块”由其最近的块容器祖先盒的 content box 边界形成</p></li><li><p>如果元素 position:fixed，则“包含块”是“初始包含块”</p></li><li><p>如果元素 position:absolute，则“包含块”由最近的 position 不为 static的祖先元素建立</p></li></ul><p>3、<strong>absolute 元素</strong></p><p>(1) 只有在父元素是定位元素，absolute 元素才会被 overflow 影响</p><p>(2) absolute 元素设置了对立定位，会格式化宽度&#x2F;高度，不设置宽度 width&#x2F;height 会变为 100%</p><p>(3) absolute 元素设置 margin:auto</p><ul><li><p>如果一侧定值，一侧 auto，auto 为剩余空间大小;</p></li><li><p>如果两侧均是 auto，则平分剩余空间。</p></li></ul><p>4、<strong>与 clip 属性配合</strong></p><p>(1) 可以剪裁 fixed</p><p>(2) 配合 absolute，可以实现可访问性元素隐藏，比如经常要用到一些 checkbox 之类的，但是原本的样式太丑了，可以选择用着这种方案隐藏掉原来的 checkbox，但是又不影响点击</p><p>5、<strong>tips</strong></p><p>(1) 无依赖绝对定位:只对当前元素设置绝对定位和偏移值，不影响其他元素的样式</p><p>(2) 有的时候 fixed 元素或者 absolute 元素莫名的滚动了，可能是 transform 属性在作妖</p><p>(3) 父元素 relative 定位会限制 absolute 子元素</p><p>(4) 为了减小当前元素的样式对其他元素样式的影响，可以尽量减小 relative 的作用范围</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 系列文章——盒尺寸</title>
      <link href="/css-series-box-dimensions/"/>
      <url>/css-series-box-dimensions/</url>
      
        <content type="html"><![CDATA[<p>盒尺寸分为以下四种：content box、padding box、border box 以及 margin box，也就是容器盒子中的内在盒子的尺寸。</p><h3 id="一、替换元素"><a href="#一、替换元素" class="headerlink" title="一、替换元素"></a>一、替换元素</h3><p>1、🎓是<strong>什么</strong></p><p>通过修改某个属性值呈现内容可以被替换掉的元素</p><p>2、🎓<strong>替换元素有哪些</strong></p><p>🌰img, object, video, ifram, texarea, input 等</p><p>3、🎓<strong>特性</strong>：</p><p>(1) 样式表现在 CSS 作用域之外，即内容上的外观不受页面上的 CSS 影响</p><p>(2) 有默认尺寸，🌰video&#x2F;ifram&#x2F;canvas(300px x 150px)，img(0)等</p><p>(3) 在很多 CSS 属性上有自己的一套表现规则，🌰vertical-align 的基线不是 baseline，而是下边缘</p><p>4、🎓替换元素在不同浏览器的 display 值可能会不一样</p><p>5、🎓<strong>尺寸计算规则</strong></p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">📚<span class="strong">**相关概念**</span></span><br><span class="line">​</span><br><span class="line">(1) 固有尺寸，即元素本身的尺寸，不可改变</span><br><span class="line"></span><br><span class="line">(2) HTML 尺寸，只能通过 HTML 原生属性改变</span><br><span class="line"></span><br><span class="line">(3) CSS 尺寸，可以通过 CSS 的 width 和 height 或者 max-width/min-width 和</span><br><span class="line">max-height/min-height 设置的尺寸，对应盒尺寸中的 content box</span><br></pre></td></tr></table></figure><p>(1) 若没有 CSS 尺寸和 HTML 尺寸，则使用固有尺寸作为最终宽高</p><p>(2) 若没有 CSS 尺寸，则使用 HTML 尺寸作为最终宽高</p><p>(3) 若没有 CSS 尺寸，则最终尺寸由 CSS 属性决定</p><p>(4) 若”固有尺寸“含有固有的宽高比例，同时仅设置了宽度或仅设置了高度，则元素依然按照固有的宽高比例显示</p><p>(5) 若上述条件都不符合，则宽高表现为默认宽高值的比</p><p>6、🎓<strong>替换元素不设置 src，表现为普通内联元素</strong></p><p>基于伪元素的图片内容生成技术</p><p>(1) 图片不设置 src</p><p>(2) after 伪元素 content 设置为 attr(alt);</p><p>7、🎓<strong>content 属性</strong></p><p>(1) content 属性生成的对象被称为”匿名替换元素”</p><p>(2) 📚实用技术: </p><ul><li><p>content 辅助元素生成</p></li><li><p>content 字符内容生成</p></li><li><p>content 图片生成(使用 url 显示图片)</p></li><li><p>content 计数器(counter-reset,counter-increment,counter(counter-reset),counters(name, string)，实现计数嵌套)</p></li></ul><h3 id="二、padding"><a href="#二、padding" class="headerlink" title="二、padding"></a>二、padding</h3><p>1、🎓默认模式下，使用 padding 会<strong>增加元素尺寸</strong></p><p>2、🎓内联元素 padding 对视觉层和布局层具有双重影响</p><p>3、🎓<strong>属性值特性</strong></p><p>(1) 百分比值相对于宽度计算</p><p>(2) 不支持负值</p><ul><li><p>ol&#x2F;ul 列表内置 padding-left，单位是 px, 🌰Chrome 浏览器下是 40px</p></li><li><p>很多表单元素都内置 padding</p></li></ul><p>4、<strong>📚运用</strong></p><p>(1) 增加点击区域</p><p>(2) 实现管道符</p><p>(3) 实现一些图标,比如,双层圆环和三道杠</p><h3 id="三、border"><a href="#三、border" class="headerlink" title="三、border"></a>三、border</h3><p>1、🎓<strong>基本常识</strong></p><p>(1) 不支持百分比值</p><p>(2) 关键字: thin(1px)、medium(3px)、thick(4px)</p><p>(3) 默认宽度 medium</p><p>2、<strong>border-style</strong></p><p>(1) 默认值：none</p><p>(2) 常用值：solid、dashed、dotted、double</p><p>(3) 重置边框性能高的方法</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">🌰<span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">0</span> none;</span><br><span class="line">​&#125;</span><br></pre></td></tr></table></figure><p>3、<strong>border-color</strong></p><p>默认值：currentColor</p><p>4、📚<strong>运用</strong></p><p>(1) 增加点击区域</p><p>(2) 利用 transparent 等特性生成三角形、梯形等图形</p><p>(3) 实现等高布局</p><h3 id="四、margin"><a href="#四、margin" class="headerlink" title="四、margin"></a>四、margin</h3><p>1、📚<strong>margin 失效的情况</strong></p><p>(1) display 计算值 inline 的非替换元素的垂直 margin</p><p>(2) 表格中的 tr 和 td 元素或设置 display 计算值是table-cell 或 table-row 的元素</p><p>(3) margin 合并时，更改 margin 值时</p><p>(4) 绝对定位元素非定位方位的 margin 值</p><p>(5) 定高容器的子元素 margin-bottom</p><p>(6) 定宽元素的子元素 margin-right</p><p>(7) 内联特性导致的 margin 无效</p><p>2、<strong>margin:auto 填充规则</strong></p><p>(1) 如果一侧定值，一侧 auto，则 auto 为剩余空间大小</p><p>(2) 若两侧均是 auto，则平分剩余空间</p><p>3、<strong>margin 合并</strong></p><p>(1) 🎓<strong>是什么</strong></p><p>块级元素的 margin-top 和 margin-bottom 合并</p><p>(2) 🎓<strong>发生 margin 合并的场景</strong></p><ul><li><p>相邻兄弟元素</p></li><li><p>父级元素和第一个子元素&#x2F;最后一个子元素, 阻止合并方法</p><ul><li><p>父元素设置为块级格式化上下文</p></li><li><p>设置border-top&#x2F;border-bottom</p></li><li><p>设置padding-top&#x2F;padding-bottom</p></li><li><p>父元素和第一个子元素或最后一个子元素间添加内联元素进行分隔</p></li><li><p>父元素设置 height，min-height或max-height（margin-bottom合并）</p></li></ul></li><li><p>空块级元素, 阻止合并方法</p><ul><li><p>设置垂直方向border</p></li><li><p>设置垂直方向 padding</p></li><li><p>内部添加内联元素</p></li><li><p>设置height &#x2F; min-height</p></li></ul></li><li><p>计算规则</p><ul><li><p>正正取大值</p></li><li><p>正负值相加</p></li><li><p>负负取绝对负值最大的值</p></li></ul></li></ul><p>4、🔧<strong>运用</strong></p><p>(1) <strong>margin 设置负值实现两端对齐</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">🌰<span class="selector-class">.parent</span> &#123; </span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">20px</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-class">.child</span> &#123; </span><br><span class="line">  <span class="attribute">float</span>: left; </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>; </span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20px</span>; </span><br><span class="line">&#125;​​​</span><br></pre></td></tr></table></figure><p>(2) 滚动模式下底部留白使用padding会有兼容问题，使用子元素 margin 比较靠谱</p><p>(3) <strong>实现等高布局</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">🌰<span class="selector-class">.box</span> &#123; </span><br><span class="line">  <span class="attribute">overflow</span>: hidden; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-class">.left</span>, <span class="selector-class">.right</span> &#123; </span><br><span class="line">  <span class="attribute">margin-bottom</span>: -<span class="number">9999px</span>; </span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">9999px</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 系列文章——CSS 中的流与尺寸</title>
      <link href="/css-series-flow-and-dimensions/"/>
      <url>/css-series-flow-and-dimensions/</url>
      
        <content type="html"><![CDATA[<h3 id="一、流与宽度"><a href="#一、流与宽度" class="headerlink" title="一、流与宽度"></a>一、流与宽度</h3><p>1、一个水平流上只能单独显示一个元素，多个块级元素换行显示</p><p>2、<strong>外部尺寸与流体特性</strong></p><p>(1) 正常流下，块级元素宽度是容器的 100%，即充满容器</p><p>(2) 流动性，是一种 margin&#x2F;border&#x2F;padding 和 content 内容区域自动分配水平空间的机制</p><p>(3) 格式化宽度，仅出现在”绝对定位模型”中，对于非替换元素，当 left&#x2F;top 或 top&#x2F;bottom 对立方位的属性值同时存在的时候，元素的宽度表现为“格式化宽度”，其宽度大小相对于最近的具有定位特性(position 属性值不是 static)的祖先元素计算</p><p>3、<strong>内部尺寸与流体特性</strong></p><p>(1) 内部尺寸，元素的尺寸由内部的元素决定，若元素无内容，宽度表现为 0</p><p>(2) 具有包裹性，自适应性，即，超过容器自动换行，inline-block 元素，浮动元素以及绝对定位元素都具有包裹性</p><h3 id="二、说说-width"><a href="#二、说说-width" class="headerlink" title="二、说说 width"></a>二、说说 width</h3><p>1、<strong>默认值：</strong> auto</p><p>2、<strong>表现：</strong></p><p>(1) 充分利用可用空间(fill-availiable),块级元素的默认宽度是父级容器的 100%</p><p>(2) 收缩与包裹(shrink-to-fit)，比如，浮动、绝对定位等</p><p>(3) 收缩到最小(min-content)，当每一列空间都不够时，文字能断就断</p><p>(4) 超出容器限制，默认的 width 设置，元素一般不会超出，除非设置了 white-space: noWrap 或者内容是很长的连续英文或数字</p><p>3、<strong>首选最小宽度</strong></p><p>(1) 东亚文字最小宽度为每个汉字的宽度</p><p>(2) 西方文字最小宽度由特定的连续英文字符单元决定，一般以空格或者非英文字符作为分隔</p><p>(3) 类似图片这样的替换元素的最小宽度是该元素内容本身的宽度</p><p>4、<strong>最大宽度</strong></p><p>若内部没有块级元素或块级元素未设定宽度，最大宽度是最大的连续内联盒子的宽度</p><p>5、<strong>设置 width 值的影响</strong></p><p>(1) width 默认作用在 content box 上，设置 padding、margin 等会增大宽度</p><p>(2) 流动性丢失</p><p>(3) 表现不一致</p><p>6、<strong>宽度分离</strong></p><p>(1) width 属性不与影响宽度的 padding&#x2F;border 属性共存</p><p>(2) 方法：width 独占一层标签，padding、border 以及 margin 利用流动性在内部自适应</p><h3 id="三、改变-width-height-作用细节-box-sizing"><a href="#三、改变-width-height-作用细节-box-sizing" class="headerlink" title="三、改变 width&#x2F;height 作用细节: box-sizing"></a>三、改变 width&#x2F;height 作用细节: box-sizing</h3><p>1、box-sizing，默认值：content-box</p><p>2、box-sizing 设计的初衷：解决替换元素宽度自适应问题</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">img</span>,<span class="selector-tag">video</span>,<span class="selector-tag">object</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box</span><br><span class="line">​&#125;</span><br></pre></td></tr></table></figure><h3 id="四、说说-height"><a href="#四、说说-height" class="headerlink" title="四、说说 height"></a>四、说说 height</h3><p>1、父元素 height: auto，正常文档流下，子元素百分比值无效</p><p>2、解决方法</p><p>(1) 绝对定位</p><p>(2) 给父元素高度设置固定值</p><h3 id="五、min-width-max-width"><a href="#五、min-width-max-width" class="headerlink" title="五、min-width&#x2F;max-width"></a>五、min-width&#x2F;max-width</h3><p>1、**适用场景：**自适应布局&#x2F;流体布局</p><p>2、<strong>屏幕自适应</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">🌰<span class="selector-class">.container</span> &#123;</span><br><span class="line"><span class="attribute">min-width</span>: <span class="number">1200px</span>;</span><br><span class="line"><span class="attribute">max-width</span>: <span class="number">1400px</span>;</span><br><span class="line">​&#125;</span><br></pre></td></tr></table></figure><p>3、<strong>图片自适应</strong></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">🌰<span class="selector-tag">img</span> &#123;</span><br><span class="line"><span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">height</span>: auto;</span><br><span class="line">​&#125;</span><br></pre></td></tr></table></figure><p>4、min-width&#x2F;min-height 的初始值是 auto，max-width&#x2F;max-height 的初始值是 none</p><p>5、会覆盖 width, 包括设置了 !important 的 width</p><p>6、二者冲突时， min-width 会覆盖 max-width</p><p>7、<strong>应用实例</strong></p><p>通过改变 max-height 值实现任意高度元素的展开收起动画效果，但是 max-height 值需要设置足够小的安全值，避免动画延迟</p><h3 id="六、CSS-中的盒子"><a href="#六、CSS-中的盒子" class="headerlink" title="六、CSS 中的盒子"></a>六、CSS 中的盒子</h3><p>1、块级盒子(block-level box)</p><p>2、<strong>内联盒子(inline-box)</strong></p><p>内联盒模型</p><p>(1) 内容区域(content area)</p><p>(2) 内联盒子(inline box)，分为内联盒子和匿名内联盒子</p><p>(3) 行宽盒子(line box)</p><p>(4) 包含盒子(containing box)</p><p>(5) 标记盒子(marker box)</p><p>(6) 容器盒子(content-box, 宽高作用的盒子)，容器盒子里面又包含：content box、padding box、border box、margin box，这些称为内在盒子</p><p>3、<strong>内联元素，外部盒子是内联盒子</strong></p><p>🌰button(默认值:inline-block)、img、表单控件等</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 系列文章 —— 内联元素与流</title>
      <link href="/css-series-inline-elements-and-flow/"/>
      <url>/css-series-inline-elements-and-flow/</url>
      
        <content type="html"><![CDATA[<h3 id="一、x-height"><a href="#一、x-height" class="headerlink" title="一、x-height"></a>一、x-height</h3><p>1、<strong>是什么:</strong> 指小写字母 x 的高度，术语描述就是基线和等分线(mean line)(也称作中线，midline)之间的距离</p><p>2、内联元素默认都是基线对齐的, 即 x-height&#x2F;2</p><p>3、<strong>ex</strong>: 实现不受字体和字号影响的内联元素的垂直居中对齐(1ex &#x3D; x-height)</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.icon-arrow</span> &#123; </span><br><span class="line">  <span class="attribute">display</span>: inline-block; </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>; </span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1ex</span>; </span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">arrow.png</span>) no-repeat center; &#125;</span><br></pre></td></tr></table></figure><h3 id="二、line-height"><a href="#二、line-height" class="headerlink" title="二、line-height"></a>二、line-height</h3><p>1、<strong>默认值</strong>：normal，支持数值、百分比值以及长度值</p><p>2、无论内联元素 line-height 如何设置，最终父级元素的高度都是由数值大的那个 line-height 决定的，称之为“内联元素 line-height 的大值特性</p><p>3、🔧<strong>运用</strong></p><p>(1) 利用行距的上下等分机制，实现内联元素垂直居中</p><p>(2)  通过调整 line-height 实现多行文本垂直居中</p><h3 id="三、vertical-align"><a href="#三、vertical-align" class="headerlink" title="三、vertical-align"></a>三、vertical-align</h3><p>1、<strong>默认值</strong>是 baseline，即基线对齐(相对字母 x 的下边缘对齐)</p><p>2、<strong>属性值分类</strong></p><p>(1) <strong>线类</strong>，如 baseline(默认值)、top、middle、bottom</p><ul><li><p>一个 inline-block 元素，如果里面没有内联元素，或者 overflow 不是 visible，则该元素的基线就是其 margin 底边缘;否则其基线就是元素里面最后一行内联元素的基线。</p></li><li><p>vertial-align:top&#x2F;bottom ，就是垂直上&#x2F;下边缘对齐，具体定义如下:</p><ul><li><p>内联元素:元素底部和当前行框盒子的顶部&#x2F;底部对齐</p></li><li><p>table-cell 元素:元素底 padding 边缘和表格行的顶部&#x2F;底部对齐</p></li></ul></li><li><p>vertial- align:middle</p><ul><li><p>内联元素:元素的垂直中心点和行框盒子基线往上 1&#x2F;2 x-height 处对齐。(近似居中)</p></li><li><p>table-cell 元素:单元格填充盒子相对于外面的表格行居中对齐。</p></li><li><p>如果想要实现真正意义上的垂直居中对齐，只要想办法让字符 x 的中心位置就是容器的垂直中心位置即可，通常的做法是设置 font-size:0</p></li></ul></li></ul><p>(2) <strong>文本类</strong>，如 text-top、text-bottom</p><ul><li><p>vertical-align:text-top:盒子的顶部和父级内容区域的顶部对齐</p></li><li><p>vertical-align:text-bottom:盒子的底部和父级内容区域的底部对齐。</p></li><li><p>特点</p><ul><li><p>文本类属性值的垂直对齐与左右文字大小和高度都没有关系</p></li><li><p>文本类属性值的垂直对齐可以像素级精确控制</p></li></ul></li></ul><p>(3) <strong>上标下标类</strong>，如 sub、super</p><p>(4) <strong>数值</strong>, 如 20px、2em</p><ul><li>根据计算值的不同，相对于基线往上或往下偏移，到底是往上还是往下取决于 vertical- align 的计算值是正值还是负值，如果是负值，往下偏移，如果是正值，往上偏移</li></ul><p>(5) <strong>百分比类</strong>，如 20%等</p><p>相对于 line-height 的计算值计算的</p><p>3、<strong>有效的前提</strong></p><p>(1) 只能应用于内联元素以及 display 值为 table-cell 的元素</p><p>(2) 对 table-cell 元素而言，vertical-align 起作用的是 table-cell元素自身</p><p>4、<strong>无效的情况</strong></p><p>浮动和绝对定位使元素块状化</p><p>5、任意一个块级元素，里面若有图片，则块级元素高度基本上都要比图片的高度高</p><p>6、<strong>幽灵空白节点</strong></p><p>(1) 产生原因：字母 x 往下的行高产生的多余的间隙</p><p>(2) 解决方法</p><ul><li><p>图片块状化。可以一口气干掉“幽灵空白节点”、line-height 和 vertical-align。</p></li><li><p>容器 line-height 足够小。只要半行间距小到字母 x 的下边缘位置或者再往上，自然就没有了撑开底部间隙高度空间了。比方说，容器设置 line-height:0。</p></li><li><p>容器 font-size 足够小。此方法要想生效，需要容器的 line-height 属性值和当前 font-size 相关，如 line-height:1.5 或者 line-height:150%之类;否则只会让下面的间隙变得更大，因为基线位置因字符 x 变小而往上升了。</p></li><li><p>图片设置其他 vertical-align 属性值。间隙的产生原因之一就是基线对齐，所以我们设置 vertical-align 的值为 top、middle、bottom 中的任意一个都是可以的。</p></li></ul><p>7、<strong>20px 图标对齐的处理技巧</strong></p><p>(1) 图标高度和当前行高都是 20px。很多小图标背景合并工具都是图标宽高多大生成的CSS 宽高就是多大，这其实并不利于形成可以整站通用的 CSS 策略，建议图标原图先扩展成统一规格，比方说这里的 20px×20px，然后再进行合并，可以节约大量 CSS 以及对每个图标对齐进行不同处理的开发成本。</p><p>(2) 图标标签里面永远有字符。这个可以借助:before 或:after 伪元素生成一个空格字符轻松搞定。</p><p>(3) 图标 CSS 不使用 overflow:hidden 保证基线为里面字符的基线，但是要让里面潜在的字符不可见。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 系列文章——CSS 基础知多少</title>
      <link href="/css-series-basics/"/>
      <url>/css-series-basics/</url>
      
        <content type="html"><![CDATA[<h3 id="一、CSS-是怎么组织的"><a href="#一、CSS-是怎么组织的" class="headerlink" title="一、CSS 是怎么组织的"></a>一、CSS 是怎么组织的</h3><p>先看一段 demo：</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的 demo 是我们常见的 CSS 代码，那么他是如何组织的呢？首先，可以看到花括号里面有 width, height 之类的描述词，这种描述词就是 <strong>CSS 属性</strong>，而 width， height 后面会有进一步细化的描述，20px, 30px 等，这就是<strong>属性值</strong>。每一个属性值对后面都有个分号，比如，”width: 20px;”，我们称这是一条 CSS <strong>声明</strong>。所有的 CSS 声明被放在了一个大的花括号里，花括号以及它所包含的声明，被称为 CSS <strong>声明块</strong>。而一段 CSS 名称 + 后面紧跟的块，形成一个 CSS <strong>规则集</strong>。</p><h3 id="二、CSS-属性值的常用类型"><a href="#二、CSS-属性值的常用类型" class="headerlink" title="二、CSS 属性值的常用类型"></a>二、CSS 属性值的常用类型</h3><h4 id="1、距离值-数值-长度单位"><a href="#1、距离值-数值-长度单位" class="headerlink" title="1、距离值(数值 + 长度单位)"></a>1、距离值(数值 + 长度单位)</h4><h5 id="1-相对长度单位"><a href="#1-相对长度单位" class="headerlink" title="(1)相对长度单位"></a>(1)相对长度单位</h5><p>A. 文字长度单位</p><ul><li><p>ch, 字符’0’（Unicode值是U+0030）所占据的宽度</p></li><li><p>em, 元素的计算字体大小。如果用于字体大小属性本身，则表示元素的继承字体大小</p></li><li><p>ex, 元素当前的x-height，也就是字母’x’的高度</p></li><li><p>rem， 相对于根元素的字体大小</p></li><li><p>rlh， 相对于根元素的行高大小</p></li></ul><p>B. 视区长度单位</p><ul><li><p>vh, 浏览器窗口视区 1% 的高度</p></li><li><p>vw, 浏览器窗口视区 1% 的宽度</p></li><li><p>vmin, 等于 vh 和 vw 较小的值</p></li><li><p>vmax, 等于 vh 和 vw 较大的值</p></li></ul><h5 id="2-绝对长度单位"><a href="#2-绝对长度单位" class="headerlink" title="(2)绝对长度单位"></a>(2)绝对长度单位</h5><ul><li><p>px, 对于屏幕显示，1 像素通常表示一个设备像素（点）。然而，对于打印机和高分辨率屏幕，一个CSS像素意味着多个设备像素。1px&#x3D;1英寸的1&#x2F;96。</p></li><li><p>cm, 厘米，1cm &#x3D; 96px&#x2F;2.54</p></li><li><p>mm, 毫米，1mm &#x3D; 1cm&#x2F;10 &#x3D; 96px&#x2F;2.54&#x2F;10</p></li><li><p>in, 英寸, 1in &#x3D; 2.54cm &#x3D; 96px</p></li><li><p>pc, 派卡，1pc &#x3D; 12pt &#x3D; 1in&#x2F;6</p></li><li><p>pt, 点，1pt &#x3D; 1in&#x2F;72</p></li></ul><h4 id="2、角度值-数值-角度单位"><a href="#2、角度值-数值-角度单位" class="headerlink" title="2、角度值(数值 + 角度单位)"></a>2、角度值(数值 + 角度单位)</h4><p>(1) deg，度，一个完整的圆是 360 deg</p><p>(2) grad, 百分度，角的测量单位， 一个完整的圆是 400 grad</p><p>(3) rad，弧度，弧长与半径之比，一个完整的圆是 2π 弧度, 大约是 6.2832rad, 1rad &#x3D; 180 &#x2F; π</p><p>(4) turn，圈数，一个完整的圆是 1turn, 1&#x2F;4 圆是 0.25turn</p><h4 id="3、颜色值"><a href="#3、颜色值" class="headerlink" title="3、颜色值"></a>3、颜色值</h4><p>(1) 颜色值关键字，颜色值的英文单词，比如: ‘red’, ‘blue’等，目前共有 147 个，详细颜色值<a href="https://www.zhangxinxu.com/wordpress/2010/08/css3%e4%b8%8b%e7%9a%84147%e4%b8%aa%e9%a2%9c%e8%89%b2%e5%90%8d%e7%a7%b0%e5%8f%8a%e5%af%b9%e5%ba%94%e9%a2%9c%e8%89%b2%e5%80%bc/">戳这里</a></p><p>(2) transparent, 透明</p><p>(3) currentColor, 颜色变量, 当前的标签所继承的文字颜色</p><p>(4) RGB 颜色，语法包括：#RRGGBB[AA]，#RGB[A]，rgb[a](R, G, B[, A])以及rgb[a](R G B[ &#x2F; A])</p><p>(5) HSL 颜色，语法包括：hsl[a](H, S, L[, A])，以及CSS Colors Level 4中新增的hsl[a](H S L[ &#x2F; A])</p><h4 id="4、百分比值"><a href="#4、百分比值" class="headerlink" title="4、百分比值"></a>4、百分比值</h4><p>相对于父辈元素对象计算占比</p><h4 id="5、数值"><a href="#5、数值" class="headerlink" title="5、数值"></a>5、数值</h4><p>数值包括小数和整数，比如 <code>line-height: 1.2</code></p><h4 id="6、关键字"><a href="#6、关键字" class="headerlink" title="6、关键字"></a>6、关键字</h4><p>比如 <code>border: solid</code> 中的 solid</p><h4 id="7、函数值"><a href="#7、函数值" class="headerlink" title="7、函数值"></a>7、函数值</h4><p>比如，<code>height: calc(100% - 20px)</code> 中的 “calc(100% - 20px)”</p><h3 id="三、CSS-选择器"><a href="#三、CSS-选择器" class="headerlink" title="三、CSS 选择器"></a>三、CSS 选择器</h3><p>1、类选择器</p><p>形如: <code>.icon &#123;&#125;</code></p><p>2、ID 选择器</p><p>形如: <code>#title&#123;&#125;</code>, 具有唯一性，不建议一个文档中多处用</p><p>3、属性选择器</p><p>形如: <code>[title~=hello] &#123; color:red; &#125;</code>，这个例子为包含指定值的 title 属性的所有元素设置颜色为红色</p><p>4、伪类选择器</p><p>形如：<code>selector : pseudo-class &#123;property: value&#125;</code></p><p>6、伪元素选择器</p><p><code>selector:pseudo-element &#123;property:value;&#125;</code></p><h3 id="四、关系选择器"><a href="#四、关系选择器" class="headerlink" title="四、关系选择器"></a>四、关系选择器</h3><p>1、 后代选择器</p><p>形如: <code>#yayunhui h1&#123;&#125;</code>, 该实例会对带有 ‘yayunhui’ ID 的所有子元素 h1 应用样式</p><p>2、子元素选择器</p><p>以 ‘&gt;’ 连接，形如: <code>#wrap&gt;h1 &#123;&#125;</code>，该实例只会对带有 ‘wrap’ ID 的直接子元素 h1 应用样式</p><p>3、兄弟选择器</p><p>以 ‘<del>‘ 连接，形如: &#96;.title</del>h1&#96;，该实例会对带有 title 类的所有同级元素应用样式</p><p>4、相邻兄弟选择器</p><p>以 ‘+’ 连接, 形如: <code>.title+h1</code>, 该实例只会对带有 title 类的相邻同级元素应用样式</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 系列文章——CSS历史及文档流</title>
      <link href="/css-series-history-and-document-flow/"/>
      <url>/css-series-history-and-document-flow/</url>
      
        <content type="html"><![CDATA[<h3 id="一、CSS-简史"><a href="#一、CSS-简史" class="headerlink" title="一、CSS 简史"></a>一、CSS 简史</h3><p>1、1994 年被提议</p><p>2、1996 年 W3C 正式推出 CSS1</p><p>3、1998 年 W3C 正式推出 CSS2，推行内容和表现分离，table 布局开始没落</p><p>4、2007 年发布 CSS2.1，IE8 开始全面支持 CSS2.1</p><p>5、CSS3 在 CSS 2.1 的基础上进行改进，布局方法更多样(flex,grid,媒体查询等），视觉表现更丰富</p><h3 id="二、CSS1-及-CSS2-的目的"><a href="#二、CSS1-及-CSS2-的目的" class="headerlink" title="二、CSS1 及 CSS2 的目的"></a>二、CSS1 及 CSS2 的目的</h3><p>为图文信息展示服务</p><h3 id="三、文档流-流"><a href="#三、文档流-流" class="headerlink" title="三、文档流(流)"></a>三、文档流(流)</h3><h4 id="1、是什么"><a href="#1、是什么" class="headerlink" title="1、是什么"></a>1、是什么</h4><p>元素的基本定位和布局机制</p><h4 id="2、文档流是如何影响元素布局的"><a href="#2、文档流是如何影响元素布局的" class="headerlink" title="2、文档流是如何影响元素布局的"></a>2、文档流是如何影响元素布局的</h4><p>(1) 正常文档流</p><p>(2) 破坏文档流，实现特殊布局</p><p>(3) 改变文档流，实现更加丰富的布局效果</p><h4 id="3、流体布局"><a href="#3、流体布局" class="headerlink" title="3、流体布局"></a>3、流体布局</h4><p>“div+css” 布局，比如有名的双飞燕布局、圣杯布局等</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>科普</title>
      <link href="/science-popularization/"/>
      <url>/science-popularization/</url>
      
        <content type="html"><![CDATA[<p>1、西北太平洋生成的热带气旋叫做”台风”（typhoon），其他海域生成的叫做”飓风”（hurricane）</p><p>2、通常情况下，经济增长一定伴随资源消耗的增长和自然环境的压力。一旦经济进入成熟阶段以后，增长可能会带来资源消耗的减少。</p><p>3、<strong>非暴力交流</strong></p><p>(1) Observe Facts - observe the specific facts that are affecting our wellbeing, and bring them up with the other person（陈述现状）</p><p>(2) Note Feelings - introspect about what exactly we are feeling in response to what we’ve observed, and communicate these feelings（说明感受）</p><p>(3) Uncover Desires - figure out the desires, wants and values that are creating our feelings, and explain them to the other person（说明内心的期望值）</p><p>(4) Make Requests - ask for concrete actions to help resolve the situation（提出请求）</p><p>(5)不好的🌰Felix, you always leave your dirty socks on the floor! It’s disgusting! Clean this up before you do anything else.</p><p>(6)好的🌰[1. Observe Facts] Felix, when I see two balls of soiled socks under the coffee table, [2. Note Feelings] I feel irritated because [3. Uncover Desires] I want more order in the rooms that we share in common - [4. Make Requests] would you be willing to put your socks in the washing machine?</p><p>4、<strong>提升表达效果的方法</strong></p><p>(1)拆分：内容尽量拆分成一系列简短而明确的小观点，粒度要细到每个观点都可以让人快速地、一目了然地领会。 </p><p>(2)反复：开头的几点用来吸引读者的注意力，然后进入核心部分时，采用各种形式反复展示，就是翻来覆去地讲，力求给人留下深刻印象。</p><p>5、根据爱因斯坦最著名的质能公式 E&#x3D;mc²，能量即质量，任何释放能量的物体都必然会减轻质量。</p><p>6、如果你想快速了解一个新事物是什么，一个简单的方法就是在这个词的后面加上”vs”，谷歌会自动提示跟它最接近的事物。</p><p>7、现在一个月还贷一万元，好像很多钱的样子；但过了20年，你还是每月还贷一万元，那时由于货币贬值，这点钱已经不足挂齿了。只要货币一直在贬值，而房子不贬值（通常如此），那么银行贷款就是对你的补助。</p><p>8、数据分析可以分成两个层次。</p><ul><li><p>基础层：发现数据包含的趋势，对产品经理和业务人员比较有用。</p></li><li><p>进阶层：运用数据去构造模型，再用来处理新的数据，对算法人员和开发者比较有用。</p></li></ul><p>9、数据分析工具</p><ul><li><p>Python 语言：数据处理的基本语法。</p></li><li><p>科学计算库：pandas、matplotlib、scikit-learn 等，提供封装好的各种数学工具。</p></li><li><p>SQL 和 Mysql：数据查询语法和储存引擎。</p></li><li><p>Hive：海量数据分析工具，可以进行分布式数据处理。</p></li></ul><p>10、中证传媒&#x3D;A股游戏版块</p><p>11、债基，主要看基金经理历史业绩和风格</p><p>12、基金就是很多人一起集资去投资</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些概念</title>
      <link href="/some-concepts/"/>
      <url>/some-concepts/</url>
      
        <content type="html"><![CDATA[<h3 id="不要构建系统，而要构建子系统"><a href="#不要构建系统，而要构建子系统" class="headerlink" title="不要构建系统，而要构建子系统"></a>不要构建系统，而要构建子系统</h3><p>这就像 Unix 哲学：每个工具做好一件事，不同的工具协同工作。</p><h3 id="信息的半衰期"><a href="#信息的半衰期" class="headerlink" title="信息的半衰期"></a>信息的半衰期</h3><p>指的是，一半的信息量变得无关紧要或者彻底过时所需的时间。</p><h3 id="零工经济"><a href="#零工经济" class="headerlink" title="零工经济"></a>零工经济</h3><p>指的是越来越多的就业，属于”打零工”性质。稳定的长期工作越来越难找，只找得短期的临时雇佣，许多人就靠长期打零工养活自己。</p><h3 id="斜杠青年"><a href="#斜杠青年" class="headerlink" title="斜杠青年"></a>斜杠青年</h3><p>指的是从事过多种职业的年轻人。因为他简历的”职业”一栏，会填写很多不同的工作，需要用斜杠分隔。</p><h3 id="U-盘化生存"><a href="#U-盘化生存" class="headerlink" title="U 盘化生存"></a>U 盘化生存</h3><p>这是罗振宇老师提出的概念，他提倡年轻人”自带信息，不装系统，随时插拔，自由协作”，也就是像 U 盘那样，把你插在哪里，你就在哪里工作，时刻准备着被切换到另一个位置。</p><h3 id="Uber-job"><a href="#Uber-job" class="headerlink" title="Uber-job"></a>Uber-job</h3><p>指的是 Uber 那一类在网上接单的工作，一单一单计算报酬，属于临时承包商的性质，比如开网约车和外卖送餐。</p><h3 id="游戏即教育"><a href="#游戏即教育" class="headerlink" title="游戏即教育"></a>游戏即教育</h3><h3 id="哲学剃刀"><a href="#哲学剃刀" class="headerlink" title="哲学剃刀"></a>哲学剃刀</h3><p>“剃刀”（razor）这个词，在哲学里面有特殊含义，指的是一种经验法则，可以对某种现象做出简洁的解释，消除了其他的解释。常常被引用的”剃刀”（经验法则）有下面这些。</p><ul><li><p>奥卡姆剃刀：更简单的解释更可能是正确的。引申为某个命题成立，所需要的假设越少越好。</p></li><li><p>汉隆剃刀：可以归咎于愚蠢的事情，不要归咎于恶意。</p></li><li><p>希钦斯剃刀：凡是无证据的断言，也可以无证据地驳回。</p></li><li><p>休谟剃刀：从一样东西是什么，无法推导出它应该是什么，即无法从事实推导出价值判断。</p></li><li><p>牛顿剃刀：无法通过实验或观察解决的问题，不值得争论。</p></li><li><p>萨根标准：非同寻常的主张，需要非同寻常的证据。</p></li><li><p>波普原则：一个理论被认为是正确的，前提必须是有可能证明它是错误的，即必须是可证伪的。</p></li></ul><h3 id="信息成瘾"><a href="#信息成瘾" class="headerlink" title="信息成瘾"></a>信息成瘾</h3><p>指的是强迫性信息消费，明明已经看完所有内容，你仍在继续滚动浏览 Facebook；你刚刚关闭 Instagram，立即再次打开它；你每五分钟拿起手机，检查有没有新的通知。</p><h3 id="锚定偏差"><a href="#锚定偏差" class="headerlink" title="锚定偏差"></a>锚定偏差</h3><p>（anchoring bias）指的是决策时严重依赖第一个可用的信息。比如，你走进一家体育用品商店，发现的第一件商品，是一条价值500美元的运动裤。接着，你看到另一条价格为300美元的运动裤时，就会觉得它很便宜，实际上如果首先看到这条300美元的裤子，你会觉得它根本不便宜。</p><h3 id="内卷化"><a href="#内卷化" class="headerlink" title="内卷化"></a>内卷化</h3><p>内卷化，指一种社会或文化模式在某一发展阶段达到一种确定的形式后，便停滞不前或无法转化为另一种高级模式的现象。当一个组织不能或不愿向外发展时，成员的精力就只好用到组织内部，这时就会出现”内卷化”，也就是内部的过度发展</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>美句摘抄</title>
      <link href="/sentence-excerpts/"/>
      <url>/sentence-excerpts/</url>
      
        <content type="html"><![CDATA[<h3 id="新海诚电影的诗意"><a href="#新海诚电影的诗意" class="headerlink" title="新海诚电影的诗意"></a>新海诚电影的诗意</h3><ul><li><p>樱花落下的速度是每秒五厘米， 我该用怎么样的速度，才能与你相遇。——秒速五厘米</p></li><li><p>雨滴降落的速度是每秒十米，我该用怎么样的速度，才能将你挽留。——言叶之庭</p></li><li><p>陨石坠落的速度是每秒十千米，我该用怎么样的速度，才能将你拯救。——你的名字</p></li><li><p>烟花消散的速度是每秒三亿米，我该用什么样的速度，才能将你追回————烟花</p></li></ul><h3 id="萤火虫之森"><a href="#萤火虫之森" class="headerlink" title="萤火虫之森"></a>萤火虫之森</h3><ul><li><p>天文学里有个定义，叫洛希极限。行星和卫星会因为万有引力不断靠近，但他们之间有个保持安全的最短距离，一旦超过洛希极限，潮汐力会把那颗卫星撕碎。然后那颗已经粉碎崩塌的星球会化作星尘，渐渐地聚拢在那颗行星身旁，演变成一个环，将那颗行星环抱。“用一次粉身碎骨，换一个永恒的拥抱，也挺好</p></li><li><p>无法触碰的爱恋，融化在一生一世的拥抱中。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字精确到小数点两位</title>
      <link href="/number-precise-to-two-decimal-places/"/>
      <url>/number-precise-to-two-decimal-places/</url>
      
        <content type="html"><![CDATA[<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>对 js 有一定了解的人都知道，js 的数字精确度比较低，这就有必要自己去实现一套精确度高的算法了，精确到小数点后几位，是我们经常会用到的，比如价格的计算等，下面来讲讲这个算法的步骤</p><p>1、 要进行精度计算，首先要明确输入的是否为数字</p><p>2、 需要明确，精确到小数点后几位</p><p>3、 明确该数字是否为小数，不是的话，需要根据精度去做补 0 操作</p><p>4、 确定该数字后的小数位数是否够精确的小数长度，不够的话，也要做补 0 操作</p><p>5、 若该数字既是小数，小数长度又比精度位长，判断截取精度后的小数后一位是否大于五，是的画进一位</p><p>6、 满足精度位，小数精度位后一位进位操作确定之后，还需要确定小数部位是否需要进位，是的话，整数部位加 1，小数部位开头替换为 0，不是的话就直接返回</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 精确到小数点两位</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">twoDEcimal</span>(<span class="params">number, precision = <span class="number">2</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> temp = number;</span><br><span class="line">  number = <span class="title class_">Number</span>(number);</span><br><span class="line">  <span class="comment">// 判断是否为数字，不是数字抛出异常</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Number</span>.<span class="built_in">isNaN</span>(number)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;无效的数字&quot;</span>, temp);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;无效的数字&quot;</span>, temp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  number = <span class="title class_">String</span>(number);</span><br><span class="line">  <span class="keyword">let</span> numbers = number.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">  <span class="comment">// 如果不是小数，补充对应的 0</span></span><br><span class="line">  <span class="keyword">if</span> (numbers.<span class="property">length</span> === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> number + <span class="string">&quot;.&quot;</span> + <span class="string">&quot;0&quot;</span>.<span class="title function_">repeat</span>(precision);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 如果是小数，但位数比要保留的位数少，也要补 0</span></span><br><span class="line">    <span class="keyword">if</span> (numbers[<span class="number">1</span>].<span class="property">length</span> &lt; precision) &#123;</span><br><span class="line">      <span class="keyword">return</span> number + <span class="string">&quot;.&quot;</span> + <span class="string">&quot;0&quot;</span>.<span class="title function_">repeat</span>(precision - numbers[<span class="number">1</span>].<span class="property">length</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 取整数部分</span></span><br><span class="line">      <span class="keyword">let</span> intNumber = <span class="built_in">parseInt</span>(number.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>)[<span class="number">0</span>]);</span><br><span class="line">      <span class="comment">// 取小数部分</span></span><br><span class="line">      <span class="keyword">let</span> decimal = number.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>];</span><br><span class="line">      <span class="comment">// 取出要保留的小数</span></span><br><span class="line">      <span class="keyword">let</span> frontDecimal = <span class="built_in">parseInt</span>(decimal.<span class="title function_">substr</span>(<span class="number">0</span>, precision));</span><br><span class="line">      <span class="comment">// 去除要保留小数的后一位</span></span><br><span class="line">      <span class="keyword">let</span> lastDecimal = <span class="built_in">parseInt</span>(decimal.<span class="title function_">substr</span>(precision, <span class="number">1</span>));</span><br><span class="line">      <span class="comment">// 如果最后一位大于5，就进位</span></span><br><span class="line">      <span class="keyword">if</span> (lastDecimal &gt;= <span class="number">5</span>) &#123;</span><br><span class="line">        frontDecimal += <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 判断小数部位是否需要进位</span></span><br><span class="line">      <span class="keyword">if</span> (frontDecimal === <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, precision)) &#123;</span><br><span class="line">        frontDecimal = <span class="string">&quot;0&quot;</span>.<span class="title function_">repeat</span>(precision);</span><br><span class="line">        intNumber += <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 处理保留的小数中有 0 出现的情况</span></span><br><span class="line">      frontDecimal =</span><br><span class="line">        <span class="string">&quot;0&quot;</span>.<span class="title function_">repeat</span>(precision - <span class="title class_">String</span>(frontDecimal).<span class="property">length</span>) + frontDecimal;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;intNumber&#125;</span>.<span class="subst">$&#123;frontDecimal&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="title function_">twoDEcimal</span>(<span class="number">1.255</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">a = <span class="title function_">twoDEcimal</span>(<span class="number">0.005</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算电饭煲的预约时间</title>
      <link href="/calculate-rice-cooker-reservation-time/"/>
      <url>/calculate-rice-cooker-reservation-time/</url>
      
        <content type="html"><![CDATA[<p>首先要确定预约的时间是指什么，是开始的时间，还是煮好之后的时间，如果是煮好之后的时间，就要在时间差的基础上减去煮好所需的时间，否则就是当前时间和期望时间的差。</p><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formatTime</span>(<span class="params">timeStamp</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(timeStamp);</span><br><span class="line">  <span class="keyword">const</span> day = [</span><br><span class="line">    date.<span class="title function_">getFullYear</span>(),</span><br><span class="line">    date.<span class="title function_">getMonth</span>() + <span class="number">1</span>,</span><br><span class="line">    date.<span class="title function_">getDate</span>(),</span><br><span class="line">    date.<span class="title function_">getHours</span>(),</span><br><span class="line">    date.<span class="title function_">getMinutes</span>(),</span><br><span class="line">    date.<span class="title function_">getSeconds</span>()</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">return</span> day;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// @param reservationTime:预约时间</span></span><br><span class="line"><span class="comment">// @param startTime：开始预约时间</span></span><br><span class="line"><span class="comment">// @param cookTime：需要煮的时长</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reservation</span>(<span class="params">&#123; reservationTime, startTime, cookTime &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  <span class="keyword">const</span> tomrrow = <span class="title function_">formatTime</span>(date.<span class="title function_">getTime</span>() + <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">const</span> tomrrowTime = <span class="string">`<span class="subst">$&#123;tomrrow[<span class="number">0</span>]&#125;</span>/<span class="subst">$&#123;tomrrow[<span class="number">1</span>]&#125;</span>/ <span class="subst">$&#123;tomrrow[<span class="number">2</span>]&#125;</span>  <span class="subst">$&#123;reservationTime&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">const</span> now = <span class="title function_">formatTime</span>(date.<span class="title function_">getTime</span>());</span><br><span class="line">  <span class="keyword">const</span> setTime = startTime</span><br><span class="line">    ? <span class="string">`<span class="subst">$&#123;now[<span class="number">0</span>]&#125;</span>/<span class="subst">$&#123;now[<span class="number">1</span>]&#125;</span>/ <span class="subst">$&#123;now[<span class="number">2</span>]&#125;</span>  <span class="subst">$&#123;startTime&#125;</span>`</span></span><br><span class="line">    : date.<span class="title function_">getTime</span>();</span><br><span class="line">  <span class="keyword">const</span> distance = <span class="keyword">new</span> <span class="title class_">Date</span>(tomrrowTime) - <span class="keyword">new</span> <span class="title class_">Date</span>(setTime) || date;</span><br><span class="line">  <span class="keyword">const</span> cook = cookTime.<span class="title function_">split</span>(<span class="string">&quot;:&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    distance / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> + +cook[<span class="number">0</span>],</span><br><span class="line">    ((distance / <span class="number">1000</span> / <span class="number">60</span>) % <span class="number">60</span>) + +cook[<span class="number">1</span>],</span><br><span class="line">    ((distance / <span class="number">1000</span>) % <span class="number">60</span>) + +cook[<span class="number">2</span>]</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> time = <span class="title function_">reservation</span>(&#123;</span><br><span class="line">  <span class="attr">reservationTime</span>: <span class="string">&quot;6:30:00&quot;</span>,</span><br><span class="line">  <span class="comment">// startTime: &quot;23:30:00&quot;,</span></span><br><span class="line">  <span class="attr">cookTime</span>: <span class="string">&quot;01:10:00&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> res = <span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.floor(time[<span class="number">0</span>])&#125;</span>:<span class="subst">$&#123;time[<span class="number">1</span>].toFixed()&#125;</span>:<span class="subst">$&#123;time[<span class="number">2</span>].toFixed()&#125;</span>`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见 Git 工作流程</title>
      <link href="/common-git-workflows/"/>
      <url>/common-git-workflows/</url>
      
        <content type="html"><![CDATA[<h3 id="一、简单的-Git-工作流程"><a href="#一、简单的-Git-工作流程" class="headerlink" title="一、简单的 Git 工作流程"></a>一、简单的 Git 工作流程</h3><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/Basic-git-workflow.png" alt="简单的 Git 工作流程图"></p><p>最简单的 Git 工作流程是只有一个 master 分支。开发者直接把代码 commit 到 master 分支并且用该分支进行发版等操作，即不分测试版和正式版，由始至终使用一份代码，因此，这份代码的记录都是在同一分支的。</p><p>这种工作流程一般不被推荐使用，除非是开发者单独负责项目并且希望快速创建项目</p><p>因为只有一个分支，分支管理就无从谈起了，这让开发者可以轻松上手 Git，但是，使用这种工作流程，我们需要注意一些问题：</p><p>(1) 在进行代码协作的时候可能会产生一些复杂的冲突</p><p>(2) 软件 hotfix 交付到正式版的时候风险可能会更高</p><p>(3) 代码的可维护性很差</p><h3 id="二、Git-功能分支工作流程"><a href="#二、Git-功能分支工作流程" class="headerlink" title="二、Git 功能分支工作流程"></a>二、Git 功能分支工作流程</h3><p>在需要进行多人项目协作的时候，Git 功能分支工作流程就很有必要登场了。</p><p>设想一个开发者在开发一个新功能的同时，另一个开发者在开发另一个功能，此时，若两个开发者用同一个分支进行协作，这会产生大量的冲突。</p><p>为了解决上述问题，这两个开发者可以各自从 master 分支切出一个独立分支，当其中一个人手头的功能写完之后，可以自行合并到 master 分支进行发布，而无需等待另一个功能完成再一起发布。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/Feature-Branch-git-workflow.png" alt="Git 功能分支工作流程图"></p><p>这种工作流程的优点是可以愉快的进行代码写作而无需担心会产生一堆的代码冲突</p><h3 id="三、带有开发者分支的功能分支工作流程"><a href="#三、带有开发者分支的功能分支工作流程" class="headerlink" title="三、带有开发者分支的功能分支工作流程"></a>三、带有开发者分支的功能分支工作流程</h3><p>这种工作流程是主流的工作流程之一，它有点像是在功能分支外，多增加了一个与 master 分支平级的开发者分支。</p><p>在这种工作流程下，master 分支总是代表着正式版的预发布状态，开发团队如果想发布版本，就会从该分支进行发布。</p><p>develop 分支往往表示下一版产品最新一次交付变更的状态，开发者从 develop 分支切出相应的功能分支，若该功能完成，则合并到 develop 分支进行测试，若无冲突，合并到 master 分支。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/feature-branch-with-develop-git-workflow.png" alt="有开发者分支的功能分支工作流程图"></p><p>这种工作流程的有点是，允许团队可以持续交付新的功能到 develop 分支进行测试，合并到 master 分支进行发版。此外，这也会为我们的团队降低烦人的代码维护成本。</p><h3 id="四、Gitflow-工作流程"><a href="#四、Gitflow-工作流程" class="headerlink" title="四、Gitflow 工作流程"></a>四、Gitflow 工作流程</h3><p>gitflow 工作流程与前一个工作流程非常相似，不同的是多了两个分支：release 分支和 hot-fix 分支</p><p><strong>hot-fix 分支</strong></p><p>hot-fix 分支是唯一一个从 master 分支切出并且合并回 master 的分支，该分支用于修复线上版本的一些 bug。使用这个分支的好处是，可以快速的处理线上的一些问题并发布出去，而无需经过其他流程或者是等到下次迭代再发布。</p><p>一旦 hot-fix 合并到了 master 分支并且更新出去了，应该合并到 develop 分支和当前 release 分支。这么做是为了确保从 develop 分支切出新功能分支，能拿到最新的代码。</p><p><strong>release 分支</strong></p><p>当所有功能都完成开发，并且合并到 develop 分支没有产生冲突时，从 develop 分支 fork release 分支。</p><p>该分支仅包含与发布相关的代码，比如与该版本相关的文档，bug 修复代码以及其他的一些跟此次发布相关的内容。</p><p>一旦该分支合并到 master 并且发布出去了，应该合并回 develop 分支，以确保从 develop 分支切出的新功能分支拿到的是最新代码。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/GitFlow-git-workflow.png" alt="Gitflow 工作流程图"></p><p>该工作流程由 Vincent Driessen 首次发布并广受欢迎，目前，已被广泛适用于具有预定发布周期的组织。</p><p><strong>git-flow</strong></p><p>我们可以在项目中安装 git-flow，git-flow 会为我们创建好相应分支，因为 git-flow 只是 Git 的一个外壳，所以并不会对我们的代码产生任何影响。</p><p>git-flow 安装方法</p><p>mac: <code>brew install git-flow</code></p><p>windows: <a href="https://git-scm.com/download/win">下载</a> 并安装 git-flow 客户端 &#x3D;&gt; 执行 <code>git flow init </code> 在项目中使用 git -flow</p><h3 id="五、Git-Fork-工作流程"><a href="#五、Git-Fork-工作流程" class="headerlink" title="五、Git Fork 工作流程"></a>五、Git Fork 工作流程</h3><p>Fork 工作流程在开源软件团队中很流行。</p><p>该模式下工作流程通常是这样的：</p><p>1、开发者从开源项目的官方仓库 forks 一份代码的副本到自己的仓库</p><p>2、开发者从自己的仓库 clone 代码到本地</p><p>3、在本地项目中，把开原仓库的地址附加到远程路径上</p><p>4、开发者在本地仓库中切出一个新的功能分支，修改代码，提交变更到自己的仓库</p><p>5、从自己的仓库创建一个 pull  request，请求开源项目的官方仓库合并代码</p><p>6、开源项目的官方仓库确认变更并且接受该变更，合并代码</p><p>翻译自：</p><p><a href="https://zepel.io/blog/5-git-workflows-to-improve-development/">5 Git workflows you can use to deliver better code and improve your development process</a></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>说说 Vuex</title>
      <link href="/talking-about-vuex/"/>
      <url>/talking-about-vuex/</url>
      
        <content type="html"><![CDATA[<h3 id="一、为什么要说-Vuex"><a href="#一、为什么要说-Vuex" class="headerlink" title="一、为什么要说 Vuex"></a>一、为什么要说 Vuex</h3><p>上周在做项目的时候，有一个模块用到了一个章节组件，一个 content 组件，其中章节组件调用了一个 tree 组价用来递归章节列表。选中章节组件中的项，需要更新到 content 的已选章节部分，取消章节选项，已选章节也需要删除对应的项，此外，删除已选章节中的某一项，也需要更新左侧章节列表，比如这样：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/vuex-ex.gif" alt="示例"></p><p>我一开始的做法是使用组件间传数据，但是实践之后会发现一些问题，比如选中框是 checkbox 双向数据绑定，这里有三个组件，传来传去的容易绕，状态更新稍有一些逻辑问题可能会找半天。想了一会，去问了前端大佬，感觉豁然开朗，写久了小程序，我竟然把 vuex 给忘了，这种场景不就很适合用 vuex 嘛。 不过归根究底，还是我对 vuex 的使用场景没有研究过，导致用的时候想不起他来，下面就是我研究之后的一些结论啦。</p><h3 id="二、Vuex-应用场景"><a href="#二、Vuex-应用场景" class="headerlink" title="二、Vuex 应用场景"></a>二、Vuex 应用场景</h3><p>中大型单页应用，需要多个组件共享状态的时候，用 Vuex 可以达到事半功倍的效果。这里多个组件需要共享状态，可以有以下两种情况：</p><p>(1) 多个视图依赖于同一状态</p><p>(2) 来自不同视图的行为需要变更同一状态</p><p>比如上面我说的那个例子，章节选中状态和已选章节都是依赖于同一份数据的，并且章节变更需要修改的状态和删除已选章节需要修改的状态也是同一个，这个时候使用 vuex 就再合适不过了。</p><p>中大型应用用 vuex，那么小型应用也有类似的需求要用什么呢？ Vue 教程中状态管理模块给出了一个简单状态管理的 demo，也就是 Vuex 文档中提到的 store 模式，该模式参照 Flux 实现了 action 触发 state 变更，state 触发视图更新的逻辑，以达到多个组件共同维护一份数据的目的。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// store 模式</span></span><br><span class="line"><span class="keyword">var</span> store = &#123;</span><br><span class="line">  <span class="attr">debug</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Hello!&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">setMessageAction</span> (newValue) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">debug</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setMessageAction triggered with&#x27;</span>, newValue)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">message</span> = newValue</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">clearMessageAction</span> () &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">debug</span>) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;clearMessageAction triggered&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">message</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多个组件共享一份数据，通过 action 更新 state 中的数据状态</span></span><br><span class="line"><span class="keyword">var</span> vmA = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">privateState</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">sharedState</span>: store.<span class="property">state</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vmB = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">privateState</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">sharedState</span>: store.<span class="property">state</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="三、Flux"><a href="#三、Flux" class="headerlink" title="三、Flux"></a>三、Flux</h3><p>上面提到了 Flux，那么 Flux 是什么呢？Flux 是一种软件架构思想，facebook 在该思想的基础上实现了 Flux 框架，但是我们这里要讲的是 Vuex 所借鉴的 Flux 思想。Flux 把数据的流动分为四个阶段，View(视图层)、Action(视图层发出的消息)、Dispatcher(用来接收Actions、执行回调函数) 以及 Store(用来存放应用的状态，一旦发生变动，就提醒Views要更新页面)，他们之间的流动方式是这样的：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/flux.png" alt="Flux 数据流"></p><p>从上图可以看出，Flux 思想下的数据流动是单向的</p><p>参考文献：</p><p><a href="https://vuex.vuejs.org/zh/">Vuex 是什么？</a></p><p><a href="https://cn.vuejs.org/v2/guide/state-management.html#%E7%AE%80%E5%8D%95%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E8%B5%B7%E6%AD%A5%E4%BD%BF%E7%94%A8">类 Flux 状态管理的官方实现</a></p><p><a href="http://www.ruanyifeng.com/blog/2016/01/flux.html">Flux 架构入门教程</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>原地删除数组中的指定元素</title>
      <link href="/removeElement/"/>
      <url>/removeElement/</url>
      
        <content type="html"><![CDATA[<h3 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h3><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">Given an array nums and a value val, remove all instances of that value in-place</span><br><span class="line"> and return the new length.</span><br><span class="line"></span><br><span class="line">Do not allocate extra space for another array, you must do this by modifying the</span><br><span class="line"> input array in-place with O(1) extra memory.</span><br><span class="line"></span><br><span class="line">The order of elements can be changed. It doesn&#x27;t matter what you leave beyond the</span><br><span class="line"> new length.</span><br><span class="line"></span><br><span class="line">Example 1:</span><br><span class="line">Given nums = [3,2,2,3], val = 3,</span><br><span class="line">Your function should return length = 2, with the first two elements of nums being</span><br><span class="line"><span class="bullet"> 2.</span></span><br><span class="line"></span><br><span class="line">It doesn&#x27;t matter what you leave beyond the returned length.</span><br><span class="line"></span><br><span class="line">Example 2:</span><br><span class="line">Given nums = [0,1,2,2,3,0,4,2], val = 2,</span><br><span class="line">Your function should return length = 5, with the first five elements of nums</span><br><span class="line"> containing 0, 1, 3, 0, and 4.</span><br><span class="line">Note that the order of those five elements can be arbitrary.</span><br><span class="line"></span><br><span class="line">It doesn&#x27;t matter what values are set beyond the returned length.</span><br><span class="line">Clarification:</span><br><span class="line"></span><br><span class="line">Confused why the returned value is an integer but your answer is an array?</span><br><span class="line"></span><br><span class="line">Note that the input array is passed in by reference, which means modification</span><br><span class="line"> to the input array will be known to the caller as well.</span><br><span class="line"></span><br><span class="line">Internally you can think of this:</span><br><span class="line"></span><br><span class="line">// nums is passed in by reference. (i.e., without making a copy)</span><br><span class="line">int len = removeElement(nums, val);</span><br><span class="line"></span><br><span class="line">// any modification to nums in your function would be known by the caller.</span><br><span class="line">// using the length returned by your function, it prints the first len elements.</span><br><span class="line">for (int i = 0; i &lt; len; i++) &#123;</span><br><span class="line"><span class="code">    print(nums[i]);</span></span><br><span class="line"><span class="code">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>1、设置双指针 i, j, 其中指针 j 每次向前移动一步</p><p>2、 遍历 nums，当 nums[j] !&#x3D;&#x3D; val 时，说明不是指定的元素, 指针 i 向前挪动一步， 同时把 nums[j] 赋值给 nums[i]</p><p>3、结果返回 i </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">val</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> removeElement = <span class="keyword">function</span> (<span class="params">nums, val</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums.<span class="property">length</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> len = nums.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; len; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[j] !== val) &#123;</span><br><span class="line">      nums[i] = nums[j];</span><br><span class="line">      i++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> i</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test = [[[<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">3</span>], [[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">2</span>], <span class="number">2</span>]];</span><br><span class="line"></span><br><span class="line">test.<span class="title function_">forEach</span>(<span class="function"><span class="params">ele</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="title function_">removeElement</span>(ele[<span class="number">0</span>], ele[<span class="number">1</span>]);</span><br><span class="line"> </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;result:&#x27;</span>, res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>找出两个有序数组的中值</title>
      <link href="/find-median-sorted-arrays/"/>
      <url>/find-median-sorted-arrays/</url>
      
        <content type="html"><![CDATA[<h3 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h3><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">There are two sorted arrays nums1 and nums2 of size m and n respectively.</span><br><span class="line"></span><br><span class="line">Find the median of the two sorted arrays. The overall run time complexity </span><br><span class="line">should be O(log (m+n)).</span><br><span class="line"></span><br><span class="line">You may assume nums1 and nums2 cannot be both empty.</span><br><span class="line"></span><br><span class="line">Example 1:</span><br><span class="line">nums1 = [1, 3]</span><br><span class="line">nums2 = [2]</span><br><span class="line">The median is 2.0</span><br><span class="line"></span><br><span class="line">Example 2:</span><br><span class="line">nums1 = [1, 2]</span><br><span class="line">nums2 = [3, 4]</span><br><span class="line"></span><br><span class="line">The median is (2 + 3)/2 = 2.5</span><br></pre></td></tr></table></figure><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>暴力破解法，使用归并排序，把两个数组按照从小到大的排序方式合并到一个数组里，在新的数组里找中值</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums1</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums2</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> findMedianSortedArrays = <span class="keyword">function</span> (<span class="params">nums1, nums2</span>) &#123;</span><br><span class="line">  <span class="comment">// brute force</span></span><br><span class="line">  <span class="comment">// 归并排序</span></span><br><span class="line">  <span class="keyword">const</span> merged = [];</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> j = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> [lenA, lenB] = [nums1.<span class="property">length</span>, nums2.<span class="property">length</span>];</span><br><span class="line">  <span class="keyword">while</span> (i &lt; lenA &amp;&amp; j &lt; lenB) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums1[i] &lt; nums2[j]) &#123;</span><br><span class="line">      merged.<span class="title function_">push</span>(nums1[i]);</span><br><span class="line">      i++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      merged.<span class="title function_">push</span>(nums2[j]);</span><br><span class="line">      j++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (i &lt; lenA) &#123;</span><br><span class="line">    merged.<span class="title function_">push</span>(nums1[i]);</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (j &lt; lenB) &#123;</span><br><span class="line">    merged.<span class="title function_">push</span>(nums2[j]);</span><br><span class="line">    j++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; length &#125; = merged;</span><br><span class="line">  <span class="keyword">return</span> length % <span class="number">2</span> === <span class="number">1</span></span><br><span class="line">    ? merged[<span class="title class_">Math</span>.<span class="title function_">floor</span>(length / <span class="number">2</span>)]</span><br><span class="line">    : (merged[length / <span class="number">2</span>] + merged[length / <span class="number">2</span> - <span class="number">1</span>]) / <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test = [[[<span class="number">1</span>,<span class="number">3</span>],[<span class="number">2</span>]],[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]]]</span><br><span class="line"></span><br><span class="line">test.<span class="title function_">forEach</span>(<span class="function"><span class="params">ele</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="title function_">findMedianSortedArrays</span>(ele[<span class="number">0</span>], ele[<span class="number">1</span>]);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP 服务器</title>
      <link href="/http-server/"/>
      <url>/http-server/</url>
      
        <content type="html"><![CDATA[<h3 id="一、HTTP-服务是什么"><a href="#一、HTTP-服务是什么" class="headerlink" title="一、HTTP 服务是什么"></a>一、HTTP 服务是什么</h3><h4 id="1、一个网页请求包含两次-HTTP-包交换"><a href="#1、一个网页请求包含两次-HTTP-包交换" class="headerlink" title="1、一个网页请求包含两次 HTTP 包交换"></a>1、一个网页请求包含两次 HTTP 包交换</h4><p>(1) 浏览器向 HTTP 服务器发送请求 HTTP 包</p><p>(2) HTTP 服务器向浏览器返回 HTTP 响应包</p><h4 id="2、HTTP-服务要做的事情"><a href="#2、HTTP-服务要做的事情" class="headerlink" title="2、HTTP 服务要做的事情"></a>2、HTTP 服务要做的事情</h4><p>(1) 解析 HTTP 请求报文</p><p>(2) 返回 HTTP 响应报文</p><h3 id="二、手写-HTTP-服务"><a href="#二、手写-HTTP-服务" class="headerlink" title="二、手写 HTTP 服务"></a>二、手写 HTTP 服务</h3><h4 id="1、-最简单的服务"><a href="#1、-最简单的服务" class="headerlink" title="1、 最简单的服务"></a>1、 最简单的服务</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">  .<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="comment">// 浏览器会默认请求的同时请求网站图标</span></span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">url</span> === <span class="string">&#x27;/favicon.ico&#x27;</span>) &#123;</span><br><span class="line">      req.<span class="title function_">writeHead</span>(<span class="number">200</span>)</span><br><span class="line">      req.<span class="title function_">end</span>()</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">writeHead</span>(<span class="string">&#x27;200&#x27;</span>)</span><br><span class="line">    <span class="comment">// 返回字符串</span></span><br><span class="line">    <span class="comment">// res.end(&#x27;hello&#x27;)</span></span><br><span class="line">    <span class="comment">// 返回网页</span></span><br><span class="line">    fs</span><br><span class="line">      .<span class="title function_">createReadStream</span>(__dirname + <span class="string">&#x27;/index.html&#x27;</span>)</span><br><span class="line">      .<span class="title function_">pipe</span>(res)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">listen</span>(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><h4 id="2、-稍微复杂一点的-HTTP-服务"><a href="#2、-稍微复杂一点的-HTTP-服务" class="headerlink" title="2、 稍微复杂一点的 HTTP 服务"></a>2、 稍微复杂一点的 HTTP 服务</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 解析 url，把 url 分成几部分</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="comment">// 解析 url 的 query</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> game = <span class="built_in">require</span>(<span class="string">&#x27;./game&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> payloadWon = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">  .<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> parseUrl = url.<span class="title function_">parse</span>(req.<span class="property">url</span>);</span><br><span class="line">    <span class="comment">// 浏览器会默认请求的同时请求网站图标</span></span><br><span class="line">    <span class="keyword">if</span> (parseUrl.<span class="property">pathname</span> === <span class="string">&#x27;/favicon.ico&#x27;</span>) &#123;</span><br><span class="line">      req.<span class="title function_">writeHead</span>(<span class="number">200</span>);</span><br><span class="line">      req.<span class="title function_">end</span>();</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (parseUrl.<span class="property">pathname</span> === <span class="string">&#x27;/game&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> query = querystring.<span class="title function_">parse</span>(parseUrl.<span class="property">query</span>);</span><br><span class="line">      <span class="keyword">const</span> playAction = query.<span class="property">action</span>;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="title function_">game</span>(playAction);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (payloadWon &gt; <span class="number">3</span>) &#123;</span><br><span class="line">        res.<span class="title function_">writeHead</span>(<span class="number">500</span>);</span><br><span class="line">        res.<span class="title function_">end</span>(<span class="string">&#x27;我再也不和你玩了&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      res.<span class="title function_">writeHead</span>(<span class="number">200</span>);</span><br><span class="line">      <span class="keyword">if</span> (result === <span class="number">0</span>) &#123;</span><br><span class="line">        res.<span class="title function_">end</span>(<span class="string">&#x27;平局！&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result === <span class="number">1</span>) &#123;</span><br><span class="line">        res.<span class="title function_">end</span>(<span class="string">&#x27;你赢了！&#x27;</span>);</span><br><span class="line">        payloadWon += <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.<span class="title function_">end</span>(<span class="string">&#x27;你输了！&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (parseUrl.<span class="property">pathname</span> === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">      fs.<span class="title function_">createReadStream</span>(__dirname + <span class="string">&#x27;/index.html&#x27;</span>).<span class="title function_">pipe</span>(res);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h3 id="三、使用-express-写-HTTP-服务"><a href="#三、使用-express-写-HTTP-服务" class="headerlink" title="三、使用 express 写 HTTP 服务"></a>三、使用 express 写 HTTP 服务</h3><h4 id="1、-express-的核心功能"><a href="#1、-express-的核心功能" class="headerlink" title="1、 express 的核心功能"></a>1、 express 的核心功能</h4><ul><li><p>路由</p></li><li><p>request&#x2F;response 简化</p></li></ul><h4 id="2、-简单使用"><a href="#2、-简单使用" class="headerlink" title="2、 简单使用"></a>2、 简单使用</h4><p>(1) 安装：<code>npm i express</code></p><p>(2) 简单 demo</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> game = <span class="built_in">require</span>(<span class="string">&#x27;./game&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> payloadWon = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/favicon.ico&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  req.<span class="title function_">status</span>(<span class="number">200</span>);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(</span><br><span class="line">  <span class="string">&#x27;/game&#x27;</span>,</span><br><span class="line">  <span class="comment">// 中间件</span></span><br><span class="line">  <span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (payloadWon &gt; <span class="number">3</span>) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">500</span>);</span><br><span class="line">      res.<span class="title function_">send</span>(<span class="string">&#x27;我再也不和你玩了&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 通过next执行后续中间件</span></span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">playWon</span>) &#123;</span><br><span class="line">      payloadWon += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> query = req.<span class="property">query</span>;</span><br><span class="line">    <span class="keyword">const</span> playAction = query.<span class="property">action</span>;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="title function_">game</span>(playAction);</span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">200</span>);</span><br><span class="line">    <span class="keyword">if</span> (result === <span class="number">0</span>) &#123;</span><br><span class="line">      res.<span class="title function_">send</span>(<span class="string">&#x27;平局！&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result === <span class="number">1</span>) &#123;</span><br><span class="line">      res.<span class="title function_">send</span>(<span class="string">&#x27;你赢了！&#x27;</span>);</span><br><span class="line">      res.<span class="property">playWon</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.<span class="title function_">send</span>(<span class="string">&#x27;你输了！&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/index.html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>(3) 缺点: 对异步的处理不完善,中间件是同步的，不能异步</p><h3 id="四、使用-koa-写-HTTP-服务"><a href="#四、使用-koa-写-HTTP-服务" class="headerlink" title="四、使用 koa 写 HTTP 服务"></a>四、使用 koa 写 HTTP 服务</h3><h4 id="1、功能点"><a href="#1、功能点" class="headerlink" title="1、功能点"></a>1、功能点</h4><p>(1) 中间件可以异步</p><p>(2) 比 express 更极致的 resquest&#x2F;response 简化，Contex 合并了 request 和 response</p><p>(3) 请求和返回的处理采用赋值的形式</p><p>(4) 精简内核，所有额外功能都移到中间件实现，相比于 express 砍掉了路由模块</p><h4 id="2、简单使用"><a href="#2、简单使用" class="headerlink" title="2、简单使用"></a>2、简单使用</h4><p>(1) 安装 koa: <code>npm install koa</code></p><p>(2) 安装路由中间件: <code>npm i koa-mount</code></p><p>(3) 一个🌰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> game = <span class="built_in">require</span>(<span class="string">&#x27;../game&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> mount = <span class="built_in">require</span>(<span class="string">&#x27;koa-mount&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> payloadWon = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title function_">koa</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(</span><br><span class="line">  <span class="title function_">mount</span>(<span class="string">&#x27;/favicon.ico&#x27;</span>, <span class="keyword">function</span> (<span class="params">ctx</span>) &#123;</span><br><span class="line">    ctx.<span class="property">status</span> = <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gameKoa = <span class="keyword">new</span> <span class="title function_">koa</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">mount</span>(<span class="string">&#x27;/game&#x27;</span>, gameKoa));</span><br><span class="line"><span class="comment">// 中间件</span></span><br><span class="line">gameKoa.<span class="title function_">use</span>(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">ctx, next</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (payloadWon &gt; <span class="number">3</span>) &#123;</span><br><span class="line">    ctx.<span class="property">status</span> = <span class="number">500</span>;</span><br><span class="line">    ctx.<span class="property">body</span> = <span class="string">&#x27;我再也不和你玩了&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 通过next执行后续中间件</span></span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">next</span>();</span><br><span class="line">  <span class="keyword">if</span> (ctx.<span class="property">playWon</span>) &#123;</span><br><span class="line">    payloadWon += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">gameKoa.<span class="title function_">use</span>(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">ctx, next</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> query = ctx.<span class="property">query</span>;</span><br><span class="line">  <span class="keyword">const</span> playAction = query.<span class="property">action</span>;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="title function_">game</span>(playAction);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      ctx.<span class="property">status</span> = <span class="number">200</span>;</span><br><span class="line">      <span class="keyword">if</span> (result === <span class="number">0</span>) &#123;</span><br><span class="line">        ctx.<span class="property">body</span> = <span class="string">&#x27;平局！&#x27;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result === <span class="number">1</span>) &#123;</span><br><span class="line">        ctx.<span class="property">body</span> = <span class="string">&#x27;你赢了！&#x27;</span>;</span><br><span class="line">        ctx.<span class="property">playWon</span> = <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ctx.<span class="property">body</span> = <span class="string">&#x27;你输了！&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">resolve</span>()</span><br><span class="line">    &#125;,<span class="number">500</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(</span><br><span class="line">  <span class="title function_">mount</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span> (<span class="params">ctx</span>) &#123;</span><br><span class="line">    ctx.<span class="property">body</span> = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/index.html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>ps: 按模块划分逻辑，可以提升程序容错率</p><h3 id="五、Express-VS-Koa"><a href="#五、Express-VS-Koa" class="headerlink" title="五、Express VS Koa"></a>五、Express VS Koa</h3><p>1、express 门槛低，koa 更强大优雅</p><p>2、express 封装更多东西， 开发更快速，koa 可定制性更高</p><p>3、express 适合小型应用，koa 适合大型，需要可维护性的程序</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Two Sum</title>
      <link href="/two-sum-problem/"/>
      <url>/two-sum-problem/</url>
      
        <content type="html"><![CDATA[<h3 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h3><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">Given an array of integers, return indices of the </span><br><span class="line">two numbers such that they add up to a specific </span><br><span class="line">target.</span><br><span class="line"></span><br><span class="line">You may assume that each input would have exactly </span><br><span class="line">one solution, and you may not use the same element </span><br><span class="line">twice.</span><br><span class="line"></span><br><span class="line">Example:</span><br><span class="line">Given nums = [2, 7, 11, 15], target = 9,</span><br><span class="line"></span><br><span class="line">Because nums[0] + nums[1] = 2 + 7 = 9,</span><br><span class="line"></span><br><span class="line">return [0, 1].</span><br></pre></td></tr></table></figure><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><h4 id="1、Brute-Force"><a href="#1、Brute-Force" class="headerlink" title="1、Brute Force"></a>1、Brute Force</h4><p>暴力破解，遍历每个元素 x，查找符合 n &#x3D; target−x 的值，返回 n, x 的下标</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// brute force Runtime: 112 ms 37MB</span></span><br><span class="line"><span class="keyword">const</span> len = nums.<span class="property">length</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j =  i+<span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[j] === target - nums[i]) &#123;</span><br><span class="line">      <span class="keyword">return</span> [i, j]</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> []</span><br></pre></td></tr></table></figure><h4 id="2、two-pass-hash-table"><a href="#2、two-pass-hash-table" class="headerlink" title="2、two-pass hash table"></a>2、two-pass hash table</h4><p>(1) 遍历两次数组，第一次遍历，以元素为 key，索引为 value，生成一份 map</p><p>(2) 第二遍遍历, 确定每个元素被目标元素相减所得的值 <code>(target - nums[i])</code> 是否存在 map 中，这里需要注意 <code>(target - nums[i]) != nums[i]</code></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// two-pass hash table Runtime: 72 ms 37.9MB</span></span><br><span class="line"><span class="keyword">const</span> len = nums.<span class="property">length</span>;</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">  map.<span class="title function_">set</span>(nums[i], i) </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> complement = target - nums[i]</span><br><span class="line">  <span class="keyword">if</span> (map.<span class="title function_">has</span>(complement) &amp;&amp; map.<span class="title function_">get</span>(complement) !== i) &#123;</span><br><span class="line">    <span class="keyword">return</span> [i, map.<span class="title function_">get</span>(complement)]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> []</span><br></pre></td></tr></table></figure><h4 id="3、-One-pass-hash-table"><a href="#3、-One-pass-hash-table" class="headerlink" title="3、 One-pass hash table"></a>3、 One-pass hash table</h4><p>遍历一遍列表，目标值与当前元素相减得到符合条件的元素，查找字典，如果存在符合条件的键，返回值，否则把该元素作为键，索引作为值存到字典里，重复以上步骤，直到找到对应的两个元素，返回索引列表,若未找到，返回空数组。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">twoSum</span>(<span class="params">self, nums, target</span>):</span><br><span class="line">        hashmap = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> i, val <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            complement = target - val</span><br><span class="line">            <span class="keyword">if</span> complement <span class="keyword">in</span> hashmap:</span><br><span class="line">                <span class="keyword">return</span> [hashmap[complement], i]</span><br><span class="line">            hashmap[val] = i</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, nums, target</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="variable language_">self</span>.twoSum(nums, target))</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> len = nums.<span class="property">length</span>;</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> complement = target - nums[i];</span><br><span class="line">  <span class="keyword">if</span> (map.<span class="title function_">has</span>(complement) &amp;&amp; map.<span class="title function_">get</span>(complement) !== i) &#123;</span><br><span class="line">    <span class="keyword">return</span> [map.<span class="title function_">get</span>(complement),i];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    map.<span class="title function_">set</span>(nums[i], i); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> []</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小程序 Tabs-Sticky</title>
      <link href="/mini-program-tabs-sticky/"/>
      <url>/mini-program-tabs-sticky/</url>
      
        <content type="html"><![CDATA[<h3 id="一、小程序要实现-sticky-真的无解吗？"><a href="#一、小程序要实现-sticky-真的无解吗？" class="headerlink" title="一、小程序要实现 sticky 真的无解吗？"></a>一、小程序要实现 sticky 真的无解吗？</h3><p>要实现中间的导航吸顶，在网页端很简单的使用 sticky 属性就搞定了，在小程序一设置，发现没有效果，就跟同事说小程序不支持这个属性，再看看官网，有相关的扩展组件，说明是真的不支持，才有给扩展组件吧。开始结合 scroll-view 手撸，发现手撸的有点卡，这样下去不行。尝试用了下官方的扩展组件，吸顶之后就一直在顶部了 emm，而且好像不支持 flex，不符合需求，一定是我的姿势不对，那就再手撸一下吧。</p><h3 id="二、实现吸顶的-tabs-组件"><a href="#二、实现吸顶的-tabs-组件" class="headerlink" title="二、实现吸顶的 tabs 组件"></a>二、实现吸顶的 tabs 组件</h3><p>1、tab-item 设置 position 为 sticky</p><p>要实现这个功能，首先需要把要吸顶的元素设置 sticky，像这样</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">position</span>: sticky;</span><br><span class="line"><span class="attribute">position</span>: -webkit-sticky;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">z-index</span>: <span class="number">666</span>;</span><br></pre></td></tr></table></figure><p>记得设置层级高一点，不然滚动之后可能会看不到了</p><p>2、设置滚动高度</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">attached</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getNodeInfo</span>(<span class="string">&#x27;sticky&#x27;</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">getNodeInfo</span>(<span class="params">nodeName</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> query = <span class="variable language_">this</span>.<span class="property">$wx</span>.<span class="title function_">createSelectorQuery</span>()</span><br><span class="line"></span><br><span class="line">  query.<span class="title function_">select</span>(<span class="string">`#<span class="subst">$&#123;nodeName&#125;</span>`</span>).<span class="title function_">boundingClientRect</span>()</span><br><span class="line">  query.<span class="title function_">selectViewport</span>().<span class="title function_">scrollOffset</span>()</span><br><span class="line">  query.<span class="title function_">exec</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    res = res.<span class="title function_">filter</span>(<span class="function"><span class="params">ele</span> =&gt;</span> ele)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">scrollTop</span> = res[<span class="number">0</span>].<span class="property">height</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>到此基本实现了 sticky 效果，要说有什么瑕疵吧，也还是有点的，不过能接受吧</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 跨端方案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义 Github 动态</title>
      <link href="/custom-github-activity/"/>
      <url>/custom-github-activity/</url>
      
        <content type="html"><![CDATA[<h3 id="一、创建-github-同名项目"><a href="#一、创建-github-同名项目" class="headerlink" title="一、创建 github 同名项目"></a>一、创建 github 同名项目</h3><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/info.png" alt="info"></p><p>创建项目成功之后，打开主页，指定信息就是刚刚项目里的 readme 啦</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/info-top.png" alt="info-top"></p><h3 id="二、同步博客最近文章"><a href="#二、同步博客最近文章" class="headerlink" title="二、同步博客最近文章"></a>二、同步博客最近文章</h3><p>未完待续……</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6 个常见的网站可用性问题及其修正方法</title>
      <link href="/6-common-website-usability-issues-and-solutions/"/>
      <url>/6-common-website-usability-issues-and-solutions/</url>
      
        <content type="html"><![CDATA[<h3 id="一、文字对比度低"><a href="#一、文字对比度低" class="headerlink" title="一、文字对比度低"></a>一、文字对比度低</h3><h4 id="1、-影响"><a href="#1、-影响" class="headerlink" title="1、 影响"></a>1、 影响</h4><p>文字对比度过低，对弱视群体、手机用户以及老年人不友好</p><h4 id="2、修正方法"><a href="#2、修正方法" class="headerlink" title="2、修正方法"></a>2、修正方法</h4><p>(1) 使用 lighthouse 评估文字对比度</p><p>(2) 使用相关[工具](<a href="https://dequeuniversity.com/rules/axe/3.5/color-contrast">https://dequeuniversity.com/rules/axe/3.5/color-contrast</a> 调整文字对比度)，根据 WCAG 规定，比较适合的文字对比度是 4.5:1</p><h3 id="二、图片没有替代文字"><a href="#二、图片没有替代文字" class="headerlink" title="二、图片没有替代文字"></a>二、图片没有替代文字</h3><h4 id="1、影响"><a href="#1、影响" class="headerlink" title="1、影响"></a>1、影响</h4><p>对于一些弱视或者盲人群体，阅读网站可能需要播放文字信息，屏幕阅读器是无法识别图片信息的</p><h4 id="2、修正方法-1"><a href="#2、修正方法-1" class="headerlink" title="2、修正方法"></a>2、修正方法</h4><p>(1) 使用 img 元素，直接在 alt 属性里添加图片描述信息</p><p>(2) 如果图片在 background 属性里，可以在 aria-label 属性里添加相应的描述信息</p><p>(3) 如果图片描述的是其他元素的信息，可以在 aria-labelledby 属性里添加对应的描述</p><p>(4) 若图片本身没有意义，可以加一个空的 alt 属性，屏幕阅读器会略过，继续往下阅读</p><h3 id="三、空链接和空按钮"><a href="#三、空链接和空按钮" class="headerlink" title="三、空链接和空按钮"></a>三、空链接和空按钮</h3><h4 id="1、影响-1"><a href="#1、影响-1" class="headerlink" title="1、影响"></a>1、影响</h4><p>链接个按钮的文字应该能被屏幕阅读器识别，这也包括作为按钮或链接的图片替换文字。在网页中我们经常会使用一些图标作为按钮或者链接，比如下面这样：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;twitter.svg&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>以上 demo 中的按钮和链接确实描述信息，屏幕阅读器会理解为”加按钮”, 链接可能会被阅读为图片的文件名或者链接名，这会让不懂该网站的人感到很迷惑</p><h4 id="2、修正方法-2"><a href="#2、修正方法-2" class="headerlink" title="2、修正方法"></a>2、修正方法</h4><p>在按钮或链接元素的 aria-label 属性中加上描述信息，比如这样</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">aria-label</span>=<span class="string">&quot;Add a playlist&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;...&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;View our Twitter page&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;twitter.svg&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="四、缺少表单输入标签"><a href="#四、缺少表单输入标签" class="headerlink" title="四、缺少表单输入标签"></a>四、缺少表单输入标签</h3><h4 id="1、影响-2"><a href="#1、影响-2" class="headerlink" title="1、影响"></a>1、影响</h4><p>一个缺少表单输入标签的栗子：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>(1) 提升屏幕阅读体验</p><p>(2) 扩大小屏幕可点击范围</p><h4 id="2、修正方法-3"><a href="#2、修正方法-3" class="headerlink" title="2、修正方法"></a>2、修正方法</h4><p>(1) 把 input 元素放到 label 元素里</p><p>(2) 给 label 元素一个 for 属性，指向 input 元素的 id</p><p>(3) 给 input 元素添加 aria-labelledby 属性，写入描述信息元素的 id</p><p>这是栗子：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">input</span> /&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="五、缺少文档语言描述"><a href="#五、缺少文档语言描述" class="headerlink" title="五、缺少文档语言描述"></a>五、缺少文档语言描述</h3><h4 id="1、影响-3"><a href="#1、影响-3" class="headerlink" title="1、影响"></a>1、影响</h4><p>如果一个网页没有在文档元素中加 lang 属性，屏幕阅读器会把网页的语言默认为阅读器的默认配置语言。若用户是多语言者，可能并不会用屏幕阅读器的默认语言去阅读网页，若使用了错误的语言库阅读发音可能会很奇怪，可能会造成网页不可用</p><h4 id="2、修正方法-4"><a href="#2、修正方法-4" class="headerlink" title="2、修正方法"></a>2、修正方法</h4><p>给 html 元素添加 lang 属性,可以在<a href="http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry">这里</a> 或<a href="https://r12a.github.io/app-subtags/">这里</a> 查找所有的语言描述</p><p>参考文档:</p><p><a href="https://blog.scottlogic.com/2020/07/02/6-most-common-accessibility-problems.html#empty-links-and-empty-buttons">The 6 Most Common Accessibility Problems (and How to Fix Them)</a></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>好玩的 Console</title>
      <link href="/fun-console/"/>
      <url>/fun-console/</url>
      
        <content type="html"><![CDATA[<p>一切要从昨天打开知乎控制台说起，昨天打开知乎控制台看到了 acii 图形的打印，比较好奇怎么画出来的，首先想肯定要用 console 吧，那么到底使用什么姿势 console 出来的呢？emmm，然后就有了这个。</p><p>日常开发中用的比较多的 console 方法就是 log，看了看，知乎的应该就是在线生成了对应的字符串，打印出来的吧，好像也没什么难度，类似这个<a href="http://patorjk.com/software/taag/#p=display&f=Graffiti&t=Type%20Something%20">网站</a>，就可以生成一毛一样的字符样式。那么 console 到底有没有好玩的地方呢？看看下面几个例子，感觉好像还蛮好玩。</p><h3 id="一、给打印的字符加上样式"><a href="#一、给打印的字符加上样式" class="headerlink" title="一、给打印的字符加上样式"></a>一、给打印的字符加上样式</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> style = <span class="string">&#x27;color: green; font-size: 24px;&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">  <span class="string">&#x27;%c我变绿了!q^q&#x27;</span>,</span><br><span class="line">  style</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/console-color.png" alt="console-color"></p><h3 id="二、复杂数据结构打印成表格"><a href="#二、复杂数据结构打印成表格" class="headerlink" title="二、复杂数据结构打印成表格"></a>二、复杂数据结构打印成表格</h3><p>1、 数组对象，数组索引为行名称，数组对象的 key 为列名</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="keyword">var</span> price = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;小埋抱枕&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;50&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;娘口老师抱枕&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;150&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;夏目马克杯&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;20&#x27;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">table</span>(price);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/console-table.png" alt="console-table"></p><p>2、 对象，一维对象的 key 为行的名称，二维对象的 key 为列的名称</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对象</span></span><br><span class="line"><span class="keyword">var</span> info = &#123;</span><br><span class="line">  <span class="string">&#x27;Amy&#x27;</span>: &#123; <span class="attr">age</span>: <span class="number">14</span>, <span class="attr">hobby</span>: <span class="string">&#x27;pin-pong&#x27;</span> &#125;,</span><br><span class="line">  <span class="string">&#x27;Mike&#x27;</span>: &#123; <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">hobby</span>: <span class="string">&#x27;walking&#x27;</span> &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">table</span>(info);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/console-table-obj.png" alt="console-table-obj"></p><h3 id="四、查看代码执行时间"><a href="#四、查看代码执行时间" class="headerlink" title="四、查看代码执行时间"></a>四、查看代码执行时间</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&#x27;Array initialize&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1000000</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = array.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">  array[i] = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;Array initialize&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="五、分组显示数据"><a href="#五、分组显示数据" class="headerlink" title="五、分组显示数据"></a>五、分组显示数据</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">group</span>(<span class="string">&#x27;一级分组&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;一级分组的内容&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">group</span>(<span class="string">&#x27;二级分组&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;二级分组的内容&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">groupEnd</span>(); <span class="comment">// 一级分组结束</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">groupEnd</span>(); <span class="comment">// 二级分组结束</span></span><br></pre></td></tr></table></figure><h3 id="六、清空控制台"><a href="#六、清空控制台" class="headerlink" title="六、清空控制台"></a>六、清空控制台</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">clear</span>();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用图片格式比较</title>
      <link href="/common-image-format-comparison/"/>
      <url>/common-image-format-comparison/</url>
      
        <content type="html"><![CDATA[<h3 id="一、BMP"><a href="#一、BMP" class="headerlink" title="一、BMP"></a>一、BMP</h3><h4 id="1、是什么"><a href="#1、是什么" class="headerlink" title="1、是什么"></a>1、是什么</h4><p>无损的(没有对数据进行压缩)、既支持索引色也支持直接色的点阵图</p><h4 id="2、缺点"><a href="#2、缺点" class="headerlink" title="2、缺点"></a>2、缺点</h4><p>由于是无损图片，所以图片文件一般比较大</p><h4 id="3、适用场景"><a href="#3、适用场景" class="headerlink" title="3、适用场景"></a>3、适用场景</h4><p>除了在 Windows 操作系统中还比较常见之外，我们几乎看不到它</p><h3 id="二、GIF-Graphics-Interchange-Format"><a href="#二、GIF-Graphics-Interchange-Format" class="headerlink" title="二、GIF(Graphics Interchange Format)"></a>二、GIF(Graphics Interchange Format)</h3><h4 id="1、是什么-1"><a href="#1、是什么-1" class="headerlink" title="1、是什么"></a>1、是什么</h4><p>无损的、采用索引色的点阵图</p><h4 id="2、优点"><a href="#2、优点" class="headerlink" title="2、优点"></a>2、优点</h4><p>(1) 采用LZW压缩算法进行编码，文件小</p><p>(2) 支持动画以及透明</p><h4 id="3、缺点"><a href="#3、缺点" class="headerlink" title="3、缺点"></a>3、缺点</h4><p>仅支持 8bit 的索引色，图片中，只能存在256种不同的颜色。</p><h4 id="4、适用场景"><a href="#4、适用场景" class="headerlink" title="4、适用场景"></a>4、适用场景</h4><p>适用于对色彩要求不高同时需要文件体积较小的场景</p><h3 id="三、JPEG"><a href="#三、JPEG" class="headerlink" title="三、JPEG"></a>三、JPEG</h3><h4 id="1、是什么-2"><a href="#1、是什么-2" class="headerlink" title="1、是什么"></a>1、是什么</h4><p>有损的、采用直接色的点阵图</p><h4 id="2、优点-1"><a href="#2、优点-1" class="headerlink" title="2、优点"></a>2、优点</h4><p>采用直接色，颜色丰富</p><h4 id="3、缺点-1"><a href="#3、缺点-1" class="headerlink" title="3、缺点"></a>3、缺点</h4><p>有损压缩，图片的部分原始信息被去除，降低了图片的质量</p><h4 id="4、适用场景-1"><a href="#4、适用场景-1" class="headerlink" title="4、适用场景"></a>4、适用场景</h4><p>存储照片</p><h3 id="四、PNG-8-PNG-Portable-Network-Graphics"><a href="#四、PNG-8-PNG-Portable-Network-Graphics" class="headerlink" title="四、PNG-8(PNG,Portable Network Graphics)"></a>四、PNG-8(PNG,Portable Network Graphics)</h3><h4 id="1、是什么-3"><a href="#1、是什么-3" class="headerlink" title="1、是什么"></a>1、是什么</h4><p>无损的、使用索引色的点阵图</p><h4 id="2、优点-2"><a href="#2、优点-2" class="headerlink" title="2、优点"></a>2、优点</h4><p>(1) 文件体积小</p><p>(2) 支持透明度调节</p><h4 id="3、适用场景-1"><a href="#3、适用场景-1" class="headerlink" title="3、适用场景"></a>3、适用场景</h4><p>适用于需要文件体积较小的场景</p><h3 id="五、PNG-24"><a href="#五、PNG-24" class="headerlink" title="五、PNG-24"></a>五、PNG-24</h3><h4 id="1、是什么-4"><a href="#1、是什么-4" class="headerlink" title="1、是什么"></a>1、是什么</h4><p>无损的、使用直接色的点阵图</p><h4 id="2、优点-3"><a href="#2、优点-3" class="headerlink" title="2、优点"></a>2、优点</h4><p>(1) 图片显示效果好</p><p>(2) 支持透明度调节</p><h4 id="3、缺点-2"><a href="#3、缺点-2" class="headerlink" title="3、缺点"></a>3、缺点</h4><p>文件体积大</p><h4 id="4、适用场景-2"><a href="#4、适用场景-2" class="headerlink" title="4、适用场景"></a>4、适用场景</h4><p>希望达到更好的图片显示效果，不在乎图片体积</p><h3 id="六、SVG-Scalable-Vector-Graphics"><a href="#六、SVG-Scalable-Vector-Graphics" class="headerlink" title="六、SVG(Scalable Vector Graphics)"></a>六、SVG(Scalable Vector Graphics)</h3><h4 id="1、是什么-5"><a href="#1、是什么-5" class="headerlink" title="1、是什么"></a>1、是什么</h4><p>无损的矢量图</p><h4 id="2、优点-4"><a href="#2、优点-4" class="headerlink" title="2、优点"></a>2、优点</h4><p>(1) 由于是矢量图，所以图片放大时不会失真</p><p>(2) 使用 XML 描述图片，可以方便的修改</p><h4 id="3、适用场景-2"><a href="#3、适用场景-2" class="headerlink" title="3、适用场景"></a>3、适用场景</h4><p>企业 Logo、Icon</p><h3 id="七、webP"><a href="#七、webP" class="headerlink" title="七、webP"></a>七、webP</h3><h4 id="1、是什么-6"><a href="#1、是什么-6" class="headerlink" title="1、是什么"></a>1、是什么</h4><p>支持有损和无损压缩的、使用直接色的点阵图</p><h4 id="2、优点-5"><a href="#2、优点-5" class="headerlink" title="2、优点"></a>2、优点</h4><p>(1) 文件体积更小</p><p>(2) 支持透明度</p><h4 id="3、缺点-3"><a href="#3、缺点-3" class="headerlink" title="3、缺点"></a>3、缺点</h4><p>(1) 支持的厂商少，目前只有 Chrome 浏览器和 Opera 浏览器支持 WebP 格式</p><h3 id="其他相关概念"><a href="#其他相关概念" class="headerlink" title="其他相关概念"></a>其他相关概念</h3><h4 id="1、有损压缩-vs-无损压缩"><a href="#1、有损压缩-vs-无损压缩" class="headerlink" title="1、有损压缩 vs 无损压缩"></a>1、有损压缩 vs 无损压缩</h4><p>(1) 有损压缩</p><p>指在压缩文件大小的过程中，损失了一部分图片的信息，降低了图片的质量，并且这种损失是不可逆的</p><p>(2) 无损压缩</p><p>图片质量无损耗，可以从无损压缩过的图片中恢复出原来的信息</p><h4 id="2、索引色-vs-直接色"><a href="#2、索引色-vs-直接色" class="headerlink" title="2、索引色 vs 直接色"></a>2、索引色 vs 直接色</h4><p>(1) 索引色</p><p>存储数字到图片颜色的映射，只能存有限种颜色，通常是 256 种</p><p>(2) 直接色</p><p>使用三原色和透明度存储图片，支持的色彩更丰富</p><h4 id="3、点阵图-vs-矢量图"><a href="#3、点阵图-vs-矢量图" class="headerlink" title="3、点阵图 vs 矢量图"></a>3、点阵图 vs 矢量图</h4><p>(1) 点阵图(位图、像素图)</p><p>最小单位是像素，缩放会失真</p><p>(2) 矢量图(向量图)</p><p>存储元素形状和颜色的算法，缩放不失真</p><!-- 原文章：https://www.zhihu.com/question/20028452/answer/142593276 -->]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>幽灵空白节点</title>
      <link href="/ghost-whitespace-nodes/"/>
      <url>/ghost-whitespace-nodes/</url>
      
        <content type="html"><![CDATA[<h3 id="一、什么是幽灵空白节点"><a href="#一、什么是幽灵空白节点" class="headerlink" title="一、什么是幽灵空白节点"></a>一、什么是幽灵空白节点</h3><p>1、在HTML5文档声明下，块状元素内部的内联元素的行为表现为多了一块空白节点（无宽度，只有高度），例如下面这样：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./beach.jpeg&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.img</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: paleturquoise;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/ghost.png" alt="幽灵空白节点示例"></p><h3 id="二、为什么会有幽灵空白节点"><a href="#二、为什么会有幽灵空白节点" class="headerlink" title="二、为什么会有幽灵空白节点"></a>二、为什么会有幽灵空白节点</h3><p>(1) 外层的块级元素默认的 line-height 在桌面端表现为 1.2，取决于元素的 font-family</p><p>(2) 内联元素 vertical-align 默认基线对齐</p><p>(3) 综上，此时的基线是行高的顶部，图片下面多出一段空白，即是 line-height 的高度</p><h3 id="三、如何处理幽灵节点"><a href="#三、如何处理幽灵节点" class="headerlink" title="三、如何处理幽灵节点"></a>三、如何处理幽灵节点</h3><p>1、外层的 line-height 设置为 0</p><p>2、 内联元素的 vertical-align 设置为其他元素</p><p>3、内联元素设置 display:block，使 vertical-align 失效</p><p>4、默认情况下 line-height 为数字，此时，该属性的应用值是这个无单位数字&lt;数字&gt;乘以该元素的字体大小，所以可以外层块级元素 font-size 设置为 0</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>级联</title>
      <link href="/cascade/"/>
      <url>/cascade/</url>
      
        <content type="html"><![CDATA[<h3 id="一、级联的定义"><a href="#一、级联的定义" class="headerlink" title="一、级联的定义"></a>一、级联的定义</h3><p>浏览器决定为元素应用何样式的一种方法</p><h3 id="二、特指度"><a href="#二、特指度" class="headerlink" title="二、特指度"></a>二、特指度</h3><h4 id="1、定义"><a href="#1、定义" class="headerlink" title="1、定义"></a>1、定义</h4><p>度量 CSS 选择器识别元素精确性的指标</p><h4 id="2、计算"><a href="#2、计算" class="headerlink" title="2、计算"></a>2、计算</h4><p>(1) 为 a、b、c、d 中的各个变量赋予相应的数值，其中，</p><ul><li><p>a 表示 style 属性样式 (0 || 1)</p></li><li><p>b 表示 ID 选择器的数量</p></li><li><p>c 表示类选择器、属性选择器和伪类的数量</p></li><li><p>d 表示类型选择器和伪元素的数量</p></li></ul><p>(2) 比较选择器的特指度时，最左侧的选择器特指度最高</p><h3 id="三、规则集顺序"><a href="#三、规则集顺序" class="headerlink" title="三、规则集顺序"></a>三、规则集顺序</h3><h4 id="1、定义-1"><a href="#1、定义-1" class="headerlink" title="1、定义"></a>1、定义</h4><p>描述 CSS 规则集在样式表中的位置</p><h4 id="2、优先级"><a href="#2、优先级" class="headerlink" title="2、优先级"></a>2、优先级</h4><p>(1) 如果两个声明块中的选择器特指度相同，且他们为同一元素的某个属性应用样式，则在样式表中处于相对靠后位置的声明块中的属性优先级较高</p><p>(2) 除非用 style 属性添加行内样式，否则特指度和规则集顺序决定为元素应用何种样式</p><p>(3) <code>&lt;style&gt;</code> 块或外部样式表中的样式如要比其他样式（包括用 style 属性添加的行内样式）更精确，唯一的方法是在声明块中添加 <code>!important</code> , 若选择相同元素的多个声明块均使用 <code>!important</code>，则位置最靠后的声明块起作用</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>重构 vs 架构</title>
      <link href="/refactoring-vs-architecture/"/>
      <url>/refactoring-vs-architecture/</url>
      
        <content type="html"><![CDATA[<h3 id="一、重构的定义"><a href="#一、重构的定义" class="headerlink" title="一、重构的定义"></a>一、重构的定义</h3><p>指在不改变代码行为的前提下，重写代码，使其更加简洁，易于复用</p><h3 id="二、软件架构的定义"><a href="#二、软件架构的定义" class="headerlink" title="二、软件架构的定义"></a>二、软件架构的定义</h3><p>描述软件项目的各个不同部位之间的组合方式</p><h3 id="三、优秀架构的特点"><a href="#三、优秀架构的特点" class="headerlink" title="三、优秀架构的特点"></a>三、优秀架构的特点</h3><p>1、可预测：对软件的工作方式和结构做出准确的假设，使别人很容易明白和理解</p><p>2、可复用：可以在多处使用同一代码，而无需重写</p><p>3、可扩展：增量开发的过程中，无需做大的结构性变化</p><p>4、可维护：需求变更时，修改一处代码，无需大规模改动其他代码</p><h3 id="四、重构的原因"><a href="#四、重构的原因" class="headerlink" title="四、重构的原因"></a>四、重构的原因</h3><p>1、 需求变更</p><p>2、 架构设计不合理</p><p>3、 低估困难，预估开发时间短，赶进度的开发模式</p><p>4、 忽视最佳实践</p><h3 id="五、什么情况下应该重构代码"><a href="#五、什么情况下应该重构代码" class="headerlink" title="五、什么情况下应该重构代码"></a>五、什么情况下应该重构代码</h3><p>1、修复的 bug 或开发的新功能用到了已有代码（需要复用现有代码）</p><p>2、 处理小任务时顺便重构</p><p>3、当重构能够改善架构或使代码符合编码规范时</p><h3 id="六、重构总结"><a href="#六、重构总结" class="headerlink" title="六、重构总结"></a>六、重构总结</h3><p>1、抽取行内 CSS 可提升复用性</p><p>2、分离代码功能（样式和结构）可增强代码可读性</p><p>3、回归测试可手动用 web 浏览器完成，或通过比较重构后的界面与重构前的界面截图完成</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读书笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Css Background-Image 的应用</title>
      <link href="/css-background-image-application/"/>
      <url>/css-background-image-application/</url>
      
        <content type="html"><![CDATA[<h3 id="一、多背景叠加"><a href="#一、多背景叠加" class="headerlink" title="一、多背景叠加"></a>一、多背景叠加</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 多背景图 */</span></span><br><span class="line"><span class="selector-class">.more-img</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">https://image.flaticon.com/icons/svg/748/748122.svg</span>),<span class="built_in">url</span>(<span class="string">./snow.jpg</span>);</span><br><span class="line">  <span class="attribute">background-position</span>: center, top;</span><br><span class="line">  <span class="attribute">background-repeat</span>: repeat, no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">16px</span> <span class="number">16px</span>, cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/snow-other.png" alt="背景叠加"></p><h3 id="二、三角形背景"><a href="#二、三角形背景" class="headerlink" title="二、三角形背景"></a>二、三角形背景</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 三角形背景 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;day bg-image&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;night bg-image&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bg-image</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">./snow.jpg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.day</span> &#123;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.night</span> &#123;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">100vw</span> <span class="number">0</span>, <span class="number">0%</span> <span class="number">0vh</span>, <span class="number">100vw</span> <span class="number">100vh</span>);</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">brightness</span>(<span class="number">0.6</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/triggle-bg.png" alt="三角形背景"></p><h3 id="三、背景图叠加渐变"><a href="#三、背景图叠加渐变" class="headerlink" title="三、背景图叠加渐变"></a>三、背景图叠加渐变</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.gradient</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">      <span class="number">4deg</span>,</span><br><span class="line">      <span class="built_in">rgba</span>(<span class="number">38</span>, <span class="number">8</span>, <span class="number">31</span>, <span class="number">0.75</span>) <span class="number">30%</span>,</span><br><span class="line">      <span class="built_in">rgba</span>(<span class="number">213</span>, <span class="number">49</span>, <span class="number">127</span>, <span class="number">0.3</span>) <span class="number">45%</span>,</span><br><span class="line">      <span class="built_in">rgba</span>(<span class="number">232</span>, <span class="number">120</span>, <span class="number">12</span>, <span class="number">0.3</span>) <span class="number">100%</span></span><br><span class="line">    ), <span class="built_in">url</span>(<span class="string">&#x27;./snow.jpg&#x27;</span>);</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-position</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/gradient-bg.png" alt="背景图叠加渐变"></p><h3 id="四、背景颜色切换动画"><a href="#四、背景颜色切换动画" class="headerlink" title="四、背景颜色切换动画"></a>四、背景颜色切换动画</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* clolor animate */</span></span><br><span class="line"><span class="selector-class">.color-animateion</span> &#123;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-position</span>: center;</span><br><span class="line">  <span class="attribute">animation</span>: background-overlay-animation <span class="number">1s</span> ease-in-out infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> background-overlay-animation &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">4deg</span>,</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">78</span>, <span class="number">36</span>, <span class="number">0.3</span>) <span class="number">50%</span>,</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">78</span>, <span class="number">36</span>, <span class="number">0.3</span>) <span class="number">100%</span></span><br><span class="line">      ), <span class="built_in">url</span>(<span class="string">&#x27;./snow.jpg&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">4deg</span>,</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">213</span>, <span class="number">49</span>, <span class="number">127</span>, <span class="number">0.3</span>) <span class="number">50%</span>,</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">213</span>, <span class="number">49</span>, <span class="number">127</span>, <span class="number">0.3</span>) <span class="number">100%</span></span><br><span class="line">      ), <span class="built_in">url</span>(<span class="string">&#x27;./snow.jpg&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">4deg</span>,</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">36</span>, <span class="number">182</span>, <span class="number">255</span>, <span class="number">0.3</span>) <span class="number">50%</span>,</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">36</span>, <span class="number">182</span>, <span class="number">255</span>, <span class="number">1</span>) <span class="number">100%</span></span><br><span class="line">      ), <span class="built_in">url</span>(<span class="string">&#x27;./snow.jpg&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">4deg</span>,</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">254</span>, <span class="number">0.3</span>) <span class="number">50%</span>,</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">254</span>, <span class="number">0.3</span>) <span class="number">100%</span></span><br><span class="line">      ), <span class="built_in">url</span>(<span class="string">&#x27;./snow.jpg&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/bg-animation.gif" alt="背景颜色切换动画"></p><h3 id="五、网格背景"><a href="#五、网格背景" class="headerlink" title="五、网格背景"></a>五、网格背景</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item_img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item_img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item_img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item_img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item_img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item_img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item_img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 网格背景图 */</span></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">235</span>, <span class="number">192</span>);</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">25</span>fr <span class="number">30</span>fr <span class="number">25</span>fr <span class="number">20</span>fr;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="number">20</span>fr <span class="number">45</span>fr <span class="number">5</span>fr <span class="number">30</span>fr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item_img</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;./24.jpeg&#x27;</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span>: center;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/grid-bg.png" alt="网格背景"></p><h3 id="六、图像设置为文本颜色"><a href="#六、图像设置为文本颜色" class="headerlink" title="六、图像设置为文本颜色"></a>六、图像设置为文本颜色</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;center&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &lt;h1 class=&quot;</span><span class="attr">img-color</span>&quot;&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 把图像设置为文本颜色 */</span></span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">120px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: Arial, Helvetica, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.img-color</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;./24.jpeg&#x27;</span>);</span><br><span class="line">  <span class="attribute">background-clip</span>: text;</span><br><span class="line">  -webkit-<span class="attribute">background-clip</span>: text;</span><br><span class="line">  <span class="attribute">color</span>: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/bg-text.png" alt="图片底色文字"></p><h3 id="七、背景图半透明叠加"><a href="#七、背景图半透明叠加" class="headerlink" title="七、背景图半透明叠加"></a>七、背景图半透明叠加</h3><p>使用 cross-fade 函数通过背景融合的方式实现背景图的效果，目前只支持 (url1, url2, percent) 的方式，(url percent, url percent) 这种方式试了下，没效果。</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.cross-fade-image</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>; </span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background</span>: no-repeat center / contain;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">-webkit-cross-fade</span>(<span class="built_in">url</span>(<span class="string">beach.jpeg</span>), <span class="built_in">url</span>(<span class="string">pet.png</span>), <span class="number">65%</span>);</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">cross-fade</span>(<span class="built_in">url</span>(<span class="string">beach.jpeg</span>), <span class="built_in">url</span>(<span class="string">pet.png</span>),<span class="number">65%</span>);   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/bg-semi-transparent.png" alt="背景图半透明叠加示例"></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git 安装配置及分支管理</title>
      <link href="/git-usage-guide/"/>
      <url>/git-usage-guide/</url>
      
        <content type="html"><![CDATA[<h3 id="一、安装配置-Git"><a href="#一、安装配置-Git" class="headerlink" title="一、安装配置 Git"></a>一、安装配置 Git</h3><p>1、从官网下载安装包，手动完成安装。</p><p>2、打开 Git Bash 命令行工具，执行命令 ssh-keygen -t rsa -C Email-Addresss 生成一个密钥对。</p><p>3、 登录到 GitLab，点击右上角你的用户头像，点击 Edit Profile settings，点击 SSH Keys，点击 Add SSH Key，填写 Title 栏，复制用户目录下.ssh&#x2F;id_rsa.pub 文件的内容到 Key，点击 Add Key。</p><p>4、 点击右上角的 New project，填写完成后点击 Create project 新建一个仓库，点击 Activity，点击 SSH 后复制 SSH 边上栏里的地址。</p><p>5、打开 Git Bash 命令行工具，切换到一个合适的目录，使用命令 git clone 刚才复制的 URL 克隆创建的仓库。</p><p>6、进入目录 cd 仓库名，执行命令 <code>git config user.email your-email</code> &#x3D;&gt; <code>git config user.name your-name</code>，设置你的个人信息。</p><p>7、执行命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#Description&quot;</span> &gt; README.md <span class="comment">#添加一个文件</span></span><br><span class="line"></span><br><span class="line">git status <span class="comment">#查看当前状态，发现有未跟踪文件</span></span><br><span class="line"></span><br><span class="line">git add . <span class="comment">#当前目录所有文件添加到暂存区</span></span><br><span class="line"></span><br><span class="line">git diff <span class="comment"># 比较当前工作区和暂存区有何不同</span></span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">&quot;注释&quot;</span> <span class="comment">#把暂存区内容提交到本地仓库</span></span><br><span class="line"></span><br><span class="line">git push -u origin develop <span class="comment">#把本地仓库的提交推送到远程仓库</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">log</span> <span class="comment">#查看提交日志</span></span><br></pre></td></tr></table></figure><h3 id="二、Git-本地分支管理"><a href="#二、Git-本地分支管理" class="headerlink" title="二、Git 本地分支管理"></a>二、Git 本地分支管理</h3><p>1、分支的创建、合并、删除</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch <span class="comment"># 显示所有分支</span></span><br><span class="line"></span><br><span class="line">git branch b1 <span class="comment"># 从当前分支创建一个叫 b1 的分支</span></span><br><span class="line"></span><br><span class="line">git checkout b1 <span class="comment"># 切换到 b1 分支</span></span><br><span class="line"></span><br><span class="line">git checkout -b b1 <span class="comment"># 相当于以上两条命令的组合</span></span><br><span class="line"></span><br><span class="line">git checkout master <span class="comment"># 切换到 master 主分支</span></span><br><span class="line"></span><br><span class="line">git merge b1 <span class="comment"># 把 b1 分支的代码合并到 master 上</span></span><br><span class="line"></span><br><span class="line">git branch -d b1 <span class="comment"># 删除 b1 分支，不能在被删除分支上执行</span></span><br></pre></td></tr></table></figure><h3 id="三、Git-Tag-标签管理"><a href="#三、Git-Tag-标签管理" class="headerlink" title="三、Git Tag 标签管理"></a>三、Git Tag 标签管理</h3><p>标签的创建、删除</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git tag t1 <span class="comment"># 从当前分支创建一个名为 t1 的标签</span></span><br><span class="line"></span><br><span class="line">git tag -d t1 <span class="comment">#删除名为 t1 的标签</span></span><br></pre></td></tr></table></figure><h3 id="三、GitLib-权限管理"><a href="#三、GitLib-权限管理" class="headerlink" title="三、GitLib 权限管理"></a>三、GitLib 权限管理</h3><ul><li><p>Owner 项目所有者，拥有所有的操作权限</p></li><li><p>Master 项目的管理者，除更改、删除项目元信息外其它操作均可</p></li><li><p>Developer 项目的开发人员，做一些开发工作，对受保护内容无权限</p></li><li><p>Reporter 项目的报告者，只有项目的读权限，可以创建代码片断</p></li><li><p>Guest 项目的游客，只能提交问题和评论内容</p></li></ul><p>具体参见 GitLab 权限，为项目添加成员时可指定成员的身份权限。</p><h3 id="四、为什么要有分支"><a href="#四、为什么要有分支" class="headerlink" title="四、为什么要有分支"></a>四、为什么要有分支</h3><p>建立分支的原因是 git 因为是分布式的，所以其核心就是分支，分支的意义在于，可以将项目代码按照功能、模块拆分成不同的分支。比如这个产品要加一个支付功能和一个登陆功能，可以创建两个分支，交给不同的开发人员并行开发。登陆功能先开发完，测试无误后合并该分支到 master 分支，master 分支部署上线。支付功能虽然没有开发完成，但是在另一条分支上，所以产品上线和功能开发完全不受影响。这才是分布式开发的高效模式。还有这样，以自己名字建立一个分支比如 xiancai，这个分支是已经做好的功能，随时可以合并到 master 上线，开发的时候，建立一个带功能前缀的分支，比如 xiancai-ninghao 、xiancai-ninghao 等等，开发完之后在合并到 xiancai，每次上线，把 xiancai 合并到 master 。总之分支的做重要的意义就是提高效率！！！ 这样方便团队开发，并且不会导致混乱。</p><h3 id="五、常见分支有如下几条："><a href="#五、常见分支有如下几条：" class="headerlink" title="五、常见分支有如下几条："></a>五、常见分支有如下几条：</h3><p>1、Master 主分支</p><p>2、Develop 分支</p><p>3、Feature 功能分支</p><p>4、Release 预发布分支</p><p>5、Hotfix（或者 Fixbug） 分支</p><p>其中对于 Feature 功能分支有:</p><ul><li><p>从哪个分支分离开来：develop</p></li><li><p>必须要合并到哪个分支上：develop</p></li><li><p>分支的命名规范：除了 master，develop，release-，或者 hotfix- 以外的名字都可以比如可以用 feature-*的方式命名。</p></li></ul><p>其中对于 Release 预发布分支有：</p><ul><li><p>从哪个分支分离开来： develop</p></li><li><p>必须要合并到哪个分支上：develop 与 master</p></li><li><p>分支的命名规范： release-*</p></li></ul><p>其中对于 Hotfix（或者 Fixbug） 分支有；</p><ul><li><p>从哪个分支分离开来：master</p></li><li><p>必须要合并到哪个分支上：develop 与 master</p></li><li><p>分支的命名规范：hotfix-_ 或者 fixbug-_</p></li></ul><h3 id="六、分支说明"><a href="#六、分支说明" class="headerlink" title="六、分支说明"></a>六、分支说明</h3><h4 id="1、Master-主分支"><a href="#1、Master-主分支" class="headerlink" title="1、Master 主分支"></a>1、Master 主分支</h4><p>首先，代码库应该有一个、且仅有一个主分支。所有提供给用户使用的正式版本，都在这个主分支上发布。Git 主分支的名字，默认叫做 Master。它是自动建立的，版本库初始化以后，默认就是在主分支在进行开发。</p><h4 id="2、Develop-分支"><a href="#2、Develop-分支" class="headerlink" title="2、Develop 分支"></a>2、Develop 分支</h4><p>主分支只用来发布重大版本，日常开发应该在另一条分支上完成。我们把开发用的分支，叫做 Develop。</p><p>(1) 创建分支</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch develop    <span class="comment">#只创建分支</span></span><br><span class="line">git checkout develop  <span class="comment">#创建并切换到 develop 分支</span></span><br></pre></td></tr></table></figure><p>(2) 合并分支</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout master         <span class="comment">#切换到主分支</span></span><br><span class="line">git merge --no-ff develop   <span class="comment">#把 develop 合并到 master 分支，no-ff 选项的作用是保留原分支记录</span></span><br><span class="line">git branch -d develop       <span class="comment">#删除 develop 分支</span></span><br></pre></td></tr></table></figure><p>这里稍微解释一下，上一条命令的 –no-ff 参数是什么意思。默认情况下，Git执行”快进式合并”（fast-farward merge），会直接将 Master 分支指向 Develop 分支。</p><h4 id="3、次分支"><a href="#3、次分支" class="headerlink" title="3、次分支"></a>3、次分支</h4><p>除了 master 与 develop 这两个主分支，在开发时还可以创建一些次分支，目的是让团队不同的成员之间可以平行开发，更容易跟踪功能，准备为生产的发行版，快速修复生产上的问题等等。这些分支生命周期有限，可以在用完以后删掉他们。</p><h4 id="4、Feature-功能分支"><a href="#4、Feature-功能分支" class="headerlink" title="4、Feature 功能分支"></a>4、Feature 功能分支</h4><p>Feature（功能） 分支，有时候也叫 Topic 分支。在这种分支上去开发新的功能。当开发功能的时候，这个功能属于哪个目标发行还不知道。功能如果一直在开发，对应的这个功能分支就可以一直存在，不过到最后还是要合并到 develop 分支上，或者如果不想要开发的这个功能了，可以直接扔掉它。</p><p>功能名字的命名已经在上文中有提到。</p><p>创建一个功能分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b feature-x develop</span><br></pre></td></tr></table></figure><p>开发完成后，将功能分支合并到develop分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff feature-x</span><br></pre></td></tr></table></figure><p>删除feature分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d feature-x <span class="comment"># Release 预发布分支</span></span><br></pre></td></tr></table></figure><h4 id="5、Release-功能分支"><a href="#5、Release-功能分支" class="headerlink" title="5、Release 功能分支"></a>5、Release 功能分支</h4><p>它是指发布正式版本之前（即合并到Master分支之前），我们可能需要有一个预发布的版本进行测试。预发布分支是从Develop分支上面分出来的，预发布结束以后，必须合并进 Develop 和 Master 分支。它的命名，可以采用release-*的形式。</p><p>创建一个预发布分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b release-1.2 develop</span><br></pre></td></tr></table></figure><p>确认没有问题后，合并到master分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge --no-ff release-1.2</span><br></pre></td></tr></table></figure><p>对合并生成的新节点，做一个标签</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git tag -a 1.2</span><br></pre></td></tr></table></figure><p>再合并到develop分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff release-1.2</span><br></pre></td></tr></table></figure><p>最后，删除预发布分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d release-1.2</span><br></pre></td></tr></table></figure><h4 id="6、Fixbug-修补bug分支"><a href="#6、Fixbug-修补bug分支" class="headerlink" title="6、Fixbug 修补bug分支"></a>6、Fixbug 修补bug分支</h4><p>最后一种是修补bug分支。软件正式发布以后，难免会出现bug。这时就需要创建一个分支，进行 bug 修补。 修补 bug 分支是从 Master 分支上面分出来的。修补结束以后，再合并进 Master 和 Develop 分支。它的命名，可以采用 fixbug-* 的形式。</p><p>创建一个修补bug分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b fixbug-0.1 master</span><br></pre></td></tr></table></figure><p>修补结束后，合并到master分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge --no-ff fixbug-0.1</span><br><span class="line">git tag -a 0.1.1</span><br></pre></td></tr></table></figure><p>再合并到develop分支：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff fixbug-0.1</span><br></pre></td></tr></table></figure><p>最后，删除”修补bug分支”：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -d fixbug-0.1</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深入浅出Node笔记</title>
      <link href="/node-notes-in-depth/"/>
      <url>/node-notes-in-depth/</url>
      
        <content type="html"><![CDATA[<h3 id="一、Node-特点"><a href="#一、Node-特点" class="headerlink" title="一、Node 特点"></a>一、Node 特点</h3><p>1、异步 I&#x2F;O（非阻塞 I&#x2F;O)，任务耗时取决于最慢的事件耗时</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;/path1&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, file</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取文件 1 完成&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;/path2&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, file</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取文件 2 完成&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>2、大量使用事件和回调函数</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 侦听服务器的 request 事件</span></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> postData = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  req.<span class="title function_">setEncoding</span>(<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">  <span class="comment">// 侦听请求的 data 事件</span></span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span> (<span class="params">chunk</span>) &#123;</span><br><span class="line">    postData += chunk;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 侦听请求的 end 事件</span></span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    res.<span class="title function_">end</span>(postData);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">8080</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器启动完成！&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ps:<a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/">事件循环</a></p><p>3、单线程</p><p>(1) 单线程带来的问题</p><ul><li>无法利用多核 CPU</li><li>错误会引起整个应用退出，应用的健壮性值得考验</li><li>大量计算占用 CPU 导致无法继续调用异步 I&#x2F;O</li></ul><p>(2) 解决大计算量问题的方法：child_process(子进程) 分解大量的计算，Master-Worker 管理子进程</p><p>4、跨平台，可以在 win、linux 等环境中部署 Node</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CommonJS、AMD、RequireJS、CMD 以及 ES6 规范比较</title>
      <link href="/module-specifications/"/>
      <url>/module-specifications/</url>
      
        <content type="html"><![CDATA[<h3 id="一、CommonJS"><a href="#一、CommonJS" class="headerlink" title="一、CommonJS"></a>一、CommonJS</h3><h4 id="1、导出方式-exports"><a href="#1、导出方式-exports" class="headerlink" title="1、导出方式(exports)"></a>1、导出方式(exports)</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a:&#x27;</span>,a);</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">a</span> = a</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">b</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;hi, girls^^&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;exports:&#x27;</span>, <span class="built_in">exports</span>);</span><br></pre></td></tr></table></figure><h4 id="2、导入方式-require"><a href="#2、导入方式-require" class="headerlink" title="2、导入方式 require"></a>2、导入方式 require</h4><p>require 命令第一次加载该脚本时就会执行整个脚本，然后在内存中生成一个对象。需要用到这个模块时，就会到 exports 属性上取值。即使再次执行require命令，也不会再次执行该模块，而是到缓存中取值。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> b = <span class="built_in">require</span>(<span class="string">&#x27;./a&#x27;</span>).<span class="property">a</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b:&#x27;</span>,b);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c = <span class="built_in">require</span>(<span class="string">&#x27;./a&#x27;</span>).<span class="title function_">b</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;c:&#x27;</span>, c);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> d = <span class="built_in">require</span>(<span class="string">&#x27;./a&#x27;</span>).<span class="property">a</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;d:&#x27;</span>, d);</span><br></pre></td></tr></table></figure><h4 id="3、加载方式"><a href="#3、加载方式" class="headerlink" title="3、加载方式"></a>3、加载方式</h4><p>同步</p><h4 id="4、谁在用这个规范"><a href="#4、谁在用这个规范" class="headerlink" title="4、谁在用这个规范"></a>4、谁在用这个规范</h4><p>nodeJS</p><h3 id="二、AMD、RequireJS"><a href="#二、AMD、RequireJS" class="headerlink" title="二、AMD、RequireJS"></a>二、AMD、RequireJS</h3><h4 id="1、导出方式：define-id-dependencies-factory"><a href="#1、导出方式：define-id-dependencies-factory" class="headerlink" title="1、导出方式：define(id?, dependencies?, factory)"></a>1、导出方式：define(id?, dependencies?, factory)</h4>  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">define</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> add = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">add</span>: add,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>id：模块的名字，如果没有提供该参数，模块的名字应该默认为模块加载器请求的指定脚本的名字；</p></li><li><p>dependencies：模块的依赖，已被模块定义的模块标识的数组字面量。依赖参数是可选的，如果忽略此参数，它应该默认为 [“require”, “exports”, “module”]。然而，如果工厂方法的长度属性小于3，加载器会选择以函数的长度属性指定的参数个数调用工厂方法。</p></li><li><p>factory：模块初始化要执行的函数或对象。如果为函数，它应该只被执行一次。如果是对象，此对象应该为模块的输出值。</p></li><li><p>依赖前置，所有依赖写到模块前面的数组</p></li></ul>  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">define</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>], <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  a.<span class="title function_">doSomething</span>();</span><br><span class="line">  b.<span class="title function_">doSomething</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="2、导入方式：require-module-callback"><a href="#2、导入方式：require-module-callback" class="headerlink" title="2、导入方式：require([module], callback)"></a>2、导入方式：require([module], callback)</h4><p>第一个参数[module]，是一个数组，里面的成员是要加载的模块，callback是加载完成后的回调函数。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;a&#x27;</span>], <span class="keyword">function</span> (<span class="params">a</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">doSomething</span>());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="3、加载方式-1"><a href="#3、加载方式-1" class="headerlink" title="3、加载方式"></a>3、加载方式</h4><p>异步</p><h4 id="4、谁在用这个规范-1"><a href="#4、谁在用这个规范-1" class="headerlink" title="4、谁在用这个规范"></a>4、谁在用这个规范</h4><p>RequireJs</p><h3 id="三、CMD"><a href="#三、CMD" class="headerlink" title="三、CMD"></a>三、CMD</h3><h4 id="1、导出方式：define-factory"><a href="#1、导出方式：define-factory" class="headerlink" title="1、导出方式：define(factory)"></a>1、导出方式：define(factory)</h4><p>依赖就近，延迟执行，依赖的模块可以在任意一个地方写，</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">define</span>(<span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="variable language_">module</span></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">&#x27;./a&#x27;</span>);</span><br><span class="line">  a.<span class="title function_">doSomething</span>();</span><br><span class="line">  <span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>);</span><br><span class="line">  b.<span class="title function_">doSomething</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="2、导入方式：use"><a href="#2、导入方式：use" class="headerlink" title="2、导入方式：use"></a>2、导入方式：use</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">seajs.<span class="title function_">use</span>(id, callback?)</span><br></pre></td></tr></table></figure><h4 id="3、谁在用该规范"><a href="#3、谁在用该规范" class="headerlink" title="3、谁在用该规范"></a>3、谁在用该规范</h4><p>sea.js</p><h3 id="四、ES6"><a href="#四、ES6" class="headerlink" title="四、ES6"></a>四、ES6</h3><h4 id="1、导出方式：export"><a href="#1、导出方式：export" class="headerlink" title="1、导出方式：export"></a>1、导出方式：export</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;Amy&#x27;</span></span><br><span class="line"><span class="keyword">export</span> &#123;name&#125;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">19</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> age</span><br></pre></td></tr></table></figure><h4 id="2、导入方式-import"><a href="#2、导入方式-import" class="headerlink" title="2、导入方式: import"></a>2、导入方式: import</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> age, &#123;test,name&#125; <span class="keyword">from</span> <span class="string">&#x27;./a&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="3、谁在用该规范：nodeJS、JavaScript"><a href="#3、谁在用该规范：nodeJS、JavaScript" class="headerlink" title="3、谁在用该规范：nodeJS、JavaScript"></a>3、谁在用该规范：nodeJS、JavaScript</h4><h4 id="4、与-commonJS-的区别："><a href="#4、与-commonJS-的区别：" class="headerlink" title="4、与 commonJS 的区别："></a>4、与 commonJS 的区别：</h4><ul><li><p>模块加载方式：commonJS，运行时加载模块，ES6，编译时加载模块</p></li><li><p>导出方式：commonJS 导出的是一个新的对象，输出的是值的拷贝，ES6 输出的是值的引用</p></li><li><p>ES6 模块导入写在脚本中的任意位置都会被提升到头部，优先执行</p></li></ul><p>由于 ES6 是静态编译的，为了使 ES6 可以动态引入可以，可以基于 promise 引入模块</p><p>参考资料:</p><ul><li><a href="https://es6.ruanyifeng.com/#docs/module">阮一峰 es6</a></li><li><a href="https://zhuanlan.zhihu.com/p/41231046">JS模块化加载之CommonJS、AMD、CMD、ES6</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Proxy 实现观察者模式</title>
      <link href="/proxy-observer-pattern/"/>
      <url>/proxy-observer-pattern/</url>
      
        <content type="html"><![CDATA[<p>在实际项目中，经常会有数据间的通信操作，有的时候，多个模块之间，数据具有依赖关系，比如 A 模块与 B 模块有一条数据链，两边的修改都会影响到彼此，在没有双向通信的前端框架中，这种就比较麻烦。这里，观察者模式可以发挥一些作用，让 A、B 模块都监听一个数据，可以做到一方的数据改变，通知到另一方，简化版的实现如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callbacks</span> = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">observe</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callbacks</span>.<span class="title function_">add</span>(fn);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">sub</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">      <span class="attr">set</span>: <span class="function">(<span class="params">target, key, value, receiver</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">observe</span>) =&gt;</span> <span class="title function_">observe</span>());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">Observer</span>();</span><br><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">Observer</span>();</span><br><span class="line"><span class="keyword">const</span> fruit = observer.<span class="title function_">sub</span>(data);</span><br><span class="line"><span class="keyword">const</span> fruit1 = observer.<span class="title function_">sub</span>(data);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">change</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`this is <span class="subst">$&#123;fruit.color&#125;</span> <span class="subst">$&#123;fruit.shape&#125;</span> watermelon`</span>);</span><br><span class="line">&#125;;</span><br><span class="line">observer.<span class="title function_">observe</span>(change);</span><br><span class="line"></span><br><span class="line">fruit.<span class="property">color</span> = <span class="string">&#x27;yellow&#x27;</span>; <span class="comment">// this is yellow circle watermelon</span></span><br><span class="line">fruit1.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span>; <span class="comment">// this is red circle watermelon</span></span><br></pre></td></tr></table></figure><p>上例中可以看到，数据改变，就会触发 change 时间，在这个事件里面，我们可以触发视图的改变，实现响应式数据，也可以做其他的事情。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter学习笔记————Dart基础</title>
      <link href="/flutter-learning-notes-dart-basics/"/>
      <url>/flutter-learning-notes-dart-basics/</url>
      
        <content type="html"><![CDATA[<h3 id="一、基本数据类型"><a href="#一、基本数据类型" class="headerlink" title="一、基本数据类型"></a>一、基本数据类型</h3><h4 id="1、数字类型"><a href="#1、数字类型" class="headerlink" title="1、数字类型"></a>1、数字类型</h4><p>Dart 数字类型包括：num、double（双精度） 和 int（整型），其中 num 类型是 double 和 int 类型的父类，既可以赋值 int 也可以赋值 double。</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">num</span> num1 = -<span class="number">1.0</span>; <span class="comment">//数字类型的父类</span></span><br><span class="line"><span class="built_in">num</span> num2 = <span class="number">2</span>; <span class="comment">//数字类型的父类</span></span><br><span class="line"><span class="built_in">int</span> int1 = <span class="number">3</span>; <span class="comment">//整型</span></span><br><span class="line"><span class="built_in">double</span> d1 = <span class="number">1.68</span>; <span class="comment">//双精度</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num: <span class="subst">$num1</span> num: <span class="subst">$num2</span> int: <span class="subst">$int1</span> double: <span class="subst">$d1</span>&quot;</span>);</span><br></pre></td></tr></table></figure><p>从上面示例可以看出 dart 打印使用的是 print 方法，字符串中使用变量，直接：$+变量即可</p><p>数字类型常用的方法示例：</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(num1.abs()); <span class="comment">//求绝对值</span></span><br><span class="line"><span class="built_in">print</span>(num1.toInt()); <span class="comment">// 转换成 int 类型</span></span><br><span class="line"><span class="built_in">print</span>(num1.toDouble()); <span class="comment">// 转换成 double 类型</span></span><br></pre></td></tr></table></figure><h4 id="2、字符串类型"><a href="#2、字符串类型" class="headerlink" title="2、字符串类型"></a>2、字符串类型</h4><p>字符串类型用 String 声明，字符串拼接可以双引号也可以用 +，多个字符串变量声明，可以使用逗号分隔</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">String</span> str = <span class="string">&#x27;字符串&#x27;</span>, str1 = <span class="string">&quot;字符串双引号&quot;</span>; <span class="comment">// 字符串的定义</span></span><br><span class="line"><span class="built_in">String</span> str2 = <span class="string">&quot;str: <span class="subst">$str</span> str: <span class="subst">$str1</span>&quot;</span>; <span class="comment">// 字符串拼接可以双引号也可以用 +</span></span><br><span class="line"><span class="built_in">String</span> str3 = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="built_in">print</span>(str2);</span><br></pre></td></tr></table></figure><p>字符串常用方法：</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(str3.substring(<span class="number">1</span>, <span class="number">3</span>)); <span class="comment">// 字符串截取</span></span><br><span class="line"><span class="built_in">print</span>(str3.indexOf(<span class="string">&quot;el&quot;</span>)); <span class="comment">// 获取指定字符串的索引</span></span><br><span class="line"><span class="built_in">print</span>(str3.startsWith(<span class="string">&quot;h&quot;</span>)); <span class="comment">// 正则匹配开头字符串</span></span><br><span class="line"><span class="built_in">print</span>(str3.replaceAll(<span class="string">&quot;el&quot;</span>, <span class="string">&quot;ol&quot;</span>)); <span class="comment">// 替换正则字符串，返回修改后的字符串</span></span><br><span class="line"><span class="built_in">print</span>(str3.contains(<span class="string">&quot;h&quot;</span>, <span class="number">5</span>)); <span class="comment">// 从指定位置开始匹配字符串</span></span><br><span class="line"><span class="built_in">print</span>(str3.split(<span class="string">&#x27; &#x27;</span>)); <span class="comment">// 根据指定规则，分割字符串成数组</span></span><br></pre></td></tr></table></figure><h4 id="3、布尔类型"><a href="#3、布尔类型" class="headerlink" title="3、布尔类型"></a>3、布尔类型</h4><p>Dart 是强 bool 类型检查，只有 bool 类型的值是 true，才被认为是 true，使用 bool 声明变量</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">bool</span> success = <span class="keyword">true</span>, fail = <span class="keyword">false</span>;</span><br><span class="line"><span class="built_in">print</span>(success);</span><br><span class="line"><span class="built_in">print</span>(fail);</span><br><span class="line"><span class="built_in">print</span>(success || fail); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">print</span>(success &amp;&amp; fail); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h4 id="4、list-集合"><a href="#4、list-集合" class="headerlink" title="4、list 集合"></a>4、list 集合</h4><p>使用 List 声明变量, list 初始化的几种方式如下：</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">List</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;hi&#x27;</span>]; <span class="comment">//初始化时添加元素</span></span><br><span class="line"><span class="built_in">print</span>(list);</span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list2 = [];</span><br><span class="line"><span class="comment">// list2 = list; 错误做法，类型转换出错</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span> list3 = [];</span><br><span class="line">list3.add(<span class="string">&#x27;apple&#x27;</span>);</span><br><span class="line">list3.addAll(list);</span><br><span class="line"><span class="built_in">print</span>(list3); <span class="comment">//通过 add 方法添加元素</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span> list4 = <span class="built_in">List</span>.generate(<span class="number">3</span>, (index) =&gt; index * <span class="number">2</span>); <span class="comment">//生成函数</span></span><br><span class="line"><span class="built_in">print</span>(list4);</span><br></pre></td></tr></table></figure><p>list 可以使用 for、for……in 和 forEach 进行遍历：</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;for 遍历: <span class="subst">$&#123;list[i]&#125;</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> o <span class="keyword">in</span> list) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;for in 遍历: <span class="subst">$o</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">list.forEach((val) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;forEach 遍历: <span class="subst">$val</span>&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>list 常用方法:</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(list.indexOf(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">//查找元素在 list 中的索引, indexOf(element,start)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; parts = [<span class="string">&#x27;head&#x27;</span>, <span class="string">&#x27;shoulders&#x27;</span>, <span class="string">&#x27;knees&#x27;</span>, <span class="string">&#x27;toes&#x27;</span>];</span><br><span class="line">parts.remove(<span class="string">&#x27;head&#x27;</span>); <span class="comment">// true, 移除 list 首个元素</span></span><br><span class="line"><span class="built_in">print</span>(parts.join(<span class="string">&#x27;, &#x27;</span>));</span><br></pre></td></tr></table></figure><h4 id="5、map"><a href="#5、map" class="headerlink" title="5、map"></a>5、map</h4><p>map 是将 key 和 value 相关联的对象，key 和 value 都可以是任何类型的对象，并且 key 是唯一的，若 key 重复，后面的 key 会替换前面的，map 的初始化方式如下：</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Map</span> names = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Canace&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">12</span>&#125;;</span><br><span class="line"><span class="built_in">print</span>(names);</span><br><span class="line"><span class="built_in">Map</span> canace = &#123;&#125;;</span><br><span class="line">canace[<span class="string">&#x27;sex&#x27;</span>] = <span class="string">&#x27;female&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(canace);</span><br></pre></td></tr></table></figure><p>map 的迭代可以使用 for……in、forEach 和 map 方法进行迭代</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">names.forEach((k, v) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">$k</span>: <span class="subst">$v</span>&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Map</span> names2 = names.map((k, v) &#123;</span><br><span class="line">  <span class="comment">// 迭代生成一个新的 map</span></span><br><span class="line">  <span class="keyword">return</span> MapEntry(v, k);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">print</span>(names2);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> names.keys) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$key</span>: <span class="subst">$&#123;names[key]&#125;</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>常用方法：keys，values，remove, containsKey</p><h3 id="二、dynamic-var-object-三者的区别"><a href="#二、dynamic-var-object-三者的区别" class="headerlink" title="二、dynamic, var, object 三者的区别"></a>二、dynamic, var, object 三者的区别</h3><p>dynamic 是所有 Dart 对象的基础类型，在大多数情况下不直接使用。dynamic 只在编译的时候进行类型推断，编译之前不进行数据类型检测，因此，调用不存在的方法不报错。此外，使用该字面量声明的变量，可以动态改变数据类型。</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">dynamic</span> x = <span class="string">&#x27;hi&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(x.runtimeType);</span><br><span class="line"><span class="built_in">print</span>(x);</span><br><span class="line">x = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">print</span>(x.runtimeType);</span><br><span class="line"><span class="built_in">print</span>(x);</span><br></pre></td></tr></table></figure><p>使用 var 初始化的数据被定义后修改数据，数据类型不再改变</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;variable&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(a.runtimeType);</span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"><span class="comment">// a = 23214; 报错</span></span><br><span class="line"><span class="built_in">print</span>(a.runtimeType);</span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><p>Object 是 Dart 对象的基类,继承基本方法，会在编译前进行静态类型检测，因此，编译之前调用不存在的方法会报错，此外，用该字面量声明的变量可以动态改变数据类型</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span> ol = <span class="string">&#x27;object&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(ol.runtimeType);</span><br><span class="line"><span class="built_in">print</span>(ol);</span><br><span class="line">ol = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">print</span>(ol.runtimeType);</span><br><span class="line"><span class="built_in">print</span>(ol);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 跨端方案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter 学习笔记（一）—— 快速上手</title>
      <link href="/flutter-learning-notes-quick-start/"/>
      <url>/flutter-learning-notes-quick-start/</url>
      
        <content type="html"><![CDATA[<h3 id="一、-Flutter-不同版本的特点"><a href="#一、-Flutter-不同版本的特点" class="headerlink" title="一、 Flutter 不同版本的特点"></a>一、 Flutter 不同版本的特点</h3><p>1、stable：稳定版（推荐生产环境使用）</p><p>2、beta： 定期选取相对稳定的 dev 作为 beta（推荐开发环境使用）</p><p>3、dev：经过 Google 初步测试通过的代码</p><h3 id="二、Flutter-doctor-命令的作用"><a href="#二、Flutter-doctor-命令的作用" class="headerlink" title="二、Flutter doctor 命令的作用"></a>二、Flutter doctor 命令的作用</h3><p>检查是否安装好了相关依赖，即检查开发环境的完备性并输出报告，可以查看有哪些依赖或配置没有装好</p><h3 id="三、环境搭建"><a href="#三、环境搭建" class="headerlink" title="三、环境搭建"></a>三、环境搭建</h3><p>1、下载 <a href="https://flutter.dev/docs/get-started/install/macos">sdk</a>，并安装</p><p>2、环境变量设置</p><p>mac， 在 home 目录下把变量添加到 .bash_profile，把临时变量变为全局变量</p><p>windows 直接全局变量 path 追加 flutter 相关变量</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PATH</span>:[<span class="variable">$home</span>]/flutter/bin&quot;</span></span><br><span class="line"><span class="built_in">export</span> PUB_HOSTED_URL=https://pub.flutter-io.cn</span><br><span class="line"><span class="built_in">export</span> FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn</span><br></pre></td></tr></table></figure><p>3、开发工具配置</p><p>(1) Android Studio </p><ul><li><p>下载 <a href="https://developer.android.com/studio">Android Studio</a>,</p></li><li><p>安装 flutter 和 docter 插件，这里应用市场没有插件，是因为没有科学上网，需要配置对应的代理</p></li><li><p>下载模拟器需要的 sdk，打开模拟器，就可以愉快的运行 Flutter 项目了</p></li></ul><p>(2)  习惯了用 VSCode，可以下载 flutter 插件，可以一键生成项目和运行</p><p>(3) 要调试 ios 版，需要下载 xcode，并进行<a href="https://flutterchina.club/setup-macos/">对应配置</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 跨端方案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 常用代码片段</title>
      <link href="/javascript-common-code-snippets/"/>
      <url>/javascript-common-code-snippets/</url>
      
        <content type="html"><![CDATA[<h3 id="一、数组操作"><a href="#一、数组操作" class="headerlink" title="一、数组操作"></a>一、数组操作</h3><h4 id="1、去重"><a href="#1、去重" class="headerlink" title="1、去重"></a>1、去重</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">  <span class="string">&#x27;apple&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;strawberry&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;banana&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;pear&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;apple&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;orange&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;orange&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;strawberry&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> res;</span><br><span class="line"><span class="comment">// 使用 filter</span></span><br><span class="line">res = arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">element, index, self</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> self.<span class="title function_">indexOf</span>(element) === index;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 Set</span></span><br><span class="line">res = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)];</span><br></pre></td></tr></table></figure><h4 id="2、过滤偶元素"><a href="#2、过滤偶元素" class="headerlink" title="2、过滤偶元素"></a>2、过滤偶元素</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">15</span>];</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x % <span class="number">2</span> !== <span class="number">0</span>);</span><br></pre></td></tr></table></figure><h4 id="3、过滤空字符串"><a href="#3、过滤空字符串" class="headerlink" title="3、过滤空字符串"></a>3、过滤空字符串</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="literal">null</span>, <span class="literal">undefined</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">s</span>) =&gt;</span> s &amp;&amp; s.<span class="title function_">trim</span>());</span><br></pre></td></tr></table></figure><h4 id="4、降序"><a href="#4、降序" class="headerlink" title="4、降序"></a>4、降序</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> nums = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (x &lt; y) &#123;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (x &gt; y) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(nums);</span><br></pre></td></tr></table></figure><h4 id="5、计算元素在数组中的出现次数"><a href="#5、计算元素在数组中的出现次数" class="headerlink" title="5、计算元素在数组中的出现次数"></a>5、计算元素在数组中的出现次数</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// 计算单个元素在数组中的出现次数</span></span><br><span class="line"><span class="keyword">const</span> target = <span class="number">2</span>;</span><br><span class="line">res = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (v === target ? a + <span class="number">1</span> : a), <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 计算数组 a 中的所有元素在数组 b 中的出现次数，返回新的数组</span></span><br><span class="line"><span class="keyword">const</span> arrA = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> arrB = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">res = arrA.<span class="title function_">map</span>(<span class="function">(<span class="params">num</span>) =&gt;</span> arrB.<span class="title function_">filter</span>(<span class="function">(<span class="params">n</span>) =&gt;</span> n === num).<span class="property">length</span>);</span><br><span class="line"><span class="comment">// 计算数组中每个元素出现的次数</span></span><br><span class="line">res = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">tally, amt</span>) =&gt;</span> &#123;</span><br><span class="line">  tally[amt] ? tally[amt]++ : (tally[amt] = <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> tally;</span><br><span class="line">&#125;, &#123;&#125;);</span><br></pre></td></tr></table></figure><h4 id="6、初始化可伸缩数组"><a href="#6、初始化可伸缩数组" class="headerlink" title="6、初始化可伸缩数组"></a>6、初始化可伸缩数组</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> len = <span class="number">5</span>;</span><br><span class="line"><span class="comment">// method1</span></span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>(len)</span><br><span class="line">  .<span class="title function_">fill</span>(<span class="literal">null</span>)</span><br><span class="line">  .<span class="title function_">map</span>(<span class="function">(<span class="params">v, i</span>) =&gt;</span> <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">65</span> + i));</span><br><span class="line"><span class="comment">// method2</span></span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, &#123; <span class="attr">length</span>: len &#125;).<span class="title function_">map</span>(<span class="function">(<span class="params">v, i</span>) =&gt;</span></span><br><span class="line">  <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">65</span> + i)</span><br><span class="line">);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">//[ &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, &#x27;D&#x27;, &#x27;E&#x27; ]</span></span><br></pre></td></tr></table></figure><h4 id="7、求和"><a href="#7、求和" class="headerlink" title="7、求和"></a>7、求和</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> books = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Showings&#x27;</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&#x27;Julian of Norwich&#x27;</span>,</span><br><span class="line">    <span class="attr">checkouts</span>: <span class="number">45</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;The Triads&#x27;</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&#x27;Gregory Palamas&#x27;</span>,</span><br><span class="line">    <span class="attr">checkouts</span>: <span class="number">32</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;The Praktikos&#x27;</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&#x27;Evagrius Ponticus&#x27;</span>,</span><br><span class="line">    <span class="attr">checkouts</span>: <span class="number">29</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> total = books</span><br><span class="line">  .<span class="title function_">map</span>(<span class="function">(<span class="params">b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> b.<span class="property">checkouts</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">reduce</span>(<span class="function">(<span class="params">p, c</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> p + c;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(total); <span class="comment">//106</span></span><br></pre></td></tr></table></figure><h4 id="8、求最值"><a href="#8、求最值" class="headerlink" title="8、求最值"></a>8、求最值</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> min = <span class="title class_">Math</span>.<span class="title function_">min</span>(...arr);</span><br><span class="line"><span class="keyword">const</span> max = <span class="title class_">Math</span>.<span class="title function_">max</span>(...arr);</span><br></pre></td></tr></table></figure><h4 id="9、求交集"><a href="#9、求交集" class="headerlink" title="9、求交集"></a>9、求交集</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arrA = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> arrB = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> res = arrA.<span class="title function_">filter</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> arrB.<span class="title function_">includes</span>(v));</span><br></pre></td></tr></table></figure><h4 id="10、求不相交部分"><a href="#10、求不相交部分" class="headerlink" title="10、求不相交部分"></a>10、求不相交部分</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arrA = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> arrB = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">6</span>];</span><br><span class="line">arrA</span><br><span class="line">  .<span class="title function_">filter</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> !arrB.<span class="title function_">includes</span>(v))</span><br><span class="line">  .<span class="title function_">concat</span>(arrB.<span class="title function_">filter</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> !arrA.<span class="title function_">includes</span>(v)));</span><br></pre></td></tr></table></figure><h4 id="11、多维数组扁平化"><a href="#11、多维数组扁平化" class="headerlink" title="11、多维数组扁平化"></a>11、多维数组扁平化</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">arrFlatten</span>(<span class="params">arr, depth = -<span class="number">1</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (depth === -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [].<span class="title function_">concat</span>(...arr.<span class="title function_">map</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(v) ? <span class="title function_">arrFlatten</span>(v) : v)));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (depth === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.<span class="title function_">concat</span>(v), []);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">reduce</span>(</span><br><span class="line">    <span class="function">(<span class="params">a, v</span>) =&gt;</span> a.<span class="title function_">concat</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(v) ? <span class="title function_">arrFlatten</span>(v, depth - <span class="number">1</span>) : v),</span><br><span class="line">    []</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> test7 = <span class="title function_">arrFlatten</span>([</span><br><span class="line">  [</span><br><span class="line">    [<span class="number">1</span>, <span class="number">5</span>],</span><br><span class="line">    [<span class="number">2</span>, <span class="number">6</span>],</span><br><span class="line">  ],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;arrFlatten:&#x27;</span>, test7); <span class="comment">// [1, 5, 2, 6, 1, 4, 2, 3]</span></span><br></pre></td></tr></table></figure><h4 id="12、乱序"><a href="#12、乱序" class="headerlink" title="12、乱序"></a>12、乱序</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">arrShuffle</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> array = arr;</span><br><span class="line">  <span class="keyword">let</span> index = array.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (index) &#123;</span><br><span class="line">    index -= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> randomInedx = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * index);</span><br><span class="line">    <span class="keyword">let</span> middleware = array[index];</span><br><span class="line">    array[index] = array[randomInedx];</span><br><span class="line">    array[randomInedx] = middleware;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> test9 = <span class="title function_">arrShuffle</span>([<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;arr shuffle:&#x27;</span>, test9);</span><br></pre></td></tr></table></figure><h3 id="二、事件对象操作"><a href="#二、事件对象操作" class="headerlink" title="二、事件对象操作"></a>二、事件对象操作</h3><h4 id="1、时间戳转日期"><a href="#1、时间戳转日期" class="headerlink" title="1、时间戳转日期"></a>1、时间戳转日期</h4><p>因为 js 的时间是按毫秒算的，这里要转成秒，所以要乘以一个 1000，之后就可以调用 js 内置对象中的 Date 获取对应的日期了，年份及其他，类似。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">timeStampFormat</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(+x * <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">const</span> [m, d] = [date.<span class="title function_">getMonth</span>() + <span class="number">1</span>, date.<span class="title function_">getDate</span>()];</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;m&#125;</span>-<span class="subst">$&#123;d&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> day = <span class="title function_">timeStampFormat</span>(<span class="number">1560751917</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(day); <span class="comment">// 6-17</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>递归树</title>
      <link href="/recursive-tree/"/>
      <url>/recursive-tree/</url>
      
        <content type="html"><![CDATA[<h3 id="一、问题"><a href="#一、问题" class="headerlink" title="一、问题"></a>一、问题</h3><p>有这样的一个数据结构：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">  <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;content2&quot;</span>: [],</span><br><span class="line">          <span class="string">&quot;id&quot;</span>: <span class="number">305540</span>,</span><br><span class="line">          <span class="string">&quot;level&quot;</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;知识演练场&quot;</span>,</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="number">201</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;content2&quot;</span>: [],</span><br><span class="line">          <span class="string">&quot;id&quot;</span>: <span class="number">305541</span>,</span><br><span class="line">          <span class="string">&quot;level&quot;</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="string">&quot;module&quot;</span>: <span class="number">13</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;智慧加油站&quot;</span>,</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="number">201</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;id&quot;</span>: <span class="number">305539</span>,</span><br><span class="line">      <span class="string">&quot;level&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;天天练&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;content2&quot;</span>: [],</span><br><span class="line">      <span class="string">&quot;id&quot;</span>: <span class="number">305542</span>,</span><br><span class="line">      <span class="string">&quot;level&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;随堂测&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="number">201</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;id&quot;</span>: <span class="number">305538</span>,</span><br><span class="line">  <span class="string">&quot;level&quot;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;第1课时　认识秒&quot;</span>,</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="number">0</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><p>由以上数据可知，该数据是一种树形结构，要拼接每个叶子节点的数据，放到一个数组里</p><h3 id="二、思路"><a href="#二、思路" class="headerlink" title="二、思路"></a>二、思路</h3><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">1、 传入的数据为空数组时，返回</span><br><span class="line"></span><br><span class="line">2、声明空数组 topics</span><br><span class="line"></span><br><span class="line">2、遍历当前节点的所有子节点</span><br><span class="line"></span><br><span class="line">(1) 若当前节点是末端节点，说明这棵树递归完了，创建一个新对象，设置 name 为：父节点 name + 子节点 name， 设置习题为该节点下的习题字段内容， 把新对象放进 topics 里</span><br><span class="line"></span><br><span class="line">(2) 若该节点位于第一层，说明是单元名，name 设置为空</span><br><span class="line"></span><br><span class="line">(3) 若当前节点不是末端节点，递归该节点，传入当前节点和拼接的新 name 给子节点</span><br><span class="line"></span><br><span class="line">(4) 遍历完毕，返回 topics</span><br></pre></td></tr></table></figure><h3 id="三、实现"><a href="#三、实现" class="headerlink" title="三、实现"></a>三、实现</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buildTopicWithSection</span> (<span class="params">courseware, name = []</span>) &#123;</span><br><span class="line">  <span class="comment">// @param </span></span><br><span class="line">  <span class="comment">// courseware: []</span></span><br><span class="line">  <span class="comment">// name: []</span></span><br><span class="line">  <span class="comment">// return: []</span></span><br><span class="line">  <span class="keyword">let</span> topics = [];</span><br><span class="line">  <span class="keyword">if</span> (!courseware) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; courseware.<span class="property">length</span>; k++) &#123;</span><br><span class="line">    <span class="keyword">let</span> ele = courseware[k];</span><br><span class="line">    <span class="keyword">if</span> (ele.<span class="property">content2</span>) &#123;</span><br><span class="line">      ele.<span class="property">name</span> = name.<span class="title function_">concat</span>([ele.<span class="property">name</span>]).<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">      ele.<span class="property">topics</span> = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ele.<span class="property">content2</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; ele.<span class="property">content2</span>[i].<span class="property">exercise</span>.<span class="property">length</span>; j++) &#123;</span><br><span class="line">          ele.<span class="property">topics</span>.<span class="title function_">push</span>(ele.<span class="property">content2</span>[i].<span class="property">exercise</span>[j]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">delete</span> ele.<span class="property">content2</span>;</span><br><span class="line">      topics.<span class="title function_">push</span>(ele);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> newName = ele.<span class="property">level</span> === <span class="number">0</span> ? [] : name.<span class="title function_">concat</span>([ele.<span class="property">name</span>]);</span><br><span class="line">    topics = topics.<span class="title function_">concat</span>(<span class="title function_">buildTopicWithSection</span>(ele.<span class="property">children</span>, newName));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> topics;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test = <span class="title function_">buildTopicWithSection</span>(data);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test);</span><br></pre></td></tr></table></figure><h3 id="四、输出"><a href="#四、输出" class="headerlink" title="四、输出"></a>四、输出</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">305540</span>,</span><br><span class="line">    <span class="attr">level</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;天天练 知识演练场&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="number">201</span>,</span><br><span class="line">    <span class="attr">topics</span>: [ [<span class="title class_">Object</span>], [<span class="title class_">Object</span>], [<span class="title class_">Object</span>], [<span class="title class_">Object</span>] ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">305541</span>,</span><br><span class="line">    <span class="attr">level</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">module</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;天天练 智慧加油站&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="number">201</span>,</span><br><span class="line">    <span class="attr">topics</span>: [ [<span class="title class_">Object</span>] ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">305542</span>,</span><br><span class="line">    <span class="attr">level</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;随堂测&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="number">201</span>,</span><br><span class="line">    <span class="attr">topics</span>: [ [<span class="title class_">Object</span>], [<span class="title class_">Object</span>], [<span class="title class_">Object</span>], [<span class="title class_">Object</span>] ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitbook 生成电子书</title>
      <link href="/gitbook-generate-ebook/"/>
      <url>/gitbook-generate-ebook/</url>
      
        <content type="html"><![CDATA[<p>1、全局安装 gitbook-cli: <code>npm i gitbook-cli -g</code></p><p>2、创建 gitbook 项目并运行：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gitbook init softwareengineering</span><br><span class="line"><span class="built_in">cd</span> softwareengineering</span><br><span class="line">gitbook serve</span><br></pre></td></tr></table></figure><p>效果图：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/gitbook-website.png" alt="git book init"></p><p>3、 生成 ssh 秘钥: </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;$(git config user.email)&quot; -f gh-pages -N &quot;&quot;</span><br></pre></td></tr></table></figure><p>4、打开 github 项目 setting，把公钥添加到项目的 deploy keys 中，把私钥添加到项目的 secrets 中</p><p>5、添加 ci 文件，”.&#x2F;github&#x2F;workflows&#x2F;deploy.yml”，内容如下：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">&#x27;deploy website and ebooks&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job_deploy_website:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">&#x27;deploy website&#x27;</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;10.x&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Installing gitbook cli&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">gitbook-cli</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Generating distributable files&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          gitbook install</span></span><br><span class="line"><span class="string">          gitbook build</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v2.5.0</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACTIONS_DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ACTIONS_DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">PUBLISH_BRANCH:</span> <span class="string">gh-pages</span></span><br><span class="line">          <span class="attr">PUBLISH_DIR:</span> <span class="string">./_book</span></span><br></pre></td></tr></table></figure><p>6、把本地项目 push 到 github，点击 ACTION 会发现 github 在自动编译部署我们的项目了</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd softwareengineering</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ignore certain directory</span></span><br><span class="line">touch .gitignore</span><br><span class="line">echo &#x27;_book&#x27; &gt;&gt; .gitignore</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">init git repo</span></span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;init&quot;</span><br><span class="line">git remote add origin git@github.com:novalagung/softwareengineering.git</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">push</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p>7、生成电子书，在 ci 中添加一个阶段，最终 ci 如下</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">&#x27;deploy website and ebooks&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">job_deploy_website:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">&#x27;deploy website&#x27;</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;10.x&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Installing gitbook cli&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">gitbook-cli</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Generating distributable files&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          gitbook install</span></span><br><span class="line"><span class="string">          gitbook build</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v2.5.0</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACTIONS_DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ACTION_DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">PUBLISH_BRANCH:</span> <span class="string">gh-pages</span></span><br><span class="line">          <span class="attr">PUBLISH_DIR:</span> <span class="string">./_book</span></span><br><span class="line">  <span class="attr">job_deploy_ebooks:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">&#x27;deploy ebooks&#x27;</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;10.x&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Installing gitbook cli&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">gitbook-cli</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Installing calibre&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          sudo -v</span></span><br><span class="line"><span class="string">          wget -nv -O- https://download.calibre-ebook.com/linux-installer.sh | sudo sh /dev/stdin</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Preparing for ebooks generations&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          gitbook install</span></span><br><span class="line"><span class="string">          mkdir _book</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Generating ebook in pdf&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">gitbook</span> <span class="string">pdf</span> <span class="string">./</span> <span class="string">./_book/$&#123;&#123;</span> <span class="string">env.ebook_name</span> <span class="string">&#125;&#125;.pdf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Generating ebook in epub&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">gitbook</span> <span class="string">epub</span> <span class="string">./</span> <span class="string">./_book/$&#123;&#123;</span> <span class="string">env.ebook_name</span> <span class="string">&#125;&#125;.epub</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;Generating ebook in mobi&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">gitbook</span> <span class="string">mobi</span> <span class="string">./</span> <span class="string">./_book/$&#123;&#123;</span> <span class="string">env.ebook_name</span> <span class="string">&#125;&#125;.mobi</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v2.5.0</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACTIONS_DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ACTION_DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">PUBLISH_BRANCH:</span> <span class="string">ebooks</span></span><br><span class="line">          <span class="attr">PUBLISH_DIR:</span> <span class="string">./_book</span></span><br></pre></td></tr></table></figure><p>8、再次上传文件，编译之后发现多了一个 ebooks 分支，生成了 mobi、pdf以及 epub 三种格式的电子书，点击就可以下载了。</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webpack+gulp 打包 Vue 组件库</title>
      <link href="/webpack-gulp-bundle-vue-component-library/"/>
      <url>/webpack-gulp-bundle-vue-component-library/</url>
      
        <content type="html"><![CDATA[<h3 id="一、需求"><a href="#一、需求" class="headerlink" title="一、需求"></a>一、需求</h3><p>公司的项目中有很多个的首页用了同一个主题的 UI，每次一调整，多个项目都要去改，很麻烦。页面要适配桌面版，1280-1920 分辨率以及 100% - 150% 的放缩，每个项目都去适配会浪费很多人力在上面，效率很低。之前用 vue-cli3 自带的打包方式 封装了一版组件库，但是发现并不是很灵活，每次改起来还是有点麻烦，加上不能按需引入，每次打包 app.js 都比较大，这就需要升级了。就在想能不能写成 element-ui 这种模式，按需引入，组件的维护成本也比较低，说干就干，阅读了一下 element-ui 源码，研究了一下它的构建方式，感觉很符合我的需求，于是有了 exp-ui 库的进阶版，当然该 ui 库尚未开源，只上传到了公司私有 npm。</p><h3 id="二、项目架构设计"><a href="#二、项目架构设计" class="headerlink" title="二、项目架构设计"></a>二、项目架构设计</h3><p>项目目录如下：</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">├── README.md</span><br><span class="line">├── build</span><br><span class="line">├── components.json</span><br><span class="line">├── config.sh</span><br><span class="line">├── ex.png</span><br><span class="line">├── example</span><br><span class="line">├── lib</span><br><span class="line">├── node<span class="emphasis">_modules</span></span><br><span class="line"><span class="emphasis">├── package.json</span></span><br><span class="line"><span class="emphasis">├── packages</span></span><br><span class="line"><span class="emphasis">├── postcss.config.js</span></span><br><span class="line"><span class="emphasis">├── src</span></span><br><span class="line"><span class="emphasis">├── static</span></span><br><span class="line"><span class="emphasis">└── yarn.lock</span></span><br></pre></td></tr></table></figure><p>vue 组件以组件名称命名目录，存放于 packages 目录下，每个组件都有自己独立的环境，不会对其他组件进行干扰。组件以插件的形式导出，导出模式如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">EXCard</span> <span class="keyword">from</span> <span class="string">&#x27;./src/main.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* istanbul ignore next */</span></span><br><span class="line"><span class="title class_">EXCard</span>.<span class="property">install</span> = <span class="keyword">function</span> (<span class="params">Vue</span>) &#123;</span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">EXCard</span>.<span class="property">name</span>, <span class="title class_">EXCard</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">EXCard</span>;</span><br></pre></td></tr></table></figure><p>components.json 是所有组件的配置文件，每添加或删除一个组件，只需要对 components.json 列表进行增删即可，无需做另外的工作。</p><p>src&#x2F;index.js 是全部组件的编译文件入口，由 components.json 文件构建而成。</p><p>综上可以整理出如下组件构建图：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/webpack-component.png" alt="组件构件图"></p><p>组件构建出来其实是有问题的，按需引入的时候找不到样式，所以这里样式需要单独构建，构建方式如下：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/css-gulp.png" alt="css 构件图"></p><p>以上就是该项目的架构设计思路，接下来要解决的是一些构建的问题。</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github 实用小技巧</title>
      <link href="/github-practical-tips/"/>
      <url>/github-practical-tips/</url>
      
        <content type="html"><![CDATA[<h3 id="一、文件模糊搜索"><a href="#一、文件模糊搜索" class="headerlink" title="一、文件模糊搜索"></a>一、文件模糊搜索</h3><p>按下 t 键，会触发文件的模糊搜索功能，在输入框输入对应的字段，即可搜到文件,试了一下，gitlab 也同样适用。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/github-t.gif" alt="github 模糊搜索"></p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/gitlab-t.gif" alt="gitlab 模糊搜索"></p><h3 id="二、目录相关扩展"><a href="#二、目录相关扩展" class="headerlink" title="二、目录相关扩展"></a>二、目录相关扩展</h3><p>安装 Octotree 扩展，可以像在开发工具中浏览文件一样浏览 github 上的项目，他跟 Sourcegraph 的不同在于更加快，而且不用打开新的页面，更加轻巧。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/octotree.png" alt="Octotree"></p><h3 id="三、复制代码"><a href="#三、复制代码" class="headerlink" title="三、复制代码"></a>三、复制代码</h3><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/github-copy.gif" alt="复制代码"></p><h3 id="四、markdown-小技巧"><a href="#四、markdown-小技巧" class="headerlink" title="四、markdown 小技巧"></a>四、markdown 小技巧</h3><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/github-md-kb.gif" alt="按钮模式"></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 画两色饼状图</title>
      <link href="/css-two-color-pie-chart/"/>
      <url>/css-two-color-pie-chart/</url>
      
        <content type="html"><![CDATA[<p>一、CSS 画圆</p><p>CSS 画圆我们应该都知道，给定宽高，border-radius 值设置为 50%，比如这样：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/circle.png" alt="圆"></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.pie</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">51</span>, <span class="number">168</span>, <span class="number">204</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>二、CSS 画三角形</p><p>扇形跟三角形很像，只是有一条边为弧，那么可以效仿画三角形去画扇形。想一下我们一般画三角形会怎么画呢？先看看画四个 1&#x2F;4 正方形的等边三角形，可以这么画：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/triggle.png" alt="四个1&#x2F;4正三角形"></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triggle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.triggle</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(<span class="number">199</span>, <span class="number">110</span>, <span class="number">110</span>) <span class="built_in">rgb</span>(<span class="number">97</span>, <span class="number">97</span>, <span class="number">212</span>) <span class="built_in">rgb</span>(<span class="number">179</span>, <span class="number">153</span>, <span class="number">106</span>) <span class="built_in">rgb</span>(</span><br><span class="line">      <span class="number">118</span>,</span><br><span class="line">      <span class="number">158</span>,</span><br><span class="line">      <span class="number">118</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>那么画一个 1&#x2F;4 三角形呢？可以在纯色正方形的上面盖一层正方形，比如这样：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/triggle-one.png" alt="一个 1&#x2F;4 三角形"></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triggle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.triggle</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(<span class="number">199</span>, <span class="number">110</span>, <span class="number">110</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">90deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.triggle</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border</span>: solid <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>三、画扇形</p><p>从上面的例子可以知道画一个三角形的例子，仿照上面的例子，我们画出一个 1&#x2F;4 圆：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/1-4circle.png" alt="1&#x2F;4 圆"></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rad&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.rad</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(<span class="number">199</span>, <span class="number">110</span>, <span class="number">110</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">90deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rad</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border</span>: solid <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调整一下，画 1&#x2F;2 圆：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/1-2circle.png" alt="1&#x2F;2 圆"></p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.rad</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>) <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>) <span class="built_in">rgb</span>(<span class="number">199</span>, <span class="number">110</span>, <span class="number">110</span>) <span class="built_in">rgb</span>(</span><br><span class="line">      <span class="number">199</span>,</span><br><span class="line">      <span class="number">110</span>,</span><br><span class="line">      <span class="number">110</span></span><br><span class="line">    );</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rad</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border</span>: solid <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>) <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>给上述伪元素加一个旋转值，即可画任意弧度的扇形：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/percent-circle.png" alt="各种弧度圆"></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rad&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rad one&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rad two&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rad three&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.rad</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>) <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>) <span class="built_in">rgb</span>(<span class="number">199</span>, <span class="number">110</span>, <span class="number">110</span>) <span class="built_in">rgb</span>(</span><br><span class="line">      <span class="number">199</span>,</span><br><span class="line">      <span class="number">110</span>,</span><br><span class="line">      <span class="number">110</span></span><br><span class="line">    );</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rad</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border</span>: solid <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>) <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0.1turn</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.one</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0.25turn</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.two</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0.5turn</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.three</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0.8turn</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述例子中会发现 0.8 弧度的扇形是不对的，这里因为我们设置的是右半边透明所以这里调整一下</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/percent-circle-per.png" alt="各种弧度圆修正版"></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rad&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rad one&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rad two&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rad-contex three&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.rad</span>,</span><br><span class="line"><span class="selector-class">.rad-contex</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>) <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>) <span class="built_in">rgb</span>(<span class="number">199</span>, <span class="number">110</span>, <span class="number">110</span>) <span class="built_in">rgb</span>(</span><br><span class="line">      <span class="number">199</span>,</span><br><span class="line">      <span class="number">110</span>,</span><br><span class="line">      <span class="number">110</span></span><br><span class="line">    );</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.rad</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border</span>: solid <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>) <span class="built_in">rgb</span>(<span class="number">118</span>, <span class="number">158</span>, <span class="number">118</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0.1turn</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rad-contex</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border</span>: solid <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(<span class="number">199</span>, <span class="number">110</span>, <span class="number">110</span>) <span class="built_in">rgb</span>(<span class="number">199</span>, <span class="number">110</span>, <span class="number">110</span>) transparent transparent;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0.1turn</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.one</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0.25turn</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.two</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0.5turn</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.three</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0.8turn</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是我们平常用的饼状图是动态的，百分比可能更加灵活，这里就需要进一步优化了，综合来讲，画动态的图可能还是 canvas 比较合适，静态的话，用 css 足矣。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>统计优美子数组</title>
      <link href="/count-beautiful-subarrays/"/>
      <url>/count-beautiful-subarrays/</url>
      
        <content type="html"><![CDATA[<h3 id="一、题目"><a href="#一、题目" class="headerlink" title="一、题目"></a>一、题目</h3><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">给你一个整数数组  nums 和一个整数 k。</span><br><span class="line"></span><br><span class="line">如果某个连续子数组中恰好有 k 个奇数数字，我们就认为这个子数组是「优美子数组」。</span><br><span class="line"></span><br><span class="line">请返回这个数组中「优美子数组」的数目。</span><br><span class="line"></span><br><span class="line">示例 1：</span><br><span class="line">输入：nums = [1,1,2,1,1], k = 3</span><br><span class="line">输出：2</span><br><span class="line">解释：包含 3 个奇数的子数组是 [1,1,2,1] 和 [1,2,1,1] 。</span><br><span class="line"></span><br><span class="line">示例 2：</span><br><span class="line">输入：nums = [2,4,6], k = 1</span><br><span class="line">输出：0</span><br><span class="line">解释：数列中不包含任何奇数，所以不存在优美子数组。</span><br><span class="line"></span><br><span class="line">示例 3：</span><br><span class="line">输入：nums = [2,2,2,1,2,2,1,2,2,2], k = 2</span><br><span class="line">输出：16</span><br><span class="line"></span><br><span class="line">提示：</span><br><span class="line">1 &lt;= nums.length &lt;= 50000</span><br><span class="line">1 &lt;= nums[i] &lt;= 10^5</span><br><span class="line">1 &lt;= k &lt;= nums.length</span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https://leetcode-cn.com/problems/count-number-of-nice-subarrays</span><br><span class="line">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h3 id="二、思路"><a href="#二、思路" class="headerlink" title="二、思路"></a>二、思路</h3><ol><li><p>建立单独的数组 odd 用于记录第 i 个奇数的坐标， [odd[i],odd[i+k−1]] 这个子数组就恰好包含 k 个奇数</p></li><li><p>子数组 [l,r] 满足 [l,r] 包含 [odd[i],odd[i+k−1] 且 [l,r] 里的奇数个数为 k 个</p></li><li><p>对于第 i 个奇数满足条件的子数组 [l,r] 的个数为：</p></li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(odd[i]−odd[i−<span class="number">1</span>])∗(odd[i+k]−odd[i+k−<span class="number">1</span>])</span><br></pre></td></tr></table></figure><h3 id="三、题解"><a href="#三、题解" class="headerlink" title="三、题解"></a>三、题解</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">k</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> numberOfSubarrays = <span class="keyword">function</span> (<span class="params">nums, k</span>) &#123;</span><br><span class="line">  nums.<span class="title function_">push</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> len = nums.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> odd = [-<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> j = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">    <span class="keyword">const</span> num = nums[i];</span><br><span class="line">    <span class="keyword">if</span> (num % <span class="number">2</span>) &#123;</span><br><span class="line">      odd.<span class="title function_">push</span>(i);</span><br><span class="line">      <span class="keyword">if</span> (odd[k + <span class="number">1</span>]) &#123;</span><br><span class="line">        ans += (odd[j] - odd[j - <span class="number">1</span>]) * (odd[k + <span class="number">1</span>] - odd[k]);</span><br><span class="line">        ++k;</span><br><span class="line">        ++j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test1 = <span class="title function_">numberOfSubarrays</span>([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>], <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test2 = <span class="title function_">numberOfSubarrays</span>([<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>], <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test3 = <span class="title function_">numberOfSubarrays</span>([<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>], <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test1:&#x27;</span>, test1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test2:&#x27;</span>, test2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test3:&#x27;</span>, test3);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算岛屿的数量</title>
      <link href="/count-number-of-islands/"/>
      <url>/count-number-of-islands/</url>
      
        <content type="html"><![CDATA[<h3 id="一、题目"><a href="#一、题目" class="headerlink" title="一、题目"></a>一、题目</h3><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">给你一个由  &#x27;1&#x27;（陆地）和 &#x27;0&#x27;（水）组成的的二维网格，请你计算网格中岛屿的数量。</span><br><span class="line"></span><br><span class="line">岛屿总是被水包围，并且每座岛屿只能由水平方向和/或竖直方向上相邻的陆地连接形成。</span><br><span class="line"></span><br><span class="line">此外，你可以假设该网格的四条边均被水包围。</span><br><span class="line"></span><br><span class="line">示例 1:</span><br><span class="line">输入:</span><br><span class="line">11110</span><br><span class="line">11010</span><br><span class="line">11000</span><br><span class="line">00000</span><br><span class="line">输出: 1</span><br><span class="line"></span><br><span class="line">示例  2:</span><br><span class="line">输入:</span><br><span class="line">11000</span><br><span class="line">11000</span><br><span class="line">00100</span><br><span class="line">00011</span><br><span class="line">输出: 3</span><br><span class="line">解释: 每座岛屿只能由水平和/或竖直方向上相邻的陆地连接而成。</span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https://leetcode-cn.com/problems/number-of-islands</span><br><span class="line">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h3 id="二、思路"><a href="#二、思路" class="headerlink" title="二、思路"></a>二、思路</h3><p>连城一片岛屿的情况如下图所示：</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/daoyu.JPG" alt="形成岛屿情况分析"></p><p>由上图可知，岛屿形成的条件是上下左右都是 1</p><p>如果出现了一个为 0，则不算</p><p>因此可以选择用深度优先搜索，查找树中节点为 1 的情况，若当前节点为 1，则向下继续查找，直到末端，算为一个岛屿</p><p>否则，继续遍历树的节点，重复以上操作，返回岛屿数量。</p><h3 id="三、题解"><a href="#三、题解" class="headerlink" title="三、题解"></a>三、题解</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">character[][]</span>&#125; <span class="variable">grid</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 深度优先搜索 DFS</span></span><br><span class="line"><span class="keyword">var</span> dfs = <span class="keyword">function</span> (<span class="params">grid, r, c</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [nr, nc] = [grid.<span class="property">length</span>, grid[<span class="number">0</span>].<span class="property">length</span>];</span><br><span class="line">  grid[r][c] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (r - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; grid[r - <span class="number">1</span>][c] === <span class="string">&#x27;1&#x27;</span>) <span class="title function_">dfs</span>(grid, r - <span class="number">1</span>, c);</span><br><span class="line">  <span class="keyword">if</span> (r + <span class="number">1</span> &lt; nr &amp;&amp; grid[r + <span class="number">1</span>][c] === <span class="string">&#x27;1&#x27;</span>) <span class="title function_">dfs</span>(grid, r + <span class="number">1</span>, c);</span><br><span class="line">  <span class="keyword">if</span> (c - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; grid[r][c - <span class="number">1</span>] === <span class="string">&#x27;1&#x27;</span>) <span class="title function_">dfs</span>(grid, r, c - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">if</span> (c + <span class="number">1</span> &lt; nc &amp;&amp; grid[r][c + <span class="number">1</span>] === <span class="string">&#x27;1&#x27;</span>) <span class="title function_">dfs</span>(grid, r, c + <span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> numIslands = <span class="keyword">function</span> (<span class="params">grid</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> nr = grid.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">if</span> (!nr) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> nc = grid[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> num_isLands = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; nr; ++r) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; nc; ++c) &#123;</span><br><span class="line">      <span class="keyword">if</span> (grid[r][c] === <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">        num_isLands += <span class="number">1</span>;</span><br><span class="line">        <span class="title function_">dfs</span>(grid, r, c);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> num_isLands;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test1 = [</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;0&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;0&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>],</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> test2 = [</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test4 = [</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res1 = <span class="title function_">numIslands</span>(test1);</span><br><span class="line"><span class="keyword">const</span> res2 = <span class="title function_">numIslands</span>(test2);</span><br><span class="line"><span class="keyword">const</span> res3 = <span class="title function_">numIslands</span>([]);</span><br><span class="line"><span class="keyword">const</span> res4 = <span class="title function_">numIslands</span>(test4);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res3);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res4);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript Call、apply 和 Bind</title>
      <link href="/JavaScript-call-apply-bind/"/>
      <url>/JavaScript-call-apply-bind/</url>
      
        <content type="html"><![CDATA[<h3 id="一、使用环境"><a href="#一、使用环境" class="headerlink" title="一、使用环境"></a>一、使用环境</h3><p>在 es6 之前，JavaScript 经常会处理 this 的指向问题，call、apply 和 bind 方法就是为解决这个问题而生的，先来看一个简单的 demo：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">People</span>(<span class="params">name</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">People</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Mike&#x27;</span>,</span><br><span class="line">  <span class="attr">sayHi</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hi, my name is &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Mike</span> = <span class="keyword">new</span> <span class="title class_">People</span>();</span><br><span class="line"><span class="title class_">Mike</span>.<span class="title function_">sayHi</span>(); <span class="comment">// Hi, my name is Mike</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Amy</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;Amy&#x27;</span> &#125;;</span><br><span class="line"><span class="title class_">Mike</span>.<span class="property">sayHi</span>.<span class="title function_">call</span>(<span class="title class_">Amy</span>); <span class="comment">// Hi, my name is Amy</span></span><br></pre></td></tr></table></figure><p>从上面的 demo 可以看出使用 call 把函数的 this 指向从 Mike 变为了 Amy，所以后面打印出来的名字是 Amy 而不是 Mike，这里使用 call 和 apply 的效果是一样的。</p><h3 id="二、apply-和-call-的区别"><a href="#二、apply-和-call-的区别" class="headerlink" title="二、apply 和 call 的区别"></a>二、apply 和 call 的区别</h3><p>apply 和 call 的方法不同之处在于参数的传递类型不一样，call 是一个个参数传进去，apply 是以数组的形式传参。可以根据需求使用这两个方法，比如参数比较多或者参数不确定时，用 apply 可能会好点。例子：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Number 类型使用数组方法</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">5</span>, <span class="number">458</span>, <span class="number">120</span>, -<span class="number">215</span>];</span><br><span class="line"><span class="keyword">var</span> maxInNumbers = <span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="title class_">Math</span>, numbers), <span class="comment">//458</span></span><br><span class="line">  maxInNumbers = <span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">call</span>(<span class="title class_">Math</span>, <span class="number">5</span>, <span class="number">458</span>, <span class="number">120</span>, -<span class="number">215</span>); <span class="comment">//458</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 伪数组使用数组方法</span></span><br><span class="line"><span class="keyword">var</span> domNodes = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;div&#x27;</span>));</span><br><span class="line"><span class="keyword">var</span> res = domNodes.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><h3 id="三、bind"><a href="#三、bind" class="headerlink" title="三、bind"></a>三、bind</h3><p>MDN 说明：bind() 方法创建一个新的函数，在 bind() 被调用时，这个新函数的 this 被指定为 bind() 的第一个参数，而其余参数将作为新函数的参数，供调用时使用。在对象方法操作中经常会用到，比如我们 new 了一个对象，这个对象有一些事件，在事件里面，我们需要 this 指向该对象，而不是事件本身的执行上下文，这个时候，bind 就很有用了，来看一个 PixiJs 的 demo：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sprite</span><br><span class="line">  .<span class="title function_">on</span>(<span class="string">&#x27;pointerdown&#x27;</span>, <span class="variable language_">this</span>.<span class="property">onDragStart</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">  .<span class="title function_">on</span>(<span class="string">&#x27;pointerup&#x27;</span>, <span class="variable language_">this</span>.<span class="property">onDragEnd</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">  .<span class="title function_">on</span>(<span class="string">&#x27;pointerupoutside&#x27;</span>, <span class="variable language_">this</span>.<span class="property">onDragEnd</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">  .<span class="title function_">on</span>(<span class="string">&#x27;pointermove&#x27;</span>, <span class="variable language_">this</span>.<span class="property">onDragMove</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>));</span><br></pre></td></tr></table></figure><p>从上面的 demo 可以看到，我把精灵的 onDragStart 等事件的 this 指向修改为了我自己定义的对象。</p><h3 id="四、bind-与-call、apply-的不同"><a href="#四、bind-与-call、apply-的不同" class="headerlink" title="四、bind 与 call、apply 的不同"></a>四、bind 与 call、apply 的不同</h3><p>call 和 apply 方法是立即执行的，而 bind 方法只是一个普通的方法，需要调用才会执行。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pixijs Graphics vertexData 采坑</title>
      <link href="/pixijs-vertexData-null/"/>
      <url>/pixijs-vertexData-null/</url>
      
        <content type="html"><![CDATA[<p>版本：PixiJs v5.2.0</p><p>最近项目中遇到了一个 Graphics 对象，打印出来 vertexData 有数据，但是单独打印却没有，因为是引用类型，我猜应该是数据后面加进去才会出现这个结果，然而，调试了半天也没找到问题，逻辑从头开始梳理，紧紧有条，没什么问题，看了他的 issue，试过里面的方法都不行。</p><p>既然是引用类型，就去看看这个属性值是怎么加进去的吧，看了作者的一些回答，发现在加 vertexData 之前会有一个 point update 和 vertexData 计算的过程，那就在打印和赋值之前先调用这两个方法吧，demo 如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!graphics.<span class="property">vertexData</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (g.<span class="property">geometry</span>) &#123;</span><br><span class="line">    graphics.<span class="property">geometry</span>.<span class="title function_">updateBatches</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  graphics.<span class="title function_">calculateVertices</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> vtexs = graphics.<span class="property">vertexData</span>;</span><br></pre></td></tr></table></figure><p>这样写看起来没什么问题，点集和顶点都更新了，但是打印 vertexData 依然为 null，这次多出了一个 typeError 错误，可以看到 vertexData 默认值是 null，但是 calculateVertices 却在给该属性赋值时用了 vertexData[count++] 这样的操作，不知道作者怎么想的，可能是熬夜开发的结果吧。</p><p>通过 debug 出以上结论，我们知道这是 PixiJs 本身不完善的问题，所以解决 Graphics.vertexData 没有及时更新的问题了，改写一下 demo：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!graphics.<span class="property">vertexData</span>) &#123;</span><br><span class="line">  graphics.<span class="property">vertexData</span> = [];</span><br><span class="line">  <span class="keyword">if</span> (graphics.<span class="property">geometry</span>) &#123;</span><br><span class="line">    graphics.<span class="property">geometry</span>.<span class="title function_">updateBatches</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  graphics.<span class="title function_">calculateVertices</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> vtexs = g.<span class="property">vertexData</span>;</span><br></pre></td></tr></table></figure><p>网上关于 PixiJs 的文献太少了，大多是一些基础教程，而且很多是比较老旧的版本，还是自己整理资料靠谱些。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>翻转字符串里的单词</title>
      <link href="/reverse-words-in-string/"/>
      <url>/reverse-words-in-string/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">给定一个字符串，逐个翻转字符串中的每个单词。</span><br><span class="line"></span><br><span class="line">示例 1：</span><br><span class="line">输入: &quot;the sky is blue&quot;</span><br><span class="line">输出: &quot;blue is sky the&quot;</span><br><span class="line"></span><br><span class="line">示例 2：</span><br><span class="line">输入: &quot;  hello world!  &quot;</span><br><span class="line">输出: &quot;world! hello&quot;</span><br><span class="line">解释: 输入字符串可以在前面或者后面包含多余的空格，但是反转后的字符不能包括。</span><br><span class="line"></span><br><span class="line">示例 3：</span><br><span class="line">输入: &quot;a good   example&quot;</span><br><span class="line">输出: &quot;example good a&quot;</span><br><span class="line">解释: 如果两个单词间有多余的空格，将反转后单词间的空格减少到只含一个。</span><br><span class="line"></span><br><span class="line">说明：</span><br><span class="line">无空格字符构成一个单词。</span><br><span class="line">输入字符串可以在前面或者后面包含多余的空格，但是反转后的字符不能包括。</span><br><span class="line">如果两个单词间有多余的空格，将反转后单词间的空格减少到只含一个。</span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https://leetcode-cn.com/problems/reverse-words-in-a-string</span><br><span class="line">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ol><li><p>首先明确输入的参数是一个字符串，要反转字符串里的单词</p></li><li><p>去除首尾空格</p></li><li><p>每个单词之间是用空格隔开的，可以利用这一点，分隔单词，存到数组里</p></li><li><p>数组反转有两种思路</p></li></ol><ul><li><p>直接用内置方法 reverse</p></li><li><p>倒序遍历数组，依次加进新的数组</p></li></ul><ol start="5"><li>数组转字符串，可以用 join 方法</li></ol><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">s</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> reverseWords = <span class="keyword">function</span> (<span class="params">s</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> arr = s.<span class="title function_">trim</span>().<span class="title function_">split</span>(<span class="regexp">/\s+/</span>);</span><br><span class="line">  <span class="keyword">const</span> len = arr.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = len; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">const</span> item = arr[i];</span><br><span class="line">    res.<span class="title function_">push</span>(item);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>生成指定范围的随机数组</title>
      <link href="/generate-random-array-in-specified-range/"/>
      <url>/generate-random-array-in-specified-range/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">输入范围，输出随机组成的数组</span><br><span class="line"></span><br><span class="line">比如输入 minNum、maxNum、option，返回 minNum 与 maxNum 间的随机数组构成的 option 长度的数组</span><br></pre></td></tr></table></figure><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ol><li><p>求出随机数的范围 maxNum - minNum + 1</p></li><li><p>指定范围的随机数算法 Math.random() * len</p></li><li><p>遍历 option,若生成的随机数不在 minNum 与 maxNum 范围内，则重新计算，否则，添加随机数到数组</p></li><li><p>返回随机数组成的数组</p></li></ol><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">MakeRandomList</span>(<span class="params">minNum, maxNum, option</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  <span class="keyword">const</span> len = maxNum - minNum + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; option; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> random = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * len);</span><br><span class="line">    <span class="keyword">if</span> (random &lt; minNum || random &gt; maxNum) &#123;</span><br><span class="line">      i--;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">push</span>(random);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test = <span class="title class_">MakeRandomList</span>(<span class="number">2</span>, <span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PixiJs ———— 精灵加载去缓存</title>
      <link href="/pixi-js-sprite-loading-cache-removal/"/>
      <url>/pixi-js-sprite-loading-cache-removal/</url>
      
        <content type="html"><![CDATA[<p>PixiJs v5.2.0 加载精灵的时候会有缓存相关的 warning，每次都两百多条 warning，这谁受得了，花了点时间，各种调试，终于把他们给去掉了，舒服。可能有人会问，直接 google cv 一条龙不就解决了，但是网上关于 PixiJs 的文档是很少的，官方文档看了看，开发论坛看了看，都说用 clearTextureCache 方法，，通过打印发现是在 load 阶段给出的 warning，所以这里没用。先看看比如我一开始的代码，长这样</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loadBaseImgs</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> loader = <span class="keyword">new</span> <span class="variable constant_">PIXI</span>.<span class="title class_">Loader</span>();</span><br><span class="line">  <span class="keyword">const</span> textures = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  loader.<span class="title function_">add</span>(baseImgArr);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    loader.<span class="title function_">load</span>(<span class="function">(<span class="params">loaders, resources</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable constant_">PIXI</span>.<span class="property">utils</span>.<span class="title function_">clearTextureCache</span>();</span><br><span class="line">      <span class="keyword">const</span> lazer = resources.<span class="property">lazer</span>.<span class="property">textures</span>;</span><br><span class="line">      <span class="keyword">const</span> lazerGreen = lazer[<span class="string">&#x27;greenPen&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerRed = lazer[<span class="string">&#x27;redPen&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerYellow = lazer[<span class="string">&#x27;yellow&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerZise = lazer[<span class="string">&#x27;zise&#x27;</span>];</span><br><span class="line">      textures.<span class="property">lazerGreen</span> = lazerGreen;</span><br><span class="line">      textures.<span class="property">lazerRed</span> = lazerRed;</span><br><span class="line">      textures.<span class="property">lazerYellow</span> = lazerYellow;</span><br><span class="line">      textures.<span class="property">lazerZise</span> = lazerZise;</span><br><span class="line">      <span class="title function_">resolve</span>(textures);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>看起来没毛病，跟 PixiJs 开发者说的解决方案一样，但是在第一次的时候还是打印了很多,warning 内容都是 <code>Texture added to the cache with an id [...] that already had an entry</code>, 这句话告诉我们 map 中已经有了该 id 的键值对，看 PixiJs 的 issue 发现开发者说这个不影响，只是提示而已。感受一下两百多条提示，你就会发现很有必要去掉它，谁知道因为这个会发生什么呢。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/warning.png" alt="warning"></p><p>很吓人吧，然后跳到给出 warning 的地方</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/wraning-code.png" alt="warning-code"></p><p>可以看到这段代码</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Texture</span>.<span class="property">addToCache</span> = <span class="keyword">function</span> <span class="title function_">addToCache</span>(<span class="params">texture, id</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (id) &#123;</span><br><span class="line">    <span class="keyword">if</span> (texture.<span class="property">textureCacheIds</span>.<span class="title function_">indexOf</span>(id) === -<span class="number">1</span>) &#123;</span><br><span class="line">      texture.<span class="property">textureCacheIds</span>.<span class="title function_">push</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (_pixi_utils__WEBPACK_IMPORTED_MODULE_1__[<span class="string">&#x27;TextureCache&#x27;</span>][id]) &#123;</span><br><span class="line">      <span class="comment">// eslint-disable-next-line no-console</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(</span><br><span class="line">        <span class="string">&#x27;Texture added to the cache with an id [&#x27;</span> +</span><br><span class="line">          id +</span><br><span class="line">          <span class="string">&#x27;] that already had an entry&#x27;</span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _pixi_utils__WEBPACK_IMPORTED_MODULE_1__[<span class="string">&#x27;TextureCache&#x27;</span>][id] = texture;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>从以上代码可以发现，这个 warning 是在 addToCache 的时候触发的，那么再去看看文档关于 PIXI.Loader 的描述吧，可以看到 PIXI 加载精灵集的方式有两种</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loader = <span class="variable constant_">PIXI</span>.<span class="property">Loader</span>.<span class="property">shared</span>; <span class="comment">// PixiJS exposes a premade instance for you to use.</span></span><br><span class="line"><span class="comment">//or</span></span><br><span class="line"><span class="keyword">const</span> loader = <span class="keyword">new</span> <span class="variable constant_">PIXI</span>.<span class="title class_">Loader</span>(); <span class="comment">// you can also create your own if you want</span></span><br></pre></td></tr></table></figure><p>以上第一种是 PixiJS 暴露的一个默认实例，第二种是我们自己 new 的实例，这里我用的是第二种会打印 warning，那么试试第一种方式吧，修改代码为：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loadBaseImgs</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> loader = <span class="variable constant_">PIXI</span>.<span class="property">Loader</span>.<span class="property">shared</span>;</span><br><span class="line">  <span class="keyword">const</span> textures = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  loader.<span class="title function_">add</span>(baseImgArr);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    loader.<span class="title function_">load</span>(<span class="function">(<span class="params">loaders, resources</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable constant_">PIXI</span>.<span class="property">utils</span>.<span class="title function_">clearTextureCache</span>();</span><br><span class="line">      <span class="keyword">const</span> lazer = resources.<span class="property">lazer</span>.<span class="property">textures</span>;</span><br><span class="line">      <span class="keyword">const</span> lazerGreen = lazer[<span class="string">&#x27;greenPen&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerRed = lazer[<span class="string">&#x27;redPen&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerYellow = lazer[<span class="string">&#x27;yellow&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerZise = lazer[<span class="string">&#x27;zise&#x27;</span>];</span><br><span class="line">      textures.<span class="property">lazerGreen</span> = lazerGreen;</span><br><span class="line">      textures.<span class="property">lazerRed</span> = lazerRed;</span><br><span class="line">      textures.<span class="property">lazerYellow</span> = lazerYellow;</span><br><span class="line">      textures.<span class="property">lazerZise</span> = lazerZise;</span><br><span class="line">      <span class="title function_">resolve</span>(textures);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>这下 error 来了</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Uncaught</span> (<span class="keyword">in</span> promise) <span class="title class_">Error</span>: <span class="title class_">Cannot</span> add resources <span class="keyword">while</span> the loader is running.</span><br></pre></td></tr></table></figure><p>只能用一个 loader 实例？那么就在添加新的 resource 之前，重置一下 loader 吧</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loadBaseImgs</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> loader = <span class="variable constant_">PIXI</span>.<span class="property">Loader</span>.<span class="property">shared</span>;</span><br><span class="line">  <span class="keyword">const</span> textures = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  loader.<span class="title function_">reset</span>();</span><br><span class="line">  loader.<span class="title function_">add</span>(baseImgArr);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    loader.<span class="title function_">load</span>(<span class="function">(<span class="params">loaders, resources</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable constant_">PIXI</span>.<span class="property">utils</span>.<span class="title function_">clearTextureCache</span>();</span><br><span class="line">      <span class="keyword">const</span> lazer = resources.<span class="property">lazer</span>.<span class="property">textures</span>;</span><br><span class="line">      <span class="keyword">const</span> lazerGreen = lazer[<span class="string">&#x27;greenPen&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerRed = lazer[<span class="string">&#x27;redPen&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerYellow = lazer[<span class="string">&#x27;yellow&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerZise = lazer[<span class="string">&#x27;zise&#x27;</span>];</span><br><span class="line">      textures.<span class="property">lazerGreen</span> = lazerGreen;</span><br><span class="line">      textures.<span class="property">lazerRed</span> = lazerRed;</span><br><span class="line">      textures.<span class="property">lazerYellow</span> = lazerYellow;</span><br><span class="line">      textures.<span class="property">lazerZise</span> = lazerZise;</span><br><span class="line">      <span class="title function_">resolve</span>(textures);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>emmm, 搞定，warning 再见。</p><p>等等，这样写虽然解决了问题，但是每次 loader 都会重新加载，每次执行函数也会重新的的去异步加载 resources，这明显不科学，不如把资源添加的环节放到函数外面去，这样就不用每次进来都 add 一下了</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loader = <span class="variable constant_">PIXI</span>.<span class="property">Loader</span>.<span class="property">shared</span>;</span><br><span class="line"><span class="keyword">const</span> textures = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">loader.<span class="title function_">add</span>(baseImgArr);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadBaseImgs</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    loader.<span class="title function_">load</span>(<span class="function">(<span class="params">loaders, resources</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable constant_">PIXI</span>.<span class="property">utils</span>.<span class="title function_">clearTextureCache</span>();</span><br><span class="line">      <span class="keyword">const</span> lazer = resources.<span class="property">lazer</span>.<span class="property">textures</span>;</span><br><span class="line">      <span class="keyword">const</span> lazerGreen = lazer[<span class="string">&#x27;greenPen&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerRed = lazer[<span class="string">&#x27;redPen&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerYellow = lazer[<span class="string">&#x27;yellow&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> lazerZise = lazer[<span class="string">&#x27;zise&#x27;</span>];</span><br><span class="line">      textures.<span class="property">lazerGreen</span> = lazerGreen;</span><br><span class="line">      textures.<span class="property">lazerRed</span> = lazerRed;</span><br><span class="line">      textures.<span class="property">lazerYellow</span> = lazerYellow;</span><br><span class="line">      textures.<span class="property">lazerZise</span> = lazerZise;</span><br><span class="line">      <span class="title function_">resolve</span>(textures);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>这样写，每次调用函数减少了 add 环节，但是还是会重复的 load，再改进一些，load 只用于拿数据，处理数据的部分分割出来，由于第一次 load 完毕，已经可以拿到所有的 texture 了，所以可以在这个阶段去把 resources 存起来，以后通过判断有没有这个 resources，决定是否要 load，改进代码如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loader = <span class="variable constant_">PIXI</span>.<span class="property">Loader</span>.<span class="property">shared</span>;</span><br><span class="line"><span class="keyword">const</span> textures = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> resInstance = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">loader.<span class="title function_">add</span>(baseImgArr);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loaded</span>(<span class="params">resources, resolve</span>) &#123;</span><br><span class="line">  <span class="variable constant_">PIXI</span>.<span class="property">utils</span>.<span class="title function_">clearTextureCache</span>();</span><br><span class="line">  <span class="keyword">const</span> lazer = resources.<span class="property">lazer</span>.<span class="property">textures</span>;</span><br><span class="line">  <span class="keyword">const</span> lazerGreen = lazer[<span class="string">&#x27;greenPen&#x27;</span>];</span><br><span class="line">  <span class="keyword">const</span> lazerRed = lazer[<span class="string">&#x27;redPen&#x27;</span>];</span><br><span class="line">  <span class="keyword">const</span> lazerYellow = lazer[<span class="string">&#x27;yellow&#x27;</span>];</span><br><span class="line">  <span class="keyword">const</span> lazerZise = lazer[<span class="string">&#x27;zise&#x27;</span>];</span><br><span class="line">  textures.<span class="property">lazerGreen</span> = lazerGreen;</span><br><span class="line">  textures.<span class="property">lazerRed</span> = lazerRed;</span><br><span class="line">  textures.<span class="property">lazerYellow</span> = lazerYellow;</span><br><span class="line">  textures.<span class="property">lazerZise</span> = lazerZise;</span><br><span class="line">  <span class="title function_">resolve</span>(textures);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadBaseImgs</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(resInstance) &#123;</span><br><span class="line">      <span class="title function_">loaded</span>(resInstance, resolve);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    loader.<span class="title function_">load</span>(<span class="function">(<span class="params">loaders, resources</span>) =&gt;</span> &#123;</span><br><span class="line">      resInstance = resources;</span><br><span class="line">      <span class="title function_">loaded</span>(resInstance, resolve);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webpack5 新特性 - 模块联邦笔记</title>
      <link href="/webpack5-new-features-module-federation-notes/"/>
      <url>/webpack5-new-features-module-federation-notes/</url>
      
        <content type="html"><![CDATA[<!-- ![NPM 方式共享模块图解](https://raw.githubusercontent.com/Canace22/Assets/main/images/npm.jpeg) --><h3 id="一、NPM-方式共享模块"><a href="#一、NPM-方式共享模块" class="headerlink" title="一、NPM 方式共享模块"></a>一、NPM 方式共享模块</h3><h4 id="1、模块共享方式"><a href="#1、模块共享方式" class="headerlink" title="1、模块共享方式"></a>1、模块共享方式</h4><p>将需要共享的模块抽成通用依赖，进行 Webpack 打包构建上线，再分别安装到对应的项目中。</p><h4 id="2、存在的问题"><a href="#2、存在的问题" class="headerlink" title="2、存在的问题"></a>2、存在的问题</h4><p>需要走本地编译</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/npm.jpeg" alt="NPM 方式共享模块图解"></p><h3 id="二、UMD-方式共享模块"><a href="#二、UMD-方式共享模块" class="headerlink" title="二、UMD 方式共享模块"></a>二、UMD 方式共享模块</h3><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/umd.jpeg" alt="UMD 方式共享模块图解"></p><h4 id="1、模块共享方式-1"><a href="#1、模块共享方式-1" class="headerlink" title="1、模块共享方式"></a>1、模块共享方式</h4><p>模块用 Webpack UMD 模式打包，并输出到其他项目中.</p><h4 id="2、存在的问题-1"><a href="#2、存在的问题-1" class="headerlink" title="2、存在的问题"></a>2、存在的问题</h4><p>包体积无法达到本地编译时的优化效果，且库之间容易冲突。</p><h3 id="三、微前端方式共享模块（MFE）"><a href="#三、微前端方式共享模块（MFE）" class="headerlink" title="三、微前端方式共享模块（MFE）"></a>三、微前端方式共享模块（MFE）</h3><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/mfe.jpeg" alt="微前端方式共享模块图解"></p><h4 id="1、模块共享方式-2"><a href="#1、模块共享方式-2" class="headerlink" title="1、模块共享方式"></a>1、模块共享方式</h4><ul><li><p>子应用独立打包</p></li><li><p>整体应用一起打包</p></li></ul><h4 id="2、存在的问题-2"><a href="#2、存在的问题-2" class="headerlink" title="2、存在的问题"></a>2、存在的问题</h4><ul><li><p>子应用独立打包，无法抽取公共依赖</p></li><li><p>整体应用一起打包，速度慢，不具备扩展水平</p></li></ul><h3 id="四、模块联邦方式共享模块-Federated-Module"><a href="#四、模块联邦方式共享模块-Federated-Module" class="headerlink" title="四、模块联邦方式共享模块( Federated Module)"></a>四、模块联邦方式共享模块( Federated Module)</h3><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/fm.jpeg" alt="微前端方式共享模块图解"></p><h4 id="1、模块共享方式-3"><a href="#1、模块共享方式-3" class="headerlink" title="1、模块共享方式"></a>1、模块共享方式</h4><p>在线动态分发 Runtime 子模块，子应用利用 Runtime 方式复用主应用的 Npm 包和模块，应用之间包直接共享。</p><h4 id="2、使用方式"><a href="#2、使用方式" class="headerlink" title="2、使用方式"></a>2、使用方式</h4><p>核心是 ModuleFederationPlugin 插件</p><p>(1) 模块导出</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ModuleFederationPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;webpack/lib/container/ModuleFederationPlugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// other webpack configs...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ModuleFederationPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;app_one_remote&quot;</span>, <span class="comment">// 当前应用名称，需要全局唯一</span></span><br><span class="line">      <span class="attr">remotes</span>: &#123;  <span class="comment">//  将其他项目的 name 映射到当前项目中</span></span><br><span class="line">        <span class="attr">app_two</span>: <span class="string">&quot;app_two_remote&quot;</span>,</span><br><span class="line">        <span class="attr">app_three</span>: <span class="string">&quot;app_three_remote&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">exposes</span>: &#123;  <span class="comment">//  表示导出的模块，只有在此申明的模块才可以作为远程依赖被使用</span></span><br><span class="line">        <span class="title class_">AppContainer</span>: <span class="string">&quot;./src/App&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">shared</span>: [<span class="string">&quot;react&quot;</span>, <span class="string">&quot;react-dom&quot;</span>, <span class="string">&quot;react-router-dom&quot;</span>]  <span class="comment">//  让远程加载的模块对应依赖改为使用本地项目的 React 或 ReactDOM</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&quot;./public/index.html&quot;</span>,</span><br><span class="line">      <span class="attr">chunks</span>: [<span class="string">&quot;main&quot;</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>(2) 模块使用</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Search</span> &#125; <span class="keyword">from</span> <span class="string">&quot;app_two/Search&quot;</span>;</span><br></pre></td></tr></table></figure><p>(3) 模块配置</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app_two 的 webpack 配置</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ModuleFederationPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;app_two&quot;</span>,</span><br><span class="line">      <span class="attr">library</span>: &#123; <span class="attr">type</span>: <span class="string">&quot;var&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;app_two&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;remoteEntry.js&quot;</span>,</span><br><span class="line">      <span class="attr">exposes</span>: &#123;</span><br><span class="line">        <span class="title class_">Search</span>: <span class="string">&quot;./src/Search&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">shared</span>: [<span class="string">&quot;react&quot;</span>, <span class="string">&quot;react-dom&quot;</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://mp.weixin.qq.com/s/b5Gl_1yX1enktU9oulO9zg">原文</a></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 定位</title>
      <link href="/css-positioning/"/>
      <url>/css-positioning/</url>
      
        <content type="html"><![CDATA[<p>CSS position 总共分为以下几种类型：static、relative、absolute、fixed、sticky。</p><h3 id="一、static"><a href="#一、static" class="headerlink" title="一、static"></a>一、static</h3><p>static 是 position 的默认值，元素处于正常文档流，在该值下，元素设置 top、left 等位置信息和 z-index 无效。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/static.png" alt="static"></p><p><strong>demo</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- static 定位 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.static-item</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: static;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: orange;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二、relative"><a href="#二、relative" class="headerlink" title="二、relative"></a>二、relative</h3><p>relative 定位，元素处于正常文档流，父元素会对该元素留有一定的空间，left、top 等位置设置，相对于当前元素偏移。该设置对 table 类的属性不支持。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/relative.png" alt="relative"></p><p><strong>demo</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- relative 定位 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;relative-item static-item&quot;</span>&gt;</span>relative<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.relative-item</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="三、absolute"><a href="#三、absolute" class="headerlink" title="三、absolute"></a>三、absolute</h3><p>absolute 定位，元素被移除正常文档流，父元素不会对该元素留空间。left、top 等位置设置，相对于非 static 定位的祖先元素偏移。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/absolute.png" alt="absolute"></p><p><strong>demo</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- absolute 定位 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;absolute-item static-item&quot;</span>&gt;</span>absolute<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.absolute-item</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="四、fixed"><a href="#四、fixed" class="headerlink" title="四、fixed"></a>四、fixed</h3><p>fixed 定位，元素脱离正常文档流，父元素不会对该元素留空间。left、top 等位置设置，相对于视口偏移。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/fixed.png" alt="fixed"></p><p><strong>demo</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- fixed 定位 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fixed-item static-item&quot;</span>&gt;</span>fixed<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.fixed-item</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="五、sticky"><a href="#五、sticky" class="headerlink" title="五、sticky"></a>五、sticky</h3><p>sticky 定位，元素处于正常文档流，left、top 等位置设置，相对于最近滚动祖先偏移。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/sticky.png" alt="sticky"></p><p><strong>demo</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sticky-wrap&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: left; margin-top: 10px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: left; margin-top: 10px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sticky-item static-item&quot;</span>&gt;</span>sticky<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: left; margin-top: 10px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;static-item&quot;</span>&gt;</span>static<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;clear: left;&quot;</span>&gt;</span>To see the effect of sticky positioning, select the position: sticky option and scroll this container.</span><br><span class="line"></span><br><span class="line">  The element will scroll along with its container, until it is at the top of the container (or reaches the offset specified in top), and will then stop scrolling, so it stays visible.</span><br><span class="line"></span><br><span class="line">  The rest of this text is only supplied to make sure the container overflows, so as to enable you to scroll it and see the effect.</span><br><span class="line"></span><br><span class="line">  Far out in the uncharted backwaters of the unfashionable end of the western spiral arm of the Galaxy lies a small unregarded yellow sun. Orbiting this at a distance of roughly ninety-two million miles is an utterly insignificant little blue green planet whose ape-descended life forms are so amazingly primitive that they still think digital watches are a pretty neat idea.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.sticky-item</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: sticky;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>首屏时间(FCP) vs 白屏时间(FP)</title>
      <link href="/first-screen-time-vs-white-screen-time/"/>
      <url>/first-screen-time-vs-white-screen-time/</url>
      
        <content type="html"><![CDATA[<h3 id="一、摘要"><a href="#一、摘要" class="headerlink" title="一、摘要"></a>一、摘要</h3><p>最近发现做了这么多的首屏优化，一直都是把白屏时间和首屏时间算在一起，也就是页面打开之前 dom 没渲染出来，我就把他归为首屏时间。时间上这里专业点可以分为首屏和白屏两个阶段，这篇文章就讲讲二者的区别，以及计算方法。</p><h3 id="二、-为什么需要计算首屏时间和白屏时间"><a href="#二、-为什么需要计算首屏时间和白屏时间" class="headerlink" title="二、 为什么需要计算首屏时间和白屏时间"></a>二、 为什么需要计算首屏时间和白屏时间</h3><p>首先先讲讲按照我以前理解的首屏时间慢会带来什么问题，在页面一开始总有一段 dom 没被渲染出来的时间，这里慢的话，可以看到一段页面空白的时间，快的话，空白会一闪而过，造成闪屏，页面体验很差。因此，才有必要对其进行优化。</p><h3 id="三、首屏和白屏是什么"><a href="#三、首屏和白屏是什么" class="headerlink" title="三、首屏和白屏是什么"></a>三、首屏和白屏是什么</h3><p>再来讲讲白屏和首屏。</p><h4 id="1、白屏（First-Paint）"><a href="#1、白屏（First-Paint）" class="headerlink" title="1、白屏（First Paint）"></a>1、白屏（First Paint）</h4><p>当浏览器开始渲染页面，白屏触发，这时候你如果设置了背景颜色的话，就可以看到页面出现了背景色。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/first-paint-example.png" alt="白屏示例图"></p><p>白屏会在页面加载之前触发，在这段时间里，不会呈现任何内容和信息给用户。虽然背景色会很快完成绘制，但是实际的内容和交互可能要花很长的时间去加载，因此，白屏时间过长，会让用户认为我们的页面不能用或可用性差。可以通过适当调整页面结构，来优化网页。</p><h4 id="2、首屏-First-Contentful-Paint"><a href="#2、首屏-First-Contentful-Paint" class="headerlink" title="2、首屏 (First Contentful Paint)"></a>2、首屏 (First Contentful Paint)</h4><p>当页面绘制完第一个 DOM 内容，会触发首屏，这里的内容可以是文字、图片或者是 canvas。</p><p><img src="https://raw.githubusercontent.com/Canace22/Assets/main/images/first-contentful-paint-example.png" alt="首屏示例图"></p><p>首屏决定了网页的用户体验，因为它会标记实际内容何时加载到页面中，而不仅仅是标记页面的变化状态。因为关注的是内容，所以该指标可以了解用户何时收到消耗性信息，比如文本，视觉效果等，这比通过背景改变或样式改变对用户体验进行评估更有用。</p><h3 id="四、首屏时间和白屏时间计算"><a href="#四、首屏时间和白屏时间计算" class="headerlink" title="四、首屏时间和白屏时间计算"></a>四、首屏时间和白屏时间计算</h3><h4 id="1、-白屏时间计算"><a href="#1、-白屏时间计算" class="headerlink" title="1、 白屏时间计算"></a>1、 白屏时间计算</h4><p>在 head 标签开始加一段脚本，用于记录白屏开始时间，在 head 标签结束之前，加一段脚本，用于计算白屏时间，有些浏览器可以调用 Performance API 得出白屏结束时间，有些不支持，因此，计算方式分两种：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 支持 Performance API</span></span><br><span class="line">firstPaint =  firstPaintEnd - performance.<span class="property">timing</span>.<span class="property">navigationStart</span>;</span><br><span class="line"><span class="comment">// 不支持 Performance API，在 page onload 中计算结束时间 pageStartTime</span></span><br><span class="line">firstPaint =  firstPaintEnd - pageStartTime;</span><br></pre></td></tr></table></figure><h4 id="2、首屏时间计算"><a href="#2、首屏时间计算" class="headerlink" title="2、首屏时间计算"></a>2、首屏时间计算</h4><p>首屏时间的计算需要用到两个变量，一个是首屏开始，一个是首屏结束，首屏开始也是白屏结束的时间，因此可以用以上方法计算出来，首屏结束时间应该是页面的第一屏绘制完，但是这个我们不好定义，我们知道在一个页面中，图片资源往往是比较后加载完的，因此可以统计首屏加载最慢的图片是否加载完成，加载完了，记录结束时间.</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 计算首屏加载最慢的图片是否加载完成</span></span><br><span class="line"><span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">img.<span class="property">src</span> = src;</span><br><span class="line">img.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  firstPaintContentEnd = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onload</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  firstPaintContentStart = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">firstPaintContent = firstPaintContentEnd - firstPaintContentStart;</span><br></pre></td></tr></table></figure><h3 id="五、我该计算首屏时间还是白屏时间？"><a href="#五、我该计算首屏时间还是白屏时间？" class="headerlink" title="五、我该计算首屏时间还是白屏时间？"></a>五、我该计算首屏时间还是白屏时间？</h3><p>在评估页面是否开始渲染方面，首屏时间会比白屏时间更精确，但是二者的结束时间往往很接近。所以要根据自己的业务场景去决定到底该用哪种计算方式。</p><ul><li><p>对于交互性比较少的简单网页，由于加载比较快，所以二者区别不大，因此，可以根据喜好任选一种计算方式。</p></li><li><p>对于大型的复杂页面，你会发现由于需要处理更多复杂的元素，白屏时间和首屏时间相隔比较远，这时候，计算首屏时间会更有用。</p></li></ul><h3 id="六、基于以上理论，写的一个替换白屏的小-demo"><a href="#六、基于以上理论，写的一个替换白屏的小-demo" class="headerlink" title="六、基于以上理论，写的一个替换白屏的小 demo"></a>六、基于以上理论，写的一个替换白屏的小 demo</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.static</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">./img/skeleton.png</span>) no-repeat;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">animation</span>: bg-animation <span class="number">3s</span> infinite;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="keyword">@keyframes</span> bg-animation &#123;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">from</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">opacity</span>: .<span class="number">075</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="number">40%</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">opacity</span>: .<span class="number">82</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="number">60%</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">opacity</span>: .<span class="number">165</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strong</span></span></span><br><span class="line"><span class="tag">        &gt;</span>We&#x27;re sorry but flash-experiment doesn&#x27;t work properly without</span><br><span class="line">        JavaScript enabled. Please enable it to continue.&lt;/strong</span><br><span class="line">      &gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;static&quot;</span> <span class="attr">id</span>=<span class="string">&quot;static&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        startEnd = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">        firstPaint = startEnd - startTime;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(firstPaint);</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">removeDom</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">removeDom</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#static&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">removeChild</span>(div);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>防不胜防的 Bug —— Chrome 翻译惹的祸</title>
      <link href="/unavoidable-bug-chrome-translation-caused-trouble/"/>
      <url>/unavoidable-bug-chrome-translation-caused-trouble/</url>
      
        <content type="html"><![CDATA[<p>今天下午被叫去产品那里，给我看了之前写的界面里面出现奇怪的中文字符，明明网页都是拼音，怎么会出现汉字，我一脸懵逼。</p><p>于是我远程看了销售的电脑网页，还真是，神奇的出现乱码一样的页面。我熟练的 f12 打开控制台看看元素有没有被加上奇怪的东西，有没有打印出 error，没有令我失望，html 这个 dom 被加上了一个本该没有的 class，language 被改写成了 zh-CN。多打开几次，发现右上角总有翻译提示框，还自动翻译了。问题应该就出在页面被自动翻译上了，点开显示原网页，果然正常。</p><p>那么问题该怎么解决呢？首先想到的当然是 chrome 设置，禁止自动弹出翻译查询框了，但是这个自动翻译，应该是被误触了，点击了一律翻译英文页面，这里也得给他改回来。但是，作为一个程序员，当然要从程序层面去解决这个问题，因为谁也不知道哪个用户会遇到这个问题，我也不可能一个个的去帮他们修改设置项。</p><p>要解决这个问题，首先得知道什么情况下，chrome 会弹出翻译询问框。</p><p>设置那里说了非本语言，一律翻译为中文。</p><p>那么什么叫做非本语言呢？我们中国人，一般喜欢设置默认语言为中文，即非中文的时候，一律会被翻译为英文。这里的中文指的是汉字，不包括阿拉伯数字和英文字母。所以当页面的 language 不是 zh-CN 并且页面中含有非汉字时，就会弹出翻译询问框，这里很容易被误点击一律翻译为中文，然后打开的所有符合以上条件的页面都会被自动翻译，然后就可以看到你的页面出现奇奇怪怪的字符了。</p><p>综上解决这个问题的方法就是，在 html 标签中，设置 language 为 zh-CN，这样，在该页面就不会弹出翻译询问框了，被误点击的机会也没有了，问题基本解决。这里说基本解决，是考虑到还有些已经设置了自动翻译成中文的，这里可以加上 no-translate，Stack Overflow 上的人说能解决。可以一试。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 跨端方案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axios 网络请求封装</title>
      <link href="/axios-network-request-encapsulation/"/>
      <url>/axios-network-request-encapsulation/</url>
      
        <content type="html"><![CDATA[<p>axios 是网页请求库中的新星，经常会看到他与 vue 携手，该库对 http 请求已经封装得很好了，但是，由于我需要一些更加定制化的操作，比如加密请求参数等，所以这里进行了二次封装。</p><h3 id="一、方案一，根据方法封装，不预处理状态"><a href="#一、方案一，根据方法封装，不预处理状态" class="headerlink" title="一、方案一，根据方法封装，不预处理状态"></a>一、方案一，根据方法封装，不预处理状态</h3><h4 id="1、-代码："><a href="#1、-代码：" class="headerlink" title="1、 代码："></a>1、 代码：</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&quot;qs&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Http</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ins</span> = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">url, param = &#123;&#125;, config = &#123;&#125;</span>) &#123;</span><br><span class="line">    config.<span class="property">params</span> = param;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">ins</span>.<span class="title function_">get</span>(url, config);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">post</span>(<span class="params">url, data = &#123;&#125;, config = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">ins</span>.<span class="title function_">post</span>(url, qs.<span class="title function_">stringify</span>(data), config);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">delete</span>(<span class="params">url, param = &#123;&#125;, config = &#123;&#125;</span>) &#123;</span><br><span class="line">    config.<span class="property">params</span> = param;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">ins</span>.<span class="title function_">delete</span>(url, config);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">put</span>(<span class="params">url, body = &#123;&#125;, config = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">ins</span>.<span class="title function_">put</span>(url, body, config);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> http = <span class="keyword">new</span> <span class="title class_">Http</span>();</span><br><span class="line"><span class="keyword">export</span> &#123; http &#125;;</span><br></pre></td></tr></table></figure><h4 id="2、-使用方法："><a href="#2、-使用方法：" class="headerlink" title="2、 使用方法："></a>2、 使用方法：</h4><ul><li><p>安装 <a href="https://github.com/axios/axios">axios</a></p></li><li><p>安装 <a href="https://www.npmjs.com/package/qs">qs</a></p></li><li><p>使用示例：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; http &#125; <span class="keyword">from</span> <span class="string">&#x27;@/service.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// http get example</span></span><br><span class="line"><span class="keyword">let</span> url = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> params = &#123;&#125;</span><br><span class="line">http.<span class="title function_">get</span>(url, &#123;</span><br><span class="line">  params</span><br><span class="line">&#125;, &#123;&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// http post example</span></span><br><span class="line"><span class="keyword">let</span> url = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> params = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">http.<span class="title function_">post</span>(url, params, config)</span><br></pre></td></tr></table></figure></li></ul><h3 id="二、方案二，根据请求方式分，在数据拦截阶段处理好各种状态，再返回数据"><a href="#二、方案二，根据请求方式分，在数据拦截阶段处理好各种状态，再返回数据" class="headerlink" title="二、方案二，根据请求方式分，在数据拦截阶段处理好各种状态，再返回数据"></a>二、方案二，根据请求方式分，在数据拦截阶段处理好各种状态，再返回数据</h3><h4 id="1、代码"><a href="#1、代码" class="headerlink" title="1、代码"></a>1、代码</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span>,</span><br><span class="line">  <span class="attr">responseType</span>: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">method</span> === <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">      config.<span class="property">data</span> = qs.<span class="title function_">stringify</span>(config.<span class="property">data</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$message</span>.<span class="title function_">fail</span>(error);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> status = response.<span class="property">data</span>.<span class="property">F_responseNo</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">10000</span>:</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;response&#x27;</span>, response.<span class="property">data</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(response.<span class="property">data</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">10001</span>:</span><br><span class="line">          <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$messagebox</span>.<span class="title function_">show_message</span>(</span><br><span class="line">            <span class="string">&#x27;操作失败，未知错误：&#x27;</span>,</span><br><span class="line">            status</span><br><span class="line">          );</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response.<span class="property">data</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">10002</span>:</span><br><span class="line">          <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$messagebox</span>.<span class="title function_">show_message</span>(<span class="string">&#x27;请求参数错误：&#x27;</span>, status);</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response.<span class="property">data</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">12100</span>:</span><br><span class="line">          <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$messagebox</span>.<span class="title function_">show_message</span>(<span class="string">&#x27;账号错误：&#x27;</span>, status);</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response.<span class="property">data</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">12105</span>:</span><br><span class="line">          <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$messagebox</span>.<span class="title function_">show_message</span>(<span class="string">&#x27;账号在别处登录：&#x27;</span>, status);</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response.<span class="property">data</span>);</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span>) &#123;</span><br><span class="line">      <span class="keyword">switch</span> (error.<span class="property">response</span>.<span class="property">status</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">          <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$messagebox</span>.<span class="title function_">show_message</span>(<span class="string">&#x27;参数错误：&#x27;</span>, <span class="number">400</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">          <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$messagebox</span>.<span class="title function_">show_message</span>(<span class="string">&#x27;认证错误：&#x27;</span>, <span class="number">401</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">          <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$messagebox</span>.<span class="title function_">show_message</span>(</span><br><span class="line">            <span class="string">&#x27;拒绝执行 (access_token or refresh_access_token 错误)：&#x27;</span>,</span><br><span class="line">            <span class="number">403</span></span><br><span class="line">          );</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">          <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$messagebox</span>.<span class="title function_">show_message</span>(<span class="string">&#x27;请求页面不存在：&#x27;</span>, <span class="number">404</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">          <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$messagebox</span>.<span class="title function_">show_message</span>(error.<span class="property">response</span>.<span class="property">data</span>.<span class="property">message</span>);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error.<span class="property">response</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br></pre></td></tr></table></figure><h4 id="2、-使用方法：-1"><a href="#2、-使用方法：-1" class="headerlink" title="2、 使用方法："></a>2、 使用方法：</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">service</span>(&#123;</span><br><span class="line">  url,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">  params</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vscode代码格式化总结</title>
      <link href="/vscode-code-formatting-summary/"/>
      <url>/vscode-code-formatting-summary/</url>
      
        <content type="html"><![CDATA[<p>工欲善其事必先利其器，有一个完美的代码编辑工具，可以大幅提高编码效率，从团队的角度讲，也有利于促进团队的写作。我个人是个强迫症，看不得一点的不干净，于代码如是。在多人合作的项目中也会发现，每个人的编码风格和格式化工具不一样，拉下代码来还要重新格式化，看看哪里不对不说，还会弄出一些奇怪的问题。鉴于此，我研究了一段时间怎么统一代码风格，怎么做才能让代码自动格式化符合标准，怎么自动修复一些代码错误。答案是，eslint + prettier 可以完美做到，关于这个，网上有很多教程，我的配置如下：</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;files.autoSave&quot;</span><span class="punctuation">:</span> <span class="string">&quot;afterDelay&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;files.autoSaveDelay&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.tabSize&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.wordWrap&quot;</span><span class="punctuation">:</span> <span class="string">&quot;on&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.wordWrapColumn&quot;</span><span class="punctuation">:</span> <span class="number">120</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.defaultFormatter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;esbenp.prettier-vscode&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;source.fixAll.eslint&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.formatOnSave&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prettier.semi&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prettier.singleQuote&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prettier.disableLanguages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;vue&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.formatOnPaste&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.autoIndent&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keep&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;search.followSymlinks&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.html&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettyhtml&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;javascriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;html&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.format.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>自动格式化工具设置为 prettier, 配合 eslint 自动格式化，基本可以满足一般的代码风格配置。但是 vue 的格式化我们一般会用到 vetur, 因为某些原因，这会导致格式化时，单引号变为双引号， 这就很不舒服了，为了解决这个问题，需要添加以下配置：</p><figure class="highlight prolog"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;prettier.disableLanguages&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;vue&quot;</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure><p>eslint 设置</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;semi&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;error&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;always&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;no-tabs&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;no-console&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>此外，vetur 最新版因为增加了对 ts 的支持，模板中的属性变量会标红，这里需要设置 “vetur.experimental.templateInterpolationService” 为 false，方能解决</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>异步数据引出的 Console 问题</title>
      <link href="/async-data-console-issues/"/>
      <url>/async-data-console-issues/</url>
      
        <content type="html"><![CDATA[<p>最近发现在写的实验系统有个 bug,首屏打开的实验，总是会丢失一些物件，一开始还以为是打开太快，没画完，调试了一会发现丢失的物件都是图形精灵，再摸索一会发现 texture 的 load 方法是异步的，每次打印都在调用他的函数之后执行。 但是问题来了打印出来明明是有数据的，它长这样：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;&#125;</span><br><span class="line"><span class="attr">key1</span>: value</span><br><span class="line"><span class="attr">key2</span>: value</span><br><span class="line">……</span><br></pre></td></tr></table></figure><p>可见对象显示是空的，但是下拉会发现就是有数据，按理说若是异步的，一开始应该打印的是空对象，有了数据之后才会显示数据的，这种不伦不类的是什么鬼，用又用不到，又显示出来有。这里可能就得讲讲数据类型了，对象是引用类型，对象的每次复制都只是创建一个指针，指向原来的内存而已，所以我在异步里面赋值给了 textures,在异步函数外面返回，实际上是先返回了空，函数执行完，再执行异步函数时，又给原来的内存了这些对象，所以就会出现上面的打印结果。</p><p>知道了为什么会打印这种东东，我就确定就是异步的问题了，那么解决方法就简单了，处理异步无非就几种：callback、Promise、async&#x2F;await，我选择了原始的 callback，因为这比较符合我的需求。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES2020 新特性</title>
      <link href="/es2020-new-features/"/>
      <url>/es2020-new-features/</url>
      
        <content type="html"><![CDATA[<h2 id="一、使用-号快速创建类的私有变量"><a href="#一、使用-号快速创建类的私有变量" class="headerlink" title="一、使用 # 号快速创建类的私有变量"></a>一、使用 # 号快速创建类的私有变量</h2><p>类的主要目的之一是把我们的代码复用到更多模块中去，但是我们又不希望把所有的属性和方法都暴露出来，现在，有了这个新特性，我们就可以很轻易的实现这个想法了，只需要在我们的私有属性或者方法前面加一个 # 号即可：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span> &#123;</span><br><span class="line">  #message = <span class="string">&quot;Howdy&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#message) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> greeting = <span class="keyword">new</span> <span class="title class_">Message</span>()</span><br><span class="line"></span><br><span class="line">greeting.<span class="title function_">greet</span>() <span class="comment">// Howdy</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greeting.#message) <span class="comment">// Private name #message is not defined</span></span><br></pre></td></tr></table></figure><h2 id="二、Promise-allSelected"><a href="#二、Promise-allSelected" class="headerlink" title="二、Promise.allSelected"></a>二、Promise.allSelected</h2><p>当我们在使用多个 promise，尤其是这些 promise 有依赖关系时，打印每个 promise 的日志显得尤为重要，这可以帮助我们调试错误。有了 Promise.allSelected，我们可以创建一个新的 promise，这个 promise 会在包含的所有 promise 都执行完之后才返回，这将使我们能够访问一个数组，其中包含每个 promise 的返回值</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> <span class="built_in">setTimeout</span>(res, <span class="number">1000</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> <span class="built_in">setTimeout</span>(rej, <span class="number">1000</span>));</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">allSettled</span>([p1, p2]).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data));</span><br><span class="line"></span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//   Object &#123; status: &quot;fulfilled&quot;, value: undefined&#125;,</span></span><br><span class="line"><span class="comment">//   Object &#123; status: &quot;rejected&quot;, reason: undefined&#125;</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><h2 id="三、空值合并运算符"><a href="#三、空值合并运算符" class="headerlink" title="三、空值合并运算符 ??"></a>三、空值合并运算符 ??</h2><p>由于 JavaScript 的类型时动态的，在分配变量时，我们不得不去记住哪些值会被判断为真，哪些会被判断为假。当我们在创建一个对象时，通常会初始化属性为假的值，比如一个空字符串 或者是 0。设置默认值就会变得很烦人，因为它会覆盖有效值，看下如下 demo，你就会发现这么处理真的很烦人：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">profile</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">profile</span>.<span class="property">name</span> || <span class="string">&quot;Anonymous&quot;</span>); <span class="comment">// Anonymous</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">profile</span>.<span class="property">age</span> || <span class="number">18</span>); <span class="comment">// 18</span></span><br></pre></td></tr></table></figure><p>上述例子中，可能结果并不是我们想要的，我们想名字为空或者 0 岁也是合理的，应该不被代替，我们可以用 ?? 运算符替换掉 || 运算符，因为 ?? 运算符的类型检测会更严格一点，它只会把 null 和 undefined 判断为 false。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">profile</span>.<span class="property">name</span> ?? <span class="string">&quot;Anonymous&quot;</span>); <span class="comment">// &quot;&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">profile</span>.<span class="property">age</span> ?? <span class="number">18</span>); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h2 id="四、可选链运算符"><a href="#四、可选链运算符" class="headerlink" title="四、可选链运算符"></a>四、可选链运算符</h2><p>与空值合并运算符类似，JavaScript 在处理虚假值时，可能无法按照我们的意愿进行操作。当属性值未定义时，我们可以返回一个默认值，但是如果属性的路径未被定义呢？</p><p>答案是，可以通过在点符号前添加问号，我们可以将属性路径的任何部分设置为可选，以便操作。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">profile</span>.<span class="property">name</span> ?? <span class="string">&quot;Anonymous&quot;</span>); <span class="comment">// person.profile is undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person?.<span class="property">profile</span>?.<span class="property">name</span> ?? <span class="string">&quot;Anonymous&quot;</span>);  <span class="comment">// Anonymous</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person?.<span class="property">profile</span>?.<span class="property">age</span> ?? <span class="number">18</span>);  <span class="comment">// 18</span></span><br></pre></td></tr></table></figure><h2 id="五、BigInt"><a href="#五、BigInt" class="headerlink" title="五、BigInt"></a>五、BigInt</h2><p>通常，我们不会深入技术细节，但是由于 JavaScript 处理数字的方式，当你把研究的更加深入时，事情就会变得有点不靠谱。 Javascript 可以处理的最大数字是2 ^ 53，我们可以用 MAX safe integer 看到。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> max = <span class="title class_">Number</span>.<span class="property">MAX_SAFE_INTEGER</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max); <span class="comment">// 9007199254740991</span></span><br></pre></td></tr></table></figure><p>如果超过这个数字，就会变得有点奇怪</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max + <span class="number">1</span>); <span class="comment">// 9007199254740992</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max + <span class="number">2</span>); <span class="comment">// 9007199254740992</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max + <span class="number">3</span>); <span class="comment">// 9007199254740994</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>, <span class="number">53</span>) == <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>, <span class="number">53</span>) + <span class="number">1</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>我们可以使用新的数据类型 BigInt 来处理上述问题。只需在数字后面加个符号 n，我们就可以疯狂的使用大的数值了。我们不能用 BigInt 数字混淆标准数字，所以一般在数学计算时使用 BigInt 类型。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> bigNum = <span class="number">100000000000000000000000000000n</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bigNum * <span class="number">2n</span>); <span class="comment">// 200000000000000000000000000000n</span></span><br></pre></td></tr></table></figure><h2 id="六、使用-async-await-动态导入模块"><a href="#六、使用-async-await-动态导入模块" class="headerlink" title="六、使用 async&#x2F;await 动态导入模块"></a>六、使用 async&#x2F;await 动态导入模块</h2><p>如果我们有很多的功能函数，有些是很少用的，那么一起导入会使资源浪费，现在我们可以使用 async&#x2F;await 来动态导入这些依赖了，但是这个方法仅适用于 node.js 环境。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// math.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">num1, num2</span>) =&gt; num1 + num2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; add &#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">doMath</span> = <span class="keyword">async</span> (<span class="params">num1, num2</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (num1 &amp;&amp; num2) &#123;</span><br><span class="line">    <span class="keyword">const</span> math = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">&#x27;./math.js&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(math.<span class="title function_">add</span>(<span class="number">5</span>, <span class="number">10</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">doMath</span>(<span class="number">4</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>翻译自：<a href="https://alligator.io/js/es2020/">https://alligator.io/js/es2020/</a></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>获取最长公共前缀</title>
      <link href="/get-longest-common-prefix/"/>
      <url>/get-longest-common-prefix/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">编写一个函数来查找字符串数组中的最长公共前缀。</span><br><span class="line"></span><br><span class="line">如果不存在公共前缀，返回空字符串 <span class="string">&quot;&quot;</span>。</span><br><span class="line"></span><br><span class="line">示例 <span class="number">1</span>:</span><br><span class="line">输入: <span class="selector-attr">[<span class="string">&quot;flower&quot;</span>,<span class="string">&quot;flow&quot;</span>,<span class="string">&quot;flight&quot;</span>]</span></span><br><span class="line">输出: <span class="string">&quot;fl&quot;</span></span><br><span class="line"></span><br><span class="line">示例 <span class="number">2</span>:</span><br><span class="line">输入: <span class="selector-attr">[<span class="string">&quot;dog&quot;</span>,<span class="string">&quot;racecar&quot;</span>,<span class="string">&quot;car&quot;</span>]</span></span><br><span class="line">输出: <span class="string">&quot;&quot;</span></span><br><span class="line">解释: 输入不存在公共前缀。</span><br><span class="line">说明:</span><br><span class="line"></span><br><span class="line">所有输入只包含小写字母 a-z 。</span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/longest-common-prefix</span></span><br></pre></td></tr></table></figure><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>0、初始化最长公共前缀为数组第一个字符串</p><p>1、求出数组长度 len</p><p>2、如果 len 等于零，说明为空数组，不可能有最长公共前缀，返回空</p><p>3、 遍历数组</p><p>(1) 对比当前最长公共前缀与每一个字符串是否有交集，没有的话，最长公共前缀截取该字符前面的字符串，继续下一个</p><p>(2) 若遍历完了，公共前缀为空，说明没有公共前缀，返回空，否则，返回当前最长公共前缀</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>js 题解</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> len = strs.<span class="property">length</span>;</span><br><span class="line"><span class="keyword">let</span> lcp = strs[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> (len == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> prefixLen = strs[i].<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> j = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (; j &lt; lcp.<span class="property">length</span> &amp;&amp; j &lt; prefixLen; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (lcp[j] != strs[i][j]) <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  lcp = lcp.<span class="title function_">substr</span>(<span class="number">0</span>, j);</span><br><span class="line">  <span class="keyword">if</span> (lcp === <span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span> lcp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> lcp;</span><br></pre></td></tr></table></figure><p>python 题解：</p><p>这个解法用到了 python 的一个独有的数据处理能力，把数组转置为矩阵，通过判断矩阵每行的重复数为 1，判别数组中的每个元素的公共前缀。有点曲径通幽处的感觉，很妙。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">longestCommonPrefix</span>(<span class="params">self, strs</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> strs:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        r = []</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">zip</span>(*strs):</span><br><span class="line">            r.append(<span class="built_in">len</span>(<span class="built_in">set</span>(item)) == <span class="number">1</span>)</span><br><span class="line">        r += [<span class="number">0</span>]</span><br><span class="line">        res = strs[<span class="number">0</span>][:r.index(<span class="number">0</span>)]</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, arr</span>):</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> ex:</span><br><span class="line">            <span class="built_in">print</span>(<span class="variable language_">self</span>.longestCommonPrefix(item))</span><br><span class="line"></span><br><span class="line">ex = [[<span class="string">&quot;dog&quot;</span>, <span class="string">&quot;racecar&quot;</span>, <span class="string">&quot;car&quot;</span>], [<span class="string">&quot;flower&quot;</span>, <span class="string">&quot;flow&quot;</span>, <span class="string">&quot;flight&quot;</span>], []]</span><br><span class="line">Solution(ex)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>回文数判断</title>
      <link href="/palindrome-number-judgment/"/>
      <url>/palindrome-number-judgment/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><figure class="highlight nestedtext"><table><tr><td class="code"><pre><span class="line"><span class="attribute">判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">示例 1</span><span class="punctuation">:</span></span><br><span class="line"><span class="attribute">输入</span><span class="punctuation">:</span> <span class="string">121</span></span><br><span class="line"><span class="attribute">输出</span><span class="punctuation">:</span> <span class="string">true</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">示例 2</span><span class="punctuation">:</span></span><br><span class="line"><span class="attribute">输入</span><span class="punctuation">:</span> <span class="string">-121</span></span><br><span class="line"><span class="attribute">输出</span><span class="punctuation">:</span> <span class="string">false</span></span><br><span class="line"><span class="attribute">解释</span><span class="punctuation">:</span> <span class="string">从左向右读, 为 - 121 。 从右向左读, 为 121 - 。因此它不是一个回文数。</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">示例 3</span><span class="punctuation">:</span></span><br><span class="line"><span class="attribute">输入</span><span class="punctuation">:</span> <span class="string">10</span></span><br><span class="line"><span class="attribute">输出</span><span class="punctuation">:</span> <span class="string">false</span></span><br><span class="line"><span class="attribute">解释</span><span class="punctuation">:</span> <span class="string">从右向左读, 为 01 。因此它不是一个回文数。</span></span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https://leetcode-cn.com/problems/palindrome-number</span><br></pre></td></tr></table></figure><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>1、排除明显不符合条件的数字，当 x 为 负数时不满足回文条件， 当 x 的最后一位为 0 时，要满足回文条件，必须最前面一位也是 0，第一位为 0 的数字只有 0 本身，所以，也不满足条件，返回 false</p><p>2、初始化反转数字为 0</p><p>3、 x 的 前半部分大于后半部分反转值，推出 x 的最后一位，并推入 rev</p><p>4、当 x 为偶数位时，满足回文的条件是前半部分等于后半部分反转数，返回 true</p><p>5、当 x 为奇数时，x 的前半部分数字等于中值后面数字的反转值，返回 true</p><p>6、否则，不满足回文条件</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>js 题解</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">x</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> isPalindrome = <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="comment">// 当 x 为 负数或者 x 的最后一位为 0 时，不满足条件，返回 false</span></span><br><span class="line">  <span class="keyword">if</span> (~~x &lt; <span class="number">0</span> || (~~x % <span class="number">10</span> === <span class="number">0</span> &amp;&amp; x !== <span class="number">0</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> rev = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// x 的 前半部分大于后半部分反转值，继续推出 x 后一位，推入 rev</span></span><br><span class="line">  <span class="keyword">while</span> (~~x &gt; rev) &#123;</span><br><span class="line">    rev = rev * <span class="number">10</span> + (~~x % <span class="number">10</span>);</span><br><span class="line">    x /= <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//  当 x 为 偶数位时，满足回文的条件是前半部分等于后半部分反转数，当 x 为奇数时，x 的前半部分数字等于中值后面数字的反转值</span></span><br><span class="line">  <span class="keyword">return</span> ~~x === rev || ~~x === ~~(rev / <span class="number">10</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isPalindrome</span>(<span class="number">121</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isPalindrome</span>(-<span class="number">121</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isPalindrome</span>(<span class="number">10</span>));</span><br></pre></td></tr></table></figure><p>python 题解</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isPalindrome</span>(<span class="params">self, x: <span class="built_in">int</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="comment"># x 若是 0 或者负数，返回 false</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> <span class="keyword">or</span> (<span class="built_in">int</span>(x % <span class="number">10</span> == <span class="number">0</span>) <span class="keyword">and</span> x != <span class="number">0</span>)):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="comment"># 初始化翻转数字</span></span><br><span class="line">        reverse = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 若原始数字 x 大于从后面开始翻转的数字，说明已经翻转了后半部分，翻转阶段完成</span></span><br><span class="line">        <span class="keyword">while</span> (x &gt; reverse):</span><br><span class="line">            reverse = <span class="built_in">int</span>(reverse * <span class="number">10</span>) + <span class="built_in">int</span>(x % <span class="number">10</span>)</span><br><span class="line">            x = <span class="built_in">int</span>(x / <span class="number">10</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;x:&#x27;</span>, x)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;reverse&#x27;</span>, reverse)</span><br><span class="line">        <span class="comment"># 若翻转的后半部分数字 reverse 等于前半部分数字，返回 true，否则返回 false，利用 int 向上取整的特性，当 x 为奇数时，去掉最后一位</span></span><br><span class="line">        <span class="keyword">return</span> x == reverse <span class="keyword">or</span> x == <span class="built_in">int</span>(reverse/<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">x = Solution()</span><br><span class="line">arr = [<span class="number">121</span>, -<span class="number">121</span>, <span class="number">10</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> arr:</span><br><span class="line">    <span class="built_in">print</span>(x.isPalindrome(item))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>罗马数字转整数</title>
      <link href="/roman-numerals-to-integer/"/>
      <url>/roman-numerals-to-integer/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 罗马数字包含以下七种字符: I， V， X， L，C，D 和 M。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符          数值</span></span><br><span class="line"><span class="comment">// I             1</span></span><br><span class="line"><span class="comment">// V             5</span></span><br><span class="line"><span class="comment">// X             10</span></span><br><span class="line"><span class="comment">// L             50</span></span><br><span class="line"><span class="comment">// C             100</span></span><br><span class="line"><span class="comment">// D             500</span></span><br><span class="line"><span class="comment">// M             1000</span></span><br><span class="line"><span class="comment">// 例如， 罗马数字 2 写做 II ，即为两个并列的 1。12 写做 XII ，即为 X + II 。 27 写做  XXVII, 即为 XX + V + II 。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 4 不写做 IIII，而是 IV。数字 1 在数字 5 的左边，所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地，数字 9 表示为 IX。这个特殊的规则只适用于以下六种情况：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// I 可以放在 V (5) 和 X (10) 的左边，来表示 4 和 9。</span></span><br><span class="line"><span class="comment">// X 可以放在 L (50) 和 C (100) 的左边，来表示 40 和 90。</span></span><br><span class="line"><span class="comment">// C 可以放在 D (500) 和 M (1000) 的左边，来表示 400 和 900。</span></span><br><span class="line"><span class="comment">// 给定一个罗马数字，将其转换成整数。输入确保在 1 到 3999 的范围内。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 来源：力扣（LeetCode）</span></span><br><span class="line"><span class="comment">// 链接：https://leetcode-cn.com/problems/roman-to-integer</span></span><br></pre></td></tr></table></figure><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ol><li><p>把罗马数字对应整数的规则存到哈希表里进行映射</p></li><li><p>罗马数字分两种情况，一种是正常的一个一个相加的，一种是小的数字在前面，需要用后一个数字减去前面一个数字，这种情况</p></li><li><p>遍历罗马数字</p><ul><li>如果跟后一个数字组合，不在哈希表里，则直接跟上一次的结果相加，跳到下一个数字</li><li>如果跟后一个数字组合，结果在哈希表里，则跟该组合的值跟上一次的结果相加，跳到下下个数字</li></ul></li></ol><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> romanToInt = <span class="keyword">function</span> (<span class="params">s</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> map = &#123;</span><br><span class="line">    <span class="attr">I</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">V</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">X</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">L</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="attr">C</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">D</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">M</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="attr">IV</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">IX</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="attr">XL</span>: <span class="number">40</span>,</span><br><span class="line">    <span class="attr">XC</span>: <span class="number">90</span>,</span><br><span class="line">    <span class="attr">CD</span>: <span class="number">400</span>,</span><br><span class="line">    <span class="attr">CM</span>: <span class="number">900</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> &#123; length &#125; = s;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; ) &#123;</span><br><span class="line">    <span class="keyword">if</span> (map[s[i] + s[i + <span class="number">1</span>]]) &#123;</span><br><span class="line">      res += map[s[i] + s[i + <span class="number">1</span>]];</span><br><span class="line">      i += <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res += map[s[i]];</span><br><span class="line">      i += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// romanToInt(&#x27;III&#x27;);</span></span><br><span class="line"><span class="comment">// romanToInt(&#x27;IV&#x27;);</span></span><br><span class="line"><span class="comment">// romanToInt(&#x27;MCMXCIV&#x27;);</span></span><br><span class="line"><span class="comment">// romanToInt(&#x27;MCDLXXVI&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;III&#x27;</span>, <span class="title function_">romanToInt</span>(<span class="string">&#x27;III&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;IV&#x27;</span>, <span class="title function_">romanToInt</span>(<span class="string">&#x27;IV&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;IX&#x27;</span>, <span class="title function_">romanToInt</span>(<span class="string">&#x27;IX&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;LVIII&#x27;</span>, <span class="title function_">romanToInt</span>(<span class="string">&#x27;LVIII&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;MCMXCIV&#x27;</span>, <span class="title function_">romanToInt</span>(<span class="string">&#x27;MCMXCIV&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;MCDLXXVI&#x27;</span>, <span class="title function_">romanToInt</span>(<span class="string">&#x27;MCDLXXVI&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;MMCDXXV&#x27;</span>, <span class="title function_">romanToInt</span>(<span class="string">&#x27;MMCDXXV&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;CMLII&#x27;</span>, <span class="title function_">romanToInt</span>(<span class="string">&#x27;CMLII&#x27;</span>));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>整数反转</title>
      <link href="/reverse-integer/"/>
      <url>/reverse-integer/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># 给出一个 32 位的有符号整数，你需要将这个整数中每位上的数字进行反转。</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 示例 1:</span></span><br><span class="line"><span class="meta"># 输入: 123</span></span><br><span class="line"><span class="meta"># 输出: 321</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#  示例 2:</span></span><br><span class="line"><span class="meta"># 输入: -123</span></span><br><span class="line"><span class="meta"># 输出: -321</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 示例 3:</span></span><br><span class="line"><span class="meta"># 输入: 120</span></span><br><span class="line"><span class="meta"># 输出: 21</span></span><br><span class="line"><span class="meta"># 注意:</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 假设我们的环境只能存储得下 32 位的有符号整数，则其数值范围为 [−231, 231 − 1]。请根据这个假设，如果反转后整数溢出那么就返回 0。</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 来源：力扣（LeetCode）</span></span><br><span class="line"><span class="meta"># 链接：https: <span class="comment">// leetcode-cn.com/problems/reverse-integer</span></span></span><br></pre></td></tr></table></figure><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>1、 确定最大边界值和最小边界值</p><p>2、 当数字不等于 0 时，执行以下操作：</p><p>(1) 获取当前位数字（整数）</p><p>(2) 获取去掉当前位数字后，余下的数字（整数）</p><p>(3) 按位与边界值比较，若当前位数字大于最大边界值去掉最高位或者当前位数字等于最大边界值去掉最高位而且接下来要添加的数字大于 7，则溢出，返回 0，这里 7 作为下一位的判断值，是因为最大边界值的最后一位是 7</p><p>(4) 按位与边界值比较，若当前位数字小于于最小边界值去掉最高位或者当前位数字等于最小边界值去掉最高位而且接下来要添加的数字小于 -8，则溢出，返回 0，这里 -8 作为下一位的判断值，是因为最小边界值的最后一位是 8</p><p>(5) 否则，数字反转</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>js 题解</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">x</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> reverse = <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> edge = <span class="number">2</span> ** <span class="number">31</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="variable constant_">INT_MAX</span> = edge - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="variable constant_">INT_MIN</span> = -edge;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> rev = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (x !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> pop = ~~(x % <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    x = ~~(x / <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">if</span> (rev &gt; <span class="variable constant_">INT_MAX</span> / <span class="number">10</span> || (rev === <span class="variable constant_">INT_MAX</span> / <span class="number">10</span> &amp;&amp; pop &gt; <span class="number">7</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (rev &lt; <span class="variable constant_">INT_MIN</span> / <span class="number">10</span> || (rev === <span class="variable constant_">INT_MIN</span> / <span class="number">10</span> &amp;&amp; pop &lt; -<span class="number">8</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    rev = rev * <span class="number">10</span> + pop;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> rev;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;123:&#x27;</span>, <span class="title function_">reverse</span>(<span class="number">123</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-123:&#x27;</span>, <span class="title function_">reverse</span>(-<span class="number">123</span>));</span><br></pre></td></tr></table></figure><p>python 题解</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reverse</span>(<span class="params">self, x</span>):</span><br><span class="line">        INT_MAX = <span class="number">2</span>**<span class="number">31</span></span><br><span class="line">        INT_MIN = -<span class="number">2</span>**<span class="number">31</span></span><br><span class="line">        cur = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> x != <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> (x &lt; <span class="number">0</span>):</span><br><span class="line">                pop = <span class="built_in">int</span>(x % -<span class="number">10</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                pop = <span class="built_in">int</span>(x % <span class="number">10</span>)</span><br><span class="line">            <span class="keyword">if</span> cur &gt; INT_MAX / <span class="number">10</span> <span class="keyword">or</span> (cur == INT_MAX / <span class="number">10</span> <span class="keyword">and</span> pop &gt; <span class="number">7</span>):</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> cur &lt; INT_MIN / <span class="number">10</span> <span class="keyword">or</span> (cur == INT_MIN / <span class="number">10</span> <span class="keyword">and</span> pop &lt; -<span class="number">8</span>):</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            cur = cur * <span class="number">10</span> + pop</span><br><span class="line">            x = <span class="built_in">int</span>(x/<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">return</span> cur</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_init_</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(res.reverse(-<span class="number">123</span>))</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.reverse(-<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line">res = Solution()</span><br><span class="line">res._init_()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决Github图片破裂问题</title>
      <link href="/fix-github-image-issue-on-mac/"/>
      <url>/fix-github-image-issue-on-mac/</url>
      
        <content type="html"><![CDATA[<p>这个问题主要是 host 问题，修改一下正确的 host 即可</p><h2 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h2><p><code>sudo vi /etc/hosts</code></p><p><code>i</code> insert</p><h2 id="win"><a href="#win" class="headerlink" title="win"></a>win</h2><p>打开 C:\Windows\System32\drivers\etc\hosts</p><h2 id="修改-host-文件-ip"><a href="#修改-host-文件-ip" class="headerlink" title="修改 host 文件 ip"></a>修改 host 文件 ip</h2><figure class="highlight accesslog"><table><tr><td class="code"><pre><span class="line"># GitHub Start</span><br><span class="line"># <span class="number">192</span>.<span class="number">30</span>.<span class="number">253</span>.<span class="number">112</span>    github.com</span><br><span class="line"># <span class="number">192</span>.<span class="number">30</span>.<span class="number">253</span>.<span class="number">119</span>    gist.github.com</span><br><span class="line"><span class="number">151.101.184.133</span>    assets-cdn.github.com</span><br><span class="line"><span class="number">151.101.184.133</span>    raw.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    gist.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    cloud.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    camo.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars0.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars1.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars2.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars3.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars4.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars5.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars6.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars7.githubusercontent.com</span><br><span class="line"><span class="number">151.101.184.133</span>    avatars8.githubusercontent.com</span><br><span class="line"># GitHub End </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>爬楼梯</title>
      <link href="/climbing-stairs/"/>
      <url>/climbing-stairs/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">假设你正在爬楼梯。需要 n  阶你才能到达楼顶。</span><br><span class="line"></span><br><span class="line">每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？</span><br><span class="line"></span><br><span class="line">注意：给定 n 是一个正整数。</span><br><span class="line"></span><br><span class="line">示例 1：</span><br><span class="line"></span><br><span class="line">输入： 2</span><br><span class="line">输出： 2</span><br><span class="line">解释： 有两种方法可以爬到楼顶。</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span>  1 阶 + 1 阶</span><br><span class="line"><span class="bullet">2.</span>  2 阶</span><br><span class="line"></span><br><span class="line">示例 2：</span><br><span class="line"></span><br><span class="line">输入： 3</span><br><span class="line">输出： 3</span><br><span class="line">解释： 有三种方法可以爬到楼顶。</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span>  1 阶 + 1 阶 + 1 阶</span><br><span class="line"><span class="bullet">2.</span>  1 阶 + 2 阶</span><br><span class="line"><span class="bullet">3.</span>  2 阶 + 1 阶</span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https://leetcode-cn.com/problems/climbing-stairs</span><br></pre></td></tr></table></figure><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>(1) 暴力破解法，动态规划，把问题缩小为 1 阶和 2 阶问题，这种写法的问题是效率太低，提交之后没通过，因为超时了。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> climbStairs = <span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">climb_stairs</span>(<span class="number">0</span>, n);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> climb_stairs = <span class="keyword">function</span> (<span class="params">i, n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i &gt; n) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (i === n) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">climb_stairs</span>(i + <span class="number">1</span>, n) + <span class="title function_">climb_stairs</span>(i + <span class="number">2</span>, n);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>(2) 记忆化递归，优化了上述算法，每次递归之后吧值存起来，减少冗余</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> climbStairs = <span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> memo = [];</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">climb_stairs</span>(<span class="number">0</span>, n, memo);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> climb_stairs = <span class="keyword">function</span> (<span class="params">i, n, memo</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i &gt; n) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (i === n) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (memo[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> memo[i];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  memo[i] = <span class="title function_">climb_stairs</span>(i + <span class="number">1</span>, n, memo) + <span class="title function_">climb_stairs</span>(i + <span class="number">2</span>, n, memo);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> memo[i];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NP/P/NPC 都是何方神圣</title>
      <link href="/NP-P-NPC/"/>
      <url>/NP-P-NPC/</url>
      
        <content type="html"><![CDATA[<h3 id="一、P（Polynomial）"><a href="#一、P（Polynomial）" class="headerlink" title="一、P（Polynomial）"></a>一、P（Polynomial）</h3><p>如果一个问题可以找到一个能在多项式的时间里解决它的算法，那么这个问题就属于 P 问题。</p><h3 id="二、NP"><a href="#二、NP" class="headerlink" title="二、NP"></a>二、NP</h3><p>NP 问题是指可以在多项式的时间里验证一个解的问题，所有的 P 类问题都是 NP 问题。</p><h3 id="三、NPC"><a href="#三、NPC" class="headerlink" title="三、NPC"></a>三、NPC</h3><p>同时满足下面两个条件的问题就是 NPC 问题。首先，它得是一个 NP 问题；然后，所有的 NP 问题都可以约化到它。证明一个问题是 NPC 问题也很简单。先证明它至少是一个 NP 问题，再证明其中一个已知的 NPC 问题能约化到它，这样就可以说它是 NPC 问题了。</p><h3 id="四、已知-NPC-问题"><a href="#四、已知-NPC-问题" class="headerlink" title="四、已知 NPC 问题"></a>四、已知 NPC 问题</h3><p>逻辑电路问题、Hamilton 回路、TSP（旅行商问题）等</p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>软件版本号定义</title>
      <link href="/software-version-number-definition/"/>
      <url>/software-version-number-definition/</url>
      
        <content type="html"><![CDATA[<p>一般来讲大部分的软件版本号分 3 段，比如 A.B.C,</p><p>A 表示大版本号，一般当软件整体重写，或出现不向后兼容的改变时，增加 A，A 为零时表示软件还在开发阶段。</p><p>B 表示功能更新，出现新功能时增加 B</p><p>C 表示小修改，如修复 bug，只要有修改就增加 C</p><p>除了版本号之外还会有一些修饰的词，比如：</p><p>alpha: 内部版本</p><p>beta: 测试版</p><p>rc: 即将作为正式版发布</p><p>lts: 长期维护</p><p>来源：<a href="https://www.zhihu.com/question/20289602/answer/20068112">知乎</a></p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>时间零点</title>
      <link href="/time-zero/"/>
      <url>/time-zero/</url>
      
        <content type="html"><![CDATA[<p>在 1971 年，《Unix Programmer’s Manua》出版，将格林威治时间（GMT）1971 年 1 月 1 日 0 时 0 分 0 秒作为系统的起始时间。后来为方便记忆和计算，起始时间修改成 1970 年。现今的计算机系统，或多或少受 Unix 的影响，延续 Unix 的计时方式。从此之后 （GMT）1970 年 1 月 1 日 0 时 0 分 0 秒 就成为 Unix 世界的起始时间，甚至超越 Unix 而成为整个计算机世界的起始时间。</p><p>Unix 中常常使用一个数字记录时间，表示距离起始时间相差的秒数（根据系统的精度，时间单位有时毫秒，有时是纳秒）。大于 0 表示在起始时间之后，小于 0 就表示在起始时间之前。这个数字有时是浮点类型、有时是整数类型，但都称这个数字为 Unix 时间戳（Timestamp）。</p><p>当计算机存储或者传输 Timestamp 出错，这个 Timestamp 就会取默认值。而在计算机中，默认值通常是 0。</p><p>当 Timestamp 为 0，就表示时间（GMT）1970 年 1 月 1 日 0 时 0 分 0 秒。中国使用北京时间，处于东 8 区，相应就是早上 8 点。因此在中国这边，时间出错了，就经常会显示成 1970 年 1 月 1 日 08:00。</p><p>摘自 <a href="https://zhuanlan.zhihu.com/p/23752093">知乎</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bash 数据处理</title>
      <link href="/bash-data-processing/"/>
      <url>/bash-data-processing/</url>
      
        <content type="html"><![CDATA[<h3 id="一、用-grep-进行数据筛选"><a href="#一、用-grep-进行数据筛选" class="headerlink" title="一、用 grep 进行数据筛选"></a>一、用 grep 进行数据筛选</h3><p>1、数据</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">item, modelnumber, price, tax</span><br><span class="line">Sneakers, MN009, 49.99, 1.11</span><br><span class="line">Sneakers, MTG09, 139.99, 4.11</span><br><span class="line">Shirt, MN089, 8.99, 1.44</span><br><span class="line">Pants, N09, 39.99, 1.11</span><br><span class="line">Sneakers, KN09, 49.99, 1.11</span><br><span class="line">Shoes, BN009, 449.22, 4.31</span><br><span class="line">Sneakers, dN099, 9.99, 1.22</span><br><span class="line">Bananas, GG009, 4.99, 1.11</span><br></pre></td></tr></table></figure><p>2、操作</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 关键字</span></span><br><span class="line">grep Sneakers sales.csv</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">Sneakers, MN009, 49.99, 1.11</span><br><span class="line">Sneakers, MTG09, 139.99, 4.11</span><br><span class="line">Sneakers, KN09, 49.99, 1.11</span><br><span class="line">Sneakers, dN099, 9.99, 1.22</span><br><span class="line"><span class="comment"># 正则匹配</span></span><br><span class="line">grep -o <span class="string">&quot;\(BN\|MN\)\([0-9]\)\&#123;3\&#125;&quot;</span> sales.csv</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">age,value</span><br><span class="line">33,5943</span><br><span class="line">32,543</span><br><span class="line">34,93</span><br><span class="line">39,5943</span><br><span class="line">36,9943</span><br><span class="line">38,8943</span><br></pre></td></tr></table></figure><h3 id="二、数据替换"><a href="#二、数据替换" class="headerlink" title="二、数据替换"></a>二、数据替换</h3><p>1、数据</p><p>(1) data.csv</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">age,value</span><br><span class="line">&quot;33&quot;,&quot;5943&quot;</span><br><span class="line">&quot;32&quot;,&quot;543&quot;</span><br><span class="line">&quot;34&quot;,&quot;93&quot;</span><br><span class="line">&quot;39&quot;,&quot;5943&quot;</span><br><span class="line">&quot;36&quot;,&quot;9943&quot;</span><br><span class="line">&quot;38&quot;,&quot;8943&quot;</span><br></pre></td></tr></table></figure><p>(2) temps.txt</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">temp,unit</span><br><span class="line">26.1,C</span><br><span class="line">78.1,F</span><br><span class="line">23.1,C</span><br><span class="line">25.7,C</span><br><span class="line">76.3,F</span><br><span class="line">77.3,F</span><br><span class="line">24.2,C</span><br><span class="line">79.3,F</span><br><span class="line">27.9,C</span><br><span class="line">75.1,F</span><br><span class="line">25.9,C</span><br><span class="line">79.0,F</span><br></pre></td></tr></table></figure><p>2、操作</p><p>(1) 用 sed 替换文件的双引号</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> data.csv | sed <span class="string">&#x27;s/&quot;//g&#x27;</span></span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">age,value</span><br><span class="line">33,5943</span><br><span class="line">32,543</span><br><span class="line">34,93</span><br><span class="line">39,5943</span><br><span class="line">36,9943</span><br><span class="line">38,8943</span><br></pre></td></tr></table></figure><p>(2) 用 awk 有条件的替换数据</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> temps.txt | awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;if($2==&quot;F&quot;)print (($1-32)*5/9)&quot;,C&quot;;else print $1&quot;,&quot;$2&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">26.1,C</span><br><span class="line">25.6111,C</span><br><span class="line">23.1,C</span><br><span class="line">25.7,C</span><br><span class="line">24.6111,C</span><br><span class="line">25.1667,C</span><br><span class="line">24.2,C</span><br><span class="line">26.2778,C</span><br><span class="line">27.9,C</span><br><span class="line">23.9444,C</span><br><span class="line">25.9,C</span><br><span class="line">26.1111,C</span><br></pre></td></tr></table></figure><h3 id="三、数据排序"><a href="#三、数据排序" class="headerlink" title="三、数据排序"></a>三、数据排序</h3><p>1、 数据</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">1234</span><br><span class="line">11</span><br><span class="line">ZZZZ</span><br><span class="line">1010</span><br><span class="line">0123</span><br><span class="line">hello world</span><br><span class="line">abc123</span><br><span class="line">Hello World</span><br><span class="line">9</span><br><span class="line">zzzz</span><br></pre></td></tr></table></figure><p>2、操作</p><p>(1) 首字符 Unicode 大小排序</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> foo.txt | <span class="built_in">sort</span></span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">0</span><br><span class="line">0123</span><br><span class="line">1</span><br><span class="line">1010</span><br><span class="line">11</span><br><span class="line">1234</span><br><span class="line">9</span><br><span class="line">Hello World</span><br><span class="line">ZZZZ</span><br><span class="line">abc123</span><br><span class="line">hello world</span><br><span class="line">zzzz</span><br></pre></td></tr></table></figure><p>(2) 数字排序</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> foo.txt | <span class="built_in">sort</span> -n</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">0</span><br><span class="line">Hello World</span><br><span class="line">ZZZZ</span><br><span class="line">abc123</span><br><span class="line">hello world</span><br><span class="line">zzzz</span><br><span class="line">1</span><br><span class="line">9</span><br><span class="line">11</span><br><span class="line">0123</span><br><span class="line">1010</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>(3) 倒序</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> foo.txt | <span class="built_in">sort</span> -r</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">zzzz</span><br><span class="line">hello world</span><br><span class="line">abc123</span><br><span class="line">ZZZZ</span><br><span class="line">Hello World</span><br><span class="line">9</span><br><span class="line">1234</span><br><span class="line">11</span><br><span class="line">1010</span><br><span class="line">1</span><br><span class="line">0123</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>(4) 组合使用——数字倒序</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> foo.txt | <span class="built_in">sort</span> -n -r</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">1234</span><br><span class="line">1010</span><br><span class="line">0123</span><br><span class="line">11</span><br><span class="line">9</span><br><span class="line">1</span><br><span class="line">zzzz</span><br><span class="line">hello world</span><br><span class="line">abc123</span><br><span class="line">ZZZZ</span><br><span class="line">Hello World</span><br><span class="line">0</span><br></pre></td></tr></table></figure><h3 id="四、两份文件交并集运算"><a href="#四、两份文件交并集运算" class="headerlink" title="四、两份文件交并集运算"></a>四、两份文件交并集运算</h3><p>1、数据</p><p>(1) signups.txt</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">68_so_late@hotmail.com</span><br><span class="line">fred@example.com</span><br><span class="line">info@info.info</span><br><span class="line">something@somewhere.com</span><br><span class="line">ted@example.net</span><br></pre></td></tr></table></figure><p>(2) purchases.txt</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">example@gmail.com</span><br><span class="line">fred@example.com</span><br><span class="line">mark@facebook.com</span><br><span class="line">something@somewhere.com</span><br></pre></td></tr></table></figure><p>2、操作（需要先排序，不然运算结果可能不对）</p><p>(1) 找出登录账户并且购买了商品的用户（求交集)</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">comm</span> -12 &lt;(<span class="built_in">sort</span> signups.txt) &lt;(<span class="built_in">sort</span> purchases.txt)</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">fred@example.com</span><br><span class="line">something@somewhere.com</span><br></pre></td></tr></table></figure><p>(2) 找出登录了，但未购买的用户（非）</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">comm</span> -23 &lt;(<span class="built_in">sort</span> signups.txt) &lt;(<span class="built_in">sort</span> purchases.txt)</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">68_so_late@hotmail.com</span><br><span class="line">info@info.info</span><br><span class="line">ted@example.net</span><br></pre></td></tr></table></figure><p>(3) 找出购买了，但未登录的用户（非）</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">comm</span> -13 &lt;(<span class="built_in">sort</span> signups.txt) &lt;(<span class="built_in">sort</span> purchases.txt)</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">example@gmail.com</span><br><span class="line">mark@facebook.com</span><br></pre></td></tr></table></figure><h3 id="五、检测数据唯一性，统计重复数"><a href="#五、检测数据唯一性，统计重复数" class="headerlink" title="五、检测数据唯一性，统计重复数"></a>五、检测数据唯一性，统计重复数</h3><p>1、数据</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Shoes,19.00</span><br><span class="line">Shoes,28.00</span><br><span class="line">Pants,77.00</span><br><span class="line">Socks,12.00</span><br><span class="line">Shirt,22.00</span><br><span class="line">Socks,12.00</span><br><span class="line">Socks,12.00</span><br><span class="line">Boots,82.00</span><br></pre></td></tr></table></figure><p>2、操作</p><p>(1) 获取所有键值</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> sales1.csv | awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span></span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">Boots</span><br><span class="line">Pants</span><br><span class="line">Shirt</span><br><span class="line">Shoes</span><br><span class="line">Socks</span><br></pre></td></tr></table></figure><p>(2) 统计重复键值</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> sales1.csv | awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">1 Boots</span><br><span class="line">1 Pants</span><br><span class="line">1 Shirt</span><br><span class="line">2 Shoes</span><br><span class="line">3 Socks</span><br></pre></td></tr></table></figure><h3 id="六、查看文件的一部分"><a href="#六、查看文件的一部分" class="headerlink" title="六、查看文件的一部分"></a>六、查看文件的一部分</h3><p>(1) 查看文件前面一小部分</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> sales.csv | <span class="built_in">head</span> -n 3</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">item, modelnumber, price, tax</span><br><span class="line">Sneakers, MN009, 49.99, 1.11</span><br><span class="line">Sneakers, MTG09, 139.99, 4.11</span><br></pre></td></tr></table></figure><p>(2) 查看文件后面一小部分</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> sales.csv | <span class="built_in">tail</span> -n 3</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">Shoes, BN009, 449.22, 4.31</span><br><span class="line">Sneakers, dN099, 9.99, 1.22</span><br><span class="line">Bananas, GG009, 4.99, 1.11</span><br></pre></td></tr></table></figure><h3 id="七、文件行数、字数统计"><a href="#七、文件行数、字数统计" class="headerlink" title="七、文件行数、字数统计"></a>七、文件行数、字数统计</h3><p>(1) 文件行数统计</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">wc</span> -l temps.txt</span><br></pre></td></tr></table></figure><p>(2) 字数统计</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;Here is some text that you&#x27;ll get a character count for&quot;</span> | <span class="built_in">wc</span> -c</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">55</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Homebrew 常用命令</title>
      <link href="/homebrew-common-commands/"/>
      <url>/homebrew-common-commands/</url>
      
        <content type="html"><![CDATA[<h3 id="一、是什么"><a href="#一、是什么" class="headerlink" title="一、是什么"></a>一、是什么</h3><p>Homebrew 是一个包管理器，用于安装 Apple 没有预装但我们需要的 UNIX 工具。</p><p>Homebrew 会将软件包安装到独立目录(&#x2F;usr&#x2F;local&#x2F;Cellar)，并将其文件软链接至&#x2F;usr&#x2F;local。</p><p>Homebrew 不会将文件安装到它本身目录之外，所以可将 Homebrew 安装到任意位置。</p><h3 id="二、常用命令"><a href="#二、常用命令" class="headerlink" title="二、常用命令"></a>二、常用命令</h3><p>安装 Homebrew</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">/bin/bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>卸载</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">/bin/bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/uninstall.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 搜索包</span><br><span class="line">brew search mysql</span><br><span class="line"></span><br><span class="line">// 安装包</span><br><span class="line">brew install mysql</span><br><span class="line"></span><br><span class="line">// 查看包信息，比如目前的版本，依赖，安装后注意事项等</span><br><span class="line">brew info mysql</span><br><span class="line"></span><br><span class="line">// 卸载包</span><br><span class="line">brew uninstall wget</span><br><span class="line"></span><br><span class="line">// 显示已安装的包</span><br><span class="line">brew list</span><br><span class="line"></span><br><span class="line">// 查看brew的帮助</span><br><span class="line">brew –help</span><br><span class="line"></span><br><span class="line">// 更新， 这会更新 Homebrew 自己</span><br><span class="line">brew update</span><br><span class="line"></span><br><span class="line">// 检查是否有新版本，这会列出所有安装的包里，可以升级的项目</span><br><span class="line">brew outdated</span><br><span class="line">brew outdated mysql</span><br><span class="line"></span><br><span class="line">// 升级所有可以升级的软件</span><br><span class="line">brew upgrade</span><br><span class="line">brew upgrade mysql</span><br><span class="line"></span><br><span class="line">// 清理不需要的版本极其安装包缓存</span><br><span class="line">brew cleanup</span><br><span class="line">brew cleanup mysql</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeJS基础</title>
      <link href="/nodejs-notes/"/>
      <url>/nodejs-notes/</url>
      
        <content type="html"><![CDATA[<h3 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h3><p>1、环境变量：<code>__filename</code>、<code>__dirname</code>；</p><p>2、进程对象：process</p><p>3、日期对象：Date</p><p>4、数学对象：Math</p><p>5、时间函数：setTimeout、setInterval、setImmediate（相当于 requestAnimation)</p><h3 id="模块规范：commonJS"><a href="#模块规范：commonJS" class="headerlink" title="模块规范：commonJS"></a>模块规范：commonJS</h3><p>1、exports:{} ———————— require</p><p>2、module.exports —————————— require（会覆盖掉上面的 exports）</p><p>PS: 客户端以前经常用的是 AMD 规范，现在更多的是用 es6 规范</p><h3 id="非阻塞-I-O"><a href="#非阻塞-I-O" class="headerlink" title="非阻塞 I&#x2F;O"></a>非阻塞 I&#x2F;O</h3><p>1、I&#x2F;O(Input&#x2F;Output)，即系统的输入输出；</p><p>2、阻塞 I&#x2F;O 和非阻塞 I&#x2F;O 的区别在于系统接收输入再到输出期间，能不能接收其他输入。</p><h3 id="异步编程"><a href="#异步编程" class="headerlink" title="异步编程"></a>异步编程</h3><p>1、callback，比较原始的处理回调的方式，用法如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">callback</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>这种处理异步的方法有个问题，当有多个回调依次执行的时候，就会产生回调地狱，比如这样：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">  <span class="title function_">callback</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  <span class="title function_">test</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;next&quot;</span>);</span><br><span class="line">    <span class="title function_">test</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;next&quot;</span>);</span><br><span class="line">      ……</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>2、Promise, 原本是 commonJS 的一个规范，被扶正了，这种处理异步的方法很好的解决了上面的回调地狱问题，比如这么写：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> pro = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="title function_">resolve</span>(<span class="string">&quot;hi&quot;</span>));</span><br><span class="line">  <span class="keyword">return</span> pro;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hi&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  ……</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>从例子中可以看出，代码就像串行一样，非常清晰明了，promise 会默认先调用第一个 then 或者第一个 catch，然后依次往下调用。</p><p>3、async&#x2F;await</p><p>(1) async function 返回 promise</p><p>(2) 当使用了 await 时，只有当 await 拿到了结果才会继续往下执行</p><p>(3) await 可以用同步的写法写 Promise，因此，try catch 可以捕捉到 await 错误</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Js链表实现</title>
      <link href="/js-linked-list-implementation/"/>
      <url>/js-linked-list-implementation/</url>
      
        <content type="html"><![CDATA[<h3 id="一、节点的实现"><a href="#一、节点的实现" class="headerlink" title="一、节点的实现"></a>一、节点的实现</h3><p>我都知道链表就是用有向线段把多个节点按顺序串起来，要实现链表首先要实现节点，而每一个节点，有一个自己的 value 值，还有一个 next 值用于指向下一个节点。比如可以这么实现一个节点：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Node</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">value</span> = value; <span class="comment">//当前节点的值</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">next</span> = <span class="literal">null</span>; <span class="comment">//下一个节点链接</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上代码用构造函数的方式声明一个 Node 类，Node 类有两个属性 value 和 next，value 指向自身的值，next 声明为 null。</p><h3 id="二、链表操作"><a href="#二、链表操作" class="headerlink" title="二、链表操作"></a>二、链表操作</h3><p>链表的基本操作包括：增、删、改、查，因此一个列表对象应该具备这些基本功能.</p><h4 id="1、元素查找"><a href="#1、元素查找" class="headerlink" title="1、元素查找"></a>1、元素查找</h4><p>需要插入一个新值到链表之前，我们需要找到这个值的位置，所以先来看看链表查找的 demo：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">head</span> = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;head&quot;</span>); <span class="comment">//头节点</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//查找给定节点</span></span><br><span class="line">  <span class="title function_">find</span>(<span class="params">item</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> currNode = <span class="variable language_">this</span>.<span class="property">head</span>;</span><br><span class="line">    <span class="keyword">while</span> (currNode.<span class="property">value</span> != item) &#123;</span><br><span class="line">      currNode = currNode.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> currNode;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该链表类有一个 head 属性，即，链表的头部，指向 node 对象，也就是 <code>this.head = &#123;value: &#39;head&#39;, next: null&#125;</code> ，在 find 函数中，声明 currNode 变量，指向头部，遍历链表，对比每个节点的值跟需要查找值，若相等，则找到了，返回当前节点。</p><h4 id="2、插入、替换元素"><a href="#2、插入、替换元素" class="headerlink" title="2、插入、替换元素"></a>2、插入、替换元素</h4><p>以上讲了插入元素之前，我们需要先查找元素，找到之后，把新的节点插入到找到的元素后面，也就是找到元素的 next 指向新的元素，再把新元素的 next 指向当前节点的 next</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">head</span> = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;head&quot;</span>); <span class="comment">//头节点</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//查找给定节点</span></span><br><span class="line">  <span class="title function_">find</span>(<span class="params">item</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> currNode = <span class="variable language_">this</span>.<span class="property">head</span>;</span><br><span class="line">    <span class="keyword">while</span> (currNode.<span class="property">element</span> != item) &#123;</span><br><span class="line">      currNode = currNode.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> currNode;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//插入节点</span></span><br><span class="line">  <span class="title function_">insert</span>(<span class="params">newElement, item</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> newNode = <span class="keyword">new</span> <span class="title class_">Node</span>(newElement);</span><br><span class="line">    <span class="keyword">let</span> currNode = <span class="variable language_">this</span>.<span class="title function_">find</span>(item);</span><br><span class="line">    newNode.<span class="property">next</span> = currNode.<span class="property">next</span>;</span><br><span class="line">    currNode.<span class="property">next</span> = newNode;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>替换元素值，比以上简单点，找到对应的元节点，把该节点的 value 赋予新值，就到达到了修改的目的。</p><h4 id="3、删除元素"><a href="#3、删除元素" class="headerlink" title="3、删除元素"></a>3、删除元素</h4><p>要删除一个元素，需要查找被删除元素的前一个节点，然后把前一个元素的 next 指向被删除元素的下一个节点，实现如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">head</span> = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;head&quot;</span>); <span class="comment">//头节点</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//查找带删除节点的前一个节点</span></span><br><span class="line">  <span class="title function_">findPrev</span>(<span class="params">item</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> currNode = <span class="variable language_">this</span>.<span class="property">head</span>;</span><br><span class="line">    <span class="keyword">while</span> (!(currNode.<span class="property">next</span> == <span class="literal">null</span>) &amp;&amp; currNode.<span class="property">next</span>.<span class="property">element</span> != item) &#123;</span><br><span class="line">      currNode = currNode.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> currNode;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 删除节点</span></span><br><span class="line">  <span class="title function_">remove</span>(<span class="params">item</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> prevNode = <span class="variable language_">this</span>.<span class="title function_">findPrev</span>(item);</span><br><span class="line">    <span class="keyword">if</span> (!(prevNode.<span class="property">next</span> == <span class="literal">null</span>)) &#123;</span><br><span class="line">      prevNode.<span class="property">next</span> = prevNode.<span class="property">next</span>.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、显示元素"><a href="#4、显示元素" class="headerlink" title="4、显示元素"></a>4、显示元素</h3><p>操作完元素，我们想看看效果，这个时候需要显示链表，通过打印每一个元素我们可以看到链表的完整结构</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">head</span> = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="string">&quot;head&quot;</span>); <span class="comment">//头节点</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//显示链表元素</span></span><br><span class="line">  <span class="title function_">display</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> currNode = <span class="variable language_">this</span>.<span class="property">head</span>;</span><br><span class="line">    <span class="keyword">while</span> (!(currNode.<span class="property">next</span> == <span class="literal">null</span>)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(currNode.<span class="property">next</span>);</span><br><span class="line">      currNode = currNode.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上就是我对 js 链表的完整实现，写这篇文章是因为今天跟同事聊天意识到自己对链表不是很熟，查阅资料，自己实现了一下，加深理解，再写篇文章以备以后忘了可以查阅。</p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 定位详解</title>
      <link href="/css-positioning-detailed/"/>
      <url>/css-positioning-detailed/</url>
      
        <content type="html"><![CDATA[<p>css 定位主要用 position 属性，position 的默认值是 static，此时文档是按照正常的文档流去放置的，不会产生重叠等问题，同时该属性值也不具备方向偏移值。</p><p>而我们常用的：relative、absolute、fixed 等属性的不同之处在于基准点的不同。</p><p>relative 属性的基准点是自身位置，所产生的偏移值也是相对于自身的。</p><p>absolute 属性的基准点是父元素，即，是相对于父元素进行偏移的，但是前提是父元素是 relative 是定位的，如果父元素不是 relative 定位，就会向上搜，直到找到第一个 relative 定位的元素，并相对于该元素进行偏移。</p><p>fixed 属性的基准点是视口，即，相对于视口偏移。</p><p>还有一个新的属性值 sticky，可以说是 fixed 属性和 relative 属性的结合体，当页面没有滚动时，元素是按照 relative 进行位置确定的，当页面向下滚动时，元素则是按照 sticky 进行偏移的，这个元素一般用于需要固定导航栏或者是表头等场景。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue动态引入组件,注意不是异步!</title>
      <link href="/vue-dynamic-component-import-note-not-async/"/>
      <url>/vue-dynamic-component-import-note-not-async/</url>
      
        <content type="html"><![CDATA[<p>对于页面组件我们一般并不想去异步加载，但是如果一个 vue 项目用到了多个页面，我们需要在 app.vue 进行组件切换的时候一下全部引入也不好。所以就有了一个问题如何可以同步引入组件，又可以按需的加载呢？</p><p>我们知道 vue 的局部组件最终会被合并到 option 上，所以，利用这个关系可以按不同的条件去 require 不同的页面，把加进 vue 的 option 中就达到了我的目的了，这里需要一点底层操作，因为按照平常的话，我们把需要用到的组件写进 components 就好了，合并到 option 是 vue 解析的事情。讲了这么多，看看以下 demo 吧。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> comp = <span class="built_in">require</span>(<span class="string">`pages/<span class="subst">$&#123;<span class="variable language_">this</span>.currentPage&#125;</span>`</span>);</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">components</span>[<span class="variable language_">this</span>.<span class="property">currentPage</span>] = comp.<span class="property">default</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SS 安装</title>
      <link href="/ss-installation/"/>
      <url>/ss-installation/</url>
      
        <content type="html"><![CDATA[<p>1、登录<a href="https://bwh88.net/">搬瓦工</a></p><p>2、打开我的服务器，打开 root shell interactive</p><p>3、 <code>wget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh</code></p><p>4、 <code>chmod +x shadowsocks-all.sh</code></p><p>5、<code>./shadowsocks-all.sh 2&gt;&amp;1 | tee shadowsocks-all.log</code></p><p>6、一路 next</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSH 端口号修改</title>
      <link href="/port-number-modification/"/>
      <url>/port-number-modification/</url>
      
        <content type="html"><![CDATA[<p>1、登录<a href="https://bwh88.net/">搬瓦工</a></p><p>2、打开我的服务器，打开 root shell interactive</p><p>3、输入 <code>vim /etc/ssh/sshd_config</code></p><p>4、点击 i 键，i 修改 Port 值</p><p>5、esc &#x3D;&gt; :wq 保存</p><p>6、 reboot 重启服务器</p><p>至此，ssh 端口恢复</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何创建一个健壮的系统</title>
      <link href="/how-to-create-a-robust-system/"/>
      <url>/how-to-create-a-robust-system/</url>
      
        <content type="html"><![CDATA[<p>要创建一个健壮的系统，可以从以下几个方面考虑：容错、高可用、灾备</p><p>容错是指当系发生故障时，还可以继续的运行，比如我们网页在断网的时候，还可以正常显示静态页面，而不是给到白屏。</p><p>高可用，是指当系统发生故障时，有一个 planB 可以尽快恢复系统，让故障的中断只是短暂的中断。</p><p>灾备，指的是当系统遇到毁灭性问题时，有一个备用方案可以挽救数据。</p><p>通过以上概念的解析，总结出，要创建一个健壮的系统，需要做到以下三点：</p><p>容错：发生故障时，可以让系统继续运行。</p><p>高可用：系统中断时，尽快恢复。</p><p>灾备：系统毁灭时，能够抢救数据。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 职业发展 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac 安装 Mysql</title>
      <link href="/mac-install-mysql/"/>
      <url>/mac-install-mysql/</url>
      
        <content type="html"><![CDATA[<p>mac mysql 安装和使用的基本步骤</p><span id="more"></span><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>1、<a href="https://dev.mysql.com/downloads/mysql/">下载</a></p><p>2、一路 next 之后，安装完成，会看到系统偏好栏多了一个 mysql 图标，点击可以进行一些基本的设置，也可以控制数据库的开关</p><h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><p>1、执行命令：<code>PATH=&quot;$PATH&quot;:/usr/local/mysql/bin</code>，配置环境变量</p><p>2、登录 mysql：<code>mysql -u root -p</code></p><p>3、查看数据库：<code>show databases;</code></p><h3 id="安装数据库图形化工具-Navicat"><a href="#安装数据库图形化工具-Navicat" class="headerlink" title="安装数据库图形化工具 Navicat"></a>安装数据库图形化工具 Navicat</h3><p>这里有可能会连接失败，使用 mysql 支持的加密方式改一下密码就好，比如：<code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;&lt;psd&gt;&#39;;</code></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> API&amp;服务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PixiJs 极简教程</title>
      <link href="/pixi-basics/"/>
      <url>/pixi-basics/</url>
      
        <content type="html"><![CDATA[<p>PixiJs 是比较常用的 canvas 库，用来展示 2d 的平面图，相比 canvas，封装了更多的功能，也更简单容易上手，但是其官网的文档写得极其的简陋，可阅读性很差，综合了一些其他的文档，写出了这份极简教程，让小白也可以拿来即用。</p><h3 id="一、创建画布"><a href="#一、创建画布" class="headerlink" title="一、创建画布"></a>一、创建画布</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建别名</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Application</span> = <span class="variable constant_">PIXI</span>.<span class="property">Application</span>,</span><br><span class="line">  loader = <span class="variable constant_">PIXI</span>.<span class="property">Loader</span>.<span class="property">shared</span>,</span><br><span class="line">  resources = <span class="variable constant_">PIXI</span>.<span class="property">Loader</span>.<span class="property">shared</span>.<span class="property">resources</span>,</span><br><span class="line">  <span class="title class_">Texture</span> = <span class="variable constant_">PIXI</span>.<span class="property">Texture</span>,</span><br><span class="line">  <span class="title class_">TextureCache</span> = <span class="variable constant_">PIXI</span>.<span class="property">utils</span>.<span class="property">TextureCache</span>,</span><br><span class="line">  <span class="title class_">Rectangle</span> = <span class="variable constant_">PIXI</span>.<span class="property">Rectangle</span>,</span><br><span class="line">  <span class="title class_">Sprite</span> = <span class="variable constant_">PIXI</span>.<span class="property">Sprite</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一张 canvas 画布</span></span><br><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> <span class="title class_">Application</span>(&#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="number">256</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="number">256</span>,</span><br><span class="line">  <span class="attr">antialiasing</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">transparent</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">resolution</span>: <span class="number">1</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 把新创建的 canvas 画布挂载到对应的节点上</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">container</span>.<span class="title function_">appendChild</span>(app.<span class="property">view</span>);</span><br></pre></td></tr></table></figure><h3 id="二、画布设置"><a href="#二、画布设置" class="headerlink" title="二、画布设置"></a>二、画布设置</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//canvas 全屏样式</span></span><br><span class="line">app.<span class="property">renderer</span>.<span class="property">view</span>.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;absolute&#x27;</span>;</span><br><span class="line">app.<span class="property">renderer</span>.<span class="property">view</span>.<span class="property">style</span>.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">app.<span class="property">renderer</span>.<span class="property">view</span>.<span class="property">style</span>.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">app.<span class="property">renderer</span>.<span class="property">view</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//`renderer.view` 代表原始的 `&lt;canvas&gt;`标签.</span></span><br><span class="line"><span class="comment">//给 canvas 加条虚线，就像平常操作 canvas 一样</span></span><br><span class="line">app.<span class="property">renderer</span>.<span class="property">view</span>.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;1px dashed black&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//重置画布大小</span></span><br><span class="line">app.<span class="property">renderer</span>.<span class="title function_">resize</span>(<span class="number">512</span>, <span class="number">512</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//改变画布背颜色，颜色使用的是十六进制色</span></span><br><span class="line">app.<span class="property">renderer</span>.<span class="property">backgroundColor</span> = <span class="number">0x000000</span>;</span><br></pre></td></tr></table></figure><h3 id="三、显示图片"><a href="#三、显示图片" class="headerlink" title="三、显示图片"></a>三、显示图片</h3><p>1、texture 方法创建精灵</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建一个 cat 精灵</span></span><br><span class="line"><span class="keyword">const</span> texture = <span class="title class_">Texture</span>.<span class="title function_">from</span>(<span class="string">&#x27;./img/pixi/cat.png&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> cat = <span class="keyword">new</span> <span class="title class_">Sprite</span>(texture);</span><br><span class="line"><span class="comment">// 把新创建的精灵加到舞台上</span></span><br><span class="line">app.<span class="property">stage</span>.<span class="title function_">addChild</span>(cat);</span><br></pre></td></tr></table></figure><p>2、loder 方法创建精灵</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">loader</span><br><span class="line">  .<span class="title function_">add</span>([<span class="string">&#x27;./img/pixi/cat.png&#x27;</span>, <span class="string">&#x27;./img/pixi/blob.png&#x27;</span>, <span class="string">&#x27;./img/pixi/explorer.png&#x27;</span>])</span><br><span class="line">  .<span class="title function_">load</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//创建精灵</span></span><br><span class="line">    <span class="keyword">let</span> cat = <span class="keyword">new</span> <span class="title class_">Sprite</span>(resources[<span class="string">&#x27;./img/pixi/cat.png&#x27;</span>].<span class="property">texture</span>),</span><br><span class="line">      blob = <span class="keyword">new</span> <span class="title class_">Sprite</span>(resources[<span class="string">&#x27;./img/pixi/blob.png&#x27;</span>].<span class="property">texture</span>),</span><br><span class="line">      explorer = <span class="keyword">new</span> <span class="title class_">Sprite</span>(resources[<span class="string">&#x27;./img/pixi/explorer.png&#x27;</span>].<span class="property">texture</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//把新创建的精灵加到舞台上</span></span><br><span class="line">    app.<span class="property">stage</span>.<span class="title function_">addChild</span>(cat);</span><br><span class="line">    app.<span class="property">stage</span>.<span class="title function_">addChild</span>(blob);</span><br><span class="line">    app.<span class="property">stage</span>.<span class="title function_">addChild</span>(explorer);</span><br><span class="line">    loader.<span class="title function_">reset</span>();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>3、改变精灵的属性</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//改变精灵位置</span></span><br><span class="line">blob.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">82</span>, <span class="number">82</span>);</span><br><span class="line">explorer.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">128</span>, <span class="number">128</span>);</span><br><span class="line"><span class="comment">// 改变精灵大小</span></span><br><span class="line">cat.<span class="property">scale</span>.<span class="title function_">set</span>(<span class="number">1.2</span>, <span class="number">1.2</span>);</span><br><span class="line"><span class="comment">//旋转精灵</span></span><br><span class="line">cat.<span class="property">rotation</span> = <span class="number">0.5</span>;</span><br><span class="line"><span class="comment">// 设置旋转的中心点</span></span><br><span class="line">cat.<span class="property">anchor</span>.<span class="title function_">set</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 精灵显示情况控制</span></span><br><span class="line">cat.<span class="property">visible</span> = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><p>4、加载雪碧图</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">loader.<span class="title function_">add</span>(<span class="string">&#x27;./img/pixi/tileset.png&#x27;</span>).<span class="title function_">load</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> texture = <span class="title class_">TextureCache</span>[<span class="string">&#x27;./img/pixi/tileset.png&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 图片在雪碧图上的位置截取 new Rectangle(x, y, w, h)</span></span><br><span class="line">  <span class="keyword">let</span> rectangle = <span class="keyword">new</span> <span class="title class_">Rectangle</span>(<span class="number">192</span>, <span class="number">128</span>, <span class="number">64</span>, <span class="number">64</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 告诉 texture 使用截取的区域</span></span><br><span class="line">  texture.<span class="property">frame</span> = rectangle;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> rocket = <span class="keyword">new</span> <span class="title class_">Sprite</span>(texture);</span><br><span class="line"></span><br><span class="line">  rocket.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">32</span>, <span class="number">32</span>);</span><br><span class="line">  app.<span class="property">stage</span>.<span class="title function_">addChild</span>(rocket);</span><br><span class="line">  loader.<span class="title function_">reset</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>5、加载 json 贴图数据集</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Loader</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;treasure&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;./img/pixi/treasureHunter.json&#x27;</span>,</span><br><span class="line">&#125;).<span class="title function_">load</span>(<span class="function">(<span class="params">loader, resources</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> dungeon, explorer, treasure, door;</span><br><span class="line">  <span class="keyword">const</span> things = resources[<span class="string">&#x27;treasure&#x27;</span>].<span class="property">textures</span>;</span><br><span class="line"></span><br><span class="line">  dungeon = <span class="keyword">new</span> <span class="title class_">Sprite</span>(things[<span class="string">&#x27;dungeon.png&#x27;</span>]);</span><br><span class="line">  app.<span class="property">stage</span>.<span class="title function_">addChild</span>(dungeon);</span><br><span class="line"></span><br><span class="line">  explorer = <span class="keyword">new</span> <span class="title class_">Sprite</span>(things[<span class="string">&#x27;explorer.png&#x27;</span>]);</span><br><span class="line">  app.<span class="property">stage</span>.<span class="title function_">addChild</span>(explorer);</span><br><span class="line"></span><br><span class="line">  treasure = <span class="keyword">new</span> <span class="title class_">Sprite</span>(things[<span class="string">&#x27;treasure.png&#x27;</span>]);</span><br><span class="line">  app.<span class="property">stage</span>.<span class="title function_">addChild</span>(treasure);</span><br><span class="line"></span><br><span class="line">  loader.<span class="title function_">reset</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>json 数据长这样：</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;frames&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;blob.png&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;frame&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">55</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">32</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">24</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;rotated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trimmed&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spriteSourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">32</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">24</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">32</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">24</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pivot&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;door.png&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;frame&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">89</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">32</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">32</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;rotated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trimmed&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spriteSourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">32</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">32</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">32</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">32</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pivot&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dungeon.png&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;frame&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">36</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">512</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">512</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;rotated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trimmed&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spriteSourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">512</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">512</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">512</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">512</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pivot&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;explorer.png&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;frame&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">21</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">32</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;rotated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trimmed&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spriteSourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">21</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">32</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">21</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">32</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pivot&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;treasure.png&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;frame&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">25</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">28</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">24</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;rotated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trimmed&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;spriteSourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">28</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">24</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sourceSize&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">28</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">24</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pivot&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;x&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span><span class="punctuation">,</span> <span class="attr">&quot;y&quot;</span><span class="punctuation">:</span> <span class="number">0.5</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;meta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;app&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://www.codeandweb.com/texturepacker&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;treasureHunter.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;RGBA8888&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;w&quot;</span><span class="punctuation">:</span> <span class="number">516</span><span class="punctuation">,</span> <span class="attr">&quot;h&quot;</span><span class="punctuation">:</span> <span class="number">550</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;scale&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;smartupdate&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$TexturePacker:SmartUpdate:51ede84c7a85e4d6aeb31a6020a20858:3923663e59fb40b578d66a492a2cda2d:9995f8b4db1ac3cb75651b1542df8ee2$&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>看着很复杂，不像人写的是吧？确实，可以自动生成的，你需要 TexturePacker 这个神奇，生成雪碧图的同时，可以到处 json 数据集，有专门针对 pixi 的拿来即用的版本。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机图形学 —————— 空间中的物体（2）</title>
      <link href="/computer-graphics-2/"/>
      <url>/computer-graphics-2/</url>
      
        <content type="html"><![CDATA[<p>在计算机图形学 —————— 空间中的物体（1）中，我讲到了网页中颜色的填充方法，这一篇，我来讲讲网页中的视点。有空间观念的话，应该知道我们的眼睛看物体总是越近的物体看得越清楚，越大，越远的物体显得越渺小，也就是近大远小的规律。</p><p>空间中的物体，从不同角度看，给我们的视觉效也是不一样的，而视点又有上下左右之分，每个方向的视点位置也同样会影响到物体的视觉效果。</p><p>综上，要展示一个空间中的物体，我们还需要三个值，即：视点，视角以及物体的远近值，可以这么表示：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PerspectiveCamera</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">eye, front, up, fov</span>) &#123;</span><br><span class="line">    <span class="comment">// @eye：视点, @front：视野前方坐标点, @up：视野后方坐标点, @fov：视野远近，近大远小;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eye</span> = eye;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">front</span> = front;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">refUp</span> = up;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fov</span> = fov;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">initialize</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">right</span> = <span class="variable language_">this</span>.<span class="property">front</span>.<span class="title function_">cross</span>(<span class="variable language_">this</span>.<span class="property">refUp</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">up</span> = <span class="variable language_">this</span>.<span class="property">right</span>.<span class="title function_">cross</span>(<span class="variable language_">this</span>.<span class="property">front</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fovScale</span> = <span class="title class_">Math</span>.<span class="title function_">tan</span>((<span class="variable language_">this</span>.<span class="property">fov</span> * <span class="number">0.5</span> * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>) * <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机图形学 ———— 空间中的物体（1）</title>
      <link href="/computer-graphics-1/"/>
      <url>/computer-graphics-1/</url>
      
        <content type="html"><![CDATA[<p>学过素描的应该都知道，物体的空间感&#x2F;立体感是通过阴影渲染出来的，要画出一个具有立体感的物体，要清楚的区分出黑白灰三面，还有五调子，其中的黑灰是根据光线的强弱来判别的，比如光线的聚点，可能就是高光的位置，比较亮，而背面则是阴影，是比较暗的，但是这并不是最暗的位置，最暗的的位置应该是明暗交界线。</p><p>想要在网页上展现一个有立体感的物体，也可以用类似的原理。等等，计算机怎么去渲染这么有层次的颜色呢？画素描的时候都是一条线一条线的去画，才能勉强画出这种层次感，计算机去画就更难了。别担心，计算机显示画面不是一个像素一个像素的显示嘛，那么我们就一个像素一个像素的填充颜色，只要算法写的好，还怕填充不出来吗？</p><p>说到网页画图，我们首先想到的应是 canvas 吧，所以我们可以先给出一张画布：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> w = canvas.<span class="property">attributes</span>.<span class="property">width</span>.<span class="property">value</span>;</span><br><span class="line"><span class="keyword">const</span> h = canvas.<span class="property">attributes</span>.<span class="property">height</span>.<span class="property">value</span>;</span><br><span class="line">ctx.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, w, h);</span><br></pre></td></tr></table></figure><p>有了画布之后，我们可以获取他里面所有的像素点集合 pixels：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> imgdata = ctx.<span class="title function_">getImageData</span>(<span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line"><span class="keyword">const</span> pixels = imgdata.<span class="property">data</span>;</span><br></pre></td></tr></table></figure><p>有了像素点集合之后，我们可以往里面填充颜色</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> y = <span class="number">0</span>; y &lt; h; y++)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> x = <span class="number">0</span>; x &lt; w; x++) &#123;</span><br><span class="line">    pixels[i++] = <span class="number">0</span>;</span><br><span class="line">    pixels[i++] = <span class="number">255</span>;</span><br><span class="line">  &#125;</span><br><span class="line">ctx.<span class="title function_">putImageData</span>(imgdata, <span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>因为像素点集合是二维的，所以，y 表示从上到下的像素点， x 表示从左往右的像素点，这样我们就格子里填充颜色了。做到了这一步，相当于你已经会画线条了，接下来应该要熟悉一下构图了。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目模块化原则</title>
      <link href="/project-modularization-principles/"/>
      <url>/project-modularization-principles/</url>
      
        <content type="html"><![CDATA[<p>1、组件划分为业务组件和 UI 组件</p><p>2、按照先业务后功能的方式去颗粒化组件</p><p>3、数据驱动，业务操作在业务组件里完成</p><p>4、ＵＩ组件不参与业务，不处理业务逻辑，只做展示之用</p><p>5、公共的组件、接口、css，抽离出来，不掺杂在业务逻辑里</p><p>6、组件的封装要做到高内聚，低耦合</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代码质量 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件命名为什么提倡用英文小写字母而不用大写字母</title>
      <link href="/file-naming-pitfalls-record/"/>
      <url>/file-naming-pitfalls-record/</url>
      
        <content type="html"><![CDATA[<p>开发遇到了个问题，项目在本地编译得好好的，在 ci 上编译一直报错，说是找不到路径，本地看了好多遍路径都是对的，感觉是玄学。</p><p>想了想没做什么操作，就是看不习惯之前的命名方式，好几个单词写在一起，想统一成驼峰命名法，于是把两个文件夹的两 a 个单词开头写成了大写字母~</p><p>后来发现就是这个在 win 系统下手动改文件名由大写改为小写的锅，因为在 win 系统中是大小写不区分的，导致在 git push 的时候，push 上去的文件还是那个全是小写字母的，所以会一直报找不到路径的错误。但是如果文件一开始就是驼峰命名法，就不存在这个问题了，因为提交上去的就是新的文件。</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>说说网页自适应和响应式布局</title>
      <link href="/talking-about-webpage-adaptive-and-responsive-layout/"/>
      <url>/talking-about-webpage-adaptive-and-responsive-layout/</url>
      
        <content type="html"><![CDATA[<p>忙完一段时间，发布了一版之后，习惯性的放下手头一些需求，去整理之前的项目，看看存在什么问题，是否有可优化的空间。发现我写的页面存在一个很大的问题，那就是多分辨率适配的问题。之前一直用着响应式的理念，根据页面调整布局，但是发现与产品的需求相悖，他们希望看到的是所有分辨率的显示屏显示的效果一致。</p><p>要做到我们产品的这种需求，那就只能用 web 2.0 时期的百分比 + float 布局了，也就是我们常说的网页自适应，这种页面布局方式在老版本的网页体现的比较明显，其应用场景一般比较局限于 pc 浏览区。</p><p>而响应式布局是互联网新时代的产物，是随着移动端的兴起而发展起来的，这种布局方式，根据屏幕的分辨率不同，给用户呈现不同的视觉效果，更进一步发展为现在常说的 pwa ，渐进式网页布局，多用于屏幕分辨率比较广泛的环境。</p><p>说说现在的自适应怎么做，我总结出以下原则：</p><p>1、 viewport: content&#x3D;”width&#x3D;device-width, initial-scale&#x3D;1”</p><p>2、使相对宽度(vw)或者百分比宽度</p><p>3、适当使用相对大小的字体（rem)</p><p>4、使用 float 布局</p><p>5、使用媒体查询，有选择的加载 CSS</p><p>6、图片自适应</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Hooks 创建电影 App</title>
      <link href="/react-hooks-create-movie-app/"/>
      <url>/react-hooks-create-movie-app/</url>
      
        <content type="html"><![CDATA[<p>使用 react hooks 搭建一个电影 App，该 demo 属于一个极简版，参考自一个外国哥们写的 《How to build a movie search app using React Hooks》，文章的核心围绕用 react hook 搭建一个电影 App 的关键步骤展开，没有多余的描述，代码可以开箱即用，欢迎食用。</p><span id="more"></span><h3 id="1、-项目创建"><a href="#1、-项目创建" class="headerlink" title="1、 项目创建"></a>1、 项目创建</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install -g create-react-app</span><br><span class="line"></span><br><span class="line">create-react-app &lt;item-name&gt;</span><br><span class="line"></span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure><h3 id="2、创建-components-目录"><a href="#2、创建-components-目录" class="headerlink" title="2、创建 components 目录"></a>2、创建 components 目录</h3><p>(1) 把 App.js 拉到该目录下，同时更新 index.js 下 App.js 的路径</p><p>(2) 创建 Header.js，header 组件，接收父组件传过来的标题，App-header 是 App.css 中的一个 class</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Header</span> = props =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">header</span> <span class="attr">className</span>=<span class="string">&quot;App-header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;props.text&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Header</span>;</span><br></pre></td></tr></table></figure><p>(3) 创建 Movie.js，该组件用于展示父组件传过来的电影相关数据</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">DEFAULT_PLACEHOLDER_IMAGE</span> =</span><br><span class="line">  <span class="string">&quot;https://m.media-amazon.com/images/M/MV5BMTczNTI2ODUwOF5BMl5BanBnXkFtZTcwMTU0NTIzMw@@._V1_SX300.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Movie</span> = (<span class="params">&#123; movie &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> poster =</span><br><span class="line">    movie.<span class="property">Poster</span> === <span class="string">&quot;N/A&quot;</span> ? <span class="variable constant_">DEFAULT_PLACEHOLDER_IMAGE</span> : movie.<span class="property">Poster</span>;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;movie&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;movie.Title&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">width</span>=<span class="string">&quot;200&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">alt</span>=<span class="string">&#123;</span>`<span class="attr">The</span> <span class="attr">movie</span> <span class="attr">titled:</span> $&#123;<span class="attr">movie.Title</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">src</span>=<span class="string">&#123;poster&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>(&#123;movie.Year&#125;)<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Movie</span>;</span><br></pre></td></tr></table></figure><p>(4) 创建 Search.js，该组件实现搜索功能，其中用到了 react 的 useState 钩子</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Search</span> = props =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [searchValue, setSearchValue] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleSearchInputChanges</span> = e =&gt; &#123;</span><br><span class="line">    <span class="title function_">setSearchValue</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">resetInputField</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setSearchValue</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">callSearchFunction</span> = e =&gt; &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    props.<span class="title function_">search</span>(searchValue);</span><br><span class="line">    <span class="title function_">resetInputField</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">className</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;searchValue&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;handleSearchInputChanges&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">onClick</span>=<span class="string">&#123;callSearchFunction&#125;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SEARCH&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Search</span>;</span><br></pre></td></tr></table></figure><h3 id="3、更新-App-js-文件，引用上述新组件"><a href="#3、更新-App-js-文件，引用上述新组件" class="headerlink" title="3、更新 App.js 文件，引用上述新组件"></a>3、更新 App.js 文件，引用上述新组件</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useReducer, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;../App.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&quot;./Header&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Movie</span> <span class="keyword">from</span> <span class="string">&quot;./Movie&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Search</span> <span class="keyword">from</span> <span class="string">&quot;./Search&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">MOVIE_API_URL</span> = <span class="string">&quot;https://www.omdbapi.com/?s=man&amp;apikey=4a3b711b&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  <span class="attr">loading</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">movies</span>: [],</span><br><span class="line">  <span class="attr">errorMessage</span>: <span class="literal">null</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">reducer</span> = (<span class="params">state, action</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;SEARCH_MOVIES_REQUEST&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">loading</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">errorMessage</span>: <span class="literal">null</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;SEARCH_MOVIES_SUCCESS&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">movies</span>: action.<span class="property">payload</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;SEARCH_MOVIES_FAILURE&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">errorMessage</span>: action.<span class="property">error</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialState);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="variable constant_">MOVIE_API_URL</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">jsonResponse</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&quot;SEARCH_MOVIES_SUCCESS&quot;</span>,</span><br><span class="line">          <span class="attr">payload</span>: jsonResponse.<span class="property">Search</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">search</span> = searchValue =&gt; &#123;</span><br><span class="line">    <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;SEARCH_MOVIES_REQUEST&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">`https://www.omdbapi.com/?s=<span class="subst">$&#123;searchValue&#125;</span>&amp;apikey=4a3b711b`</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">jsonResponse</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (jsonResponse.<span class="property">Response</span> === <span class="string">&quot;True&quot;</span>) &#123;</span><br><span class="line">          <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;SEARCH_MOVIES_SUCCESS&quot;</span>,</span><br><span class="line">            <span class="attr">payload</span>: jsonResponse.<span class="property">Search</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;SEARCH_MOVIES_FAILURE&quot;</span>,</span><br><span class="line">            <span class="attr">error</span>: jsonResponse.<span class="property">Error</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; movies, errorMessage, loading &#125; = state;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Header</span> <span class="attr">text</span>=<span class="string">&quot;REACT MOVIE APP&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Search</span> <span class="attr">search</span>=<span class="string">&#123;search&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;App-intro&quot;</span>&gt;</span>Sharing a few of our favourite movies<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;movies&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;loading &amp;&amp; !errorMessage ? (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>loading... <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ) : errorMessage ? (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;errorMessage&quot;</span>&gt;</span>&#123;errorMessage&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ) : (</span></span><br><span class="line"><span class="language-xml">          movies.map((movie, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Movie</span> <span class="attr">key</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">index</span>&#125;<span class="attr">-</span>$&#123;<span class="attr">movie.Title</span>&#125;`&#125; <span class="attr">movie</span>=<span class="string">&#123;movie&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))</span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h3 id="4、完结撒花"><a href="#4、完结撒花" class="headerlink" title="4、完结撒花"></a>4、完结撒花</h3>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvas 绘制雪碧图导出</title>
      <link href="/canvas-draw-sprite-export/"/>
      <url>/canvas-draw-sprite-export/</url>
      
        <content type="html"><![CDATA[<p>在开发中，我们经常会用到雪碧图，有时候 UI 可能给了很多小图，没有给到雪碧图，为了减少请求，我们会选择自己去在线生成或 ps，但是这样太繁琐了，能不能我们用一个函数实现呢？网上很多方案是借助 webpack 实现这个功能的，但是我想能不能简单点，于是就有了这个 demo，目前该 demo 可以合成雪碧图导出，但是没有导出对应的坐标 json 文件，后期再完善，先这样。</p><p>一、主要思路</p><p>1、要合成雪碧图的前提是拿到对应图片的路径，网页要拿图片的路径无非就是通过 input file 上传的时候拿本地路径或者更加简单粗暴地自己写；</p><p>2、要合成雪碧图，需要有个工具去把他们拼凑在一起，网页怎么把图片拼在一起呢？当然是用 canvas 画啦；</p><p>3、已经可以组合图片了，怎么导出呢？客户端的 js 没有操作文件系统的高端属性啊，我选择的是用一个保存文件的第三方库 file-saver，这是一个客户端 js 保存文件的神器。</p><p>二、实现</p><p>demo:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; saveAs &#125; <span class="keyword">from</span> <span class="string">&quot;file-saver&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">newSprite</span>(<span class="params">&#123; canvasId, images, width, height &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(canvasId);</span><br><span class="line">  canvas.<span class="title function_">setAttribute</span>(<span class="string">&quot;width&quot;</span>, width);</span><br><span class="line">  canvas.<span class="title function_">setAttribute</span>(<span class="string">&quot;height&quot;</span>, height);</span><br><span class="line">  <span class="keyword">const</span> initX = <span class="number">0</span>;</span><br><span class="line">  images.<span class="title function_">forEach</span>(<span class="function">(<span class="params">ele, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">    ctx.<span class="title function_">drawImage</span>(ele, initX + <span class="number">50</span> * index, <span class="number">0</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  canvas.<span class="title function_">toBlob</span>(<span class="function"><span class="params">blob</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">saveAs</span>(blob, <span class="string">&quot;sprite.png&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>预览：</p><p><a href="https://canace22.github.io/Demos/#/">Demos</a> &#x3D;&gt; canvas 绘图 &#x3D;&gt; 合成雪碧图</p><p>三、扩展</p><p>如果觉得这样还不够好用的话，可以学习 smithSprite，把对应图片的 css 坐标样式也导出来</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web 优化 ——— 添加骨架屏</title>
      <link href="/add-skeleton-screen/"/>
      <url>/add-skeleton-screen/</url>
      
        <content type="html"><![CDATA[<p>摘要：<br>最近做网页优化，发现页面会有一段白屏时间，给人的体验就是网页会有一闪而出的感觉，也就是我们常说的闪屏，查了一些资料，发现实现思路都是异曲同工的，就是在页面节点还没加载之前，先插一段静态网页，节点加载了再去掉这段静态代码，显示数据渲染出来界面。一般需要加骨架屏的界面，是一些动态加载数据的界面，因为数据没出来，会有一段比较长的白屏时间会给用户网加载慢的感觉。加了骨架屏，用会觉得网页加载比较快，属于一种视觉欺骗的手段吧。</p><p>下面来讲讲 vue-cli3 添骨架屏方法。</p><p>为节省时间成本，我没有自己去造轮子，而是选择了一个现成的轮子 vue-skeleton-webpack-plugin，骨架屏的实现步骤如下：</p><p>1、安装轮子的包：<code>yarn add vue-skeleton-webpack-plugin</code></p><p>2、webpack 中引入该插件(vue.config.js)，具体的配置项可以去看看该插件的<a href="https://github.com/lavas-project/vue-skeleton-webpack-plugin">说明</a>：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">SkeletonWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;vue-skeleton-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">SkeletonWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">webpackConfig</span>: &#123;</span><br><span class="line">        <span class="attr">entry</span>: &#123;</span><br><span class="line">          <span class="attr">app</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./src/common/skeleton.js&#x27;</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">quiet</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">router</span>: &#123;</span><br><span class="line">        <span class="attr">mode</span>: <span class="string">&#x27;hash&#x27;</span>,</span><br><span class="line">        <span class="attr">routes</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">            <span class="attr">skeletonId</span>: <span class="string">&#x27;skeleton-home&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">skeletonId</span>: <span class="string">&#x27;skeleton-home&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>3、添加一个骨架组件，skeleton.js 中引入</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Skeleton</span> <span class="keyword">from</span> <span class="string">&quot;../components/skeletonPage.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">Skeleton</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">Skeleton</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>4、因为在 vue-cli 里默认样式是不分离的，打包出来的骨架屏会没有样式，所以需要设置一下样式分离：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">css</span>: &#123;</span><br><span class="line">  <span class="attr">extract</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>5、因为 vue-cli 脚手架打包出来的样式是带 tag 的，骨架的样式依然不可用，这里我是先启用样式分离，编译出 css ，然后手动去掉 tag，放到 public&#x2F;index 里，再关闭样式分离，这样骨架屏就正常了。</p><p>6、按照文档做了上面这些，会发现骨架屏还是无效的，还需要修改一下 main.js 的组件挂载方式</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">App</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">mountApp</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  app.$mount(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">mountApp</span>();</span><br></pre></td></tr></table></figure><p>7、此外需要注意：</p><ul><li><p>App.vue 文件引用组件的方式不要用 router-view，改用直接引入组件</p></li><li><p>首屏的组件不要懒加载，不然会有闪屏的问题</p></li><li><p>目前只测试了单页应用，多页面的应用还未尝试，有待探索</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>单向列表拼接</title>
      <link href="/singly-linked-list-concatenation/"/>
      <url>/singly-linked-list-concatenation/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Merge two sorted linked lists and return it as a new list. The new list should be made by splicing together the nodes of the first two lists.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example:</span></span><br><span class="line"><span class="comment"># Input: 1 -&gt; 2 -&gt; 4, 1 -&gt; 3 -&gt; 4</span></span><br><span class="line"><span class="comment"># Output: 1 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 来源：力扣（LeetCode）</span></span><br><span class="line"><span class="comment"># 链接：https: // leetcode-cn.com/problems/merge-two-sorted-lists</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="variable language_">self</span>.val = x</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">next</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mergeTwoLists</span>(<span class="params">self, l1, l2</span>):</span><br><span class="line">        prehead = ListNode(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        prev = prehead</span><br><span class="line">        <span class="keyword">while</span> l1 <span class="keyword">and</span> l2:</span><br><span class="line">            <span class="keyword">if</span> l1.val &lt;= l2.val:</span><br><span class="line">                prev.<span class="built_in">next</span> = l1</span><br><span class="line">                l1 = l1.<span class="built_in">next</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                prev.<span class="built_in">next</span> = l2</span><br><span class="line">                l2 = l2.<span class="built_in">next</span></span><br><span class="line">            prev = prev.<span class="built_in">next</span></span><br><span class="line">        prev.<span class="built_in">next</span> = l1 <span class="keyword">if</span> l1 <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> l2</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> prehead.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, arr1, arr2</span>):</span><br><span class="line">        n1 = ListNode(arr1[<span class="number">0</span>])</span><br><span class="line">        x1 = ListNode(arr2[<span class="number">0</span>])</span><br><span class="line">        <span class="variable language_">self</span>.mergeTwoLists(n1, x1)</span><br><span class="line">        <span class="built_in">print</span>(<span class="variable language_">self</span>.mergeTwoLists(n1, x1).val)</span><br><span class="line"></span><br><span class="line">Solution([<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure><p>通过比较两个列表节点的大小，替换节点的方式，拼接出一个由小到大排序的有序单向列表，这题对于我来说，难点在于列表的实现，由于之前没怎么接触过链表，还得慢慢去理解。</p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>括号匹配</title>
      <link href="/bracket-matching/"/>
      <url>/bracket-matching/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 给定一个只包括 &#x27;(&#x27;，&#x27;)&#x27;，&#x27;&#123;&#x27;，&#x27;&#125;&#x27;，&#x27;[&#x27;，&#x27;]&#x27; 的字符串，判断字符串是否有效。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 有效字符串需满足：</span></span><br><span class="line"><span class="comment"># 左括号必须用相同类型的右括号闭合。</span></span><br><span class="line"><span class="comment"># 左括号必须以正确的顺序闭合。</span></span><br><span class="line"><span class="comment"># 注意空字符串可被认为是有效字符串。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例 1:</span></span><br><span class="line"><span class="comment"># 输入: &quot;()&quot;</span></span><br><span class="line"><span class="comment"># 输出: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例 2:</span></span><br><span class="line"><span class="comment"># 输入: &quot;()[]&#123;&#125;&quot;</span></span><br><span class="line"><span class="comment"># 输出: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例 3:</span></span><br><span class="line"><span class="comment"># 输入: &quot;(]&quot;</span></span><br><span class="line"><span class="comment"># 输出: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例 4:</span></span><br><span class="line"><span class="comment"># 输入: &quot;([)]&quot;</span></span><br><span class="line"><span class="comment"># 输出: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例 5:</span></span><br><span class="line"><span class="comment"># 输入: &quot;&#123;[]&#125;&quot;</span></span><br><span class="line"><span class="comment"># 输出: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 来源：力扣（LeetCode）</span></span><br><span class="line"><span class="comment"># 链接：https: // leetcode-cn.com/problems/valid-parentheses</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isValid</span>(<span class="params">self, s</span>):</span><br><span class="line">        <span class="comment"># 简洁但是效率低</span></span><br><span class="line">        <span class="comment"># while &#x27;&#123;&#125;&#x27; in s or &#x27;()&#x27; in s or &#x27;[]&#x27; in s:</span></span><br><span class="line">        <span class="comment">#     s = s.replace(&#x27;&#123;&#125;&#x27;, &#x27;&#x27;)</span></span><br><span class="line">        <span class="comment">#     s = s.replace(&#x27;[]&#x27;, &#x27;&#x27;)</span></span><br><span class="line">        <span class="comment">#     s = s.replace(&#x27;()&#x27;, &#x27;&#x27;)</span></span><br><span class="line">        <span class="comment"># return s == &#x27;&#x27;</span></span><br><span class="line">        stack = []  <span class="comment"># 初始化栈</span></span><br><span class="line">        mapping = &#123;<span class="string">&#x27;)&#x27;</span>: <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;]&#x27;</span>: <span class="string">&#x27;[&#x27;</span>, <span class="string">&#x27;&#125;&#x27;</span>: <span class="string">&#x27;&#123;&#x27;</span>&#125;  <span class="comment"># 字典存储所有的匹配类型</span></span><br><span class="line">        <span class="keyword">for</span> char <span class="keyword">in</span> s:  <span class="comment"># 遍历字符串</span></span><br><span class="line">            <span class="keyword">if</span> (char <span class="keyword">in</span> mapping):  <span class="comment"># 当前字符为闭合符号时</span></span><br><span class="line">                top_element = stack.pop() <span class="keyword">if</span> stack <span class="keyword">else</span> <span class="string">&#x27;#&#x27;</span>  <span class="comment"># 栈顶元素出栈</span></span><br><span class="line">                <span class="keyword">if</span> mapping[char] != top_element:  <span class="comment"># 没有匹配的类型，返回 false</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                stack.append(char)  <span class="comment"># 开括号存储到栈里</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">not</span> stack</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_init_</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.isValid(<span class="string">&quot;([)]&quot;</span>)</span><br><span class="line"></span><br><span class="line">res = Solution()</span><br><span class="line"><span class="built_in">print</span>(res._init_())</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>下拉列表的实现</title>
      <link href="/dropdown-list-implementation/"/>
      <url>/dropdown-list-implementation/</url>
      
        <content type="html"><![CDATA[<p>用别人的组件总有各种不可控的问题，而且不好维护，还是造轮子比较舒畅。</p><p>下拉列表是工作中经常用到的一个功能，点击按钮，显示下拉列表，点击列表中的项目显示对应的值到按钮中，这是下拉列表的常用交互。这里的一个比较有意思的点就是如何在点击别的地方时关闭列表。我采用的方法是监听组件最外层的 blur 事件，当该组件失去焦点时，关闭列表。由于按钮用的是 div 实现，默认 div 是没有 blur 事件的，这里添加一个 tabindex 属性， blur 就有效了。</p><p>demo：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dropDown-wrap&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;1&quot;</span> @<span class="attr">blur</span>=<span class="string">&quot;hidden&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dropDown&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;isDropDown=!isDropDown&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;selected.name&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;arrow-right&quot;</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isIcon&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">polyline</span></span></span><br><span class="line"><span class="tag">        <span class="attr">points</span>=<span class="string">&quot;7,0 14,7 7,14&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">stroke-width</span>=<span class="string">&quot;2px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">stroke</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;arrow-up&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;isDropDown:isDropDown&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dropDown-list&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;isDropDown:isDropDown&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;dropDown-item&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:class</span>=<span class="string">&quot;&#123;isSelected:selected.id===item.id&#125;&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in list&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">&quot;selectItem(item)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      &#123;&#123;item.name&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">selectItem</span> (item) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.$emit(<span class="string">&#x27;changeItem&#x27;</span>, item)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">isDropDown</span> = <span class="literal">false</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">hidden</span> () &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">isDropDown</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="三、Demo-地址"><a href="#三、Demo-地址" class="headerlink" title="三、Demo 地址"></a>三、Demo 地址</h4><p><a href="https://canace22.github.io/Demos/#/">Demo</a> &#x3D;&gt; 媒体 &#x3D;&gt; 列表控件</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canvas 画动态路径</title>
      <link href="/canvas-draw-dynamic-path/"/>
      <url>/canvas-draw-dynamic-path/</url>
      
        <content type="html"><![CDATA[<p>这个函数是一个用于画 canvas 路径的，也就是把 canvas 画线的过程演示出来的一个东东。采用的是纯 js 和 canvas 描绘方法。当然前提是得有路径的点集，不然画不了。</p><span id="more"></span><h4 id="一、参数列表"><a href="#一、参数列表" class="headerlink" title="一、参数列表"></a>一、参数列表</h4><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>config.color</td><td>String</td><td>路径颜色</td></tr><tr><td>config.path</td><td>Object</td><td>路径的点集</td></tr><tr><td>config.padding.left</td><td>Number</td><td>路径图的左偏移值</td></tr><tr><td>config.padding.top</td><td>Number</td><td>路径图的上偏移值</td></tr><tr><td>config.img</td><td>HTMLElement</td><td>描绘路径的图</td></tr><tr><td>config.sw</td><td>Number</td><td>描绘路径图的原始宽</td></tr><tr><td>config.sh</td><td>Number</td><td>描绘路径图的原始高</td></tr><tr><td>config.scale</td><td>Number</td><td>缩放尺度</td></tr></tbody></table><h4 id="二、函数"><a href="#二、函数" class="headerlink" title="二、函数"></a>二、函数</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">drawPolygon</span>(<span class="params">config</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> t = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> [scale, path, color, sw, sh, padding, handleEl] = [</span><br><span class="line">    config.<span class="property">scale</span>,</span><br><span class="line">    config.<span class="property">path</span>,</span><br><span class="line">    config.<span class="property">color</span>,</span><br><span class="line">    config.<span class="property">sw</span>,</span><br><span class="line">    config.<span class="property">sh</span>,</span><br><span class="line">    config.<span class="property">padding</span>,</span><br><span class="line">    config.<span class="property">handleEl</span></span><br><span class="line">  ];</span><br><span class="line">  ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">draw</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (t &gt;= config.<span class="property">path</span>.<span class="property">length</span>) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(clock);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line">    t += <span class="number">2</span>;</span><br><span class="line">    ctx.<span class="title function_">beginPath</span>();</span><br><span class="line">    ctx.<span class="title function_">moveTo</span>(</span><br><span class="line">      path[<span class="number">0</span>].<span class="property">x</span> * scale + padding.<span class="property">left</span>,</span><br><span class="line">      path[<span class="number">0</span>].<span class="property">y</span> * scale + padding.<span class="property">top</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">if</span> (t &gt; path.<span class="property">length</span>) &#123;</span><br><span class="line">      t = path.<span class="property">length</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (handleEl) &#123;</span><br><span class="line">      ctx.<span class="title function_">drawImage</span>(</span><br><span class="line">        handleEl,</span><br><span class="line">        path[t - <span class="number">1</span>].<span class="property">x</span> * scale + padding.<span class="property">left</span>,</span><br><span class="line">        (path[t - <span class="number">1</span>].<span class="property">y</span> - <span class="number">240</span>) * scale + padding.<span class="property">top</span>,</span><br><span class="line">        sw * scale,</span><br><span class="line">        sh * scale</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; t; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (config.<span class="property">path</span>[i]) &#123;</span><br><span class="line">        ctx.<span class="title function_">lineTo</span>(</span><br><span class="line">          config.<span class="property">path</span>[i].<span class="property">x</span> * scale + config.<span class="property">padding</span>.<span class="property">left</span>,</span><br><span class="line">          config.<span class="property">path</span>[i].<span class="property">y</span> * scale + config.<span class="property">padding</span>.<span class="property">top</span></span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ctx.<span class="property">strokeStyle</span> = color || <span class="string">&quot;#07B1CA&quot;</span>;</span><br><span class="line">    ctx.<span class="property">lineWidth</span> = <span class="number">3</span>;</span><br><span class="line">    ctx.<span class="title function_">stroke</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> clock = <span class="built_in">setInterval</span>(draw, <span class="number">50</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="三、Demo-地址"><a href="#三、Demo-地址" class="headerlink" title="三、Demo 地址"></a>三、Demo 地址</h4><p><a href="https://canace22.github.io/Demos/#/">Demo</a> &#x3D;&gt; 绘图 &#x3D;&gt; canvas 路径</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Npm 常用命令</title>
      <link href="/npm-common-commands/"/>
      <url>/npm-common-commands/</url>
      
        <content type="html"><![CDATA[<h2 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a>1、安装</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i &lt;package&gt;</span><br><span class="line"></span><br><span class="line">npm i &lt;package&gt; -g</span><br><span class="line"></span><br><span class="line">npm i &lt;package&gt; --save-dev</span><br><span class="line"></span><br><span class="line">npm install @myco/my-package</span><br></pre></td></tr></table></figure><h2 id="2、切换源"><a href="#2、切换源" class="headerlink" title="2、切换源"></a>2、切换源</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 长久切换</span><br><span class="line">npm config set registry &lt;https://registry.npm.taobao.org&gt;</span><br><span class="line"></span><br><span class="line"># 临时切换</span><br><span class="line">npm --registry https://registry.npm.taobao.org install express</span><br></pre></td></tr></table></figure><h2 id="3、添加私有源"><a href="#3、添加私有源" class="headerlink" title="3、添加私有源"></a>3、添加私有源</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 需要先登录</span><br><span class="line">npm config set &lt;@myco&gt;:registry &lt;http://reg.example.com&gt;</span><br><span class="line">.npmrc</span><br><span class="line">registry=https://registry.npmjs.org/</span><br><span class="line">//registry.npm.dreamdev.cn/:_password=&lt;password&gt;</span><br><span class="line">//registry.npm.dreamdev.cn/:username=&lt;user&gt;</span><br><span class="line">//registry.npm.dreamdev.cn/:email=&lt;email&gt;</span><br><span class="line">//registry.npm.dreamdev.cn/:always-auth=false</span><br><span class="line">@myco:registry= &lt;http://reg.example.com&gt;</span><br><span class="line">https://registry.npm.dreamdev.cn/=</span><br></pre></td></tr></table></figure><h2 id="4、更新-package-json-中的所有依赖"><a href="#4、更新-package-json-中的所有依赖" class="headerlink" title="4、更新 package.json 中的所有依赖"></a>4、更新 package.json 中的所有依赖</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install -g npm-check-updates</span><br><span class="line">ncu -u</span><br><span class="line">npm update</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeJs 模块</title>
      <link href="/nodeJs/"/>
      <url>/nodeJs/</url>
      
        <content type="html"><![CDATA[<p>nodeJS 模块化编程指的是将一些通用的功能转移到不同的文件里，每个文件作为一个模块，暴露给其他文件使用。这样可以使代码更容易维护，更具通用性。</p><span id="more"></span><h2 id="一、模块化编程"><a href="#一、模块化编程" class="headerlink" title="一、模块化编程"></a>一、模块化编程</h2><p>nodeJS 模块化编程指的是将一些通用的功能转移到不同的文件里，每个文件作为一个模块，暴露给其他文件使用。这样可以使代码更容易维护，更具通用性。</p><p>nodeJS 模块导出的方式有两种：module.exports 和 exports，前者可以直接被赋值，后者不能。 通过模块导出的函数所声明的全局变量不会污染其他全局变量的原因是：module.exports 和 exports 实际上都是作为 load 函数的属性存在的，每次引入，源模块中的全局变量就是函数内的变量了，所以各模块全局变量间不会互相污染。</p><p>nodeJS 引入模块的方式是 require。</p><h2 id="二、nodeJS-内置模块"><a href="#二、nodeJS-内置模块" class="headerlink" title="二、nodeJS 内置模块"></a>二、nodeJS 内置模块</h2><p>1、fs 模块</p><p>(1) 文件读取</p><p>A、异步读取文件</p><ul><li><p>文本文件读取</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取普通文本文件</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&quot;sample.txt&quot;</span>, <span class="string">&quot;utf-8&quot;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>二进制文件读取</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">// 读取二进制文件</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&quot;sample.png&quot;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">length</span> + <span class="string">&quot; bytes&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><p>B、同步读取文件</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">// 同步读取文件</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&quot;sample.txt&quot;</span>, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="comment">// 出错了</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2) 文件写入</p><p>A、异步写入</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = <span class="string">&quot;Hello, Node.js&quot;</span>;</span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&quot;output.txt&quot;</span>, data, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ok.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>B、同步写入</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = <span class="string">&quot;Hello, Node.js&quot;</span>;</span><br><span class="line">fs.<span class="title function_">writeFileSync</span>(<span class="string">&quot;output.txt&quot;</span>, data);</span><br></pre></td></tr></table></figure><p>(3) 获取文件或目录的详细信息</p><p>A、同步获取</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">// 获取文件详情</span></span><br><span class="line">fs.<span class="title function_">stat</span>(<span class="string">&quot;sample.txt&quot;</span>, <span class="keyword">function</span>(<span class="params">err, stat</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 是否是文件:</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;isFile: &quot;</span> + stat.<span class="title function_">isFile</span>());</span><br><span class="line">    <span class="comment">// 是否是目录:</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;isDirectory: &quot;</span> + stat.<span class="title function_">isDirectory</span>());</span><br><span class="line">    <span class="keyword">if</span> (stat.<span class="title function_">isFile</span>()) &#123;</span><br><span class="line">      <span class="comment">// 文件大小:</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;size: &quot;</span> + stat.<span class="property">size</span>);</span><br><span class="line">      <span class="comment">// 创建时间, Date对象:</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;birth time: &quot;</span> + stat.<span class="property">birthtime</span>);</span><br><span class="line">      <span class="comment">// 修改时间, Date对象:</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;modified time: &quot;</span> + stat.<span class="property">mtime</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>B、异步获取</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">statSync</span>(<span class="string">&quot;sample.txt&quot;</span>, stat);</span><br></pre></td></tr></table></figure><p>ps：在启动和结束时只执行一次的读写程序，可以用同步，其他情况用异步。</p><p>2、stream 模块</p><p>(1) 利用 stream 模块读取文件</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开一个流:</span></span><br><span class="line"><span class="keyword">const</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&quot;sample.txt&quot;</span>, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&quot;data&quot;</span>, <span class="keyword">function</span>(<span class="params">chunk</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;DATA:&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(chunk);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&quot;end&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;END&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&quot;error&quot;</span>, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ERROR: &quot;</span> + err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>(2) 利用 stream 模块写入数据</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ws1 = fs.<span class="title function_">createWriteStream</span>(<span class="string">&quot;output1.txt&quot;</span>, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">ws1.<span class="title function_">write</span>(<span class="string">&quot;使用Stream写入文本数据...\n&quot;</span>);</span><br><span class="line">ws1.<span class="title function_">write</span>(<span class="string">&quot;END.&quot;</span>);</span><br><span class="line">ws1.<span class="title function_">end</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ws2 = fs.<span class="title function_">createWriteStream</span>(<span class="string">&quot;output2.txt&quot;</span>);</span><br><span class="line">ws2.<span class="title function_">write</span>(<span class="keyword">new</span> <span class="title class_">Buffer</span>(<span class="string">&quot;使用Stream写入二进制数据...\n&quot;</span>, <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">ws2.<span class="title function_">write</span>(<span class="keyword">new</span> <span class="title class_">Buffer</span>(<span class="string">&quot;END.&quot;</span>, <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">ws2.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure><p>(3) 利用 pipe 串接流</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&quot;sample.txt&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&quot;copied.txt&quot;</span>, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&quot;写入新数据\n&quot;</span>);</span><br><span class="line">rs.<span class="title function_">pipe</span>(ws);</span><br></pre></td></tr></table></figure><p>3、http 模块</p><p>(1) 第一个 HTTP 服务器程序</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入http模块:</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建http server，并传入回调函数:</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">  <span class="comment">// 回调函数接收request和response对象,</span></span><br><span class="line">  <span class="comment">// 获得HTTP请求的method和url:</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">method</span> + <span class="string">&quot;: &quot;</span> + request.<span class="property">url</span>);</span><br><span class="line">  <span class="comment">// 将HTTP响应200写入response, 同时设置Content-Type: text/html:</span></span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/html&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 将HTTP响应的HTML内容写入response:</span></span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让服务器监听8080端口:</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running at http://127.0.0.1:8080/&quot;</span>);</span><br></pre></td></tr></table></figure><p>(2) 文件服务器</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [fs, url, path, http] = [</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>),</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;url&quot;</span>),</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>),</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>)</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从命令行参数获取root目录，默认是当前目录:</span></span><br><span class="line"><span class="keyword">const</span> root = path.<span class="title function_">resolve</span>(process.<span class="property">argv</span>[<span class="number">2</span>] || <span class="string">&quot;.&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Static root dir: &quot;</span> + root);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建服务器:</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">  <span class="comment">// 获得URL的path，类似 &#x27;/css/bootstrap.css&#x27;:</span></span><br><span class="line">  <span class="keyword">const</span> pathname = url.<span class="title function_">parse</span>(request.<span class="property">url</span>).<span class="property">pathname</span>;</span><br><span class="line">  <span class="comment">// 获得对应的本地文件路径，类似 &#x27;/srv/www/css/bootstrap.css&#x27;:</span></span><br><span class="line">  <span class="keyword">const</span> filepath = path.<span class="title function_">join</span>(root, pathname);</span><br><span class="line">  <span class="comment">// 获取文件状态:</span></span><br><span class="line">  fs.<span class="title function_">stat</span>(filepath, <span class="keyword">function</span>(<span class="params">err, stats</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!err &amp;&amp; stats.<span class="title function_">isFile</span>()) &#123;</span><br><span class="line">      <span class="comment">// 没有出错并且文件存在:</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;200 &quot;</span> + request.<span class="property">url</span>);</span><br><span class="line">      <span class="comment">// 发送200响应:</span></span><br><span class="line">      response.<span class="title function_">writeHead</span>(<span class="number">200</span>);</span><br><span class="line">      <span class="comment">// 将文件流导向response:</span></span><br><span class="line">      fs.<span class="title function_">createReadStream</span>(filepath).<span class="title function_">pipe</span>(response);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 出错了或者文件不存在:</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;404 &quot;</span> + request.<span class="property">url</span>);</span><br><span class="line">      <span class="comment">// 发送404响应:</span></span><br><span class="line">      response.<span class="title function_">writeHead</span>(<span class="number">404</span>);</span><br><span class="line">      response.<span class="title function_">end</span>(<span class="string">&quot;404 Not Found&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running at http://172.16.1.83:8080/&quot;</span>);</span><br></pre></td></tr></table></figure><p>4、crypto 模块</p><p>(1) MD5 和 SHA1 ，每一次生成的都是一样的</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">&quot;crypto&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hash = crypto.<span class="title function_">createHash</span>(<span class="string">&quot;md5&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可任意多次调用update():</span></span><br><span class="line">hash.<span class="title function_">update</span>(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">hash.<span class="title function_">update</span>(<span class="string">&quot;Hello, nodejs!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hash.<span class="title function_">digest</span>(<span class="string">&quot;hex&quot;</span>));</span><br></pre></td></tr></table></figure><p>(2) Hmac ，根据秘钥改变</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">&quot;crypto&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hmac = crypto.<span class="title function_">createHmac</span>(<span class="string">&quot;sha256&quot;</span>, <span class="string">&quot;secret-key&quot;</span>);</span><br><span class="line"></span><br><span class="line">hmac.<span class="title function_">update</span>(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">hmac.<span class="title function_">update</span>(<span class="string">&quot;Hello, nodejs!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hmac.<span class="title function_">digest</span>(<span class="string">&quot;hex&quot;</span>));</span><br></pre></td></tr></table></figure><p>(3) AES，对称加密，含加解密过程</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">&quot;crypto&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">aesEncrypt</span>(<span class="params">data, key</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> cipher = crypto.<span class="title function_">createCipher</span>(<span class="string">&quot;aes192&quot;</span>, key);</span><br><span class="line">  <span class="keyword">var</span> crypted = cipher.<span class="title function_">update</span>(data, <span class="string">&quot;utf8&quot;</span>, <span class="string">&quot;hex&quot;</span>);</span><br><span class="line">  crypted += cipher.<span class="title function_">final</span>(<span class="string">&quot;hex&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> crypted;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">aesDecrypt</span>(<span class="params">encrypted, key</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> decipher = crypto.<span class="title function_">createDecipher</span>(<span class="string">&quot;aes192&quot;</span>, key);</span><br><span class="line">  <span class="keyword">var</span> decrypted = decipher.<span class="title function_">update</span>(encrypted, <span class="string">&quot;hex&quot;</span>, <span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">  decrypted += decipher.<span class="title function_">final</span>(<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> decrypted;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = <span class="string">&quot;Hello, this is a secret message!&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> key = <span class="string">&quot;Password!&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> encrypted = <span class="title function_">aesEncrypt</span>(data, key);</span><br><span class="line"><span class="keyword">const</span> decrypted = <span class="title function_">aesDecrypt</span>(encrypted, key);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Plain text: &quot;</span> + data);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Encrypted text: &quot;</span> + encrypted);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Decrypted text: &quot;</span> + decrypted);</span><br></pre></td></tr></table></figure><p>(3) RSA 非对称加密</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则</title>
      <link href="/regular-expressions/"/>
      <url>/regular-expressions/</url>
      
        <content type="html"><![CDATA[<h2 id="一、正则表达式是什么"><a href="#一、正则表达式是什么" class="headerlink" title="一、正则表达式是什么"></a>一、正则表达式是什么</h2><p>正则表达式就是记录文本规则的代码。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 匹配中国的电话号码</span></span><br><span class="line"><span class="number">0</span>\d\d-\d\d\d\d\d\d\d\d</span><br><span class="line"><span class="number">0</span>\d&#123;<span class="number">2</span>&#125;-\d&#123;<span class="number">8</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="二、安装正则测试软件"><a href="#二、安装正则测试软件" class="headerlink" title="二、安装正则测试软件"></a>二、安装正则测试软件</h2><p>地址： <a href="https://deerchao.net/tools/regester/index.htm">https://deerchao.net/tools/regester/index.htm</a></p><h2 id="三、常用元字符"><a href="#三、常用元字符" class="headerlink" title="三、常用元字符"></a>三、常用元字符</h2><table><thead><tr><th>代码</th><th>说明</th></tr></thead><tbody><tr><td>.</td><td>匹配除换行符以外的任意字符</td></tr><tr><td>\w</td><td>匹配字母或数字或下划线或汉字</td></tr><tr><td>\s</td><td>匹配任意的空白符</td></tr><tr><td>\d</td><td>匹配数字</td></tr><tr><td>\b</td><td>匹配单词的开始或结束</td></tr><tr><td>^</td><td>匹配字符串的开始</td></tr><tr><td>$</td><td>匹配字符串的结束</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 匹配 qq 号，5——12位</span></span><br><span class="line">^\d&#123;<span class="number">5</span>,<span class="number">12</span>&#125;$</span><br></pre></td></tr></table></figure><h2 id="四、字符转义"><a href="#四、字符转义" class="headerlink" title="四、字符转义"></a>四、字符转义</h2><p>常用的需要转义的字符：(\), *(*), .(.)</p><h2 id="五、重复"><a href="#五、重复" class="headerlink" title="五、重复"></a>五、重复</h2><p>常用限定符</p><table><thead><tr><th>代码&#x2F;语法</th><th>说明</th></tr></thead><tbody><tr><td>*</td><td>重复零次或更多次</td></tr><tr><td>+</td><td>重复一次或更多次</td></tr><tr><td>?</td><td>重复零次或一次</td></tr><tr><td>{n}</td><td>重复n次</td></tr><tr><td>{n,}</td><td>重复n次或更多次</td></tr><tr><td>{n,m}</td><td>重复n到m次</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Windows</span>\d+  <span class="comment">//匹配Windows后面的1个或更多数字</span></span><br><span class="line"></span><br><span class="line">^\w+  <span class="comment">//匹配一行的第一个单词(或整个字符串的第一个单词，具体匹配哪个意思得看选项设置)</span></span><br></pre></td></tr></table></figure><h2 id="六、字符类，直接写到中括号-中即可"><a href="#六、字符类，直接写到中括号-中即可" class="headerlink" title="六、字符类，直接写到中括号 [] 中即可"></a>六、字符类，直接写到中括号 [] 中即可</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[aeiou] <span class="comment">//匹配任何一个英文元音字母</span></span><br><span class="line"></span><br><span class="line">[.?!] <span class="comment">//匹配标点符号</span></span><br></pre></td></tr></table></figure><h2 id="七、分枝条件"><a href="#七、分枝条件" class="headerlink" title="七、分枝条件 (|)"></a>七、分枝条件 (|)</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span>\d&#123;<span class="number">2</span>&#125;-\d&#123;<span class="number">8</span>&#125;|<span class="number">0</span>\d&#123;<span class="number">3</span>&#125;-\d&#123;<span class="number">7</span>&#125;   <span class="comment">//这个表达式能匹配两种以连字号分隔的电话号码：一种是三位区号，8位本地号(如010-12345678)，一种是4位区号，7位本地号(0376-2233445)</span></span><br><span class="line"></span><br><span class="line">\(<span class="number">0</span>\d&#123;<span class="number">2</span>&#125;\)[- ]?\d&#123;<span class="number">8</span>&#125;|<span class="number">0</span>\d&#123;<span class="number">2</span>&#125;[- ]?\d&#123;<span class="number">8</span>&#125;   <span class="comment">//匹配3位区号的电话号码</span></span><br><span class="line"></span><br><span class="line">\d&#123;<span class="number">5</span>&#125;-\d&#123;<span class="number">4</span>&#125;|\d&#123;<span class="number">5</span>&#125;   <span class="comment">//匹配美国的邮政编码</span></span><br></pre></td></tr></table></figure><h2 id="八、分组-小括号"><a href="#八、分组-小括号" class="headerlink" title="八、分组 (小括号)"></a>八、分组 (小括号)</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">((<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]\d|<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|[<span class="number">01</span>]?\d\d?)\.)&#123;<span class="number">3</span>&#125;(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]\d|<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|[<span class="number">01</span>]?\d\d?)   <span class="comment">// 匹配一个ip地址</span></span><br></pre></td></tr></table></figure><h2 id="九、反义-（字符串前面加-，元字符变大写）"><a href="#九、反义-（字符串前面加-，元字符变大写）" class="headerlink" title="九、反义 （字符串前面加 ^，元字符变大写）"></a>九、反义 （字符串前面加 ^，元字符变大写）</h2><p>常用的反义代码</p><table><thead><tr><th>代码&#x2F;语法</th><th>说明</th></tr></thead><tbody><tr><td>\W</td><td>匹配任意不是字母，数字，下划线，汉字的字符</td></tr><tr><td>\S</td><td>匹配任意不是空白符的字符</td></tr><tr><td>\D</td><td>匹配任意非数字的字符</td></tr><tr><td>\B</td><td>匹配不是单词开头或结束的位置</td></tr><tr><td>[^x]</td><td>匹配除了x以外的任意字符</td></tr><tr><td>[^aeiou]</td><td>匹配除了aeiou这几个字母以外的任意字符</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">\S+   <span class="comment">//匹配不包含空白符的字符串</span></span><br><span class="line"></span><br><span class="line"><span class="language-xml">&lt;a[^&gt;]+&gt;    //匹配用尖括号括起来的以a开头的字符串</span></span><br></pre></td></tr></table></figure><h2 id="十、后向引用"><a href="#十、后向引用" class="headerlink" title="十、后向引用"></a>十、后向引用</h2><p>用于重复搜索前面某个分组匹配的文本</p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webpack</title>
      <link href="/webpack/"/>
      <url>/webpack/</url>
      
        <content type="html"><![CDATA[<h2 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h2><h3 id="1-本地安装"><a href="#1-本地安装" class="headerlink" title="1. 本地安装"></a>1. 本地安装</h3><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="comment"># webpack 4+ 版本</span></span><br><span class="line">npm install <span class="params">--save-dev</span> webpack-cli</span><br><span class="line">npm install <span class="params">--save-dev</span> webpack</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装指定版本</span></span><br><span class="line">npm install <span class="params">--save-dev</span> webpack@&lt;<span class="keyword">version</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="2-全局安装（官方不推荐）"><a href="#2-全局安装（官方不推荐）" class="headerlink" title="2. 全局安装（官方不推荐）"></a>2. 全局安装（官方不推荐）</h3><figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">npm install <span class="comment">--global webpack</span></span><br></pre></td></tr></table></figure><h3 id="3-最新体验版安装"><a href="#3-最新体验版安装" class="headerlink" title="3. 最新体验版安装"></a>3. 最新体验版安装</h3><figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">npm</span> install webpack@beta</span><br><span class="line"><span class="built_in">npm</span> install webpack/webpack<span class="comment">#&lt;tagname/branchname&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-运行"><a href="#3-运行" class="headerlink" title="3. 运行"></a>3. 运行</h3><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">webpack</span></span><br></pre></td></tr></table></figure><h2 id="二、入门"><a href="#二、入门" class="headerlink" title="二、入门"></a>二、入门</h2><h3 id="1-项目初始化"><a href="#1-项目初始化" class="headerlink" title="1. 项目初始化"></a>1. 项目初始化</h3><figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> webpack-<span class="built_in">demo</span> &amp;&amp; cd webpack-<span class="built_in">demo</span></span><br><span class="line"></span><br><span class="line">npm init -y</span><br><span class="line"></span><br><span class="line">npm install webpack webpack-cli --<span class="built_in">save</span>-dev</span><br></pre></td></tr></table></figure><h3 id="2-初始化源码目录"><a href="#2-初始化源码目录" class="headerlink" title="2. 初始化源码目录"></a>2. 初始化源码目录</h3><figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">mkdir src</span><br><span class="line">cd src<span class="built_in"></span></span><br><span class="line"><span class="built_in">new-item </span>index.js</span><br><span class="line">cd ..</span><br><span class="line">mkdir dist</span><br><span class="line">cd dist<span class="built_in"></span></span><br><span class="line"><span class="built_in">new-item </span>index.html</span><br></pre></td></tr></table></figure><h3 id="3-创建配置文件-webpack-config-js"><a href="#3-创建配置文件-webpack-config-js" class="headerlink" title="3. 创建配置文件 webpack.config.js"></a>3. 创建配置文件 webpack.config.js</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="variable">path</span> <span class="operator">=</span> require(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  entry: <span class="string">&#x27;./src/index.js&#x27;</span>, <span class="comment">// 入口文件地址</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>) <span class="comment">// 告诉 webpack 在哪里生成文件</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="4-添加npm脚本"><a href="#4-添加npm脚本" class="headerlink" title="4. 添加npm脚本"></a>4. 添加npm脚本</h3><figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;webpack-demo&quot;</span>,</span><br><span class="line">    <span class="string">&quot;private&quot;</span>: true,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;</span><span class="keyword">Error</span>: <span class="keyword">no</span> <span class="keyword">test</span> specified\<span class="string">&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">+     <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;keywords&quot;</span>: [],</span><br><span class="line">    <span class="string">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">    <span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;webpack&quot;</span>: <span class="string">&quot;^4.0.1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;webpack-cli&quot;</span>: <span class="string">&quot;^2.0.9&quot;</span>,</span><br><span class="line">      <span class="string">&quot;lodash&quot;</span>: <span class="string">&quot;^4.17.5&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="5-开始使用-webpack-打包：npm-run-build"><a href="#5-开始使用-webpack-打包：npm-run-build" class="headerlink" title="5. 开始使用 webpack 打包：npm run build"></a>5. 开始使用 webpack 打包：<code>npm run build</code></h3><blockquote><p>具体事例请参考 example 目录下的 chapterOne</p></blockquote><h2 id="三、静态资源管理"><a href="#三、静态资源管理" class="headerlink" title="三、静态资源管理"></a>三、静态资源管理</h2><h3 id="0-创建静态资源目录-asset"><a href="#0-创建静态资源目录-asset" class="headerlink" title="0. 创建静态资源目录 asset"></a>0. 创建静态资源目录 asset</h3><h3 id="1-css"><a href="#1-css" class="headerlink" title="1. css"></a>1. css</h3><p>(1) 安装对应的 loader： <code>npm install --save-dev style-loader css-loader</code></p><p>(2) 配置 loader：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [&#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      <span class="attr">use</span>: [</span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>(3) 静态资源目录添加 style.css 文件，在入口文件中引用，在打包时， webpack 会把对应的 css 代码插入到 index.html 的 head 中。</p><h3 id="2-图片"><a href="#2-图片" class="headerlink" title="2. 图片"></a>2. 图片</h3><p>(1) 安装对应的 loader： <code>npm install --save-dev file-loader</code></p><p>(2) 配置 loader：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(png|svg|jpg|gif)$/</span>,</span><br><span class="line">  <span class="attr">use</span>: [</span><br><span class="line">    <span class="string">&#x27;file-loader&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3) 静态资源目录添加一张图片，在入口文件中引用，打包时， webpack 会生成目标文件夹中的最终 url，并将入口文件中的路径替换为最终路径。</p><h3 id="3-字体"><a href="#3-字体" class="headerlink" title="3. 字体"></a>3. 字体</h3><p>(1) 配置 loader：</p><figure class="highlight coq"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.(woff|<span class="type">woff2</span>|<span class="type">eot</span>|<span class="type">ttf</span>|<span class="type">otf</span>)$/,</span><br><span class="line">  use: [</span><br><span class="line">    &#x27;file-loader&#x27;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2) 静态资源目录添加字体，在入口文件中引用，打包时， webpack 会生成目标文件夹中的最终 url，并将入口文件中的路径替换为最终路径。</p><h3 id="4-数据（json、xml、csv）"><a href="#4-数据（json、xml、csv）" class="headerlink" title="4. 数据（json&lt;默认支持&gt;、xml、csv）"></a>4. 数据（json&lt;默认支持&gt;、xml、csv）</h3><p>(1) 安装对应的 loader: <code>npm install --save-dev csv-loader xml-loader</code></p><p>(2) 配置 loader：</p><figure class="highlight perl"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(csv|tsv)$/</span>,</span><br><span class="line">  <span class="keyword">use</span>: [</span><br><span class="line">    <span class="string">&#x27;csv-loader&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.xml$/</span>,</span><br><span class="line">  <span class="keyword">use</span>: [</span><br><span class="line">    <span class="string">&#x27;xml-loader&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3) 静态资源目录添加对应的数据文件，在入口文件中引用数据文件, 打包之后，对应的数据文件会被处理为 json 格式的数据</p><blockquote><p>具体事例请参考 example 目录下的 chapterTwo</p></blockquote><h2 id="四、输出管理"><a href="#四、输出管理" class="headerlink" title="四、输出管理"></a>四、输出管理</h2><h3 id="0-入口分离"><a href="#0-入口分离" class="headerlink" title="0. 入口分离"></a>0. 入口分离</h3><p>(1) 源码目录中新建 print.js 文件，并在 index.js 中引用对应模块，index.js 中引用对应的包</p><p>(2) webpack 配置修改：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">app</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    <span class="attr">print</span>: <span class="string">&#x27;./src/print.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].bundle.js&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="1-解决引用重复的问题，每次打包生成新的-html-文件"><a href="#1-解决引用重复的问题，每次打包生成新的-html-文件" class="headerlink" title="1. 解决引用重复的问题，每次打包生成新的 html 文件"></a>1. 解决引用重复的问题，每次打包生成新的 html 文件</h3><p>(1) 设定 HtmlWebpackPlugin</p><p>安装 html-webpack-plugin: <code>npm install --save-dev html-webpack-plugin</code></p><p>(2) 配置 HtmlWebpackPlugin</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Output Management&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></figure><p>(3) 在打包时， HtmlWebpackPlugin 会生成新的 index.html 文件，替换旧的 index.html 文件</p><h3 id="2-删除遗留的多余文件-在每次构建前清理-dist-文件夹"><a href="#2-删除遗留的多余文件-在每次构建前清理-dist-文件夹" class="headerlink" title="2. 删除遗留的多余文件,在每次构建前清理 &#x2F;dist 文件夹"></a>2. 删除遗留的多余文件,在每次构建前清理 &#x2F;dist 文件夹</h3><p>(1) 安装插件: <code>npm install clean-webpack-plugin --save-dev</code></p><p>(2) 配置插件:</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="title class_">CleanWebpackPlugin</span></span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br></pre></td></tr></table></figure><blockquote><p>具体事例请参考 example 目录下的 chapterThree</p></blockquote><h2 id="五、开发环境配置"><a href="#五、开发环境配置" class="headerlink" title="五、开发环境配置"></a>五、开发环境配置</h2><h3 id="1-将编译后的代码映射回原始源代码"><a href="#1-将编译后的代码映射回原始源代码" class="headerlink" title="1. 将编译后的代码映射回原始源代码"></a>1. 将编译后的代码映射回原始源代码</h3><p>(1) 配置文件中添加 source map 配置： <code>devtool: &#39;inline-source-map&#39;</code></p><p>(2) 入口文件有错误，控制台返回的错误路径是对应的源路径</p><h3 id="2-自动编译代码"><a href="#2-自动编译代码" class="headerlink" title="2. 自动编译代码"></a>2. 自动编译代码</h3><p>(1) 观察模式：</p><ul><li><p>添加 script 脚本：<code>&quot;watch&quot;: &quot;webpack --watch&quot;</code> </p></li><li><p><code>npm run watch</code>，每次更新入口文件，代码将自动编译，但是每次编译后，需要手动刷新浏览器，页面才会更新</p></li></ul><p>(2) webpack-dev-server（一个简单的web服务器，可以实时重新加载页面）（官方推荐使用）</p><ul><li><p>安装： <code>npm install --save-dev webpack-dev-server</code></p></li><li><p>修改配置文件：告知 webpack-dev-server 在哪里查找文件</p></li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  contentBase: <span class="string">&#x27;./dist&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>添加 script 脚本</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --open&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><ul><li>修改源文件，web 服务器就会自动重新加载编译后的代码</li></ul><p>(3) webpack-dev-middleware（模块热替换），把 webpack 处理后的文件传递给一个服务器(server)</p><ul><li><p>安装 express 和 webpack-dev-middleware： <code>npm install --save-dev express webpack-dev-middleware</code></p></li><li><p>配置文件中 output 添加  publicPat 选项： <code>publicPath: &#39;/&#39;</code></p></li><li><p>自定义一个 express 服务，添加 server.js 文件，内容如下：</p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpackDevMiddleware = <span class="built_in">require</span>(<span class="string">&#x27;webpack-dev-middleware&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.config.js&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> compiler = <span class="title function_">webpack</span>(config);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Tell express to use the webpack-dev-middleware and use the webpack.config.js</span></span><br><span class="line"><span class="comment">// configuration file as a base.</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">webpackDevMiddleware</span>(compiler, &#123;</span><br><span class="line">  <span class="attr">publicPath</span>: config.<span class="property">output</span>.<span class="property">publicPath</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Serve the files on port 3000.</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Example app listening on port 3000!\n&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p>添加 npm script： <code>&quot;server&quot;: &quot;node server.js&quot;,</code></p></li><li><p>执行 <code>npm run server</code>， 打开 <a href="http://localhost:3000/">http://localhost:3000/</a> 即是项目地址</p></li></ul><blockquote><p>具体事例请参考 example 目录下的 chapterFour</p></blockquote><h2 id="六、模块热替换"><a href="#六、模块热替换" class="headerlink" title="六、模块热替换"></a>六、模块热替换</h2><h3 id="1-添加-webpack-自带的插件-NamedModulesPlugin-和-HotModuleReplacementPlugin"><a href="#1-添加-webpack-自带的插件-NamedModulesPlugin-和-HotModuleReplacementPlugin" class="headerlink" title="1. 添加 webpack 自带的插件 NamedModulesPlugin 和 HotModuleReplacementPlugin"></a>1. 添加 webpack 自带的插件 NamedModulesPlugin 和 HotModuleReplacementPlugin</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="attr">contentBase</span>: <span class="string">&#x27;./dist&#x27;</span>,</span><br><span class="line">  <span class="attr">hot</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> webpack.<span class="title class_">NamedModulesPlugin</span>(),</span><br><span class="line">  <span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>()</span><br><span class="line">],</span><br></pre></td></tr></table></figure><h3 id="2-修改-index-js-文件，监听该文件所引用的外部文件的更新状况"><a href="#2-修改-index-js-文件，监听该文件所引用的外部文件的更新状况" class="headerlink" title="2. 修改 index.js 文件，监听该文件所引用的外部文件的更新状况"></a>2. 修改 index.js 文件，监听该文件所引用的外部文件的更新状况</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./print.js&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Accepting the updated printMe module!&#x27;</span>);</span><br><span class="line">    <span class="title function_">printMe</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-css-等静态资源加载了相应的-loader，会自动更新"><a href="#3-css-等静态资源加载了相应的-loader，会自动更新" class="headerlink" title="3. css 等静态资源加载了相应的 loader，会自动更新"></a>3. css 等静态资源加载了相应的 loader，会自动更新</h3><h3 id="4-其他热更新-loader-或插件"><a href="#4-其他热更新-loader-或插件" class="headerlink" title="4.其他热更新 loader 或插件"></a>4.其他热更新 loader 或插件</h3><ul><li><p>React Hot Loader：实时调整 react 组件。</p></li><li><p>Vue Loader：此 loader 支持用于 vue 组件的 HMR，提供开箱即用体验。</p></li><li><p>Elm Hot Loader：支持用于 Elm 程序语言的 HMR。</p></li><li><p>Redux HMR：无需 loader 或插件！只需对 main store 文件进行简单的修改。</p></li><li><p>Angular HMR：没有必要使用 loader！只需对主要的 NgModule 文件进行简单的修改，由 HMR API 完全控制。</p></li></ul><h2 id="七、输出优化"><a href="#七、输出优化" class="headerlink" title="七、输出优化"></a>七、输出优化</h2><h3 id="1-移除-JavaScript-上下文中的未引用代码-dead-code"><a href="#1-移除-JavaScript-上下文中的未引用代码-dead-code" class="headerlink" title="1. 移除 JavaScript 上下文中的未引用代码(dead-code)"></a>1. 移除 JavaScript 上下文中的未引用代码(dead-code)</h3><p>package.json 文件设置 sideEffects 属性 </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;sideEffects&quot;</span>: [</span><br><span class="line">  <span class="string">&quot;./src/some-side-effectful-file.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;*.css&quot;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="2-压缩输出，设置编译模式为-production"><a href="#2-压缩输出，设置编译模式为-production" class="headerlink" title="2.压缩输出，设置编译模式为 production"></a>2.压缩输出，设置编译模式为 production</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">mode</span>: <span class="string">&quot;production&quot;</span></span><br></pre></td></tr></table></figure><h2 id="八、生产环境构建"><a href="#八、生产环境构建" class="headerlink" title="八、生产环境构建"></a>八、生产环境构建</h2><h3 id="1-构建目标比较"><a href="#1-构建目标比较" class="headerlink" title="1.构建目标比较"></a>1.构建目标比较</h3><p><strong>生产环境构建目标：</strong> 更小的 bundle、更轻量的 source map、更优化的资源、更短的加载时间</p><p><strong>开发环境构建目标：</strong> 强大的 source map 和具有热模块替换能力的 localhost server</p><h3 id="2-针对不同环境配置-webpack"><a href="#2-针对不同环境配置-webpack" class="headerlink" title="2.针对不同环境配置 webpack"></a>2.针对不同环境配置 webpack</h3><p>(1) 安装 webpack-merge：<code>npm install --save-dev webpack-merge</code></p><p>(2) 针对不同的环境创建对应的配置文件</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.common.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="title class_">CleanWebpackPlugin</span></span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">app</span>: <span class="string">&#x27;./src/index.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Production&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].bundle.js&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [&#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|svg|jpg|gif)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;file-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(woff|woff2|eot|ttf|otf)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;file-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(csv|tsv)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;csv-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.xml$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;xml-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.dev.js</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.common.js&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(common, &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&#x27;inline-source-map&#x27;</span>,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">contentBase</span>: <span class="string">&#x27;./dist&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">NamedModulesPlugin</span>(),</span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//webpack.prod.js</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UglifyJSPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;uglifyjs-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.common.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(common, &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">UglifyJSPlugin</span>(&#123;<span class="attr">sourceMap</span>: <span class="literal">true</span>&#125;) <span class="comment">// 不支持 es6 语法的压缩</span></span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>(3) 修改 NPM Script</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;start&quot;</span>: <span class="string">&quot;webpack-dev-server --open --config webpack.dev.js&quot;</span>,</span><br><span class="line"><span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --config webpack.prod.js&quot;</span></span><br></pre></td></tr></table></figure><h2 id="九、代码分离"><a href="#九、代码分离" class="headerlink" title="九、代码分离"></a>九、代码分离</h2><h3 id="1-针对多个文件指定对应的入口"><a href="#1-针对多个文件指定对应的入口" class="headerlink" title="1.针对多个文件指定对应的入口"></a>1.针对多个文件指定对应的入口</h3><h3 id="2-把多个地方引用的代码分离到一个文件中，防止重复引用"><a href="#2-把多个地方引用的代码分离到一个文件中，防止重复引用" class="headerlink" title="2.把多个地方引用的代码分离到一个文件中，防止重复引用"></a>2.把多个地方引用的代码分离到一个文件中，防止重复引用</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">  <span class="attr">runtimeChunk</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;manifest&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">    <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">      <span class="attr">commons</span>: &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;vendor&quot;</span>,</span><br><span class="line">        <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-动态导入"><a href="#3-动态导入" class="headerlink" title="3.动态导入"></a>3.动态导入</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// output 添加 chunkFilename 字段</span></span><br><span class="line"><span class="attr">chunkFilename</span>: <span class="string">&#x27;[name].bundle.js&#x27;</span>,</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.js 动态引入库，编译之后可以看到对应的 loadash-chunk</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> element = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  element.<span class="property">innerHTML</span> = _.<span class="title function_">join</span>([<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;webpack&#x27;</span>], <span class="string">&#x27; &#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getComponent</span>().<span class="title function_">then</span>(<span class="function"><span class="params">component</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(component);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github  + Travis 自动构建 Vue 项目到 Gitpage</title>
      <link href="/github-travis-auto-build-vue-to-gitpage/"/>
      <url>/github-travis-auto-build-vue-to-gitpage/</url>
      
        <content type="html"><![CDATA[<p>github + travis 自动构建 vue 项目到 gitpage</p><span id="more"></span><h3 id="一、设置-vue-config-js，my-project-对应的是-github-上的项目名称"><a href="#一、设置-vue-config-js，my-project-对应的是-github-上的项目名称" class="headerlink" title="一、设置 vue.config.js，my-project 对应的是 github 上的项目名称"></a>一、设置 vue.config.js，my-project 对应的是 github 上的项目名称</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">publicPath</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;/my-project/&quot;</span> : <span class="string">&quot;/&quot;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="二、创建脚本文件-deploy-sh"><a href="#二、创建脚本文件-deploy-sh" class="headerlink" title="二、创建脚本文件 deploy.sh"></a>二、创建脚本文件 deploy.sh</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># abort on errors</span></span><br><span class="line"><span class="built_in">set</span> -e</span><br><span class="line"></span><br><span class="line"><span class="comment"># build</span></span><br><span class="line">npm run build</span><br><span class="line"></span><br><span class="line"><span class="comment"># navigate into the build output directory</span></span><br><span class="line"><span class="built_in">cd</span> dist</span><br><span class="line"></span><br><span class="line"><span class="comment"># if you are deploying to a custom domain</span></span><br><span class="line"><span class="comment"># echo &#x27;www.example.com&#x27; &gt; CNAME</span></span><br><span class="line"></span><br><span class="line">git init</span><br><span class="line">git add -A</span><br><span class="line">git commit -m <span class="string">&#x27;deploy&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if you are deploying to https://&lt;USERNAME&gt;.github.io</span></span><br><span class="line"><span class="comment"># git push -f git@github.com:&lt;USERNAME&gt;/&lt;USERNAME&gt;.github.io.git master</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if you are deploying to https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;</span></span><br><span class="line"><span class="comment"># git push -f git@github.com:&lt;USERNAME&gt;/&lt;REPO&gt;.git master:gh-pages</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行： .\deploy.sh args</span></span><br></pre></td></tr></table></figure><h3 id="三、配置-travis，这方面的文章很多，自行搜索即可"><a href="#三、配置-travis，这方面的文章很多，自行搜索即可" class="headerlink" title="三、配置 travis，这方面的文章很多，自行搜索即可"></a>三、配置 travis，这方面的文章很多，自行搜索即可</h3><h3 id="四、创建-traivs-yml-文件"><a href="#四、创建-traivs-yml-文件" class="headerlink" title="四、创建 .traivs.yml 文件"></a>四、创建 .traivs.yml 文件</h3><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line"><span class="params">language:</span> node_js</span><br><span class="line"><span class="params">node_js:</span></span><br><span class="line"> <span class="operator">-</span> <span class="string">&quot;node&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="params">cache:</span> npm</span><br><span class="line"></span><br><span class="line"><span class="params">script:</span> npm run build</span><br><span class="line"></span><br><span class="line"><span class="params">deploy:</span></span><br><span class="line"> <span class="params">provider:</span> pages</span><br><span class="line"> <span class="params">skip_cleanup:</span> <span class="literal">true</span></span><br><span class="line"> <span class="params">github_token:</span> $GH_TOKEN</span><br><span class="line"> <span class="params">local_dir:</span> dist</span><br><span class="line"> <span class="params">on:</span></span><br><span class="line">   <span class="params">branch:</span> master</span><br></pre></td></tr></table></figure><h3 id="五、上传项目代码到-GitHub"><a href="#五、上传项目代码到-GitHub" class="headerlink" title="五、上传项目代码到 GitHub"></a>五、上传项目代码到 GitHub</h3>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>四个JS小技巧</title>
      <link href="/four-js-tips/"/>
      <url>/four-js-tips/</url>
      
        <content type="html"><![CDATA[<h2 id="一、尽早结束"><a href="#一、尽早结束" class="headerlink" title="一、尽早结束"></a>一、尽早结束</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">transformData</span>(<span class="params">rawData</span>) &#123;</span><br><span class="line">  <span class="comment">// check if no data</span></span><br><span class="line">  <span class="keyword">if</span> (!rawData) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// check for specific case</span></span><br><span class="line">  <span class="keyword">if</span> (rawData.<span class="property">length</span> == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// actual function code goes here</span></span><br><span class="line">  <span class="keyword">return</span> rawData.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这种写法的好处：</p><ul><li>考虑到了无效值和边界的情况，并且很好的规避了它们</li><li>代码简洁</li><li>后期维护起来比较方便</li><li>一旦接受了这种代码风格，你会更加重视发挥函数的作用并且对代码至上而下的执行过程会更加明了</li></ul><h2 id="二、使用对象而不是-switch"><a href="#二、使用对象而不是-switch" class="headerlink" title="二、使用对象而不是 switch"></a>二、使用对象而不是 switch</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Switch</span></span><br><span class="line"><span class="keyword">let</span> createType = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">switch</span> (contentType) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;post&#x27;</span>:</span><br><span class="line">    createType = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;creating a post...&#x27;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;video&#x27;</span>:</span><br><span class="line">    createType = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;creating a video...&#x27;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">    createType = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;unrecognized content type&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">createType</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Object literal</span></span><br><span class="line"><span class="keyword">const</span> contentTypes = &#123;</span><br><span class="line">  <span class="attr">post</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;creating a post...&#x27;</span>),</span><br><span class="line">  <span class="attr">video</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;creatinga  video...&#x27;</span>),</span><br><span class="line">  <span class="attr">default</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;unrecognized content type&#x27;</span>),</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> createType = contentTypes[contentType] || contentTypes[<span class="string">&#x27;default&#x27;</span>];</span><br><span class="line"><span class="title function_">createType</span>();</span><br></pre></td></tr></table></figure><p>这种写法的好处：</p><ul><li>不必担心没写 case 或者 break</li><li>简洁易懂</li><li>对象比 switch 代码块容易写</li><li>代码量更少</li></ul><h2 id="三、语义化变量，而不是使用-x-y-z-这些变量"><a href="#三、语义化变量，而不是使用-x-y-z-这些变量" class="headerlink" title="三、语义化变量，而不是使用 x, y, z 这些变量"></a>三、语义化变量，而不是使用 x, y, z 这些变量</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = y &amp;&amp; z;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> isPostEnabled = isPost &amp;&amp; postDateValid;</span><br></pre></td></tr></table></figure><h2 id="四、-尽量使用三元表达式代替简单的-if········else······"><a href="#四、-尽量使用三元表达式代替简单的-if········else······" class="headerlink" title="四、 尽量使用三元表达式代替简单的 if········else······"></a>四、 尽量使用三元表达式代替简单的 if········else······</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> result = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (conditionA) &#123;</span><br><span class="line">  <span class="keyword">if</span> (conditionB) &#123;</span><br><span class="line">    result = <span class="string">&#x27;A &amp; B&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  result = <span class="string">&#x27;Not A&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = !conditionA ? <span class="string">&#x27;Not A&#x27;</span> : conditionB ? <span class="string">&#x27;A &amp; B&#x27;</span> : <span class="string">&#x27;A&#x27;</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数组、对象的深拷贝</title>
      <link href="/deep-copy-of-arrays-and-objects/"/>
      <url>/deep-copy-of-arrays-and-objects/</url>
      
        <content type="html"><![CDATA[<h2 id="数组的深拷贝"><a href="#数组的深拷贝" class="headerlink" title="数组的深拷贝"></a>数组的深拷贝</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">copyObjectArray</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [...<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(x))];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// example 1</span></span><br><span class="line"><span class="keyword">const</span> test = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Amy&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> test1 = <span class="title function_">copyObjectArray</span>(test);</span><br><span class="line">test1[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;Jack&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test, test1);</span><br><span class="line"><span class="comment">// test: [ &#123; name: &#x27;Amy&#x27;, age: 18 &#125; ] test1: [ &#123; name: &#x27;Jack&#x27;, age: 18 &#125; ]</span></span><br></pre></td></tr></table></figure><h2 id="对象的深拷贝"><a href="#对象的深拷贝" class="headerlink" title="对象的深拷贝"></a>对象的深拷贝</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">copyObject</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(x)),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// example 2</span></span><br><span class="line"><span class="keyword">const</span> test2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: [<span class="string">&#x27;jack&#x27;</span>, <span class="string">&#x27;sarah&#x27;</span>, <span class="string">&#x27;ray&#x27;</span>],</span><br><span class="line">&#125;;</span><br><span class="line">test3 = <span class="title function_">copyObject</span>(test2);</span><br><span class="line">test3.<span class="property">name</span>[<span class="number">0</span>] = <span class="string">&#x27;小红&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test2, test3);</span><br><span class="line"><span class="comment">// test2: &#123; name: [ &#x27;jack&#x27;, &#x27;sarah&#x27;, &#x27;ray&#x27; ] &#125; test3：&#123; name: [ &#x27;小红&#x27;, &#x27;sarah&#x27;, &#x27;ray&#x27; ] &#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对象属性值监听</title>
      <link href="/object-property-value-monitoring/"/>
      <url>/object-property-value-monitoring/</url>
      
        <content type="html"><![CDATA[<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;hello world!&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">definePropertyData</span>(<span class="params">obj, prop, value</span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, prop, &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>);</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">      value = newValue;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">definePropertyData</span>(data, <span class="string">&#x27;title&#x27;</span>, data.<span class="property">title</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">title</span>); <span class="comment">// 111 hello world!</span></span><br><span class="line">data.<span class="property">title</span> = <span class="number">38</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">title</span>); <span class="comment">// 111 38</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代码优化</title>
      <link href="/code-optimization/"/>
      <url>/code-optimization/</url>
      
        <content type="html"><![CDATA[<h2 id="用-vue-进行前端开发，怎么做到函数式编程呢？"><a href="#用-vue-进行前端开发，怎么做到函数式编程呢？" class="headerlink" title="用 vue 进行前端开发，怎么做到函数式编程呢？"></a>用 vue 进行前端开发，怎么做到函数式编程呢？</h2><p>每次做完项目，都会发现自己在代码的解耦，接口的封装方面做的还不够，后期必定会多次进行优化，在优化的过程中，就想到，如何把零散的代码，编程整体性更强的代码，使人一看到就知道手脚在哪里。在这里我的总结是，按功能点进行函数的封装，一个大点是一个函数，这个大点里面又有很多小点，可以把函数赋值给变量，进行使用，这样就不用每次都跳来跳去了，维护起来也更方便快捷。</p><p>vue-cli3 中静态文件怎么处理？<br>用 vue-cli2 的人习惯把静态文件放 static 或者 asset 里，放 asset 里，会被打包，不推荐，但是 vue-cli3 没有 static 文件，怎么办呢？我的答案是，放在 public 目录下，因为这个文件是不会被打包压缩的，一定程度上可以提高编译效率</p><h2 id="代码抽离"><a href="#代码抽离" class="headerlink" title="代码抽离"></a>代码抽离</h2><p>把通用功能抽离到 utils 目录，把通用 api 进行二次封装，放到 api 文件里，以 export 的方式导出，需要的时候再引入，会使代码看起来简洁很多，也简化了对应页面的代码量，维护起来更是得心应手了，至于性能方面，对首屏加载速度还是有一定提高效果的。</p><p>组件抽离，核心思想，只抽离 ui，业务逻辑还是在引用处</p><p>多个 vue 组件引用同一个组件，且相似度高的，用 render 进行合并，并更新数据</p><h2 id="html"><a href="#html" class="headerlink" title="html"></a>html</h2><p>尽量的减少页面的节点，可以优化网页的加载速度，所以应该考虑的思路是以最少的节点，写最多的页面。同时避免过多的操作 DOM，尽量以数据驱动页面。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>时间戳转日期</title>
      <link href="/timestamp-to-date/"/>
      <url>/timestamp-to-date/</url>
      
        <content type="html"><![CDATA[<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">timeStampFormat</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(+x * <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">const</span> [m, d] = [date.<span class="title function_">getMonth</span>() + <span class="number">1</span>, date.<span class="title function_">getDate</span>()];</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;m&#125;</span>-<span class="subst">$&#123;d&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> day = <span class="title function_">timeStampFormat</span>(<span class="number">1560751917</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(day);</span><br></pre></td></tr></table></figure><h2 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h2><p>因为 js 的时间是按毫秒算的，这里要转成秒，所以要乘以一个 1000，之后就可以调用 js 内置对象中的 Date 获取对应的日期了，年份及其他，类似。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS3 动画 vs Js 动画</title>
      <link href="/css3-animation-vs-js-animation/"/>
      <url>/css3-animation-vs-js-animation/</url>
      
        <content type="html"><![CDATA[<p>之前被问到过，css3 动画与 js 动画孰优孰劣，脑袋的第一反应就是性能上肯定 css3 动画会好很多，但别人说不对，我就在想，不对？难道还有别的原因吗？答案是肯定的。先来看看二者实现动画的原理吧。</p><span id="more"></span><h2 id="css3-动画原理"><a href="#css3-动画原理" class="headerlink" title="css3 动画原理"></a>css3 动画原理</h2><p>css3 动画本质上是一直视觉上的动画，并未去触碰 DOM，换句话说，用 css3 实现的动画，原来的 DOM 的位置是不曾被改变的。</p><h2 id="js-动画原理"><a href="#js-动画原理" class="headerlink" title="js 动画原理"></a>js 动画原理</h2><p>js 动画是通过控制 DOM 的位置，来达到动的效果，是 DOM 一点点位移的结果，每一次的位移都要等待上一次的位移结束，而且因为频繁的操作 DOM，会带来频繁的重绘，所以会出现卡顿的现象。</p><h2 id="孰优孰劣？"><a href="#孰优孰劣？" class="headerlink" title="孰优孰劣？"></a>孰优孰劣？</h2><p>通过上面的分析，我们知道 css3 相比 js 实现的动画，会更流畅。我们还知道，过多的 js 脚本，页面的加载速度会受到影响，所以这在一定程度上肯定会影响到页面的性能。因此，推荐使用 css3 动画，而不建议使用 js 动画。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>滚动翻页</title>
      <link href="/scroll-pagination/"/>
      <url>/scroll-pagination/</url>
      
        <content type="html"><![CDATA[<h5 id="一、-功能描述"><a href="#一、-功能描述" class="headerlink" title="一、 功能描述"></a>一、 功能描述</h5><p>有一个 list，长度不确定，显示区域只能容纳四条数据，往下滚动显示当前四条数据的前四条，往下滚动则显示当前数据的后四条。除了滚动切换数据之外，还能通过上下翻页键切换数据，切换数据的交互需要跟滚动效果一样。</p><h5 id="二、思路"><a href="#二、思路" class="headerlink" title="二、思路"></a>二、思路</h5><p>说到分页，首先想到的肯定是切割 list，因为只能容纳四条数据，就把 list 切割成 4 条每组的多个 list，每次只需要显示相应的子 list 就行了。因为要有滚动的交互效果，所以考虑的 html 结构是父级元素滚动，超出部分隐藏，子元素由多个 list 组成的块构成相应的 dom。既然是滚动翻页，肯定不希望出现滚动条，所以要考虑不同浏览器隐藏滚动条的方案。</p><h5 id="三、实现"><a href="#三、实现" class="headerlink" title="三、实现"></a>三、实现</h5><p><strong>html 结构：</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;audioContainer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;`$&#123;baseUrl&#125;img/last.png`&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;lastPageShow&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;jump(0)&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;audioWrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;audioGroup&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(value, num) in audioGroupPage&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;num&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in audioGroup.slice(4*num, 4*(num+1))&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;spellAudio&#x27;, item.tone, item.letter)&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ruby</span>&gt;</span>&#123;&#123;item.text&#125;&#125;<span class="tag">&lt;/<span class="name">ruby</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;`$&#123;baseUrl&#125;img/next.png`&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;nextPageShow&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;jump(1)&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>功能函数：</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="comment">// 监听 list 的长度，如果超出可容纳数据的长度，显示下一页按钮</span></span><br><span class="line">    <span class="title function_">audioGroup</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      val.<span class="property">length</span> &gt; <span class="number">4</span> ? (<span class="variable language_">this</span>.<span class="property">nextPageShow</span> = <span class="literal">true</span>) : (<span class="variable language_">this</span>.<span class="property">nextPageShow</span> = <span class="literal">false</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">top</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="comment">// 监听滚动的高度，如果小于 0，则上一页按钮隐藏</span></span><br><span class="line">      <span class="keyword">if</span> (val &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lastPageShow</span> = <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="comment">// 监听滚动的高度，如果大于所有 list 子元素构成的dom的高度，则下一页按钮隐藏，否则显示</span></span><br><span class="line">      <span class="keyword">if</span> (val &gt;= (<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">audioGroup</span>.<span class="property">length</span> / <span class="number">4</span>) - <span class="number">1</span>) * <span class="number">204</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">nextPageShow</span> = <span class="literal">false</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">nextPageShow</span> = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">// list 分页</span></span><br><span class="line">    <span class="title function_">audioGroupPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">audioGroup</span>.<span class="property">length</span> / <span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">// 上下翻页</span></span><br><span class="line">    <span class="title function_">jump</span>(<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;audioWrap&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">switch</span> (val) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">lastPageShow</span> = <span class="literal">true</span>;</span><br><span class="line">          el.<span class="property">top</span> = el.<span class="property">scrollTop</span> + <span class="number">204</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">top</span> = el.<span class="property">scrollTop</span> + <span class="number">204</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">          el.<span class="property">top</span> = el.<span class="property">scrollTop</span> - <span class="number">204</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">top</span> = el.<span class="property">scrollTop</span> - <span class="number">204</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h5 id="三、其他"><a href="#三、其他" class="headerlink" title="三、其他"></a>三、其他</h5><p>实现了之后肯定很丑，因为有滚动条，如何隐藏呢？如下:</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* webkit 内核浏览器 */</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* firfox浏览器 */</span></span><br><span class="line"><span class="selector-class">.audioWrap</span> &#123;</span><br><span class="line">  <span class="attribute">scrollbar-width</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日语学习笔记</title>
      <link href="/japanese-learning-notes/"/>
      <url>/japanese-learning-notes/</url>
      
        <content type="html"><![CDATA[<h3 id="一、日语关于介绍的基本句型"><a href="#一、日语关于介绍的基本句型" class="headerlink" title="一、日语关于介绍的基本句型"></a>一、日语关于介绍的基本句型</h3><ol><li><p>n + は + n + です　<strong>……是……</strong></p></li><li><p>n + は + n + じや　あぃません <strong>……不是……</strong></p></li><li><p>n + は + n + ですか <strong>……是……吗？</strong></p></li><li><p>n + の + n <strong>…的….</strong></p></li><li><p>n + も + n + です <strong>….也是…..</strong></p></li><li><p>n + は + n + 歳です <strong>….岁</strong></p></li><li><p>n + から 来まぃた <strong>来自….(国家、地区)</strong></p></li><li><p>どうぞ　よるしく　お願いします <strong>请多多指教</strong></p></li><li><p>お名前は？ <strong>你的名字叫什么</strong></p></li><li><p>こちらは + n + さんです <strong>这是…</strong></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KNN算法</title>
      <link href="/knn-algorithm/"/>
      <url>/knn-algorithm/</url>
      
        <content type="html"><![CDATA[<h2 id="KNN-算法是做什么的"><a href="#KNN-算法是做什么的" class="headerlink" title="KNN 算法是做什么的"></a>KNN 算法是做什么的</h2><p>KNN 算法， 即 K 最邻近算法，通过对比与临近事物的相似度，可以对具有特征的事物进行分类，也可以根据这些分类，预测下一步的结果。</p><h2 id="KNN-算法步骤"><a href="#KNN-算法步骤" class="headerlink" title="KNN 算法步骤"></a>KNN 算法步骤</h2><p>KNN 算法主要分为三步：</p><h3 id="一、准备"><a href="#一、准备" class="headerlink" title="一、准备"></a>一、准备</h3><p>找出邻近值，这个邻近值 k 可以是任意数，1， 1000 甚至 10000 都可以。</p><h3 id="二、分类"><a href="#二、分类" class="headerlink" title="二、分类"></a>二、分类</h3><p>用毕达哥拉斯公式算出该对象与邻近值的相似度（该对象与邻近值得距离），并将该对象归到相似度最高的那一个近邻类里。</p><h3 id="三、回归"><a href="#三、回归" class="headerlink" title="三、回归"></a>三、回归</h3><p>重新找到该对象的近邻，算出这些近邻各特征的平均值，形成新的特征组合，即新的对象，这个对象就是预估的结果，也就是通常所说的预测值。</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="KNN-算法的实现"><a href="#KNN-算法的实现" class="headerlink" title="KNN 算法的实现"></a>KNN 算法的实现</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 已知所有特征集合，第一个特征为颜色，第二个特征为所属类别</span></span><br><span class="line">L = &#123;<span class="string">&#x27;orange&#x27;</span> : [<span class="number">1</span>, <span class="number">0</span>], <span class="string">&#x27;apple&#x27;</span>: [<span class="number">2</span>, <span class="number">0</span>], <span class="string">&#x27;flower&#x27;</span>: [<span class="number">1</span>, <span class="number">1</span>], <span class="string">&#x27;fish&#x27;</span>: [<span class="number">5</span>, <span class="number">5</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 未知物体</span></span><br><span class="line">test = [<span class="number">1.1</span>, <span class="number">0</span>]</span><br><span class="line"><span class="comment"># 所有的相似度集合</span></span><br><span class="line">results = []</span><br><span class="line"><span class="comment"># 已知所有水果的集合</span></span><br><span class="line">items = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> L:</span><br><span class="line">    x = L[item][<span class="number">0</span>] - test[<span class="number">0</span>]</span><br><span class="line">    y = L[item][<span class="number">1</span>] - test[<span class="number">1</span>]</span><br><span class="line">    instance = x ** <span class="number">2</span> + y ** <span class="number">2</span></span><br><span class="line">    results.append(instance ** <span class="number">0.5</span>)</span><br><span class="line">    items.append(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最大相似度</span></span><br><span class="line">minValue = <span class="built_in">min</span>(results)</span><br><span class="line"><span class="comment"># 物体名称</span></span><br><span class="line">result = items[results.index(minValue)]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(minValue, result)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Table-Cell等分</title>
      <link href="/table-cell-equal-division/"/>
      <url>/table-cell-equal-division/</url>
      
        <content type="html"><![CDATA[<p>table 里面的元素等分，是经常遇到的需求，一般都会想所有宽度设为相同的应该就等分了，但是然并卵，今天就遇到了这种坑，就算设了宽度一致，还是没有等分，场景是这样的，一个 tr 里面第一个 th 的宽度跟其他不一样，table 宽度为 100%，最后实现等分的方法如下：</p><span id="more"></span><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">  <span class="selector-tag">table</span>-layout: fixed;</span><br><span class="line">  <span class="selector-tag">th</span>,</span><br><span class="line">  <span class="selector-tag">td</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> <span class="number">#d9d9d9</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f7f9fa</span>;</span><br><span class="line">    <span class="selector-tag">text</span>-align: center;</span><br><span class="line">    <span class="attribute">display</span>: table-cell;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">2%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>从上面的例子不难看出，实现等分的秘诀就在于设置了 <code>display: table; table-layout: fixed;</code> 和 <code>display: table-cell; width: 2%;</code></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux后台执行脚本</title>
      <link href="/linux-background-script-execution/"/>
      <url>/linux-background-script-execution/</url>
      
        <content type="html"><![CDATA[<p>最近在弄自己的 OA 系统，需要把 api 处理脚本部署到 linux 服务器上，在配置好环境，在服务器上成功运行代码后，发现一个问题，当我退出命令窗口时，程序就没在执行了，这没有达到永久可以连接 api 的目的，google 了一下之后，了解到要让程序永久运行，可以让程序在后台执行，主要的方法有 nohub、screen、开机启动等，其中 nohub 在关闭命令窗口之时，会关掉程序，去除，开机启动要修改系统配置，个人不太喜欢用这种方法，剩下 screen 了，它是可以让不同的程序在不同的命令窗口中执行，有屏幕分离的模式，会给每个屏幕创建不同的进程，只要不杀死进程，即使离开当前命令窗口，也不会停止程序的运行，所以使用 screen 是最好的方案了。</p><span id="more"></span><p>screen 的用法：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建并跳转到一个窗口</span></span><br><span class="line">screen -S name</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">执行程序</span></span><br><span class="line">python test.py</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">退出当前窗口</span></span><br><span class="line">ctrl a d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>拼音学习项目笔记</title>
      <link href="/pinyin-learning-project-notes/"/>
      <url>/pinyin-learning-project-notes/</url>
      
        <content type="html"><![CDATA[<ol><li><p>关于数据更新机制</p><p>（1）v-if 关闭组件的时候，会销毁数据，可以用于实现返回父组件关闭音频等媒体，如果只是界面的开关的话，用 v-show 即可</p><p>（2）离开子组件后，父组件所传递的数据需要清空，切记不要在网络请求里做清空操作，因为网络请求是有延迟的，一般放在打开子组件的事件里执行清空操作</p></li><li><p>关于 audio</p><p>对于不同格式的音频，audio 的播放机制不一样，对于 base64 等流媒体，audio 采用边下边播的机制，对于 MP3 等非流媒体，audio 采用下载完之后再播放的机制，所以为了播放效果更好，防止出现等待状况，最好把音频转换为流媒体的形式，下面是我写的一个 MP3 转 base64 的示例：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">mp3ToBase64</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;voiceM&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> temp = &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot; audio/mpeg3&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">responseType</span>: <span class="string">&quot;arraybuffer&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line">  http.<span class="title function_">get</span>(url, <span class="string">&quot;&quot;</span>, temp).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> val = <span class="keyword">new</span> <span class="title class_">Buffer</span>(res.<span class="property">data</span>, <span class="string">&quot;binary&quot;</span>).<span class="title function_">toString</span>(<span class="string">&quot;base64&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> audioUrl = <span class="string">`data:<span class="subst">$&#123;res.headers[</span></span></span><br><span class="line"><span class="subst"><span class="string">      <span class="string">&quot;content-type&quot;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">    ].toLowerCase()&#125;</span>;base64,<span class="subst">$&#123;val&#125;</span>`</span>;</span><br><span class="line">    el.<span class="property">src</span> = audioUrl;</span><br><span class="line">    el.<span class="title function_">play</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>分页算法</title>
      <link href="/pagination-algorithm/"/>
      <url>/pagination-algorithm/</url>
      
        <content type="html"><![CDATA[<p>分页是一种比较常见的功能，分页的原理其实也很简单，首先要知道没有需要展示的项目数量 pageSize，然后还得知道当前所在的页数 currentPage, 设所有的 item 都在一个数组 array 里，每页需要展示 5 个 item，那么当 currentPage &#x3D; 1 时，第一页要展示的所有 item 为 array.slice(0, 4), 第二页要展示的 item 为 array.slice(5, 9), 以此类推，那么第 n（n &gt;&#x3D; 0) 页需要展示的 item 应该为：array.slice(5n, 5n+4)，推而广之，基本数字的分页公式就出来了：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">currentArray = array.<span class="title function_">slice</span>(pageSize * (currentPage - <span class="number">1</span>), pageSize * <span class="number">2</span>(currentPage - <span class="number">1</span>) - <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>除了基本的数字分页，我们还经常看到上一页，下一页，这种怎么实现呢？上一页就是 currentPage - 1， 那么下一页就是 currentPage + 1，吧这两个分别带入上述公式，我们就得到了上一页，下一页的公式了：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 上一页</span></span><br><span class="line">currentArray = array.<span class="title function_">slice</span>(pageSize * (currentPage - <span class="number">2</span>), pageSize * <span class="number">2</span>(currentPage - <span class="number">2</span>) -<span class="number">1</span>)</span><br><span class="line"><span class="comment">// 下一页</span></span><br><span class="line">currentArray = array.<span class="title function_">slice</span>(pageSize * currentPage, pageSize * 2currentPage -<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>分页中还常常看到跳转页面的功能，所要跳转的数字就是我们选择的页数，因此跟第一种同理，用第一个公式即可。</p><p>除此之外，在选择下一页的时候，页面的数字组合会往右偏移，选择上一页的时候，页面的数字组合往左偏移，实现的方法也很简单</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设当前页面数字组合为数组 nums，</span></span><br><span class="line"><span class="comment">// nums 初始化为 [1, 2, 3, 4, 5]，</span></span><br><span class="line"><span class="comment">// 那么选择上一页时，</span></span><br><span class="line">nums = nums.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> item++;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 选择下一页时</span></span><br><span class="line">nums = nums.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> item--;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>实现了上面的页面数字组合更新之后，还有一个问题，当点击最后一页，和最开始一页时，页面数字组合应该是不被更新的，优化一下上面的算法：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设当前页面数字组合为数组 nums，</span></span><br><span class="line"><span class="comment">// nums 初始化为 [1, 2, 3, 4, 5]，</span></span><br><span class="line"><span class="comment">// 那么选择上一页时，</span></span><br><span class="line">nums = nums.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (item !== <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> item++;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 选择下一页时</span></span><br><span class="line">nums = nums.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (item !== totalPage.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> item--;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>至此，我自己总结的分页算法就讲解完啦。</p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS2 下块级元素垂直水平居中</title>
      <link href="/css2-block-element-center/"/>
      <url>/css2-block-element-center/</url>
      
        <content type="html"><![CDATA[<p>前几天有人问我给定一个这样的结构：div &#x3D;&gt; div，如何让里面的元素水平垂直居中？给出 css2 代码。这对于一直用 css3 布局方式的我来说，一时还有点蒙蔽，只知道左右居中一般用 margin：0 auto，至于垂直居中，还真没用 css2 实现过。于是动手实践，发现以下的方式而已完美达到想要的效果。</p><span id="more"></span><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">background</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个方法的一个要点是运用 position：absolute，使里面的块级元素始终相对于父元素定位，由水平居中 margin: 0 auto，可以类推上下左右都居中的话，应该 margin 都为 auto 可以达到想要的效果，至于四个方向大的定位都为 0，是为了防止位置偏移。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7 安装 MySQL</title>
      <link href="/MySQL/"/>
      <url>/MySQL/</url>
      
        <content type="html"><![CDATA[<p>centos7 安装 MySQL</p><span id="more"></span><h3 id="系统环境"><a href="#系统环境" class="headerlink" title="系统环境"></a>系统环境</h3><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">centOS7</span> <span class="number">64</span>位</span><br></pre></td></tr></table></figure><h3 id="部署过程"><a href="#部署过程" class="headerlink" title="部署过程"></a>部署过程</h3><ol><li><p>添加 mysql yum 源：</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">rpm -Uvh https:<span class="regexp">//</span>repo.mysql.com<span class="regexp">//my</span>sql80-community-release-el7-<span class="number">2</span>.noarch.rpm</span><br></pre></td></tr></table></figure></li><li><p>查看 yum 源中所有 Mysql 版本：</p><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">yum repolist <span class="keyword">all</span> | <span class="keyword">grep</span> mysql</span><br></pre></td></tr></table></figure></li><li><p>禁用其他版本：</p><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">yum-<span class="built_in">config</span>-manager <span class="comment">--disable mysql80-community</span></span><br></pre></td></tr></table></figure></li><li><p>启用要安装的版本 mysql5.7</p><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">yum-<span class="built_in">config</span>-manager <span class="comment">--enable mysql57-community</span></span><br></pre></td></tr></table></figure></li><li><p>检查配置是否生效</p><figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line">yum repolist enabled <span class="string">| grep mysql</span></span><br></pre></td></tr></table></figure></li><li><p>开始安装:</p><figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">yum install mysql-community-<span class="keyword">server</span></span><br></pre></td></tr></table></figure></li><li><p>启动服务：</p><figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">service mysqld <span class="literal">start</span></span><br></pre></td></tr></table></figure></li><li><p>查看 mysql 状态:</p><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">service mysqld status</span></span><br></pre></td></tr></table></figure></li><li><p>查看临时密码：</p><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">grep <span class="string">&#x27;temporary password&#x27;</span> /<span class="keyword">var</span>/<span class="built_in">log</span>/mysqld.<span class="built_in">log</span></span><br></pre></td></tr></table></figure></li><li><p>登录</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql -uroot -<span class="selector-tag">p</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> API&amp;服务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一键生成响应式表格</title>
      <link href="/one-click-generate-responsive-table/"/>
      <url>/one-click-generate-responsive-table/</url>
      
        <content type="html"><![CDATA[<p>这是一个一键生成响应式表格的方案。</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">table-layout</span>: fixed;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5%</span> <span class="number">0</span>;</span><br><span class="line">  <span class="selector-tag">td</span>&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">thead</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#cce5ff</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">table</span>-bordered &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.table-bordered</span> &#123;</span><br><span class="line">  <span class="selector-tag">th</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#e4efff</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">td</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#e4efff</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">thead</span> &#123;</span><br><span class="line">    <span class="selector-tag">th</span> &#123;</span><br><span class="line">      <span class="attribute">border-bottom</span>: <span class="number">1px</span>;</span><br><span class="line">      <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">      <span class="attribute">height</span>: auto;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">td</span> &#123;</span><br><span class="line">      <span class="attribute">border-bottom</span>: <span class="number">1px</span>;</span><br><span class="line">      <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">      <span class="attribute">height</span>: auto;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span> <span class="attr">style</span>=<span class="string">&quot;width: 40%;&quot;</span>&gt;</span>题型<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>题量<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>分值<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>  &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;chapter.name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;chapter.questionCount&#125;&#125; 题<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;chapter.presetScore&#125;&#125;分<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网页或Html元素在浏览器上全屏解决方案</title>
      <link href="/fullscreen-solution-for-webpage-or-html-elements/"/>
      <url>/fullscreen-solution-for-webpage-or-html-elements/</url>
      
        <content type="html"><![CDATA[<ol><li><p><strong>全屏是什么</strong>：</p><p>个人理解，全屏指的是去掉浏览器的导航栏，浏览器的全部空间被页面所占有，网页即 html 文档，网页全屏即 dom 全屏</p></li><li><p>不同的浏览器又不同的全屏事件可以调用，但是不同浏览器的全屏事件并不一致，因为还没被写入规范中，所以需要判断在特定的浏览器下，哪个事件可以用，以下是全屏事件的封装：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// el 是需要全屏的 dom</span></span><br><span class="line"><span class="title function_">requestFullscreen</span>(<span class="attr">el</span>: <span class="title class_">Element</span>): <span class="keyword">void</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (el.<span class="property">requestFullscreen</span>) &#123;</span><br><span class="line">    el.<span class="title function_">requestFullscreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.<span class="property">mozRequestFullScreen</span>) &#123;</span><br><span class="line">    el.<span class="title function_">mozRequestFullScreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.<span class="property">webkitRequestFullscreen</span>) &#123;</span><br><span class="line">    el.<span class="title function_">webkitRequestFullscreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.<span class="property">msRequestFullscreen</span>) &#123;</span><br><span class="line">    el.<span class="title function_">msRequestFullscreen</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>网页全屏之后，还需要退出全屏，退出全屏的方式有多种，比如按 esc 键退出全屏，点击全屏按钮退出全屏等，其中按 esc 退出全屏，一般的浏览器在打开了全屏之后，都可以进行这个操作，不需要人工另外操作。点击按钮退出全屏，需要调用到关闭全屏的事件，同样，在不同的浏览器有不同的实现，需要一一进行判断，封装的事件如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// document 即 html 文档，不需要改变</span></span><br><span class="line"><span class="title function_">exitFullscreen</span>(): <span class="keyword">void</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">exitFullscreen</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">exitFullscreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">mozCancelFullScreen</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">mozCancelFullScreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">webkitExitFullscreen</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">webkitExitFullscreen</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">msExitFullscreen</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">msExitFullscreen</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>如何判断是否处于全屏状态？</strong></p><p>要判断是否处于全屏的状态，需要调用到相关的浏览器事件，在不同的浏览器，实现方式也不尽相同，因此同样需要判断，封装的代码如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 判断全屏元素是否存在，并返回相应的项</span></span><br><span class="line"><span class="title function_">fullscreenElement</span>(): <span class="title class_">Element</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">fullscreenElement</span> ||</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">webkitFullscreenElement</span> ||</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">msFullscreenElement</span> ||</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">mozFullScreenElement</span> ||</span><br><span class="line">    <span class="literal">null</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 判断是否处于全屏状态</span></span><br><span class="line"><span class="title function_">isFullScreen</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> !!(<span class="variable language_">document</span>.<span class="property">webkitIsFullScreen</span> || <span class="variable language_">this</span>.<span class="title function_">fullscreenElement</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Key 值在 Vue 组件中的作用</title>
      <link href="/key-value-role-in-vue-components/"/>
      <url>/key-value-role-in-vue-components/</url>
      
        <content type="html"><![CDATA[<p>key 值在 vue 组件的作用</p><span id="more"></span><ol><li><p>key 值在 vue 组件中的作用：</p><p>高效利用 dom</p></li><li><p>分析：</p><p>vue 生成 dom 的过程大致是：model -&gt; vn -&gt; diff -&gt; patch -&gt; dom， 这里在生成真实 dom 之前会先生成虚拟 dom，每次 dom 的改变不是直接生成新的 dom 的，因为每次改变都重新生成新的 dom，效率太低，消耗太大。在每次改变 dom 之时，会经历以下过程，diff 函数对比新旧 vn，包括属性值等，确认哪一项变了，则生成一个新的 patch，将改变的项目插入到 dom 中。</p><p>在执行 diff 函数之时，会判断 key 值是否存在，若存在，则采用 map 映射的方式，查找相应的 vn，若不存在则会一个个去遍历 vn，直到找到相应的改变项，由于直接遍历的速度比 map 映射查找的速度慢，所以在最好在 vue dom 中加上 key 值。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端绘制图形验证码</title>
      <link href="/frontend-draw-graphic-captcha/"/>
      <url>/frontend-draw-graphic-captcha/</url>
      
        <content type="html"><![CDATA[<p>摘要：<br>本文主要实现了一下功能：1、图形验证码由验证码、干扰线、干扰点组合而成；2、验证码由数字和字母随机组合形成；3、每次切换验证码，验证码字体颜色和背景颜色变化</p><p>一、实现思路</p><ol><li><p>生成一个随机色，用于切换验证码时控制字体颜色和背景颜色</p></li><li><p>生成一个随机数，用于改变颜色的 rgb 值和绘制干扰线与干扰点</p></li><li><p>生成一个由数字和字母组合而成的随机码</p></li><li><p>将随机数、干扰线、干扰点绘制在 canvas 画布上</p></li><li><p>由于图形验证码是会刷新的，所以下一次刷新的时候要确保画布是空的，才不会出现上一次绘制的图形，因此，要在绘制图形之前，清空画布</p></li><li><p>验证：通过对比输入的值和生成的随机码，验证是否输入正确</p></li></ol><p>二、示例</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> code;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成一个随机色</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">randomColor</span>(<span class="params">min, max</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> r = <span class="title function_">randomNum</span>(min, max);</span><br><span class="line">  <span class="keyword">let</span> g = <span class="title function_">randomNum</span>(min, max);</span><br><span class="line">  <span class="keyword">let</span> b = <span class="title function_">randomNum</span>(min, max);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;rgb(&quot;</span> + r + <span class="string">&quot;,&quot;</span> + g + <span class="string">&quot;,&quot;</span> + b + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成一个随机数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">randomNum</span>(<span class="params">min, max</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min) + min);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 生成随机码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createCode</span>(<span class="params"></span>) &#123;</span><br><span class="line">  code = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="comment">//验证码的长度</span></span><br><span class="line">  <span class="keyword">let</span> codeLength = <span class="number">4</span>;</span><br><span class="line">  <span class="keyword">const</span> checkCode = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myCanvas&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> codeChars = [];</span><br><span class="line">  <span class="comment">// 验证码所需数字和字母的集合</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">      codeChars.<span class="title function_">push</span>(<span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(i + <span class="number">48</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    codeChars.<span class="title function_">push</span>(<span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(i + <span class="number">97</span>));</span><br><span class="line">    codeChars.<span class="title function_">push</span>(<span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(i + <span class="number">65</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 组合数字和字母</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; codeLength; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> charNum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">52</span>);</span><br><span class="line">    code += codeChars[charNum];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (checkCode) &#123;</span><br><span class="line">    <span class="title function_">drawVerify</span>(checkCode, code);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制验证码图形</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drawVerify</span>(<span class="params">cEle, value</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [ctx, width, height] = [cEle.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>), cEle.<span class="property">width</span>, cEle.<span class="property">height</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 清空画布</span></span><br><span class="line">  ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">  <span class="comment">// 绘制背景色</span></span><br><span class="line">  ctx.<span class="property">fillStyle</span> = <span class="title function_">randomColor</span>(<span class="number">180</span>, <span class="number">240</span>);</span><br><span class="line">  ctx.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">  <span class="comment">// 填充字体</span></span><br><span class="line">  ctx.<span class="property">font</span> = <span class="string">&quot;30px Arial&quot;</span>;</span><br><span class="line">  ctx.<span class="property">fillStyle</span> = <span class="title function_">randomColor</span>(<span class="number">50</span>, <span class="number">160</span>);</span><br><span class="line">  ctx.<span class="title function_">fillText</span>(value, <span class="number">20</span>, <span class="number">40</span>);</span><br><span class="line">  <span class="comment">// 绘制干扰线</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">    ctx.<span class="property">strokeStyle</span> = <span class="title function_">randomColor</span>(<span class="number">40</span>, <span class="number">180</span>);</span><br><span class="line">    ctx.<span class="title function_">beginPath</span>();</span><br><span class="line">    ctx.<span class="title function_">moveTo</span>(<span class="title function_">randomNum</span>(<span class="number">0</span>, width), <span class="title function_">randomNum</span>(<span class="number">0</span>, height));</span><br><span class="line">    ctx.<span class="title function_">lineTo</span>(<span class="title function_">randomNum</span>(<span class="number">0</span>, width), <span class="title function_">randomNum</span>(<span class="number">0</span>, height));</span><br><span class="line">    ctx.<span class="title function_">stroke</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 绘制干扰点</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">    ctx.<span class="property">fillStyle</span> = <span class="title function_">randomColor</span>(<span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line">    ctx.<span class="title function_">beginPath</span>();</span><br><span class="line">    ctx.<span class="title function_">arc</span>(<span class="title function_">randomNum</span>(<span class="number">0</span>, width), <span class="title function_">randomNum</span>(<span class="number">0</span>, height), <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line">    ctx.<span class="title function_">fill</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 验证</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">validateCode</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [inputCode, warnToast] = [</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;inputCode&quot;</span>).<span class="property">value</span>,</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;warnToast&quot;</span>)</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (inputCode.<span class="property">length</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    warnToast.<span class="property">innerHTML</span> = <span class="string">&quot;请输入验证码！&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (inputCode.<span class="title function_">toUpperCase</span>() != code.<span class="title function_">toUpperCase</span>()) &#123;</span><br><span class="line">    warnToast.<span class="property">innerHTML</span> = <span class="string">&quot;验证码错误&quot;</span>;</span><br><span class="line">    <span class="title function_">createCode</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    warnToast.<span class="property">innerHTML</span> = <span class="string">&quot;验证码正确！&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>火狐删除各种虚线框</title>
      <link href="/firefox-remove-various-dashed-borders/"/>
      <url>/firefox-remove-various-dashed-borders/</url>
      
        <content type="html"><![CDATA[<ol><li><p>删除按钮虚线框</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!-- 火狐浏览器，去除按钮虚线框 -- &gt; </span><br><span class="line"><span class="selector-tag">button</span>::-moz-focus-inner,</span><br><span class="line">input[type=<span class="string">&#x27;reset&#x27;</span>]::-moz-focus-inner,</span><br><span class="line">input[type=<span class="string">&#x27;button&#x27;</span>]::-moz-focus-inner,</span><br><span class="line">input[type=<span class="string">&#x27;submit&#x27;</span>]::-moz-focus-inner,</span><br><span class="line">input[type=<span class="string">&#x27;file&#x27;</span>] &gt; input[type=<span class="string">&#x27;button&#x27;</span>]::-moz-focus-inner &#123;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>删除 range 虚线框</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&#x27;range&#x27;</span>]</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&#x27;range&#x27;</span>]</span>::-moz-focus-outer &#123;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS 基础</title>
      <link href="/css-notes/"/>
      <url>/css-notes/</url>
      
        <content type="html"><![CDATA[<p>css 基础知识笔记，包括专业术语介绍、css 流概述等，具体内容可以查看全文</p><span id="more"></span><h2 id="一、-专业术语概览"><a href="#一、-专业术语概览" class="headerlink" title="一、 专业术语概览"></a>一、 专业术语概览</h2><ol><li><p>属性，eg. height, width…</p></li><li><p>值的常用类别</p><ul><li><p>整数值, eg. z-index: 1</p></li><li><p>数值, eg. line-height: 1.5</p></li><li><p>百分比值, eg. padding: 20%</p></li><li><p>长度值，eg. 12px</p></li><li><p>颜色值, eg. #fff</p></li></ul></li><li><p>关键字, eg. transparent, solid</p></li><li><p>变量</p></li><li><p>长度单位分类：</p><ul><li><p>相对字体长度单位, eg. em, rem</p></li><li><p>相对视区长度单位, eg. vh, vw</p></li><li><p>绝对长度单位, eg. px</p></li></ul></li><li><p>功能符：eg. rgba, url, scale</p></li><li><p>选择器：</p><ul><li><p>类选择器, .</p></li><li><p>ID 选择器，唯一性, #</p></li><li><p>属性选择器，[]</p></li><li><p>伪类选择器，:</p></li><li><p>伪元素选择器，::before, ::after</p></li><li><p>关系选择器：后代选择器（空格连接）、相邻后代选择器（&gt;），兄弟选择器（~），相邻兄弟选择器（+）</p></li></ul></li></ol><h2 id="二、css-流"><a href="#二、css-流" class="headerlink" title="二、css 流"></a>二、css 流</h2><ol><li><p>流被破坏的原因：给块级元素设置了绝对宽度，而这个宽度实际是作用域 content-box 的，另外有设置了 border、padding、margin 等，把盒子撑大了。</p></li><li><p>防止流破坏的方式：</p><ul><li><p>宽度分离，即内容层跟包裹层分离，在包裹层设置 width，内容层设置 border、poadding、margin 等属性值。</p></li><li><p>设置 box-sizing（content-box, padding-box, border-box），兼容性不好，慎用</p></li><li><p>使用 flex 布局</p></li></ul></li><li><p>父元素没有设置 height，网上查找到顶部也没有设置 height，则子元素设置 height:100% 无效</p></li><li><p>元素支持 height: 100% 的方法：</p><ul><li><p>父元素或向上的元素设置 height</p></li><li><p>使用绝对定位</p></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Html 笔记</title>
      <link href="/html-notes/"/>
      <url>/html-notes/</url>
      
        <content type="html"><![CDATA[<p>html 笔记</p><span id="more"></span><h2 id="一、html-是什么？"><a href="#一、html-是什么？" class="headerlink" title="一、html 是什么？"></a>一、html 是什么？</h2><ol><li><p>html 是使用标记标签来描述网页的一种标记语言。</p></li><li><p>html 文档 &#x3D; 网页。</p></li><li><p>除了空元素，其他元素都要闭合</p></li><li><p>推荐使用小写</p></li><li><p>大多数元素具有以下属性：class、id、style、title</p></li></ol><h2 id="二、常用元素："><a href="#二、常用元素：" class="headerlink" title="二、常用元素："></a>二、常用元素：</h2><ol><li><p>标题：h</p></li><li><p>段落：p</p></li><li><p>图形：img、canvas</p></li><li><p>链接：a</p><p>A. 新的浏览器中打开链接（target&#x3D;“_blank”)</p><p>B. 链接到同一个页面的不同位置：</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#C4&quot;</span>&gt;</span>查看 Chapter 4。<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;C4&quot;</span>&gt;</span>Chapter 4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>C. 创建邮件链接：</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:someone@microsoft.com?subject=Hello%20again&quot;</span>&gt;</span>发送邮件<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>水平线：hr</p></li><li><p>折行：br</p></li><li><p>文本格式化：b（粗体）、em（强调）、i（斜体）、small（小号）、strong（加重语气）、sub（下标字）、sup（上标字）、ins（插入字）、del（删除字）</p></li><li><p>预格式文本：pre</p></li><li><p>地址：address</p></li><li><p>块引用：blockquote</p></li><li><p>著作标题：cite</p></li><li><p>表格：table、caption（标题）、tr（行）、th（表头）、td（单元格）、colspan（跨行属性）、rowspan（跨列属性）、cellpadding（单元格间距）、</p></li><li><p>列表：ul（无序列表，type：disc、circle、square）、ol（有序列表，type：A、a、I、i）、li（列表项）</p></li><li><p>语义元素：header（页眉）、nav（导航链接的容器）、section（章节）、article（独立的文章）、aside（侧栏）、footer（页脚）</p></li><li><p>表单：form(action、method, target)、<a href="'http://www.w3school.com.cn/html/html_form_input_types.asp'">input</a>(name、value、输入限制、输入类型)、select、option（selected）、textarea、button、datalist</p></li><li><p>媒体元素：audio、embed、video</p></li><li><p>其他：div、span</p></li></ol><h2 id="三、元素分类："><a href="#三、元素分类：" class="headerlink" title="三、元素分类："></a>三、元素分类：</h2><ol><li><p>块级元素：在浏览器显示时，通常会以新行来开始和结束</p></li><li><p>内联元素：内联元素在显示时通常不会以新行开始</p></li></ol><h2 id="四、url-组成：scheme-host-domain-port-path-filename"><a href="#四、url-组成：scheme-host-domain-port-path-filename" class="headerlink" title="四、url 组成：scheme:&#x2F;&#x2F;host.domain:port&#x2F;path&#x2F;filename"></a>四、url 组成：scheme:&#x2F;&#x2F;host.domain:port&#x2F;path&#x2F;filename</h2><ol><li><p>scheme - 因特网服务的类型。最常见的类型是 http， 还包括：https、ftp、file</p></li><li><p>host - 域主机（http 的默认主机是 www）</p></li><li><p>domain - 域名，比如 w3school.com.cn</p></li><li><p>:port - 端口号（http 的默认端口号是 80）</p></li><li><p>path - 服务器上的路径（如果省略，则文档必须位于网站的根目录中）。</p></li><li><p>filename - 文档&#x2F;资源的名称</p></li></ol><h2 id="五、HTML-图形"><a href="#五、HTML-图形" class="headerlink" title="五、HTML 图形"></a>五、HTML 图形</h2><ol><li><p>canvas：</p><p>(1) 本质：创建画布，使用 JavaScript 画布上绘制图像，本身不具备绘图功能。</p><p>(2) 绘图步骤：获取元素(getContext(“2d”)) &#x3D;&gt; 设置形状、样式等</p><p>(3) 常用属性：fillStyle、</p><p>(4) 常用事件：getContext、fillRect、moveTo、lineTo、stroke、beginPath、arc、closePath、fill、createLinearGradient、drawImageaddColorStop</p></li><li><p>svg：</p><p>(1) 本质：可伸缩的矢量图形</p><p>(2) 图形创建方式：使用 xml 定义</p><p>(3) 特性：图像在放大或改变尺寸的情况下其图形质量不变</p></li></ol><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol><li><p>响应式 web 设计（RWD，Responsive Web Design）， 是能够以可变尺寸传递网页的一种网页布局模式。</p></li><li><p>实体符号：<a href="http://www.w3school.com.cn/html/html_entities.asp">http://www.w3school.com.cn/html/html_entities.asp</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3 安装</title>
      <link href="/python3-installation/"/>
      <url>/python3-installation/</url>
      
        <content type="html"><![CDATA[<p>python3 安装指南</p><span id="more"></span><h3 id="unbuntu"><a href="#unbuntu" class="headerlink" title="unbuntu"></a>unbuntu</h3><ol><li><p><code>yum -y install openssl*</code> (pip 依赖 ssl 环境)</p></li><li><p>编译安装 python3：</p><ul><li><p><a href="https://www.python.org/ftp/python/">下载地址</a></p></li><li><p>安装步骤： tar zxvf Python-3.5.2.tgz &#x3D;&gt; cd Python-3.5.2 &#x3D;&gt; .&#x2F;configure &#x3D;&gt; make &amp;&amp; make install</p></li></ul></li><li><p>安装 pip3: <code>sudo apt-get install python3-pip</code></p></li></ol><h3 id="centOs"><a href="#centOs" class="headerlink" title="centOs"></a>centOs</h3><ol><li><p>安装 yum-utils, 用于管理 repository 及扩展包: <code>sudo yum install yum-utils</code></p></li><li><p>使用 yum-builddep 为 Python3 构建环境,安装缺失的软件依赖： <code>sudo yum-builddep python</code></p></li><li><p>下载对应版本的 Python 包：<code>curl -O https://www.python.org/ftp/python/3.5.0/Python-3.5.0.tgz</code></p></li><li><p>解压 Python 包：<code>tar xf Python-3.5.0.tgz</code></p></li><li><p>安装 Python: <code>cd Python-3.5.0</code> &#x3D;&gt; <code>./configure</code> &#x3D;&gt; <code>make</code> &#x3D;&gt; <code>sudo make install</code></p></li><li><p>检测 Python 是否安装完成：<code>python3 -V</code></p></li><li><p>把 python3 作为默认版本：<code>vi /etc/profile.d/python.sh</code> &#x3D;&gt; <code>alias python=&#39;/usr/local/bin/python3.5&#39;</code></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Python/Go/其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vscode 配置 Wsl 并配置 Node 环境</title>
      <link href="/wsl-config/"/>
      <url>/wsl-config/</url>
      
        <content type="html"><![CDATA[<ol><li><p>下载 WSL Guideline，里面会有配置安装 wsl 相关说明</p></li><li><p>切换终端到 wsl</p></li><li><p>安装 node：</p></li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">touch</span> ~/.bashrc</span><br><span class="line">$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.6/install.sh | bash</span><br><span class="line">// restart bash</span><br><span class="line">$ nvm install node</span><br></pre></td></tr></table></figure><ol start="4"><li><p>安装 vue-cli3：<code>npm install -g @vue/cli</code></p></li><li><p>可以开始使用啦</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web 性能优化 —— 首屏优化</title>
      <link href="/first-screen-optimization/"/>
      <url>/first-screen-optimization/</url>
      
        <content type="html"><![CDATA[<p>花了两周多，终于完成了一个基本无 bug 的项目，但是有个比较大的问题就是：在 webpack 测试环境下，编译时间太久了，app.js 太大了，导致页面初始化极其的慢，虽然说正式环境下不会有这个问题，同事也说测试环境 1000 kb 左右正常，不用优化，但是自己的页面打开慢还是让人感到极其不爽的，花了两个钟左右，我把 app.js 从 1983 kb 缩小到了 1083 kb，压缩之后为 273 kb，首屏运行速度从原来的可能要十多秒，提升到了 166 ms，我是怎么做到这些的呢？主要策略如下：</p><p>首先，从包开始优化，我用的包就一个 elementUI，用过的人应该都知道，这个包有几百 kb，简直就是恶魔啊，所以，必须要打压他一下。这里的主要策略就是按需引入 elementUI，关于 elementUI 的按需引入，官方有介绍，看<a href="http://element-cn.eleme.io/#/zh-CN/component/quickstart">这里</a>，这里我要讲的是，官方可能叫你这么引入这个库的：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">在 main.<span class="property">js</span> 引入改库</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Select</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">Button</span>.<span class="property">name</span>, <span class="title class_">Button</span>);</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">Select</span>.<span class="property">name</span>, <span class="title class_">Select</span>);</span><br><span class="line"><span class="comment">/* 或写为</span></span><br><span class="line"><span class="comment"> * Vue.use(Button)</span></span><br><span class="line"><span class="comment"> * Vue.use(Select)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>这种引用方式在实际引用中，会大大增加 app.js 的体积，所以，这里，我是把 elemenui 相关的引用放到相应的组件里面，以组件的形式去引用，这样，app.js 的体积会缩小很多。</p><p>然后，就是写代码的习惯了，比如引用组件，尽量用以下形式，代替 import from 的方式：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Loading</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&quot;@/components/Common/loading&quot;</span>);</span><br></pre></td></tr></table></figure><p>这种方式引入组件的好处是，webpack 会对代码进行自动分割，异步加载组件，从而实现路由的懒加载，根据需求引入不同的组件，而不是第一次加载就全部引入。更详细的解释看<a href="https://router.vuejs.org/zh/guide/advanced/lazy-loading.html#%E6%8A%8A%E7%BB%84%E4%BB%B6%E6%8C%89%E7%BB%84%E5%88%86%E5%9D%97">这里</a></p><p>接着就是把代码里的 console 相关的语句去掉啦，别看 console 只是稍微的调用了一下函数，看起来对性能影响不大，但是代码里满是 console 语句，就会有一点影响了，所以还是能去掉就去掉为好。除了去除 console 相关语句，别忘了把多余的代码和组件也去掉，这会一定程度上减少包的体积。</p><p>最后就是网络请求能少则少啦，但是个人不太推荐用缓存的，问题太多了，后期。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端性能优化</title>
      <link href="/frontend-performance-optimization/"/>
      <url>/frontend-performance-optimization/</url>
      
        <content type="html"><![CDATA[<h3 id="一、内容优化"><a href="#一、内容优化" class="headerlink" title="一、内容优化"></a>一、内容优化</h3><p>1、减少 HTTP 请求数:这条策略是最重要最有效的，因为一个完整的请求要经过 DNS 寻址，与服务器建立连接，发送数据，等待服务器响应，接收数据这样一个消耗时间成本和资源成本的复杂的过程。常见方法：合并多个 CSS 文件和 js 文件，利用 CSS Sprites 整合图像，Inline Images(使用 data：URL scheme 在实际的页面嵌入图像数据 )，合理设置 HTTP 缓存等。</p><p>2、减少 DNS 查找</p><p>3、避免重定向</p><p>3、使用 Ajax 缓存</p><p>4、延迟加载组件,预加载组件</p><p>5、减少 DOM 元素数量:页面中存在大量 DOM 元素,会导致 javascript 遍历 DOM 的效率变慢。</p><p>6、最小化 iframe 的数量：iframes 提供了一个简单的方式把一个网站的内容嵌入到另一个网站中。但其创建速度比其他包括 JavaScript 和 CSS 的 DOM 元素的创建慢了 1-2 个数量级。</p><p>7、避免 404：HTTP 请求时间消耗是很大的，因此使用 HTTP 请求来获得一个没有用处的响应（例如 404 没有找到页面）是完全没有必要的，它只会降低用户体验而不会有一点好处。</p><h3 id="二、服务器优化"><a href="#二、服务器优化" class="headerlink" title="二、服务器优化"></a>二、服务器优化</h3><p>1、 使用内容分发网络（CDN）：把网站内容分散到多个、处于不同地域位置的服务器上可以加快下载速度。</p><p>2、GZIP 压缩</p><p>3、设置 ETag：ETags（Entity tags，实体标签）是 web 服务器和浏览器用于判断浏览器缓存中的内容和服务器中的原始内容是否匹配的一种机制。</p><p>4、提前刷新缓冲区</p><p>5、对 Ajax 请求使用 GET 方法</p><p>6、避免空的图像 src</p><h3 id="三、Cookie-优化"><a href="#三、Cookie-优化" class="headerlink" title="三、Cookie 优化"></a>三、Cookie 优化</h3><p>1、减小 Cookie 大小</p><p>2、针对 Web 组件使用域名无关的 Cookie</p><h3 id="四、javascript-优化"><a href="#四、javascript-优化" class="headerlink" title="四、javascript 优化"></a>四、javascript 优化</h3><p>1、将 JavaScript 脚本放在页面的底部。</p><p>2、将 JavaScript 和 CSS 作为外部文件来引用：在实际应用中使用外部文件可以提高页面速度，因为 JavaScript 和 CSS 文件都能在浏览器中产生缓存。</p><p>3、缩小 JavaScript 和 CSS</p><p>4、删除重复的脚本</p><p>5、最小化 DOM 的访问：使用 JavaScript 访问 DOM 元素比较慢。</p><p>6、开发智能的事件处理程序</p><p>7、javascript 代码注意：谨慎使用 with,避免使用 eval Function 函数,减少作用域链查找。</p><h3 id="五、图像优化"><a href="#五、图像优化" class="headerlink" title="五、图像优化"></a>五、图像优化</h3><p>1、优化图片大小</p><p>2、通过 CSS Sprites 优化图片</p><p>3、不要在 HTML 中使用缩放图片</p><p>4、favicon.ico 要小而且可缓存</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaScript 面向对象编程</title>
      <link href="/javascript-object-oriented-programming/"/>
      <url>/javascript-object-oriented-programming/</url>
      
        <content type="html"><![CDATA[<h3 id="一、构造函数创建、继承和扩展类"><a href="#一、构造函数创建、继承和扩展类" class="headerlink" title="一、构造函数创建、继承和扩展类"></a>一、构造函数创建、继承和扩展类</h3><p>为了区分普通函数与构造函数，构造函数首字母大写，构造函数创建类，并进行类的继承和派生，相比于接下来要说的 class 创建、继承和派生类而言，略显得复杂。</p><h4 id="1、构造函数创建类"><a href="#1、构造函数创建类" class="headerlink" title="1、构造函数创建类"></a>1、构造函数创建类</h4><p>通过一个构造函数创建一个原始类 &#x3D;&gt; 给原始类定义基本属性和原型方法，通过 new 构造函数，初始化一个新的类；</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = props.<span class="property">name</span> || <span class="string">&quot;匿名&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">grade</span> = props.<span class="property">grade</span> || <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>!`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createStudent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Student</span>(props || &#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> xiaoming = <span class="title function_">createStudent</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;小明&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(xiaoming.<span class="property">grade</span>);</span><br><span class="line">xiaoming.<span class="title function_">hello</span>()</span><br></pre></td></tr></table></figure><h4 id="2、构造函数继承类"><a href="#2、构造函数继承类" class="headerlink" title="2、构造函数继承类"></a>2、构造函数继承类</h4><p>属性的继承，利用函数的 call 方法，调用上一个构造函数创建的类，参数传入相应的属性以及 this 值，原型方法的继承，通过创建一个空的对象原型作为中介，把父类的原型方法传递给子类，实现子类继承父类的目的；</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 原型继承</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">inherits</span>(<span class="params">Child, Parent</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> F = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line">  F.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">  <span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line">  <span class="title class_">Child</span>.<span class="property">constructor</span> = <span class="title class_">Child</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = props.<span class="property">name</span> || <span class="string">&quot;Unnamed&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>!`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">PrimaryStudent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="comment">// 继承 student name</span></span><br><span class="line">  <span class="title class_">Student</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, props);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">grade</span> = props.<span class="property">grade</span> || <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 原型方法继承</span></span><br><span class="line"><span class="title function_">inherits</span>(<span class="title class_">PrimaryStudent</span>, <span class="title class_">Student</span>);</span><br></pre></td></tr></table></figure><h4 id="3、构造函数扩展"><a href="#3、构造函数扩展" class="headerlink" title="3、构造函数扩展"></a>3、构造函数扩展</h4><p>在原型上添加新的方法，即可</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">PrimaryStudent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getGrade</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">grade</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="二、class-关键字创建、继承和派生类"><a href="#二、class-关键字创建、继承和派生类" class="headerlink" title="二、class 关键字创建、继承和派生类"></a>二、class 关键字创建、继承和派生类</h3><p>class 关键字是 es6 提出来的，极大的便利了 javaScript 类的操作，实例代码如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>!`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> xiaojun = <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;小君&quot;</span>);</span><br><span class="line">xiaojun.<span class="title function_">hello</span>();</span><br><span class="line"><span class="comment">// 类派生</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrimaryTeacher</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Teacher</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, grade</span>) &#123;</span><br><span class="line">    <span class="comment">// 调用父类的构造函数</span></span><br><span class="line">    <span class="variable language_">super</span>(name);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">grade</span> = grade;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">myGrade</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`I am at grade <span class="subst">$&#123;<span class="variable language_">this</span>.grade&#125;</span>!`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> xiaohong = <span class="keyword">new</span> <span class="title class_">PrimaryTeacher</span>(<span class="string">&quot;小红&quot;</span>, <span class="number">3</span>);</span><br><span class="line">xiaohong.<span class="title function_">myGrade</span>();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaScript 函数</title>
      <link href="/javascript-functions/"/>
      <url>/javascript-functions/</url>
      
        <content type="html"><![CDATA[<h3 id="一、箭头函数"><a href="#一、箭头函数" class="headerlink" title="一、箭头函数"></a>一、箭头函数</h3><p>相当于匿名函数的简写，不同之处在于及箭头函数的 this 指向的是当前的词法作用域，也就是说省去了写 <code>var that = this</code> 的过程，可以直接使用 this；</p><h3 id="二、generator"><a href="#二、generator" class="headerlink" title="二、generator"></a>二、generator</h3><p>类似 python 的生成器，不同的是，python 的生成器一般是写在 list 里，而 es6 的 generator 是写在函数里，形如：function*() {}，yield 在 generator 里可以多次返回函数值，而不用像 functoin 一样进行多次调用；</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//裴波那契数列</span></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">fib</span>(<span class="params">max</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> t,</span><br><span class="line">    a = <span class="number">0</span>,</span><br><span class="line">    b = <span class="number">1</span>,</span><br><span class="line">    n = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (n &lt; max) &#123;</span><br><span class="line">    <span class="keyword">yield</span> a;</span><br><span class="line">    [a, b] = [b, a + b];</span><br><span class="line">    n++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> <span class="title function_">fib</span>(<span class="number">10</span>)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="三、解构赋值"><a href="#三、解构赋值" class="headerlink" title="三、解构赋值"></a>三、解构赋值</h3><p>简化代码的一种手段，可以同时对多个变量进行赋值操作，上面的代码 <code>[a, b] = [b, a + b]</code> 就用到了解构赋值，再把上面的示例代码用解构赋值改一下，得到如下代码：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">fib</span>(<span class="params">max</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> t;</span><br><span class="line">  <span class="keyword">var</span> [a, b, n] = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>];</span><br><span class="line">  <span class="keyword">while</span> (n &lt; max) &#123;</span><br><span class="line">    <span class="keyword">yield</span> a;</span><br><span class="line">    [a, b] = [b, a + b];</span><br><span class="line">    n++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> <span class="title function_">fib</span>(<span class="number">10</span>)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="四、闭包"><a href="#四、闭包" class="headerlink" title="四、闭包"></a>四、闭包</h3><p>通常别人都会说闭包是用来延长函数作用域链的，但是听到这个词往往会使人一脸蒙蔽，廖雪峰的 js 教程中说闭包有以下功用：延迟执行函数、 多参数的函数变成单参数的函数、封装私有变量，总结来说闭包的作用就是私有化变量和延长变量的生命周期，下面是相关代码示例：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 闭包 | 延迟执行函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">lazy_sum</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f = <span class="title function_">lazy_sum</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"><span class="comment">// console.log(f);</span></span><br><span class="line"><span class="comment">// console.log(f());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭包 | 多参数的函数变成单参数的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">make_pow</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">pow</span>(x, n);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> pow2 = <span class="title function_">make_pow</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> pow3 = <span class="title function_">make_pow</span>(<span class="number">3</span>);</span><br><span class="line"><span class="comment">// console.log(pow2(5));</span></span><br><span class="line"><span class="comment">// console.log(pow3(7));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭包 | 封装私有变量（可以考虑用这种方法进行状态管理）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">create_counter</span>(<span class="params">innitial</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> x = innitial || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">inc</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      x += <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c1 = <span class="title function_">create_counter</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> x = c1.<span class="title function_">inc</span>();</span><br><span class="line">  <span class="comment">//   console.log(x);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c2 = <span class="title function_">create_counter</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> x = c2.<span class="title function_">inc</span>();</span><br><span class="line">  <span class="comment">//   console.log(x);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="五、map"><a href="#五、map" class="headerlink" title="五、map"></a>五、map</h3><p>将一个函数作用在一个数组上，接收带一个参数的函数，是 array 的一个方法，可以方便快捷的对数组进行运算，省略循环过程，示例代码如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pow</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">pow</span>(x, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">let</span> results = arr.<span class="title function_">map</span>(pow);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(results);</span><br></pre></td></tr></table></figure><h3 id="六、reduce"><a href="#六、reduce" class="headerlink" title="六、reduce"></a>六、reduce</h3><p>将一个函数作用在一个数组上，接收带两个参数的函数，对函数的结果做累积计算，可以方便快捷的对数组进行运算，省略循环过程，示例代码如下:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">let</span> mul = arr1.<span class="title function_">reduce</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x * y);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mul);</span><br></pre></td></tr></table></figure><h3 id="七、filter"><a href="#七、filter" class="headerlink" title="七、filter"></a>七、filter</h3><p>过滤数组元素，接收一个函数作为参数，函数内容为过滤条件。filter 的回调函数可以接收多个参数，element 参数返回的是数组的元素，index 返回数组元素的索引，self 参数返回整个数组，相关示例代码如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 过滤偶元素</span></span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">15</span>];</span><br><span class="line"><span class="keyword">let</span> r = arr2.<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">2</span> !== <span class="number">0</span>);</span><br><span class="line"><span class="comment">// console.log(r);</span></span><br><span class="line"><span class="comment">// 过滤空字符串</span></span><br><span class="line"><span class="keyword">let</span> arr3 = [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="literal">null</span>, <span class="literal">undefined</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> r1 = arr3.<span class="title function_">filter</span>(<span class="function"><span class="params">s</span> =&gt;</span> s &amp;&amp; s.<span class="title function_">trim</span>());</span><br><span class="line"><span class="comment">// console.log(r1);</span></span><br><span class="line"><span class="comment">// 利用回调函数去除数组中的重复元素</span></span><br><span class="line"><span class="keyword">let</span> arr4 = [</span><br><span class="line">  <span class="string">&quot;apple&quot;</span>,</span><br><span class="line">  <span class="string">&quot;strawberry&quot;</span>,</span><br><span class="line">  <span class="string">&quot;banana&quot;</span>,</span><br><span class="line">  <span class="string">&quot;pear&quot;</span>,</span><br><span class="line">  <span class="string">&quot;apple&quot;</span>,</span><br><span class="line">  <span class="string">&quot;orange&quot;</span>,</span><br><span class="line">  <span class="string">&quot;orange&quot;</span>,</span><br><span class="line">  <span class="string">&quot;strawberry&quot;</span></span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> r2 = arr4.<span class="title function_">filter</span>(<span class="function">(<span class="params">element, index, self</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> self.<span class="title function_">indexOf</span>(element) === index;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// console.log(r2);</span></span><br></pre></td></tr></table></figure><h3 id="八、sort"><a href="#八、sort" class="headerlink" title="八、sort"></a>八、sort</h3><p>排序方法，直接修改原来的数组，默认是把数组元素转换为字符串进行排序，接收有一个函数作为参数，函数内容是排序规则，示例代码如下：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数字按从大到小排序</span></span><br><span class="line"><span class="keyword">let</span> nums = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (x &lt; y) &#123;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (x &gt; y) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(nums);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaScript-Promise</title>
      <link href="/javaScript-promise/"/>
      <url>/javaScript-promise/</url>
      
        <content type="html"><![CDATA[<p>promise 对于管理异步状态很有用，可以串行执行异步任务，也可以并行执行异步任务，下面是一个简单的串行执行一步步任务的例子：</p><span id="more"></span><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> steps = [<span class="string">&quot;第一步&quot;</span>, <span class="string">&quot;第二步&quot;</span>, <span class="string">&quot;第三步&quot;</span>, <span class="string">&quot;最后&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showStep1</span>(<span class="params">step1</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(step1);</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showStep2</span>(<span class="params">step2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(step2);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> test = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">test.<span class="title function_">then</span>(<span class="title function_">showStep1</span>(steps[<span class="number">0</span>]));</span><br><span class="line">test.<span class="title function_">then</span>(<span class="title function_">showStep2</span>(steps[<span class="number">1</span>]));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue动态改变title</title>
      <link href="/vue-dynamic-change-title/"/>
      <url>/vue-dynamic-change-title/</url>
      
        <content type="html"><![CDATA[<ol><li>代码：</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;../router&#x27;</span>;</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> n = to.<span class="property">query</span>.<span class="property">subjectId</span>;</span><br><span class="line">  <span class="keyword">let</span> x = [<span class="string">&#x27;mike&#x27;</span>, <span class="string">&#x27;john&#x27;</span>, <span class="string">&#x27;sarah&#x27;</span>];</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="string">&#x27;4&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = x[<span class="number">2</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="string">&#x27;5&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = x[<span class="number">1</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="string">&#x27;6&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = x[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="2"><li>在 main.js 引入即可，使用示例：</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./utils/title&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue 项目搭建步骤</title>
      <link href="/vue-project-setup-steps/"/>
      <url>/vue-project-setup-steps/</url>
      
        <content type="html"><![CDATA[<h3 id="一、-初始化项目"><a href="#一、-初始化项目" class="headerlink" title="一、 初始化项目"></a>一、 初始化项目</h3><ol><li>安装 vue-cli3: <code>sudo npm install -g @vue/cli-service-global</code></li><li>卸载旧版本的 vue-cli: <code>sudo npm uninstall -g vue-cli</code></li><li>更新到 vue-cli3： <code>sudo npm install -g @vue/cli</code></li><li>创建项目，选项：preset（default）、package manage(npm)、安装相关插件（建议不要用淘宝的 npm，因为在使用的时候有点坑，之前项目中就被这个坑过）: <code>vue create flash-experiment</code></li><li>切换到项目目录: <code>cd flash-experiment</code></li><li>启动项目： <code>npm run serve</code></li><li>查看 vue-cli 相关命令: <code>vue create --help</code></li><li>打开图形化项目管理器，查看相关配置：<code>vue ui</code></li><li>添加插件<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">vue add @vue/eslint</span><br><span class="line">vue add router <span class="comment">//特殊添加插件的情况</span></span><br><span class="line">vue add vuex   <span class="comment">//特殊添加插件的情况</span></span><br></pre></td></tr></table></figure></li><li>加入 sass 支持，把一下语句加到 package.json 中：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;node-sass&quot;</span>: <span class="string">&quot;^4.9.0&quot;</span>,</span><br><span class="line"><span class="string">&quot;sass-loader&quot;</span>: <span class="string">&quot;^7.0.1&quot;</span>,</span><br></pre></td></tr></table></figure></li><li>添加组件，在视图中注册组件，并配置相关路由</li><li>编写组件</li><li>引入 <a href="http://element-cn.eleme.io/#/zh-CN/component/pagination">elementUI</a></li><li>引入 <a href="https://github.com/axios/axios">axios</a></li></ol><h3 id="二、-git-配置"><a href="#二、-git-配置" class="headerlink" title="二、 git 配置"></a>二、 git 配置</h3><ol><li><p>之前没有 git</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd existing_folder</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@gitlab.dreamdev.cn:ebag/flash-experiment.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;Initial commit&quot;</span><br></pre></td></tr></table></figure></li><li><p>已有 git</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git remote set-url origin git@gitlab.dreamdev.cn:ebag/live-experiment.git</span><br><span class="line">git remote -v</span><br><span class="line">git branch --set-upstream-to=origin/develop develop</span><br><span class="line">git branch --set-upstream-to=origin/master master</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue-Config 配置模板</title>
      <link href="/vue-config-template/"/>
      <url>/vue-config-template/</url>
      
        <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resolve</span> = dir =&gt; path.<span class="title function_">join</span>(__dirname, dir);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> urlPath = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;development&#x27;</span> ? <span class="string">&#x27;./&#x27;</span> : <span class="string">&#x27;/item-name/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 基本路径</span></span><br><span class="line">  <span class="attr">baseUrl</span>: urlPath,</span><br><span class="line">  <span class="comment">// 生产环境是否生成 sourceMap 文件</span></span><br><span class="line">  <span class="attr">productionSourceMap</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// 服务器端口号</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">1234</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config.<span class="property">resolve</span>.<span class="property">alias</span></span><br><span class="line">      .<span class="title function_">set</span>(<span class="string">&#x27;@$&#x27;</span>, <span class="title function_">resolve</span>(<span class="string">&#x27;src&#x27;</span>))</span><br><span class="line">      .<span class="title function_">set</span>(<span class="string">&#x27;components&#x27;</span>, <span class="title function_">resolve</span>(<span class="string">&#x27;src/components&#x27;</span>))</span><br><span class="line">      .<span class="title function_">set</span>(<span class="string">&#x27;utils&#x27;</span>, <span class="title function_">resolve</span>(<span class="string">&#x27;src/utils&#x27;</span>))</span><br><span class="line">      .<span class="title function_">set</span>(<span class="string">&#x27;service&#x27;</span>, <span class="title function_">resolve</span>(<span class="string">&#x27;src/service&#x27;</span>))</span><br><span class="line">      .<span class="title function_">set</span>(<span class="string">&#x27;views&#x27;</span>, <span class="title function_">resolve</span>(<span class="string">&#x27;src/views&#x27;</span>))</span><br><span class="line">      .<span class="title function_">set</span>(<span class="string">&#x27;assets&#x27;</span>, <span class="title function_">resolve</span>(<span class="string">&#x27;src/assets&#x27;</span>));</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 构建与部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitlab Ci 配置模板</title>
      <link href="/gitlab-ci-config-template/"/>
      <url>/gitlab-ci-config-template/</url>
      
        <content type="html"><![CDATA[<p>gitlab ci 配置模板</p><span id="more"></span><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build site:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">node:latest</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">build</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">&amp;&amp;</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br><span class="line">  <span class="attr">artifacts:</span></span><br><span class="line">    <span class="attr">expire_in:</span> <span class="number">1</span> <span class="string">week</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">dist</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pages:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">deploy</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">rm</span> <span class="string">-rf</span> <span class="string">public</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mkdir</span> <span class="string">public</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mv</span> <span class="string">dist/*</span> <span class="string">public</span></span><br><span class="line">  <span class="attr">artifacts:</span></span><br><span class="line">    <span class="attr">expire_in:</span> <span class="number">3</span> <span class="string">days</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">public</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">develop</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Html 文档导出为 Word 文档和 Pdf 文档</title>
      <link href="/html-to-text-js/"/>
      <url>/html-to-text-js/</url>
      
        <content type="html"><![CDATA[<p>最近在折腾用 js 实现 html 转文本的东东，包括 html 转 docx、doc 以及 pdf 等文档，首选当然是用别人造好的轮子啦。</p><p>html 转 pdf 用的轮子是 jsPdf，这东西好用是好用，但是有一个很大的缺点，对中文的支持太差了，我用的是 fromhtml 方法，研究文档研究了几天，还是没发现对中文支持的方法，尝试了各种奇技淫巧（换字体，解码等）后，发现它这个方法根本就不支持中文，当然他官方就声明了不支持中文。不过他的 addhtml 方法勉强实现了我的需求，但是因为是采用截图方式，断页很不智能，甚至会出现文字被生生的拦腰截断的情况，加之生成的 pdf 像素实在惨不忍睹，决定还是放弃了。具体的实现，网上有很多的文档，大家可以自行查阅，我也是根据自己的需求定制了而已，所以源码示例就不做过多分享了。</p><p>html 转 word 文档，选的轮子是 html-docx，关于这个轮子的资料很少，不过看一下源码及实例还是很快上手的，网上说什么缺点是要用在线编辑器什么的，感觉就是没有自己动脑想过，直接抄官方示例的。官方示例摆出来的虽然是要用一个在线编辑器，但是我们可以根据自己的需求进行改良，比如我的需求是根据选定网页的不同区域，下载不同内容的 word 文档，就不容许出现什么在线编辑器啦，好吧，没什么要说了，看代码吧。</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">downloadDocx</span>(<span class="params"><span class="attr">printArea</span>: <span class="built_in">any</span>, <span class="attr">outputName</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="comment">// +++++++ 样式定制 +++++++</span></span><br><span class="line">    <span class="keyword">const</span> styles = <span class="string">`</span></span><br><span class="line"><span class="string">        //code here</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 样式加载</span></span><br><span class="line">    <span class="keyword">let</span> styleTagInnerHtml = <span class="string">&#x27;&lt;style&gt;&#x27;</span>;</span><br><span class="line">    styleTagInnerHtml += styles;</span><br><span class="line">    styleTagInnerHtml += <span class="string">&#x27;&lt;/style&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> content = <span class="string">&#x27;&lt;!DOCTYPE html&gt;&lt;html&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;&lt;head&gt;&#x27;</span> + styleTagInnerHtml + <span class="string">&#x27;&lt;/head&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;&lt;body&gt;&lt;div&gt;&#x27;</span> printArea.<span class="property">outerHTML</span> + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// +++++++ html 转 word +++++++</span></span><br><span class="line">    <span class="keyword">const</span> converted = htmlDocx.<span class="title function_">asBlob</span>(content);</span><br><span class="line">    <span class="title function_">saveAs</span>(converted, outputName + <span class="string">&#x27;.docx&#x27;</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>上面的代码是我写的示例，当然涉及业务需求更加复杂的逻辑就不展示了，上面的示例代码分为三部分。</p><p>第一部分是样式的定制，因为这个轮子要转 word 需要重新写一份 html 文档，而这份文档是检索不到我们在外面写的 css 的，只能检索得到 html 文档的 style 标签里的 css，所以需要根据自己的需求重新生成一份 css 文件，放到 html 文档里面。还有一个坑就是，word 并不是支持所有 css 属性的，一些比较新的属性建议还是不要用了，用老一点的方法实现吧。</p><p>第二部分是 css 文档部分，这部分主要是生成新的文档，用于转换成 word 文档。</p><p>第三部分是用轮子转换编码格式并保存为 word 文档的部分，这里其实是用了两个轮子：html-docx 和 file-saver，html-docx 这个轮子用于转换编码格式，file-saver 用于保存文档，后缀可以根据自己的需求改，但是要记得编码格式要对应上。</p><p>当然，我这里只是一个简单的示例，切勿生搬硬套，可以根据自己的需求进行定制。</p><p>此外，可能还有一个问题，这也是后来别人问我实现文档导出时想到的一个问题，就是图片怎么导出到文档里呢？要知道我们的文档图片一般是 url 外链来的，怎么在文档中显示呢？这里的方案是下载图片，然后用 canvas.toDataURL 把图片转换成 base64 格式，替换到原引用点。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>N * N 阶矩阵算法 </title>
      <link href="/n-n-order-matrix-algorithm/"/>
      <url>/n-n-order-matrix-algorithm/</url>
      
        <content type="html"><![CDATA[<p>n * n 阶矩阵的解法有几种方式，分而治之、暴力破解等，我这里用的方法就是暴力破解的方法，时间和空间复杂度肯定是比较差的，不过能快速获得结果而已，用 js 的实现代码如下：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function matrix(A, B) &#123;</span><br><span class="line">    var n = A.length;</span><br><span class="line">    var C = [];</span><br><span class="line">    for ( var i = 0; i &lt; n; i++ )&#123;</span><br><span class="line">        C[i] = [];</span><br><span class="line">        for( var j = 0; j &lt; n; j++ )&#123;</span><br><span class="line">            C[i][j] = 0;</span><br><span class="line">            for( var k = 0; k &lt; n; k++ )&#123;</span><br><span class="line">                C[i][j] += A[i][k] * B[k][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(C);</span><br><span class="line">&#125;</span><br><span class="line">matrix([[1,2], [3, 4]], [[3, 2], [1, 4]]);</span><br><span class="line">//[ [ 5, 10 ], [ 13, 22 ] ]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 博客迁移</title>
      <link href="/hexo-blog-migration/"/>
      <url>/hexo-blog-migration/</url>
      
        <content type="html"><![CDATA[<p>hexo 博客迁移</p><span id="more"></span><ol><li><p>更新 node 和 npm：<code>sudo npm install -g n</code> &#x3D;&gt; <code>sudo n stable</code> &#x3D;&gt; <code>sudo npm install npm -g</code></p></li><li><p>安装 hexo：<code>sudo npm install -g hexo</code></p></li><li><p>安装依赖包：<code>sudo npm i</code></p></li><li><p>复制以下文件到新建的 blog 文件夹里：package.json、source、scaffolds、themes、<br>_config.yml、.gitignore</p></li><li><p>在 home 目录下新建一个 .ssh 文件：<code>ssh-keygen -t rsa -C &lt;邮箱&gt;</code></p></li><li><p><code>sudo gedit .ssh/id_rsa.pub</code>，复制秘钥到 github 中</p></li><li><p><code>git init</code>，初始化空仓库</p></li><li><p>配置 git：<code>git config -–global user.name &lt;name&gt;</code> &#x3D;&gt; <code>git config --global user.email &lt;email&gt;</code></p></li><li><p>生成新的 public 文件：<code>hexo g</code></p></li><li><p>下载必要的插件：<code>sudo npm install hexo-deployer-git --save</code></p></li><li><p>上传博客到 git： <code>hexo d</code></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 网站建设 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Angular 导航栏与内容联动</title>
      <link href="/angular-navigation-content-linkage/"/>
      <url>/angular-navigation-content-linkage/</url>
      
        <content type="html"><![CDATA[<p>通过 angular 的 render2 渲染器操作 DOM , 通过获取 DOM 的滑动只与定位,计算出滑动距离,并控制速率。</p><span id="more"></span><ol><li>注入 commonService 服务,里面封装了 handleAnchor 函数,主要思路就是通过 angular 的 render2 渲染器操作 DOM , 通过获取 DOM 的滑动只与定位,计算出滑动距离,并控制速率。代码如下:</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 点击题目进行锚点定位</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> targetDom 需要定位的目标Dom元素</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> scrollElementRef 滑动区域</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> SCROLL_OFFSET 需定位的位置在滑动区域中的距离</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> ANCHOR_RATE 自动滑动速度，数值越小速度越快</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> isPreview 来自试卷预览的特殊处理 默认 false</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">handleAnchor</span>(<span class="attr">targetDom</span>: any, <span class="attr">scrollElementRef</span>: any, <span class="attr">SCROLL_OFFSET</span>: number, <span class="attr">ANCHOR_RATE</span>: number, isPreview = <span class="literal">false</span>): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> currentAnchor = scrollElementRef.<span class="property">scrollTop</span>;</span><br><span class="line">    <span class="keyword">let</span> questionTop = <span class="variable language_">this</span>.<span class="title function_">getElementTop</span>(targetDom);</span><br><span class="line">    <span class="keyword">let</span> scrollWrapTop = <span class="variable language_">this</span>.<span class="title function_">getElementTop</span>(scrollElementRef);</span><br><span class="line">    <span class="keyword">let</span> actualTop = questionTop - scrollWrapTop - <span class="variable constant_">SCROLL_OFFSET</span>;</span><br><span class="line">    <span class="keyword">if</span> (isPreview) &#123;</span><br><span class="line">        actualTop -= <span class="number">45</span>; <span class="comment">// 去掉解析栏的高度</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> anchorRate = (<span class="title class_">Math</span>.<span class="title function_">abs</span>(actualTop - currentAnchor)) / <span class="variable constant_">ANCHOR_RATE</span>;</span><br><span class="line">    <span class="keyword">const</span> interval = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (currentAnchor &lt; actualTop) &#123;</span><br><span class="line">        scrollElementRef.<span class="property">scrollTop</span> = currentAnchor += anchorRate;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        scrollElementRef.<span class="property">scrollTop</span> = currentAnchor -= anchorRate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (currentAnchor &lt;= actualTop + anchorRate &amp;&amp; currentAnchor &gt;= actualTop - anchorRate) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(interval);</span><br><span class="line">        scrollElementRef.<span class="property">scrollTop</span> = actualTop;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>以上函数通过注入依赖的形式在组件中进行使用,通过传递相应的参数, 实现数据联动效果, 代码如下:</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">handleAnchor</span>(targetId): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> targetDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(targetId)</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">documentElement</span>: <span class="title class_">Element</span>;</span><br><span class="line">    documentElement = <span class="variable language_">document</span>.<span class="property">documentElement</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">commonService</span>.<span class="title function_">handleAnchor</span>(targetDom, documentElement, <span class="variable language_">this</span>.<span class="property">SCROLL_OFFSET</span>, <span class="variable language_">this</span>.<span class="property">ANCHOR_RATE</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">renderer</span>.<span class="title function_">addClass</span>(targetDom, <span class="string">&#x27;paper-hover&#x27;</span>)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">renderer</span>.<span class="title function_">removeClass</span>(targetDom, <span class="string">&#x27;paper-hover&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上代码将整个文档流作为滑动区域传给了 handleAnchor 函数,并且通过虚拟 DOM 加了一段样式表, 实现滚动到相应位置, 出现一个边框的视觉效果。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CKeditor 在 Angular 中的使用文档</title>
      <link href="/ckeditor-usage-in-angular/"/>
      <url>/ckeditor-usage-in-angular/</url>
      
        <content type="html"><![CDATA[<p>CKeditor 是比较好用的一款所见即所得编辑器，有多种模式可供选择，里面还可集成 leText 等第三方插件，也可以自己开发一些插件，推荐使用。上手也很简单，但是在 angular 中使用还是要费一点时间，配置上也要花点时间。</p><span id="more"></span><ol><li><p>下载 ckeditor;</p></li><li><p>把 ckeditor 解压并放到 angular 的 assets 文件中;</p></li><li><p>在 angular 的 index 文件中引用 ckeditor.js;</p></li><li><p>根据自己的需求修改 ckeditor 配置文件;</p></li><li><p>ckeditor 相关配置说明:</p></li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">CKEDITOR</span>.<span class="property">editorConfig</span> = <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">  config.<span class="property">language</span> = <span class="string">&quot;zh-cn&quot;</span>; <span class="comment">// 编辑器语言</span></span><br><span class="line">  config.<span class="property">skin</span> = <span class="string">&quot;moono&quot;</span>; <span class="comment">// 编辑器皮肤,需要下载并解压到 ckeditor 的 skins 文件夹下</span></span><br><span class="line">  config.<span class="property">allowedContent</span> = <span class="literal">true</span>;</span><br><span class="line">  config.<span class="property">toolbar</span> = <span class="string">&quot;Full&quot;</span>; <span class="comment">// 工具条类型</span></span><br><span class="line">  config.<span class="property">extraPlugins</span> = <span class="string">&quot;ckeditor_wiris&quot;</span>; <span class="comment">//  添加扩展插件 ckeditor_wiris</span></span><br><span class="line">  config.<span class="property">toolbar_Full</span> = [</span><br><span class="line">    [<span class="string">&quot;Underline&quot;</span>, <span class="string">&quot;-&quot;</span>, <span class="string">&quot;Subscript&quot;</span>, <span class="string">&quot;Superscript&quot;</span>, <span class="string">&quot;RemoveFormat&quot;</span>],</span><br><span class="line">    [<span class="string">&quot;Image&quot;</span>, <span class="string">&quot;Table&quot;</span>, <span class="string">&quot;SpecialChar&quot;</span>],</span><br><span class="line">    [<span class="string">&quot;ckeditor_wiris_formulaEditor&quot;</span>]</span><br><span class="line">  ]; <span class="comment">// 配置工具条</span></span><br><span class="line">  config.<span class="property">width</span> = <span class="number">360</span>; <span class="comment">// 编辑器宽度设置</span></span><br><span class="line">  config.<span class="property">resize_enabled</span> = <span class="literal">false</span>; <span class="comment">// 编辑器拖拽设置</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable constant_">CKEDITOR</span>.<span class="property">plugins</span>.<span class="title function_">addExternal</span>(</span><br><span class="line">  <span class="string">&quot;ckeditor_wiris&quot;</span>,</span><br><span class="line">  <span class="string">&quot;https://www.wiris.net/demo/plugins/ckeditor/&quot;</span>,</span><br><span class="line">  <span class="string">&quot;plugin.js&quot;</span></span><br><span class="line">); <span class="comment">// 扩展编辑器引用</span></span><br></pre></td></tr></table></figure><ol start="6"><li><p>ckeditor 的使用有两种模式,一种是 inline 模式,使用方法是直接在相应的元素加上 contentable &#x3D; “true” 即可生效, 第二种是 textarea 模式, 使用方法是以 class 的形式引用,这个我暂时还没有触及,之后再添加;</p></li><li><p>使用 ckeditor inline 模式会有一个广告,xx 所见即所得编辑器, 这句话可以通过删除 ckeditor.js 文件中的一些语句来删掉,要删除的语句如下:</p></li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a.<span class="property">title</span> =</span><br><span class="line">  <span class="string">&quot;string&quot;</span> == <span class="keyword">typeof</span> d || !<span class="number">1</span> === d ? d : [a.<span class="property">lang</span>.<span class="property">editor</span>, a.<span class="property">name</span>].<span class="title function_">join</span>(<span class="string">&quot;, &quot;</span>);</span><br></pre></td></tr></table></figure><p>也可以通过设置 config.title &#x3D; ‘ ‘， 去除编辑框的 title。</p><ol start="8"><li>工具栏加数学公式插件的方法:</li></ol><p>(1) 下载 ckeditor_wiri , 下载 asp 版, 具体为什么,是因为我只学过 asp.net, 看着有眼缘, 使用应该都没差吧;</p><p>(2) config.js 添加如下语句:</p><p>A. <code>config.extraPlugins = &#39;ckeditor_wiris&#39;;</code></p><p>B. <code>[ &#39;ckeditor_wiris_formulaEditor&#39;]</code></p><p>C. <code>CKEDITOR.plugins.addExternal(&#39;ckeditor_wiris&#39;, &#39;https://www.wiris.net/demo/plugins/ckeditor/&#39;, &#39;plugin.js&#39;);</code></p><p>此外,要修改显示图标可以替换掉相应的 icon</p><ol start="9"><li><p>CKedditor inline 模式是默认初始化一个全局实例的，也就是在页面的所有地方用 contenteditable &#x3D; true 都会初始化一个 inline 编辑器，而这并不是我们想要的结果，可以通过在 index.html 中添加以下语句，禁止自动初始化编辑器： <code>CKEDITOR.disableAutoInline = true;</code></p></li><li><p>禁用了默认初始化全局实例，我们要用的话，就自己在相应的组件初始化一个编辑器就行了，大概思路就是，创建一个 editors 变量用于存储 CKeditor 实例， 声明一个初始化编辑器的函数，函数接收所有类名为 ckeditor 的元素，遍历这些元素，在相应的节点上依次添加编辑器的实例（<br>CKEDITOR.inline(elements[i])），保存在 editors 中，在 ngAfterViewInit() 生命周期钩子中执行函数，目的是在文档加载完之后执行函数，因为一开始元素默认隐藏状态还没加载进来，初始化不了。在执行完了函数之后，为了提高性能，记得把初始化的实例都销毁掉。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS 模态框————Angular</title>
      <link href="/js-modal-blog/"/>
      <url>/js-modal-blog/</url>
      
        <content type="html"><![CDATA[<p>最近有个功能要做，要用到模态框，了解了一下，可以引用 boostrap + jquery 实现，但是看了看还要引用两个库，麻烦，自己写还来得快点，自己写还有个好处，想写成什么样都行。</p><span id="more"></span><p>主要思路就是，点击按钮，弹出模态框，同时模态框外的区域不可点击。</p><p>页面结构如下：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span> *<span class="attr">ngIf</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 按钮：用于打开模态框 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> (<span class="attr">click</span>)=<span class="string">&quot;show()&quot;</span>&gt;</span></span><br><span class="line">    试卷分析</span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 模态框 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> *<span class="attr">ngIf</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 模态框头部 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span>&gt;</span>试卷分析: 总分(&#123;&#123;allScoreCount&#125;&#125;)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> (<span class="attr">click</span>)=<span class="string">&quot;close()&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 模态框主体 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>mask 模块是一个遮罩层，只有 isShow 为真的时候才会被触发，show 函数用于处理是否要显示模态框和遮罩层，模态框模块也写了个判断，分辨何时显示这个区域，下面是 JS 代码，很简单，但是很实用，很多地方都可以用到，用于控制显示状态。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">isShow</span>: boolean = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">show</span>(): <span class="keyword">void</span> &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">isShow</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">close</span>(): <span class="keyword">void</span> &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">isShow</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 框架与库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 配置前端环境</title>
      <link href="/ubuntu-configure-frontend-environment/"/>
      <url>/ubuntu-configure-frontend-environment/</url>
      
        <content type="html"><![CDATA[<p>ubuntu 配置前端环境</p><span id="more"></span><ol><li><p>下载 sougou 输入法，直接下载安装包双击就行;</p></li><li><p>下载配置 &#96; sublime text ：</p><p>(1) <code>sudo add-apt-repository ppa:webupd8team/sublime-text-3</code></p><p>(2) <code>sudo apt-get update</code></p><p>(3) <code>sudo apt-get install sublime-text-installer</code></p><p>(4) <code>subl</code></p><p>(5) 安装 package control：</p><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request,os,hashlib; h = <span class="string">&#x27;6f4c264a24d933ce70df5dedcf1dcaee&#x27;</span> + <span class="string">&#x27;ebe013ee18cced0ef93d5f746d80ef60&#x27;</span>; pf = <span class="string">&#x27;Package Control.sublime-package&#x27;</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); <span class="keyword">by</span> = urllib.request.urlopen( <span class="string">&#x27;http://packagecontrol.io/&#x27;</span> + pf.replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;%20&#x27;</span>)).<span class="keyword">read</span>(); dh = hashlib.sha256(<span class="keyword">by</span>).hexdigest(); print(<span class="string">&#x27;Error validating download (got %s instead of %s), please try manual install&#x27;</span> % (dh, h)) <span class="keyword">if</span> dh != h <span class="keyword">else</span> <span class="keyword">open</span>(os.path.<span class="keyword">join</span>( ipp, pf), <span class="string">&#x27;wb&#x27;</span> ).<span class="keyword">write</span>(<span class="keyword">by</span>)</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">(<span class="number">6</span>)破解码</span><br><span class="line">```</span><br><span class="line">—– <span class="keyword">BEGIN</span> LICENSE —–</span><br><span class="line">Michael Barnes</span><br><span class="line">Single <span class="keyword">User</span> License</span><br><span class="line">EA7E<span class="number">-821385</span></span><br><span class="line"><span class="number">8</span>A353C41 <span class="number">872</span>A0D5C DF9B2950 AFF6F667</span><br><span class="line">C458EA6D <span class="number">8</span>EA3C286 <span class="number">98</span>D1D650 <span class="number">131</span>A97AB</span><br><span class="line">AA919AEC EF20E143 B361B1E7 <span class="number">4</span>C8B7F04</span><br><span class="line">B085E65E <span class="number">2</span>F5F5360 <span class="number">8489</span>D422 FB8FC1AA</span><br><span class="line"><span class="number">93</span>F6323C FD7F7544 <span class="number">3</span>F39C318 D95E6480</span><br><span class="line">FCCC7561 <span class="number">8</span>A4A1741 <span class="number">68</span>FA4223 ADCEDE07</span><br><span class="line"><span class="number">200</span>C25BE DBBC4855 C4CFB774 C5EC138C</span><br><span class="line"><span class="number">0</span>FEC1CEF D9DCECEC D3A5DAD1 <span class="number">01316</span>C36</span><br><span class="line">—— <span class="keyword">END</span> LICENSE ——</span><br><span class="line">```</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>配置前端环境：</p><p>(1) 安装 node: <code>curl -sL https://deb.nodesource.com/setup_5.x | sudo -E bash -</code> &#x3D;&gt; <code>sudo apt-get install -y nodejs</code></p><p>(2) 更新 node 和 npm: <code>sudo npm install -g n</code> &#x3D;&gt; <code>sudo n stable</code> &#x3D;&gt; <code>sudo npm install npm -g</code></p><p>(3) 安装淘宝 npm 镜像: ‘ sudo npm install cnpm -g &#96;</p><p>(4) 安装 webpack : <code>npm install webpack -g</code></p><p>(5) 安装 vue 脚手架: <code>sudo npm install vue-cli -g</code></p><p>(6) 安装 angular 脚手架：<code>sudo npm i -g @angular/cli</code></p></li><li><p>安装 git: <code>sudo apt-get intall git</code></p></li><li><p>查看软件位置：ex. <code>whereis node</code>、<code>whereis npm</code></p></li><li><p>安装 vscode 及其<a href="https://blog.csdn.net/win7583362/article/details/79315055">插件</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>盒模型</title>
      <link href="/box-model/"/>
      <url>/box-model/</url>
      
        <content type="html"><![CDATA[<h3 id="1-标准盒模型："><a href="#1-标准盒模型：" class="headerlink" title="1. 标准盒模型："></a>1. 标准盒模型：</h3><p>因为 <code>width = margin_box_width(left_width + right_width) + border_width + padding_box_width(left_width + right_width) + content_box_width</code>，所以，同样宽度的内容因为 <code>margin</code>和<code>padding</code> 值不一样，撑开了内容块的宽度，显示出来的效果不尽相同。为了解决这个问题，IE8+可以用设置 <code>box-sizing：border-box</code> 来避免内容块的宽度被撑开。因此，一般可以进行如下设置，使 <code>content_box_width = width</code> 。</p><figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    -webkit-<span class="built_in">box</span>-sizing:<span class="built_in">border</span>-<span class="built_in">box</span>;</span><br><span class="line">    -moz-<span class="built_in">box</span>-sizing:<span class="built_in">border</span>-<span class="built_in">box</span>;</span><br><span class="line">    <span class="built_in">box</span>-sizing:<span class="built_in">border</span>-<span class="built_in">box</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="2-弹性盒模型："><a href="#2-弹性盒模型：" class="headerlink" title="2. 弹性盒模型："></a>2. 弹性盒模型：</h3><p>弹性布局相比传统的块布局要简洁很多，但是实现原理差别挺大的。首先，要想进行弹性布局，要设置 <code>display:flex</code>，确定弹性容器。然后要知道弹性容器里面的内容块定位是由两条轴即主轴和测轴确定的。主轴由 <code>flex-direction</code> 属性值确定是横向还是纵向，<code>justify-content</code> 属性则确定内容块在主轴上的分布形式。内容块在测轴上的分布形式由 <code>align-item</code> 确定，也可以用 <code>align-self</code> 确定单个的内容块分布形式，不过这会覆盖掉 <code>align-item</code> 的值。目前弹性盒布局还没有完全普及，PC 端浏览器支持还不是很好，更多的是用于手机端的布局。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>布尔变量在项目中的应用</title>
      <link href="/boolean-variables-in-project-application/"/>
      <url>/boolean-variables-in-project-application/</url>
      
        <content type="html"><![CDATA[<p>在本次项目中，收获最大的一点应该就是学会了在项目中应用布尔变量了，以下谈谈我对布尔变量使用的一些看法。</p><p>在本次项目中，有一个困扰了我许久的难题，那就是代码的逻辑问题，一开始由于各种逻辑混乱，导致插件效果不尽如人意，插件的控制效果很不理想，最后通过几个布尔变量，轻而易举的弄通了代码逻辑，也使插件很合乎我意的跑了起来，甚至还可以加以扩展。</p><p>下面举个小栗子来说明布尔变量的简单使用吧：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">help</span> =  <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHelp</span>():</span><br><span class="line">    <span class="built_in">help</span> = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> <span class="built_in">help</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">help</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;What can I do for you?)</span></span><br></pre></td></tr></table></figure><p>从上面的例子我们可以看出，布尔变量可以很好的用来控制代码块的执行顺序，在插件中的应用则是很好的控制进入插件后的操作过程，从而实现逻辑清晰的插件。</p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Yml 文件操作方法</title>
      <link href="/yml-file-operations/"/>
      <url>/yml-file-operations/</url>
      
        <content type="html"><![CDATA[<ol><li>文件读取方法示例：</li></ol><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">import yaml</span><br><span class="line">fr = <span class="built_in">open</span>(<span class="string">&#x27;yml_file_address&#x27;</span>, <span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">data = yaml<span class="selector-class">.load</span>(fr)</span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(data)</span></span></span><br><span class="line">fr<span class="selector-class">.close</span>()</span><br></pre></td></tr></table></figure><p>关于 yml 文件的操作，有一个专门的库 yaml ，yaml 直接给出了一个把 yml 文件读取到字典里的方法 load，所以要读取 yml 文件非常简单，只需要引入 yaml 库，用 python 的 open 方法打开文件，用 load 方法读取文件，就可以轻而易举的读取 yml 文件到字典里了。当然其中还是有点坑的，那就是解码的问题，因为默认读取的文件不是字符编码格式，所以要把它转换为字符编码，再传给 load。</p><ol start="2"><li>文件写入方法示例：</li></ol><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line">fr = <span class="keyword">open</span>(<span class="string">&#x27;yml_file_address&#x27;</span>, <span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="keyword">temp</span> = &#123;&quot;fruits&quot;:&quot;banana&quot;&#125;</span><br><span class="line">data = yaml.dump(<span class="keyword">temp</span>,fr, default_flow_style=<span class="keyword">False</span>)</span><br><span class="line">print(data)</span><br><span class="line">fr.<span class="keyword">close</span>()</span><br></pre></td></tr></table></figure><p>yaml 库提供了一个 dump 方法，只需要打开文件，给出要写入的参数（字典形式等），调用 dump 方法就可以很快捷的写入信息到 yml 文件啦</p><ol start="3"><li>这两个方法在项目中的运用：</li></ol><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">修改配置文件昵称</span><br><span class="line">def changeUserName(user):</span><br><span class="line">    fr = open(<span class="string">&#x27;yml_file_address&#x27;</span>, <span class="string">&#x27;r&#x27;</span>,<span class="attribute">encoding</span>=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    data = yaml.load(fr)</span><br><span class="line">    fr.close()</span><br><span class="line">    data[<span class="string">&#x27;robot_name_cn&#x27;</span>] =<span class="built_in"> user</span></span><br><span class="line"><span class="built_in"></span>    fr = open(<span class="string">&#x27;yml_file_address&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="attribute">encoding</span>=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    yaml.dump(data, fr, <span class="attribute">allow_unicode</span>=<span class="literal">True</span>, <span class="attribute">default_flow_style</span>=<span class="literal">False</span>)</span><br><span class="line">    fr.close()</span><br><span class="line">    return data[<span class="string">&#x27;robot_name_cn&#x27;</span>]</span><br><span class="line">修改配置文件密码</span><br><span class="line">def changePassword(password):</span><br><span class="line">    fr = open(<span class="string">&#x27;yml_file_address&#x27;</span>, <span class="string">&#x27;r&#x27;</span>,<span class="attribute">encoding</span>=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    data = yaml.load(fr)</span><br><span class="line">    fr.close()</span><br><span class="line">    data[<span class="string">&#x27;password&#x27;</span>] = password</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;password&#x27;</span> <span class="keyword">in</span> data.keys():</span><br><span class="line">        fr = open(<span class="string">&#x27;yml_file_address&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="attribute">encoding</span>=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        yaml.dump(data, fr, <span class="attribute">allow_unicode</span>=<span class="literal">True</span>, <span class="attribute">default_flow_style</span>=<span class="literal">False</span>)</span><br><span class="line">        fr.close()</span><br><span class="line">        return data[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        fr = open(<span class="string">&#x27;yml_file_address&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="attribute">encoding</span>=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        yaml.dump(data, fr, <span class="attribute">allow_unicode</span>=<span class="literal">True</span>, <span class="attribute">default_flow_style</span>=<span class="literal">False</span>)</span><br><span class="line">        fr.close()</span><br><span class="line">        return data[<span class="string">&#x27;password&#x27;</span>]</span><br></pre></td></tr></table></figure><p>这是两个修改配置信息的函数 changeUserName（） 和 changePassword（），故名思议，就是修改密码和昵称，两个函数的思路都是一样的，先读取配置文件，把相应的信息替换进配置文件里，然后通过写入方法，把这两个信息写入文件中。</p><p>其中的难点可能就是解码和生成 yaml 文件的样式问题了。一开始各种报解码错误，在打开文件的时候加一个 encoding，在写入函数中加一个 allow_unicode&#x3D;True 搞定了。</p><p>解决替换信息在文件中的样式问题， 是在写入函数中加入 default_flow_style&#x3D;False 搞定的。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Python/Go/其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python2 =&gt; Python3 踩坑集合</title>
      <link href="/python-pitfalls-collection/"/>
      <url>/python-pitfalls-collection/</url>
      
        <content type="html"><![CDATA[<p>python2 &#x3D;&gt; python3 踩坑集合</p><span id="more"></span><h3 id="1-报错内容："><a href="#1-报错内容：" class="headerlink" title="1. 报错内容："></a>1. 报错内容：</h3><p>ModuleNotFoundError: No module named ‘md5’</p><h4 id="解析："><a href="#解析：" class="headerlink" title="解析："></a>解析：</h4><p>这是 python2 的库，python3 已经把它包含进 hashlib 库里了</p><h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><p>直接把对 md5 库的引用语句注释掉，改为引用 hashlib 库</p><h3 id="2-报错内容："><a href="#2-报错内容：" class="headerlink" title="2. 报错内容："></a>2. 报错内容：</h3><p>AttributeError: module ‘sys’ has no attribute ‘setdefaultencoding’</p><h4 id="解析：-1"><a href="#解析：-1" class="headerlink" title="解析："></a>解析：</h4><p>python2 的默认字符编码为 ASCII 编码，所以有 setdefaultencoding 这个方法转换为 utf-8 编码，而 python3 的默认字符编码是 unicode 编码，这种编码本身支持汉字，所以就不存在上述方法了</p><h4 id="解决方法-1"><a href="#解决方法-1" class="headerlink" title="解决方法"></a>解决方法</h4><p>直接把该语句注释掉</p><h3 id="3-报错内容："><a href="#3-报错内容：" class="headerlink" title="3. 报错内容："></a>3. 报错内容：</h3><p>ModuleNotFoundError: No module named ‘urlparse’</p><h4 id="解析：-2"><a href="#解析：-2" class="headerlink" title="解析："></a>解析：</h4><p>urlparse 是 python2 的库，python3 已经把这个库重命名为 urllib.parse 了</p><h4 id="解决方法-2"><a href="#解决方法-2" class="headerlink" title="解决方法"></a>解决方法</h4><p>把对 urlparse 库的引用语句注释掉，改为引用 urllib.parse 库</p><h3 id="4-报错内容："><a href="#4-报错内容：" class="headerlink" title="4. 报错内容："></a>4. 报错内容：</h3><p>ModuleNotFoundError: No module named ‘urlparse’</p><h4 id="解析：-3"><a href="#解析：-3" class="headerlink" title="解析："></a>解析：</h4><p>urlparse 是 python2 的库，python3 已经把这个库重命名为 urllib.parse 了</p><h4 id="解决方法-3"><a href="#解决方法-3" class="headerlink" title="解决方法"></a>解决方法</h4><p>把对 urlparse 库的引用语句注释掉，改为引用 multiprocessing 库里了</p><h3 id="5-报错内容："><a href="#5-报错内容：" class="headerlink" title="5. 报错内容："></a>5. 报错内容：</h3><p>ModuleNotFoundError: No module named ‘Queue’</p><h4 id="解析：-4"><a href="#解析：-4" class="headerlink" title="解析："></a>解析：</h4><p>Queue 是 python2 的库，python3 已经把这个库加到 multiprocessing 里了</p><h4 id="解决方法-4"><a href="#解决方法-4" class="headerlink" title="解决方法"></a>解决方法</h4><p>把对 Queue 库的引用语句注释掉，改为引用 <code>from multiprocessing import Queue</code></p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Python/Go/其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sublime Text3 配置 node.js 环境</title>
      <link href="/sublime-text-nodejs-config/"/>
      <url>/sublime-text-nodejs-config/</url>
      
        <content type="html"><![CDATA[<p>前提：windows 系统，你已经安装了 Sublime Text3，电脑已经有 node 环境。</p><span id="more"></span><h4 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h4><ul><li>下载 sublime 的 nodejs 插件，需是集成 Nodejs 插件到 sublime 中，下载地址：<a href="https://github.com/tanepiper/SublimeText-Nodejs">https://github.com/tanepiper/SublimeText-Nodejs</a></li><li>解压 zip 文件， 并重命名文件夹“Nodejs”</li><li>打开 sublime，操作”preference” –&gt; “Browse packages”, 打开一个目录，这个目录是众多语言 IDE 插件的存放地。<br>*  复制”Nodejs“文件夹到这个目录。 <br>*   打开 Nodejs 文件夹，找到文件“Nodejs.sublime-build”， 拖拽到 sublime，显示：       <code>&#123;"cmd": ["node", "$file"],"file*regex": "^[ ]\_File \"(...*?)\", line ([0-9]\*)","selector": "source.js","shell":true,"encoding": "cp1252","windows":&#123;"cmd": ["taskkill /F /IM node.exe & node", "$file"]&#125;,"linux":&#123;"cmd": ["killall node; node", "$file"]&#125;&#125;</code></li><li>需要更改上面标注的地方， 要更改 encoding 为 GB2312 或者 utf8，如果不更改此属性可能导致 build nodejs 代码时终端显示乱码。</li><li>要用 sublime 打开文件“Nodejs.sublime-settings” 或者 设置“preference” –》 “package settings” –》 “Nodejs”  –》“setting-default” 打开文件并 更改成：<code>&#123;// save before running commands"save_first": true,// if present, use this command instead of plain "node"// e.g. "/usr/bin/node" or "C:\bin\node.exe""node_command": /usr/bin/nodejs,// Same for NPM command"npm_command": /usr/bin/npm,// as 'NODE_PATH' environment variable for node runtime"node_path": false,"expert_mode": false,"ouput_to_new_tab": false&#125;</code>到此，已经配置好了。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tensorflow 模型训练步骤</title>
      <link href="/model-training-steps/"/>
      <url>/model-training-steps/</url>
      
        <content type="html"><![CDATA[<h3 id="使用-tensorflow-进行算法设计、训练的步骤"><a href="#使用-tensorflow-进行算法设计、训练的步骤" class="headerlink" title="使用 tensorflow 进行算法设计、训练的步骤"></a>使用 tensorflow 进行算法设计、训练的步骤</h3><ol><li><p>定义算法公式，也就是神经网络 forward 时的计算；</p></li><li><p>定义 loss，选定优化器，比如 SGD，并指定优化器 loss；</p></li><li><p>迭代的对数据集进行训练；</p></li><li><p>在测试集上对准确率进行评测；</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 下配置Ss</title>
      <link href="/ubuntu-configure-ss/"/>
      <url>/ubuntu-configure-ss/</url>
      
        <content type="html"><![CDATA[<p>ubuntu 下配置 ss 步骤</p><span id="more"></span><ol><li><p>pip install shadowshocks</p></li><li><p>创建 json 文件，内容如下：</p></li></ol><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;server&quot;</span><span class="punctuation">:</span><span class="string">&quot;ip&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;server_port&quot;</span><span class="punctuation">:</span><span class="number">3002</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;local_port&quot;</span><span class="punctuation">:</span><span class="number">1080</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;password&quot;</span><span class="punctuation">:</span><span class="string">&quot;psd&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span><span class="number">600</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;method&quot;</span><span class="punctuation">:</span><span class="string">&quot;加密方法&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>系统设置&gt;&gt;网络设置&gt;&gt;网络代理&gt;&gt;手动，填写 socks 主机和端口信息：127.0.0.1：1080</p></li><li><p>sslocal -c &#x2F;home&#x2F;canace&#x2F;文档&#x2F;ss.json 开启全局 ss</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 下 Tensorflow CPU Release 版安装</title>
      <link href="/ubuntu-install-tensorflow/"/>
      <url>/ubuntu-install-tensorflow/</url>
      
        <content type="html"><![CDATA[<p>ubuntu 下 tensorflow CPU release 版安装步骤</p><span id="more"></span><h3 id="安装-anaconda："><a href="#安装-anaconda：" class="headerlink" title="安装 anaconda："></a>安装 anaconda：</h3><ol><li><p>下载<a href="https://repo.continuum.io/archive/">anaconda3-4.2.0 linux 版本</a></p></li><li><p>到 anaconda 的下载目录下执行一下命令：<code>bash Anaconda3-4.2.0-Linux-x86_64.sh</code></p></li><li><p>接下来就是按照提示一步步的往下就行了，会自动安装各种包，直到结束</p></li><li><p><code>echo &#39;export PATH=&quot;/home/canace/anaconda3/bin:$PATH&quot;&#39;&gt;&gt; ~/.bashrc</code>&gt;&gt;<code>source ~/.bashrc</code>启用 anaconda</p></li></ol><h3 id="tensorflow-环境配置："><a href="#tensorflow-环境配置：" class="headerlink" title="tensorflow 环境配置："></a>tensorflow 环境配置：</h3><ol><li>tensorflow 安装：<br><code>conda install tensorflow</code>（不要连代理，因为连了代理很可能装不成功）</li></ol><h4 id="PS"><a href="#PS" class="headerlink" title="PS:"></a>PS:</h4><h5 id="conda-常用命令："><a href="#conda-常用命令：" class="headerlink" title="conda 常用命令："></a>conda 常用命令：</h5><p>conda list：可以显示已经安装好的库。</p><p>conda install 库名 ：可以直接安装想要的库。如：conda install tensorflow</p><p>conda update 库名：升级库</p>]]></content>
      
      
      <categories>
          
          <category> AI探索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深度工作哲学解读</title>
      <link href="/deep-work-philosophy-interpretation/"/>
      <url>/deep-work-philosophy-interpretation/</url>
      
        <content type="html"><![CDATA[<p>卡尔.纽波特的《深度工作》一书中提到，深度工作的哲学包括以下几种：</p><ol><li><p>禁欲主义哲学；</p></li><li><p>双峰哲学；</p></li><li><p>节奏哲学；</p></li><li><p>新闻工作者哲学；</p></li></ol><p>以下是个人的一下理解：</p><ol><li><p>深度工作与浮浅工作相对，是一种排除外界干扰，长时间连续的集中全部精力于某一项活动的工作形式。</p></li><li><p>以上四种深度工作哲学按专注时间从长到短的顺序排列依次是：禁欲主义哲学 &gt; 双峰哲学 &gt; 节奏哲学 &gt; 新闻工作者哲学。</p></li><li><p>禁欲主义哲学主张工作中全力排除一切干扰，专注于工作，比如说作家隐居写作就是运用了这种深度工作哲学，适合使用这种哲学的人，一般是有很高的职业追求的人，并且这种人的职业看得到实际的产出，比如说作家一年要出多少本书。此外，使用这种哲学要求长时间的与世隔绝，过一种苦行僧式的生活。</p></li><li><p>双峰哲学是把生活中的时间分为部分，一部分用于深度工作，一部分用于浮浅工作。比如说一年有十二个月，可以预备三个月完全与世隔绝，用来进行深度工作。或者是每一周花一天完全与世隔绝进行深度工作。这种哲学要求要有大于一天的深度工作时间，可以说适合大部分人。</p></li><li><p>节奏哲学主张养成深度工作的习惯，每天花一部分的时间进行深度学习。比如八点半上班，可以五点起来进行深度工作到七点半。这是个人比较推崇的一种深度工作哲学，这种哲学可以保证每天都有一定的高效工作的时间，可以做任何自己想做的目标事物，坚持一段时间就能看到产出，还是很不错的，适合任何有有目标的人群。</p></li><li><p>新闻工作者哲学，顾名思义，像新闻工作者一样，随时可以进入状态。这种哲学只适合已熟使用其他哲学的少部分人，要求随时能够进入到深度工作的状态。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读书笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu 登陆华南师范大学校园网的方法</title>
      <link href="/method-to-login-to-south-china-normal-university-campus-network/"/>
      <url>/method-to-login-to-south-china-normal-university-campus-network/</url>
      
        <content type="html"><![CDATA[<p>最近刚装了 unbuntu 系统,刚开始网络连接遇到了点小问题,原来是校园网不知道怎么认证,于是向好基友请教了下,得出快捷的方法如下:</p><ol><li><p>下载学校网络的认证客户端,记住位置,一般都是默认下载地址是 Download.</p></li><li><p>使用快捷键<code>Ctrl+Alt+T</code>打开终端，使用命令 <code>cd ~/下载</code> 或 <code>cd ～/Downloads</code>（如果您的系统语言为英文）进入文件下载目录。</p></li><li><p><code>unzip *.zip</code> 解压刚刚下载的客户端压缩文件,</p></li><li><p>如果您的下载目录不止一个 zip 文件，请把名字打全一点，如：<code>unzip RG_*.zip</code>,RG 为文件名.</p></li><li><p>如果提示 unzip 未安装，请安装它： <code>sudo apt-get install unzip</code> ；若提示输入密码，请输入您的系统账户密码，输入过程中不会有***的显示；若提示需要联网下载，请先用 Wifi（比如手机热点），安装文件并不大。</p></li></ol><p>6 以后的步骤,以后我们每次打开电脑都用这几行代码进行认证,可以复制到一个文件里,懒得每次都打代码</p><ol start="6"><li><p><code>cd ~/下载</code> –切换到安装目录</p></li><li><p><code>cd rjsup*</code> –进入文件夹.</p></li><li><p><code>sudo chmod +x ./rjsupplicant.sh</code> –给予 sh 文件最高权限</p></li><li><p><code>(sudo ./rj*.sh --dhcp=1 --nic=enp2s0 --user=201***** --password=****** &amp;)</code>进行认证,user 后是校园网账号,password 后是校园网密码.</p></li><li><p><code>service network-manager restart</code> 重新显示网络中心图标</p></li></ol><p>切记以后每次认证网络都用</p><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">cd ~/下载</span><br><span class="line">cd rjsup*</span><br><span class="line">sudo chmod +x ./rjsupplicant.sh</span><br><span class="line">(sudo ./rj*.sh <span class="attribute">--dhcp</span>=1 <span class="attribute">--nic</span>=enp2s0 <span class="attribute">--user</span>=20143702058 <span class="attribute">--password</span>=232824 &amp;)<span class="built_in"></span></span><br><span class="line"><span class="built_in">service </span>network-manager restart</span><br></pre></td></tr></table></figure><p>这几行代码,一条代码执行完再执行下一条.</p><p>本文是看完 blackstorm 的博客之后的笔记,因为对于小白来说,他写的文章太晦涩了,第一次看很懵懂,所以我就把他的文章简化了.</p>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>天使之恋</title>
      <link href="/angel-love/"/>
      <url>/angel-love/</url>
      
        <content type="html"><![CDATA[<p>天使之恋，是一部日本的爱情电影。</p><p>电影主要讲述的是失足女高中生由里与得了脑肿瘤又不愿意做手术准备等死的光辉大叔的纯纯的爱情故事。其实，选择继续看这部电影，是因为一开头给了一个镜头，是在医院中，光辉大叔刚从检查室出来，遇到由里和她妈妈，并且插肩而过，当时就在想，这样医院中毫不相干的两个人怎么把他们联系起来呢？后来看到由里跟一个老人家在一起，以为她做了人家的小三，应该跟在医院邂逅的那个大叔无关，可是这个画面也给了大叔一个镜头。再后一点，看到由里跟一个女的在床上接吻，心想，可能由里是一个双性恋者。就是跟着这一个个线索，最后我才看到了这部电影的最深情节，17岁的高中女生与35岁的大叔的纯洁的爱情故事，非常动人。大叔即使知道由里之前做过援交女的种种劣迹，依然表示自己是真的爱由里。也许，这就是浪漫主义的剧情吧。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>海边的曼彻斯特</title>
      <link href="/manchester-by-the-sea/"/>
      <url>/manchester-by-the-sea/</url>
      
        <content type="html"><![CDATA[<p>看完这部影片，用一个词来形容就是安静，安静的环境下，平凡的生活，同时又夹杂着男主人过去的故事。很喜欢这种叙述方式，通过唯美的画面，渲染故事情节，将男主人公的伤心，悔恨，往事不堪回首等种种复杂心情，一一展现。</p><p>整部片围绕乔的葬礼，层层铺垫，叙事朴实而又不会让人觉得乏味。</p><p>在看影片的过程中，我就想：要是自己能死于这样大雪纷飞的冬天里，那该多好啊，估计此生也无憾了吧。摇荡的海水也是我喜欢的，它使人冷静而又充满了哲思。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Wordpress安装</title>
      <link href="/wordpress-installation/"/>
      <url>/wordpress-installation/</url>
      
        <content type="html"><![CDATA[<p><a href="https://codex.wordpress.org/zh-cn:%E5%AE%89%E8%A3%85_WordPress#.E6.AD.A5.E9.AA.A43:.E8.AE.BE.E7.BD.AEwp-config.php">原文链接：</a></p><ol><li><p>下载并解压缩 WordPress 程序安装包</p></li><li><p>在你的网页服务器上为 WordPress 创建一个数据库, 并且创建一个 MySQL 拥有所有权限可以进入和修改的用户</p></li><li><p>重命名 wp-config-sample.php 文件为 wp-config.php</p></li><li><p>把 WordPress 文件夹放在你服务器上想要放的地方:</p></li></ol><p>(1) 如果你想把通过顶级域名来访问你的 WordPress 博客 (例如 <a href="http://example.com/),%E7%A7%BB%E5%8A%A8%E6%88%96%E4%B8%8A%E4%BC%A0%E6%89%80%E6%9C%89%E8%A7%A3%E5%8E%8B%E5%90%8E%E7%9A%84">http://example.com/),移动或上传所有解压后的</a> WordPress 文件夹里面的文件(但不包括 WordPress 文件夹本身) 到你服务器的根目录下.</p><p>(2) 如果你想通过子域名来访问你的博客(例如 <a href="http://example.com/blog/">http://example.com/blog/</a>), 将 wordpress 重命名为你想要的子目录名称， 接着上传至你的网站服务器。 例如，你想让 WordPress 安装在子目录”blog”中，你就应该将”wordpress”这个文件夹重命名为”blog”，接着上传至你的网站服务器的根目录中。</p><ol start="5"><li>在你喜欢的浏览器中访问 wp-admin&#x2F;install.php 以便启动安装程序.</li></ol><p>(1) 如果你在根目录下安装 WordPress,，你应该访问: <a href="http://example.com/wp-admin/install.php">http://example.com/wp-admin/install.php</a></p><p>(2) 如果你将 WordPress 安装在子目录 blog 下，你应该访问: <a href="http://example.com/blog/wp-admin/install.php">http://example.com/blog/wp-admin/install.php</a></p>]]></content>
      
      
      <categories>
          
          <category> 网站建设 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitpage 搭建 Hexo 博客</title>
      <link href="/gitpage-hexo/"/>
      <url>/gitpage-hexo/</url>
      
        <content type="html"><![CDATA[<p>大半天，一边折腾，一边查找各种文档，写出的这篇文档，不知道有没有把程序表示得足够简明，有不足之处望指明。</p><p>1、前提：已安装好 nodeJS 和 git。</p><p>2、桌面右击进入 gitbash，输入 <code>npm install -g hexo</code> 安装 hexo，关闭 gitbash。</p><p>3、在电脑中建立一个名为【hexo】的文件夹，新建的文件夹右击打开 gitbash，输入 hexo init 命令，命令执行完后，根据提示接着执行 npm install 命令。</p><p>4、运行 hexo server 命令，出现 running 字样说明 Hexo Server 已经启动了，在浏览器中打开<a href="http://localhost:4000/%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E7%94%9F%E6%88%90%E7%9A%84%E5%8D%9A%E5%AE%A2%EF%BC%8C%E6%8C%89ctrl+C%E5%8F%AF%E4%BB%A5%E5%81%9C%E6%AD%A2server%EF%BC%9B%E3%80%82">http://localhost:4000/，可以看到生成的博客，按ctrl+C可以停止server；。</a></p><p>5、新打开一个 git bash 命令行窗口，cd 到&#x2F;D&#x2F;hexo 下，执行 hexo new “My New Post” 命令,可以生成一篇新的文章 “My New Post”，打开<a href="http://localhost:4000/">http://localhost:4000/</a> 可以预览到新生成的文章。</p><p>6、执行 hexo generate 命令可以将 markdown 文章生成静态网页，该命令执行完后，会在 D:\Hexo\public\ 目录下生成一系列 html，css 等文件。</p><p>7、hexo new “My NewPost”会在 D:\Hexo\source\ _posts 目录下生成一个 markdown 文件：My-New-Post.md，可以使用一个支持 markdown 语法的编辑器（比如 Sublime Text 2）来编辑该文件。</p><p>8、部署博客到 github</p><p>(1) 部署到 Github 前需要配置_config.yml 文件，首先找到下面的内容</p><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">deploy:</span></span><br><span class="line"><span class="symbol">type:</span></span><br></pre></td></tr></table></figure><p>(2) 然后将它们修改为</p><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">deploy:</span></span><br><span class="line"><span class="symbol">type:</span> git（新版本的hexo必须用git，不然会出错）</span><br><span class="line"><span class="symbol">repository:</span>git@github.com:zhchnchn/zhchnchn.git（新版本用SSH不然会出错）</span><br><span class="line"><span class="symbol">branch:</span> gh-pages</span><br></pre></td></tr></table></figure><p>(3) 执行 npm install hexo-deployer-git –save 命令（hexo3.0 以上的版本必须在执行此命令后才能部署到 git 上）</p><p>A. 执行 hexo clean，清除缓存</p><p>B. 执行 hexo generate 更新生成静态网页</p><p>C. 执行hexo deploy 命令部署博客到github上；</p><p>D. 部署完成后，在浏览器中打开<a href="http://zhchnchn.github.io/%EF%BC%88https://zhchnchn.github.io/%EF%BC%89">http://zhchnchn.github.io/（https://zhchnchn.github.io/）</a> ，正常显示网页，表明部署成功。</p><h3 id="注意两大坑"><a href="#注意两大坑" class="headerlink" title="注意两大坑:"></a>注意两大坑:</h3><p>1、deploy 不了，3.0 版本以上要执行这个命令： npm install hexo-deployer-git<br>   –save，切记！不然可能一直 error</p><p>2、然后部署到 git 上记得修改 url，不然可能发布之后有些 js 和 css 文件路径找不到！</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS 概谈</title>
      <link href="/js-overview/"/>
      <url>/js-overview/</url>
      
        <content type="html"><![CDATA[<p>话说 JavaScript 其实是诞生在一个特殊的时期，20 世纪 90 年代，正值第三次科技革命时期，互联网刚开始进入人们的生活。设想一下，在网速只有几十比特的那个时代，在登录注册时要花上很长一段时间等待服务器传回验证信息，会是怎样一种体验？简直是嘴上也不笑眯眯，心里千万句 mmp 吧？为了解决这个问题，网景公司着手设计出了 JavaScript，与它的浏览器一起捆绑推出。</p><span id="more"></span><p>这里有个问题，那就是 Java 跟 JavaScript 有什么关系呢？毕竟单词里都带有相同的“Java”字节，难免会让人把他们联系在一起啊。这里只要记住 Java 跟 JavaScript 没有半毛钱关系，如果说勉强算得上有关系的话，那就是 JavaScript 在创立之初本名叫 LiveScript，但是因为当时 Java 风头正足，为了蹭热点，改了名。</p><p>JavaScript 在诞生之初，有一些克隆兄弟，比如微软家推出的 JScript。我们知道，克隆人的出现会影响社会秩序，编程语言亦然。论天下之大事，分久必合，合久必分，这个时候就继续一个统一的标准对这些脚本语言进行规范了，于是 ECMA 组织了一些大公司的程序员开始策划这个规范，ECMAScript 第一代就这样诞生了。现在我们说的 JavaScript 其实是说对 ECMAScript 的实现。</p><p>ECMAScript 第一代出现后，很快就繁衍到了第二代，但是这一代的 ECMAScript 基本继承了第一代的特性，对 JavaScript 的语法、句法进行描述，没有做什么改动。到第三代的时候，ECMAScript 已经开始成熟，可以被称为一门编程语言了，其中加入了新的的描述，比如支持错误处理、正则表达式等。第四代的 ECMAScript 可以说是废弃的一代，因为它的欲望太强了，试图改朝换代，把旧有的 ECMAScript 改得面目全非，最终没有被组织通过。第五代的 ECMAScript 可以说是经历了一个漫长的讨论孕育期终于在 2009 年发布了正式版，对 ECMAScript 特性进行了进一步的描述，包括引入模式，弥补 JAVAScript 松散的语言结构缺点，提供了更多方便快捷的新方法等。紧随着 ECMAScript5 之后，2015 年演化出了 ECMAScript6，这一代的 ECMAScript 是他自己看起来更像是一门系统的编程语言了，添加了箭头年符号简化函数的写法，强化了对象字面量等都使他看起来更像是年轻力壮的青年男子。进入壮年后的 ECMAScript 发展更加迅速了，2016 年推出了第六代，新增了 Array.prototype.includes 和幂运算符。2017 年又奋起直追，推出了第八代，新增了字符串填充、对象值遍历、对象的属性描述符获取、 函数参数列表与调用中的尾部逗号、异步函数、共享内存与原子操作等。</p><p>所以，时至今日，ECMAScript 也就是 JavaScript 的核心标准已经发展到了第八代，但是比较经常听到周围人提起的依然是 ECMAScript6。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript&amp;TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django-Channels</title>
      <link href="/Django-channels/"/>
      <url>/Django-channels/</url>
      
        <content type="html"><![CDATA[<p>写在前面，这个项目用到了 py 的全能框架 Django 来写 web 界面，其中引用了一个通道插件 Django Channel。Django Channels 是为了解决 Django 只发送一个调用视图请求，却不断发送数据到客户端的问题而存在的。Django Channels 的实现机制大概是：生产者把消息推到通道队列中，再通过通道队列把消息传递给消费者之一。</p><span id="more"></span><h5 id="一、-关于-Django-实现实时聊天应用"><a href="#一、-关于-Django-实现实时聊天应用" class="headerlink" title="一、 关于 Django 实现实时聊天应用"></a>一、 关于 Django 实现实时聊天应用</h5><p>Django 实现实时聊天应用一共分为以下几步：</p><ol><li><p>定义一个模型，用来表示聊天室和其中的消息；</p></li><li><p>创建聊天室视图以及相应的 urls.py 和模板；</p></li><li><p>定义一个通道层；</p></li><li><p>创建通道路由；</p></li><li><p>替换 Django 的基于 HTTP&#x2F;WSGI 的请求处理器；</p></li><li><p>运行应用</p></li></ol><h5 id="二、-项目目录"><a href="#二、-项目目录" class="headerlink" title="二、 项目目录"></a>二、 项目目录</h5><p>主要包括以下文件。</p><ol><li><p><strong>urls.py</strong> 是 Django 项目的 URL 声明，配置目录映射。</p></li><li><p><strong><em>init</em>.py</strong> 是一个空文件，告诉 python 该目录事一个 python 包。</p></li><li><p><strong>setting.py</strong> 是 Django 项目的配置文件，包括 template 模板 path 设置之类的。</p></li><li><p><strong>wsgi.py</strong> 是 WSGI 兼容的 Web 服务器入口。</p></li><li><p><strong>asgi.py</strong> 文件用于替换 Django 的基于 HTTP&#x2F;WSGI 的请求处理器。</p></li><li><p><strong>production.py</strong> 创建队列消息。</p></li><li><p><strong>logger.py</strong> 提供 log 接口，记录 log，这里可以直接这么用，是因为在 setting 里已经配置过 logging 了。</p></li></ol><h5 id="三、-网页文件"><a href="#三、-网页文件" class="headerlink" title="三、 网页文件"></a>三、 网页文件</h5><p>主要网页文件，相当于 Django 框架的一个应用实例，通过 urls.py 可以映射到该文件夹并进行页面或者函数的调用。</p><ol><li><p><strong>admin.py</strong> 文件调用了 Django 的网站后台管理模块，主要使用方式是在 Django 框架的 url.py 中映射路径，激活该功能。</p></li><li><p><strong>apps.py</strong> 配置应用信息.</p></li><li><p><strong>consumer.py</strong></p><p>(1) 首先检测有没有新的请求要求打开 WebSocket,有的话,记录该请求产生的房间并给出回应。</p><p>(2) 接着，检测有没有新的消息请求，有的话，先把它转换为 json 字段，然后把它放入消息队列，并给出回应，这个过程会一直执行，知道接下来收到客户端发出的结束请求为止。简言之，这个文档就是实现线程通信的，俗称实时通信。</p></li><li><p><strong>routing.py</strong> 通信路由，用于连接 WebSocket。</p></li><li><p><strong>view.py</strong> 视图页，渲染前端页面。</p></li><li><p><strong>accounts 文件夹</strong> 是用户组件。</p></li></ol><h5 id="四、-tensorflow-组件"><a href="#四、-tensorflow-组件" class="headerlink" title="四、 tensorflow 组件"></a>四、 tensorflow 组件</h5><p>主要是用了 tensorflow 进行人机交互。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Python/Go/其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 使用指南</title>
      <link href="/hexo-getting-started/"/>
      <url>/hexo-getting-started/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><span id="more"></span><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 网站建设 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建 Django 博客系统</title>
      <link href="/build-django-blog-system/"/>
      <url>/build-django-blog-system/</url>
      
        <content type="html"><![CDATA[<h5 id="一、-环境："><a href="#一、-环境：" class="headerlink" title="一、 环境："></a>一、 环境：</h5><p>win7 系统、Django、python</p><h5 id="二、-需求分析："><a href="#二、-需求分析：" class="headerlink" title="二、 需求分析："></a>二、 需求分析：</h5><p>实现博客的创建、编辑和删除功能，并开通后台 admin,加入富文本编辑器，并入项目中</p><h5 id="三、-搭建-Django-网站："><a href="#三、-搭建-Django-网站：" class="headerlink" title="三、 搭建 Django 网站："></a>三、 搭建 Django 网站：</h5><ol><li><p>检查 Django 版本信息，python &gt;&gt; import django &gt;&gt; django.get_version()</p></li><li><p>启动 DOS 命令窗口，切换到相应文件路径，输入：<code>django-admin startproject mysite(网站名称)</code> 命令，创建一个 blog 项目目录。</p></li><li><p><code>cd mysite</code> &gt; <code>ls -l</code> 查看项目目录，可以看到项目目录包括：<em>init</em>.py、manage.py、setting.py、urls.py。<em>init</em>.py 会把项目目录变成一个 python 包（相关模块的一个集合)，可以方便我们用 python 的“点记号”来制定项目中的某个部分，比如 mysite.urls。</p></li><li><p>manage.py 是项目的启动文件，我们完成之后，要在 dos 中启动的就是这个文件。</p></li><li><p>setting.py 顾名思义，项目的配置文件，主要用来配置数据库、变量之类的基础信息。</p></li><li><p>urls.py 有点像路由配置，就是一些路径的集合，方便在文件中调用。</p></li></ol><h5 id="四、-搭建-Django-博客："><a href="#四、-搭建-Django-博客：" class="headerlink" title="四、 搭建 Django 博客："></a>四、 搭建 Django 博客：</h5><p><code>cd mysite</code> &lt; <code>python manage.py startapp blog</code> 利用 manage.py 创建博客 app，可以看到生成了<em>init.py</em>、models.py、views.py。同样的,<em>init</em>.py 把博客变成了一个 python 包，model.py 和 views.py 是两个空文件，先占着位置。</p><h5 id="五、-修改配置文件："><a href="#五、-修改配置文件：" class="headerlink" title="五、 修改配置文件："></a>五、 修改配置文件：</h5><p>打开 setting.py ，找到 INSTALLED_APPS 元组，把 APP 以模块的形式添加到元组里。</p><h5 id="六、-初始化后台数据库："><a href="#六、-初始化后台数据库：" class="headerlink" title="六、 初始化后台数据库："></a>六、 初始化后台数据库：</h5><ol><li><p>由于使用的是 mysql 数据库，而 Django 默认的数据库是 SQLite3 ，所以需要修改 setting.py 文件中的数据库信息。</p></li><li><p>同步数据库信息：<code>python manage.py migrate</code></p></li><li><p>创建超级管理员账号，用于登录 admin 初始化后台数据库</p></li><li><p>访问 admin 后台： <code>python manage.py runserver</code> 启动页面，然后在主页链接后面加上 admin 路径 &#x2F;admin&#x2F;，用新创建的超级用户登录，就可以看到管理者后台了。</p></li></ol><h5 id="七、设计数据表"><a href="#七、设计数据表" class="headerlink" title="七、设计数据表"></a>七、设计数据表</h5><p>打开 blog 目录下的 models.py 文件，加入以下代码：</p><figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BlogsPost</span>(models.Model):</span><br><span class="line">    title = models.CharField(max_length = <span class="number">150</span>)  <span class="comment"># 博客标题</span></span><br><span class="line">    body = models.TextField()                   <span class="comment"># 博客正文</span></span><br><span class="line">    timestamp = models.DateTimeField()          <span class="comment"># 创建时间</span></span><br></pre></td></tr></table></figure><p>然后执行 <code>python manage.py makemigrations blog</code> &gt; <code>python manage.py migrate</code> 命令，同步数据库。</p><h5 id="八、-admin-后台管理搭建："><a href="#八、-admin-后台管理搭建：" class="headerlink" title="八、 admin 后台管理搭建："></a>八、 admin 后台管理搭建：</h5><ol><li><p>打开 setting.py 文件，找到 INSTALLED_APPS 添加 <code>django.contrib.admin</code> 内置模块到元组里。</p></li><li><p>打开 urls.py ，配置 admin 的 url 映射，也就是添加<code>（r&#39;^admin/&#39;,include(django.contrib.admin.urls&#39;)),</code>到文件里。</p></li><li><p>注册 BlogPost model，打开 blog&#x2F;models.py 文件，添加以下代码,启动项目，访问 admin 路径，就可以在后台添加 blog 文章了。</p></li></ol><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="title">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"></span><br><span class="line"><span class="meta"># Create your models here.</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">BlogsPost</span>(<span class="title">models</span>.<span class="type">Model</span>):</span></span><br><span class="line"><span class="class">    title = models.<span class="type">CharField</span>(<span class="title">max_length</span> = 150)  # 博客标题</span></span><br><span class="line"><span class="class">    body = models.<span class="type">TextField</span>()                   # 博客正文</span></span><br><span class="line"><span class="class">    timestamp = models.<span class="type">DateTimeField</span>()          # 创建时间</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">admin.site.register(<span class="type">BlogsPost</span>,<span class="type">BlogPostAdmin</span>)</span></span><br></pre></td></tr></table></figure><ol start="4"><li>但是我们发现这个 blog 管理界面有点丑，怎么办？添加一个列表展示类，就可以选择我们需要展示的内容了，代码如下,打开页面，点击 title 我们可以发现会按照 title 进行文章排序，点击其他两个，一样的效果。</li></ol><figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BlogPostAdmin</span>(admin.ModelAdmin):</span><br><span class="line">    list_display = (<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;body&#x27;</span>,<span class="string">&#x27;timestamp&#x27;</span>)</span><br></pre></td></tr></table></figure><h5 id="九、-创建文章列表模板："><a href="#九、-创建文章列表模板：" class="headerlink" title="九、 创建文章列表模板："></a>九、 创建文章列表模板：</h5><p>在 blog 项目下创建 templates 目录（mysite&#x2F;blog&#x2F;templates&#x2F;）,在目录下创建模板文件 archive.html，内容如下：</p><figure class="highlight handlebars"><table><tr><td class="code"><pre><span class="line"><span class="language-xml">&#123;% for post in posts %&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><span class="template-variable">&#123;&#123; <span class="name">post.title</span> &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="template-variable">&#123;&#123; <span class="name">post.timestamp</span> &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="template-variable">&#123;&#123; <span class="name">post.body</span> &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#123;% endfor %&#125;</span></span><br></pre></td></tr></table></figure><h5 id="十、创建视图模板"><a href="#十、创建视图模板" class="headerlink" title="十、创建视图模板"></a>十、创建视图模板</h5><p>打开 mysite&#x2F;blog&#x2F;views.py 文件，添加以下代码：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.template <span class="keyword">import</span> loader,context</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> matrixtech.blog.models <span class="keyword">import</span> BlogsPost</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">archive</span>(<span class="params">request</span>):</span><br><span class="line">    blog_list = BlogsPost.objects.<span class="built_in">all</span>()  <span class="comment"># 获取所有数据</span></span><br><span class="line">    t  = loader.get_template(<span class="string">&#x27;archive.html&#x27;</span>)</span><br><span class="line">    c = context(&#123;&#123;<span class="string">&#x27;posts&#x27;</span>: posts &#125;&#125;)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(t.render(c))  <span class="comment"># 返回blog.html页面</span></span><br></pre></td></tr></table></figure><h5 id="十一、创建-blog-的-url"><a href="#十一、创建-blog-的-url" class="headerlink" title="十一、创建 blog 的 url"></a>十一、创建 blog 的 url</h5><ol><li>在 mysite&#x2F;urls 里创建 url 模式，添加如下代码</li></ol><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">url(<span class="string">r&#x27;^blog/&#x27;</span>, include(<span class="string">&#x27;blog.urls&#x27;</span>))</span><br></pre></td></tr></table></figure><ol start="2"><li>在 blog&#x2F;urls 定义 url，添加以下代码,重启服务，就可以访问 blog 了。</li></ol><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls.defaults <span class="keyword">import</span>  *</span><br><span class="line"><span class="keyword">from</span> matrixtech.blog.views <span class="keyword">import</span> archive</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r&#x27;^$&#x27;</span>, archive),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h5 id="十二、-博客整合到网站中"><a href="#十二、-博客整合到网站中" class="headerlink" title="十二、 博客整合到网站中"></a>十二、 博客整合到网站中</h5><p>博客创建好之后，我需要把它整合到项目中，这里我主要是用链接的形式，把博客链接放在了主导航栏上，点击就会跳转到博客，博客导航栏有主页项，点击也可以调回来。方法是这样的：</p><p>通过 url 匹配名称，查找资源位置，代码如下：</p><figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;</span></span></span><span class="template-tag">&#123;% <span class="name"><span class="name">url</span></span> &#x27;blog&#x27; %&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span>博客<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h5 id="十三、博客外观改善"><a href="#十三、博客外观改善" class="headerlink" title="十三、博客外观改善"></a>十三、博客外观改善</h5><ol><li><p>外观改善主要是生成 templates 文件夹，在里面添加一个 archive.html 文件作为文章模板，还有各个 theme.html 文件作为页面主题模板，其中会涉及到一些 Django 模板语言，需要去了解下，感觉用起来爽歪歪。</p></li><li><p>除了模板语言之外，可以直接通过 url 来查找相关的。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Python/Go/其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于浏览器内核及其 CSS 写法</title>
      <link href="/browser-kernel-and-writing/"/>
      <url>/browser-kernel-and-writing/</url>
      
        <content type="html"><![CDATA[<h3 id="一、主流浏览器内核包括哪几种，怎么发展的？"><a href="#一、主流浏览器内核包括哪几种，怎么发展的？" class="headerlink" title="一、主流浏览器内核包括哪几种，怎么发展的？"></a>一、主流浏览器内核包括哪几种，怎么发展的？</h3><p>1、<strong>Trident：</strong> IE浏览器使用的内核，启用于1997年的IE4，一直延用至IE9。很多人叫它IE内核，其实Trident实际上也是开放内核，其接口内核设计的相当成熟，因此才有许多采用IE内核而非IE的浏览器涌现，如Maxthon等。</p><p><strong>基于 Trident 的浏览器有：IE4~IE9,Maxthon</strong></p><p>2、<strong>Geckos：</strong> Netscape6开始采用的内核，后来的FireFox沿用该内核，Gecko的特点是代码公开，它的可开发程度极高，广受青睐。</p><p><strong>基于Gecko的浏览器主要有：FireFox，Redfox，K-Meleon；</strong></p><p>3、<strong>Webkit：</strong> 苹果自己的内核，用于Safari浏览器，也是开放源码的自由软件，在安全方面不受IE,FireFox制约，在国内很安全</p><p><strong>基于 Webkit 的浏览器主要有：Safari,Chrome。</strong></p><p>4、<strong>Presto：</strong> 该内核在2003年的Opera7中首次被使用，该款引擎的特点就是渲染速度的优化达到了极致，也是目前公认网页浏览速度最快的浏览器内核，然而代价是牺牲了网页的兼容性。</p><p><strong>基于 Presto 的浏览器主要是 opera Mini。</strong></p><p>5、还有一类浏览器是基于多种内核的，如 Maxthon3，QQ浏览器，搜狗浏览器等。</p><h3 id="二、不同的浏览器内核，在CSS中该怎么写？"><a href="#二、不同的浏览器内核，在CSS中该怎么写？" class="headerlink" title="二、不同的浏览器内核，在CSS中该怎么写？"></a>二、不同的浏览器内核，在CSS中该怎么写？</h3><p><strong>CSS 中的写法一般是根据不同浏览器的自定义样式加前缀：</strong> 如webkit内核浏览器的-Webkit 、Gecko内核浏览器的 -moz 、Presto内核浏览器的-o以及Trident内核浏览器的-ms。</p>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS与可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TCP/IP三次握手</title>
      <link href="/tcp-ip-three-way-handshake/"/>
      <url>/tcp-ip-three-way-handshake/</url>
      
        <content type="html"><![CDATA[<p>TCP&#x2F;IP 三次握手描述</p><span id="more"></span><ol><li><p>第一次 握手：客户端向服务器端发包，并且不确定服务器端是否收到，同时服务器端确认接受包；</p></li><li><p>第二次握手：服务器端向客户端发包作为回复，并且不确定客户端是否能接收自己发出的包，同时客户端收到包；</p></li><li><p>客户端发包回应服务器端，服务器端确认收到包，两边都确认能接收传递信息，通过快速连接，客户端发出初始信息，开始通信;<br>用简洁易懂的话说就是：</p><pre><code>A：在吗？亲（第一次握手）B：恩，有啥事？（第二次握手）A：我们来聊天吧。（第三次握手）</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> 编程基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机科学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git域名配置</title>
      <link href="/git-domain-config/"/>
      <url>/git-domain-config/</url>
      
        <content type="html"><![CDATA[<p>git 域名配置</p><span id="more"></span><ol><li><p>在 Godaddy 购买的域名；</p></li><li><p>查找 DNSpod 解析域名，没什么难度，就是添加一条记录，保存而已，记得在添加域名到 DNSpod 之后，复制两个 NS 地址到 godaddy 的域名服务器下；</p></li><li><p>Git 项目根目录下创建 CNAME 文件，把域名填进去，push 就行了。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git环境配置</title>
      <link href="/git-environment-config/"/>
      <url>/git-environment-config/</url>
      
        <content type="html"><![CDATA[<p>结合了一些网上的方法，结合自己配置的实际情况写的文档。</p><span id="more"></span><ol><li><p>下载 git 主程序，下载地址：<a href="https://git-scm.com/downloads%EF%BC%8C">https://git-scm.com/downloads，</a> 双击安装包，一路 next 就行；</p></li><li><p>对于技术小白的我来说，命令行神马的太复杂了，所以就需要一个 git 界面画的软件来帮助我啦，这个软件就是 TortoiseGit，下载地址：<a href="https://tortoisegit.org/download/%EF%BC%8C">https://tortoisegit.org/download/，</a> 分为 32 位版和 64 位版，下载时要选好，安装的时候也是一路 next；</p></li><li><p>接下来就是解决怎么把本地项目关联发布到 git 上的问题了；</p></li></ol><p>(1) 首先打开 git 上的项目，复制 git 的 HTTP 地址；</p><p>(2) 然后创打开硬盘里的一个目录，最好是专门开发用的目录，点右键，选择“Git Clone…”，将地址复制进去，点击 OK；<br>(3) 出现 Success 提示，就代表 clone 成功了，close 掉对话框，然后就出现了名为 git 项目的文件夹了；</p><ol start="4"><li>本地改动保存为一个版本，我们以新建文件为例；</li></ol><p>(1) 首先，打开刚才生成文件夹，新建一个名为 readme.txt 的空文件；</p><p>(2) 然后在这里鼠标右击，选择 Git Commit -&gt; “master”…，会弹出一个对话框（注意：这里可能会提醒设置用户名、密码 和邮箱，点击确定，填写 git 账户的用户名和注册邮箱以及密码即可）；</p>]]></content>
      
      
      <categories>
          
          <category> 工程化与运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeJs 配置</title>
      <link href="/nodejs-config/"/>
      <url>/nodejs-config/</url>
      
        <content type="html"><![CDATA[<p>nodeJs 配置</p><span id="more"></span><ol><li><p>下载 node.js 安装包，下载地址： <a href="https://nodejs.org/dist/v4.4.3/node-v4.4.3-x64.msi%EF%BC%8C">https://nodejs.org/dist/v4.4.3/node-v4.4.3-x64.msi，</a> 双击安装包，开始安装，一路 next 就行；</p></li><li><p>检测 PATH 环境变量是否配置了 node.js，进入 cmd 界面，输入 path 命令，结果中环境变量出现了 nodeJS 字眼，说明环境变量配置成功了；</p></li><li><p>运行 node -v 命令，检测 node.js 版本，查看是否安装成功；</p></li><li><p>运行 npm -v 命令，检测 npm 版本，查看是否安装成功；</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 后端 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>碎片化阅读知识系统化方法</title>
      <link href="/systematic-method-for-fragmented-reading-knowledge/"/>
      <url>/systematic-method-for-fragmented-reading-knowledge/</url>
      
        <content type="html"><![CDATA[<h3 id="一、认识"><a href="#一、认识" class="headerlink" title="一、认识"></a>一、认识</h3><p>碎片化阅读分为两个维度，即阅读时间碎片化和阅读内容碎片化。</p><h3 id="二、高效阅读"><a href="#二、高效阅读" class="headerlink" title="二、高效阅读"></a>二、高效阅读</h3><p>指在读完大量书籍之后能记住书中的有效信息，可以讲出读过的书的主要内容，能讲的核心是学会做笔记和整理笔记。</p><h3 id="三、阅读材料分类"><a href="#三、阅读材料分类" class="headerlink" title="三、阅读材料分类"></a>三、阅读材料分类</h3><p>基础的分类：专业精读、兴趣泛读、休闲轻松（阅读材料分级）。</p><h3 id="四、个人阅读时间规划（阅读时间分级）"><a href="#四、个人阅读时间规划（阅读时间分级）" class="headerlink" title="四、个人阅读时间规划（阅读时间分级）"></a>四、个人阅读时间规划（阅读时间分级）</h3><p>大致可以分为：长时段（周末超过2小时的长时段、晚饭后到睡前1-4小时不等的时间）、每日恒定时间（乘坐各种交通工具上下班&#x2F;学的时间，午饭&#x2F;晚饭前、后的半小时，学生的课间）、机动时间（偶然状况空闲）。随机时间的应对策略：随身带书或者阅读器（要求：能做笔记、输出笔记）。</p><h3 id="五、阅读的材料与时间段合理"><a href="#五、阅读的材料与时间段合理" class="headerlink" title="五、阅读的材料与时间段合理"></a>五、阅读的材料与时间段合理</h3><p>配比，比如：长时间段→阅读专业精读书目、每日恒定时间→阅读兴趣泛读书目、机动时间→阅读休闲轻松书目。注意：无论选用哪种时间与书目的配比类型，一周之内都需要一个完整的时间段来完成全部笔记的整理工作，只有这样才能永久性保证阅读质量。</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读书笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>写给大家看的算法书笔记</title>
      <link href="/algorithm-book-notes-for-everyone/"/>
      <url>/algorithm-book-notes-for-everyone/</url>
      
        <content type="html"><![CDATA[<h3 id="一、什么是算法"><a href="#一、什么是算法" class="headerlink" title="一、什么是算法"></a>一、什么是算法</h3><h4 id="1、算法是对特定问题的解决步骤（对信息进行排序、搜索目标信息等）"><a href="#1、算法是对特定问题的解决步骤（对信息进行排序、搜索目标信息等）" class="headerlink" title="1、算法是对特定问题的解决步骤（对信息进行排序、搜索目标信息等）"></a>1、算法是对特定问题的解决步骤（对信息进行排序、搜索目标信息等）</h4><p>算法 → 更优质的算法 → 好的程序；</p><h4 id="2、算法的两个必要条件："><a href="#2、算法的两个必要条件：" class="headerlink" title="2、算法的两个必要条件："></a>2、算法的两个必要条件：</h4><ul><li><p>准确性，证明方法——断言；</p></li><li><p>可停止性（死循环不能看做算法）；</p></li></ul><h4 id="3、几种重要的算法："><a href="#3、几种重要的算法：" class="headerlink" title="3、几种重要的算法："></a>3、几种重要的算法：</h4><p>(1) 数论算法：</p><ul><li><p>求解最大公约数的辗转相除法；</p></li><li><p>求解联立方程的高斯消元法；</p></li><li><p>求解定积分近似值的梯形公式;</p></li><li><p>计算质数的艾拉斯托尼筛法;</p></li></ul><p>(2) 排序算法(按序排列)：</p><ul><li><p>选择排序；</p></li><li><p>冒泡排序；</p></li><li><p>插入排序；</p></li><li><p>希尔排序;</p></li><li><p>归并排序;</p></li><li><p>快速排序；</p></li></ul><p>(3) 搜索算法：（比较求同）</p><ul><li><p>线性搜索；</p></li><li><p>二分搜索；</p></li></ul><p>(4) 字符串匹配算法：</p><ul><li><p>简单字符串搜索；</p></li><li><p>KMP 算法；</p></li><li><p>BM 算法；</p></li></ul><h4 id="4、结构化编程思想"><a href="#4、结构化编程思想" class="headerlink" title="4、结构化编程思想"></a>4、结构化编程思想</h4><p>旨在高效描述程序，最大限度减少设计误差的方法论，其中的处理流程结构组合包括：</p><p>(1) 顺序结构：按顺序处理；</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-9f036b6001ef4e07.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/212/format/webp" alt="图片来源于网络"></p><p>(2) 选择结构：按条件处理；</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-68f37dd7d235e531.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片来源于网络"></p><p>(3) 循环结构：条件成立下，进行定量循环处理；</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-a41112c31c533ab9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片来源于网络"></p><h3 id="二、-变量和数组"><a href="#二、-变量和数组" class="headerlink" title="二、 变量和数组"></a>二、 变量和数组</h3><p>算法由数据和处理构成；</p><p>(1) 基本数据类型：整数、浮点数、字符、布尔值及字符串；</p><p>(2) 描述数据信息的方法是数据值；</p><p>(3) 变量是存放数据值的容器，变量的作用是使处理过程通用化，每个变量只能存放一个数据，变量名是区分不同变量的标记，变量名要能表示所装载的数据； </p><p>(4) 把数据赋值给变量的过程叫代入；</p><p>(5) 数组是用来保存大量同一数据类型值的，数组索引，即数组元素的位置标号，可以利用数组进行关联数据的处理；</p><p>(6) 二维数组，数组元素沿横纵方向排列；</p><h3 id="三、数据结构——高效的管理大量数据的构造"><a href="#三、数据结构——高效的管理大量数据的构造" class="headerlink" title="三、数据结构——高效的管理大量数据的构造"></a>三、数据结构——高效的管理大量数据的构造</h3><p>常用的数据结构：</p><p>(1) <strong>数组</strong>，快速定位第 N 个数据；</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-5279810825a68703.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片来源于手机拍摄"></p><p>(2) <strong>链表</strong>，离散数据排序，快速插入删除数据（插入、删除数据不改变数据位置）。单向链表只能单向检索，元素由数据和“NEXT 指针”构成，HEAD 指针标记链表的第一个元素。双向链表元素由数据，PREV、NEXT 指针构成，可向前向后检索数据，链表为空的状态，HEAD 指针，TAIL 指针分别存储“没有起始元素”、“没有末尾元素”的信息；</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-6113ee58c4fc1e74.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片来源于网络"></p><p>(3) <strong>堆栈</strong>（先进后出），数据操作：入栈 → 写入数据（push）→ 出栈（POP）→ 读取数据。考虑计算机优先级或者计算机管理子程序调用的顺序时用到；</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-21be1fcb8546bd49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片来源于网络"></p><p>(4) <strong>队列</strong>（先进先出），应用在电文发放和接收中；</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-0789fc904f456296.gif?imageMogr2/auto-orient/strip" alt="图片来源于网络"></p><p>(5) <strong>树</strong>，管理父节点数据和子节点数据，二叉树一个父节点对用两个子节点，可以用数组来表示二叉树；</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-a812b66052043bd4.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片来源于手机拍摄"></p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-061f5d3516622b9b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片来源于手机拍摄"></p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-f43abcb33e47957a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片来源于手机拍摄"></p><p>(6) 图，自由的表示各种关系的数据。图的分类：有向图（边有方向性）、加权图（边有权重）；</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-ea65bbf1f9b3b98b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片来源于手机拍摄"></p><h3 id="四、算法基础"><a href="#四、算法基础" class="headerlink" title="四、算法基础"></a>四、算法基础</h3><h4 id="1、-循环处理和控制变量"><a href="#1、-循环处理和控制变量" class="headerlink" title="1、 循环处理和控制变量"></a>1、 循环处理和控制变量</h4><p>(1) 循环处理：利用一个控制变量来管理循环次数，从而进行必要次数的处理；</p><p>(2) 循环处理的步骤：</p><ul><li><p>设置控制变量的初始值；</p></li><li><p>判断循环条件，如果为 true，进行以下 3,4,步，否则为 false，终止处理；</p></li><li><p>执行循环体；</p></li><li><p>改变控制变量，回到步骤 2；</p></li></ul><p>(3) 利用循环处理使处理过程通用化；</p><p>  <strong>案例：</strong></p><p>  计算 1~N 的整数的总和。</p><p>  算法：</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-233c00b2f31f8e76.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p><p>  JavaScript 代码：</p><p>  <img src="https://upload-images.jianshu.io/upload_images/1476489-4ea54b8cba9d8db1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p><h4 id="2、-使用数组可以高效的处理大量数据"><a href="#2、-使用数组可以高效的处理大量数据" class="headerlink" title="2、 使用数组可以高效的处理大量数据"></a>2、 使用数组可以高效的处理大量数据</h4><p>(1) 求斐波那契数列。</p><p>算法：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-b0f7928c9e70b00c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="案例"></p><p>JavaScript 代码：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-aae2fafe110aeb4e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代码"></p><p>(2) 数组求和</p><p>计算一年的营业额。</p><p>算法：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-ca431aa7a661a3fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="算法"></p><p>JavaScript 代码：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-2498e2f8f6979555.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代码"></p><p>(3) 求平均值</p><p>求班级考试的平均分。</p><p>算法：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-a288f74be53c16ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="算法"></p><p>JavaScript 代码：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-a4ea9bb73708cdf4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代码"></p><p>(4) 求数组数据中的最大值</p><p>求最高分。</p><p>算法：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-5934e850b29830b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="算法"></p><p>JavaScript 代码：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-393b1a7d9a9bc418.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代码"></p><p>(5) 求数据中的最小值</p><p>求最低分。</p><p>算法：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-7d3483e3bd32591a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="算法"></p><p>JavaScript 代码：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-a49e301d22d84669.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代码"></p><p>(6) 为数组元素排序</p><p>为考试成绩排名。</p><p>算法：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-2d67aeb495cc806e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="算法"></p><p>JavaScript 代码：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-34838194b6e477e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代码"></p><p>(7) 二维数组操作</p><p>求全班学生不同科目考试合计总分。</p><p>算法：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-bfadc73a743b91f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="算法"></p><p>JavaScript 代码：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-b4681f4285738dc5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代码"></p><p>(8) 求两个数的最大公约数</p><p>辗转相除法</p><p>算法：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-460179a152a07806.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="算法"></p><p>JavaScript 代码：</p><p><img src="https://upload-images.jianshu.io/upload_images/1476489-3fc4fb3e5c8ebb16.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代码"></p><h4 id="2、排序算法"><a href="#2、排序算法" class="headerlink" title="2、排序算法"></a>2、排序算法</h4><p>几种常用的排序算法</p><p>(1) 桶排序: 准备与待排序数据取值范围大小个数的木桶，利用这些木桶对数据进行保存、排序。</p><p>排序过程：</p><ul><li><p>准备好木桶数据，把其所有元素初始化为 0；</p></li><li><p>把保存排序数组（n 个数据）的下标的变量 i 初始化为 0；</p></li><li><p>i 小于 n 时，循环执行 4~5；</p></li><li><p>把 data[i]代入变量 value；</p></li><li><p>bucket[value]加 1；</p></li><li><p>i 加 1；</p></li><li><p>从 bucket 的起始元素开始，把每个数值非 0 的元素的下标按照数值（出现次数）取出来，排成一列。</p></li></ul><p>(2) 选择排序: 遍历数据，把数据中的最大值（或最小值）与起始（或者末尾）数据进行交换。</p><p>排序过程：</p><ul><li><p>从“待排序部分”中找到最小值；</p></li><li><p>把最小值和“待排序部分起始位置的元素”交换；</p></li><li><p>“待排序部分”的起始位置向后移动一位；</p></li><li><p>循环操作 1~3，直至“待排序部分”只剩下一个元素。</p></li></ul><p>(3) 冒泡排序: 对比相邻的两个数据，根据大小关系调整两个数据的顺序。</p><p>(4) 插入排序: 把目标数据按照正确的大小排列顺序插入相应的位置中。</p><p>(5) 归并排序: 把目标数据分割成更小的部分进行排序，更小的部分正确排序之后再合并起来。</p><p>(6) 希尔排序: 把目标数据按照一定的个数分成几个区域进行插入排序。</p><p>(7) 快速排序: 从目标数据中任意选取一个数据，以这个数据的值为分割点，把目标数据分割为两部分。这样循环操作下去进行排序。</p><h4 id="3、搜索算法"><a href="#3、搜索算法" class="headerlink" title="3、搜索算法"></a>3、搜索算法</h4><p>常用的搜索算法：</p><ul><li><p>线性搜索（随机排布的数据列中使用，效率比较低）；</p></li><li><p>二分搜索（已经排好序的数据列中使用，效率较高）；</p></li><li><p>利用哈希表进行搜索（高效搜索）；</p></li><li><p>简单字符串搜索（有长度的数据）；</p></li><li><p>利用 KMP 算法 进行字符串搜索；</p></li><li><p>利用 BM 算法进行字符串搜索。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读书笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于写周报的思考</title>
      <link href="/notes-about-writing-weekly-reports/"/>
      <url>/notes-about-writing-weekly-reports/</url>
      
        <content type="html"><![CDATA[<p>如果你上班了，你们公司会要求你写周报吗？如果你还是学生，你的父母或老师会要求你写周报吗？没人要求，还会自发性的写周报吗？写周报给你带来了什么样的改变？</p><p>我是写周报的，虽然公司也要求写，但更多出于自发性的写，我把他当作 GTD 系统中的一部分，对我而言是 CONTEXT，起承上启下的作用。</p><h2 id="被动写周报与主动写周报的区别"><a href="#被动写周报与主动写周报的区别" class="headerlink" title="被动写周报与主动写周报的区别"></a>被动写周报与主动写周报的区别</h2><p><strong>被动写周报和主动记录反馈本周状态是有区别的</strong>，被动通常受命于人，属于履行任务，追求的是效率，希望尽可能快的完成，而主动写周报通常是自发性的，属于自我反省，追求的是问题的发现-解决-反馈，需要静下心来思考。</p><p><strong>工作周报和个人总结周报也是有区别的</strong>： <strong>内容上</strong>，工作周报只需要记录和工作相关的事情，而个人周报不仅需要总结工作，还需要总结生活、学习。<strong>深度上</strong>，由于工作周报通常是需要提交给部门老大看，因此在剖析问题、总结得失，自我反省上非常不深刻，甚至会出现避重就轻的问题，一份周报常常沦为简单对工作任务的概括和陈述。而个人周报则不容易出现这类问题，就好比面壁自省，谁还会在乎什么话该说还是不该说，都是自个儿的事。</p><h2 id="写周报的方法"><a href="#写周报的方法" class="headerlink" title="写周报的方法"></a>写周报的方法</h2><h3 id="Step-1-回顾"><a href="#Step-1-回顾" class="headerlink" title="Step-1-回顾"></a>Step-1-回顾</h3><ul><li><p>检查计划中关键项目&#x2F;任务的完成进度是否符合预期；</p></li><li><p>反馈各项目&#x2F;任务的执行结果，如：完成情况&#x2F;未达预期的原因&#x2F;失败的原因；</p></li><li><p>统计日程表中各任务的耗时情况是否正常，有没有效率特低或特高的情况，原因写到备注中；</p></li><li><p>回溯上一周面临的问题是否得到解决，解决方案是否有效，并对问题解决的过程进行概括；</p></li></ul><h3 id="Step-2-总结"><a href="#Step-2-总结" class="headerlink" title="Step-2-总结"></a>Step-2-总结</h3><ul><li><p>总结本周面临的新问题，描述问题并概括导致问题出现的原因，准备以何种解决方案应对？</p></li><li><p>对工作、学习、生活（主要是人际关系）三方面进行评估，一方面对重点任务进行陈述性总结，另一方面评估重点任务的完成质量</p></li></ul><h3 id="Step-3-计划"><a href="#Step-3-计划" class="headerlink" title="Step-3-计划"></a>Step-3-计划</h3><ul><li><p>列出能预见到的项目&#x2F;任务，如：阅读书籍&lt;在你身边为你设计&gt;；</p></li><li><p>细化任务，一方面要计划任务量，另一方面要计划时间分配，如：阅读到用研部分（P125 页）完，睡前阅读 30 分钟，周末统一整理笔记</p></li></ul><p>OK，通过这三个步骤，基本上就可以写出一份到位的周报总结了，另外月报的方法也大同小异，可参考着写。</p><p>另外，以前还看到过别人周报中设置的一些关注点，可供大家参考：</p><ul><li><p>黄金时间分布段：目的是把重点任务分配到精力最集中，最不容易受干扰的时间段去做；</p></li><li><p>总结任务的分类，各分类下的任务量，无需脑力的 Brain Dead 任务和需要静下心做的 Deep Time 任务各占了多少时间</p></li><li><p>如果你有建立一个靠谱的理想，你每天花费多少时间在上面？</p></li><li><p>评估你的精力状况，避免因为安排太多任务而透支</p></li></ul><p>一句话就是总结：你这周做了什么？做得怎么样？接下来你准备做什么？怎么去做？</p>]]></content>
      
      
      <categories>
          
          <category> 软技能与思考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 职业发展 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
