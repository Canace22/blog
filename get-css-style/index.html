<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="canace 的博客"><title>获取 DOM Style 的正确姿势 | Canace 的博客</title><link rel="stylesheet" type="text/css" href="../css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="../favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="../favicon.ico"><link rel="apple-touch-icon" href="../apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="../apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="../atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">获取 DOM Style 的正确姿势</h1><a id="logo" href="../.">Canace 的博客</a><p class="description">Tomorrow is another day</p></div><div id="nav-menu"><a class="current" href="../."><i class="fa fa-home"> 主页</i></a><a href="../archives/"><i class="fa fa-archive"> 文章归档</i></a><a href="../about/"><i class="fa fa-user"> 关于我</i></a><a href="../atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">获取 DOM Style 的正确姿势</h1><div class="post-meta">2022-06-22<span> | </span><span class="category"><a href="../categories/web/">Web开发</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 432</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 2</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><p>今天在写一个很简单的 demo 时发现获取 dom.style.width 一直都是空的，打印 dom.style 里面设置的其他属性也都是空的，这就很玄学了。明明设置了几个 css 属性，怎么拿到的全是空呢？先来看看我的 demo:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#status</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: orange;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;status&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">updateProgress</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">style</span>.<span class="property">width</span>)</span><br><span class="line">  <span class="keyword">var</span> width = +div.<span class="property">style</span>.<span class="property">width</span>.<span class="title function_">replace</span>(<span class="string">&#x27;px&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  div.<span class="property">style</span>.<span class="property">width</span> = width + <span class="number">5</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (width &lt; <span class="variable language_">window</span>.<span class="property">innerWidth</span>) &#123;</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(updateProgress);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(updateProgress);</span><br></pre></td></tr></table></figure>

<p>上面的例子，第一次打印的是个空，说明第一次是没有获取到 width 值的，第二次之后能打印到数据，这其中有什么差异呢？demo 中可以看到我的 css 样式写在了 style 标签里面，进了函数之后直接设置为了行内样式，这就是二者的区别。这里引用一下 MDN 的描述</p>
<blockquote>
<p>The HTMLElement.style property is not useful for completely learning about the styles applied on the element, since it represents only the CSS declarations set in the element’s inline style attribute, not those that come from style rules elsewhere, such as style rules in the section, or external style sheets. To get the values of all CSS properties for an element you should use Window.getComputedStyle() instead.</p>
</blockquote>
<p>上面的意思就是 HTMLElement.style 并没有写入我们设置的所有 css 属性，只写入了行内 css 属性，要获取其他地方的属性可以使用 Window.getComputedStyle() 方法，下面来改进一下 demo</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">updateProgress</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(div).<span class="property">width</span>);</span><br><span class="line">  <span class="keyword">var</span> width = +<span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(div).<span class="property">width</span>.<span class="title function_">replace</span>(<span class="string">&#x27;px&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  div.<span class="property">style</span>.<span class="property">width</span> = width + <span class="number">5</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (width &lt; <span class="variable language_">window</span>.<span class="property">innerWidth</span>) &#123;</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(updateProgress);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(updateProgress);</span><br></pre></td></tr></table></figure></div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css"><p><span>本文标题：</span>获取 DOM Style 的正确姿势</p><p><span>文章作者：</span>Canace</p><p><span>发布时间：</span>2022-06-22</p><p><span>最后更新：</span>2025-09-14</p><p><span>原始链接：</span><a href="/get-css-style/">https://canace.site/get-css-style/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://canace.site/get-css-style/"></i></span></p><p><span>版权声明：</span>转载请注明出处</p></div><br><script type="text/javascript" src="../js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="https://canace.site/get-css-style/" data-id="cmg20ashz008vkux0ai9l4yq6" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABv0lEQVR42u3aSY6DMBAF0Nz/0ultWhHwqzwQpOcViiA8syjV4NcrXu+P9fnL9/XRU9/3HD01YeHi4g5z36drhHuOPvr/803i4uLu5B69poerbjIx4OLiPoubJzFJUMPFxX0i9zxI5SUNLi7u73OT4ie5P1mbajVcXNwB7kjQmXW9pL+Li4vb4s4KQMl1UghdvB0XF3cLNw8oSSMjH8bk6QsuLu5+bnI8YqQg6RUwFyEMFxf3Jm4vbFWLqHJAxMXF3c7tHdMcGbEkn+PfNS4u7k3ckSObvfvzNAsXF3cPNyfObXqep0TlmTAuLu4CbnJIKy9jEkrvc+Di4t7LrY5Xk2OXeRpUCHy4uLjLuL0X5yVQNZEqz4RxcXGXcastjGoztJc8XdRquLi4W7hJS6J6Z7XlcbFVXFzcjdwqqFoUjRBxcXHv5Sa4WalPcz6Ci4u7mDtrRJonPUOHPnFxcbdw81Uth5Jnk9lOczO4uLjD3GrwmtUEqaZHuLi4+7nVkcbkI1bBtnFxcZ/CHWmA9komXFzc3+f2kp68ebow7uLi4gbcfDRSHZCMD2txcXH3c8uhpDUIqR77ntDfxcXF7XD/AFawuWjY4EA9AAAAAElFTkSuQmCC">分享</a><div class="tags"><a href="../tags/frontend/"><i class="fa fa-tag"></i>前端</a><a href="../tags/css-visualization/"><i class="fa fa-tag"></i>CSS与可视化</a></div><div class="post-nav"><a class="pre" href="../issue-04/">Vol.04：子非鱼，安知鱼之乐也</a><a class="next" href="../issue-03/">Vol.03：关于职业选择</a></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="../AI-knowledge-base/">我们是否需要AI知识库</a></li><li class="post-list-item"><a class="post-list-link" href="../common-programming-prompt-words/">常用开发提示词整理</a></li><li class="post-list-item"><a class="post-list-link" href="../blog-category/">博客文章分类</a></li><li class="post-list-item"><a class="post-list-link" href="../interview-strategy/">你不是在面试，你是在为职位试镜</a></li><li class="post-list-item"><a class="post-list-link" href="../translate-use-claude-code/">首次尝试95%都是垃圾：一位工程师使用Claude Code的6周之旅</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/soft/">软技能与思考</a><span class="category-list-count">42</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/cli/">工程化与运维</a><span class="category-list-count">50</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/ai/">人工智能</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/web/">Web开发</a><span class="category-list-count">139</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/coding/">编程基础</a><span class="category-list-count">42</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/site/">网站建设</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="../tags/essays/" style="font-size: 15px; color: #b9c2c7">随笔</a> <a href="../tags/performance/" style="font-size: 15px; color: #94adbe">性能优化</a> <a href="../tags/server-side/" style="font-size: 15px; color: #6f99b5">服务端</a> <a href="../tags/Python-Go-%E5%85%B6%E4%BB%96/" style="font-size: 15px; color: #94adbe">Python/Go/其他</a> <a href="../tags/reading-notes/" style="font-size: 15px; color: #ccc">读书笔记</a> <a href="../tags/frontend/" style="font-size: 15px; color: #005b9a">前端</a> <a href="../tags/frameworks-libs/" style="font-size: 15px; color: #5d8eb1">框架与库</a> <a href="../tags/JavaScript-TypeScript/" style="font-size: 15px; color: #13659f">JavaScript&TypeScript</a> <a href="../tags/computer-science/" style="font-size: 15px; color: #387aa8">计算机科学</a> <a href="../tags/programming-languages/" style="font-size: 15px; color: #a7b7c3">编程语言</a> <a href="../tags/css-visualization/" style="font-size: 15px; color: #2570a3">CSS与可视化</a> <a href="../tags/dev-tools/" style="font-size: 15px; color: #4a84ac">开发工具</a> <a href="../tags/system-design/" style="font-size: 15px; color: #a7b7c3">系统</a> <a href="../tags/build-deploy/" style="font-size: 15px; color: #82a3ba">构建与部署</a> <a href="../tags/Node-js/" style="font-size: 15px; color: #94adbe">Node.js</a> <a href="../tags/cross-platform/" style="font-size: 15px; color: #94adbe">跨端方案</a> <a href="../tags/backend/" style="font-size: 15px; color: #b9c2c7">后端</a> <a href="../tags/api-services/" style="font-size: 15px; color: #b9c2c7">API&服务</a> <a href="../tags/code-quality/" style="font-size: 15px; color: #ccc">代码质量</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 常用文档</i></div><ul></ul><a href="/git常用命令" title="Git 文档" target="_blank">Git 文档</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="../." rel="nofollow">Canace 的博客</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="../js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="../js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="../css/search.css?v=0.0.0"><script type="text/javascript" src="../js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="../js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="../js/smartresize.js?v=0.0.0"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":200,"height":200},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body></html>