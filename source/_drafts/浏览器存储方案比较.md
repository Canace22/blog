---
title: 浏览器存储方案比较
categories: web
tags: 浏览器
description: LocalStorage vs. IndexedDB vs. Cookies vs. OPFS vs. WASM-SQLite
author: Canace
comments: true
date: 2024-12-02 15:36:40
---
## 现代浏览器支持的存储API
首先我们来概览一下不同 API 的使用场景和历史：

### Cookies
Cookies 在1994年由 netscape（网景） 首次提出，主要以键值对的形式存储会话管理、个性化配置以及埋点等体积小的数据。Cookies具有多种安全设置属性，例如 time-to-live 或 domain 属性支持不同子域名间共享 cookie。

Cookies 不仅仅是存储在本地，还会在每次发送 http 请求时被传到服务端，这也意味着我们不能往一份 cookie 里存储太多的数据，但是相较于其他方法，Cookies 的性能表现是更好的。由于 Cookies 是 Web 比较基础的功能，许多性能优化方案放到现在来说都是比较先进的，比如 chromium 内核的 Shared Memory Versioning 和 同步 CookieStore API。

### LocalStorage
localStorage API 在 2009 年首次被引入 WebStorage 草案。在浏览器中，LocalStorage 提供了一些简单的 API 用于存储键值对，主要方法包括 setItem, getItem, removeItem 以及 clear，这些基本可以满足我们的键值对存取所需了。LocalStorage 仅适用于存储需要跨会话持久保存的少量数据，存储上限为 5MB，需要注意的是存储复杂的数据结构需要转换成字符串，比如用 JSON.stringify() 方法字符串化一下。该 API 不是异步的，这意味着它在执行操作时会完全阻塞 JavaScript 进程，因此不建议执行大量的 localStorage 操作，因为它会降低 UI 渲染性能。
> 这里提一下 SessionStorage API，它跟 LocalStorage 的区别在于释放时间不一样，当关闭窗口或者浏览器时，存储的数据会被释放掉。

### IndexedDB


参考文献：
[LocalStorage vs. IndexedDB vs. Cookies vs. OPFS vs. WASM-SQLite](https://rxdb.info/articles/localstorage-indexeddb-cookies-opfs-sqlite-wasm.html)