---
title: 文字走马灯实现
categories: web
tags: css
description: 文字走马灯实现方法
comments: true
date: 2022-05-06 09:07:32
---
最近有个需求要实现文字的走马灯，循坏的滚动几段文字。乍一看很简单，记得刚开始学习三剑客的时候就实现过的轮播图，让轮播图自动翻不就是走马灯效果了吗？
我们知道动画属性有个无限使用动画的字段 infinite。要滚动内容,应该是要用到隐藏属性的，当内容滚出界面了就隐藏掉。既然是滚动自然也会伴随着位移，位移用 transform 属性性性能会更好，移动更丝滑。想要文字一段一段的出现，可以利用时间间隔实现，隔一段时间切一下文字。下面来看看 demo

```html
<div class="container">
  <p class="wrap">
    <span class="item"></span>
  </p>
</div>
```

```css
 .container {
    width: 200px;
    overflow: hidden;
    white-space: nowrap;
    background: rgb(0, 0, 0);
    color: rgb(255, 255, 255);
  }

  @keyframes move {
    0% {
      transform: translateX(100%);
    }

    100% {
      transform: translateX(-100%);
    }
  }

  .wrap {
    padding: 0 20px;
    height: 30px;
    line-height: 30px;
    animation: move 5s linear infinite;
  }
```

```js
  var map = ['剩余时长: 05 小时 20 分钟', '包月截止时间：2022 年 05 月 21 日']
  var itemNode = document.querySelector('.item')
  function carousel (el, items,time) {
    var curIndex = -1;
    setInterval(() => {
      curIndex++
      if (curIndex < items.length) {
        el.textContent = items[curIndex]
      } else {
        curIndex = -1;
      }
    }, time||5000);
  }
  carousel(itemNode,map)
```

[预览地址](https://canace22.github.io/toys/carousel/index.html)

从我写的这个 demo 可以看出每隔五秒钟就会切换一下文字，切换文字会重新应用一遍动画效果。另一个需要注意的是给外壳加个隐藏属性，文字在里面跑，超出的部分要隐藏掉。